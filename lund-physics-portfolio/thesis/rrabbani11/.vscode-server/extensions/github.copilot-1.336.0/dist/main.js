"use strict";var dXe=Object.create;var w_=Object.defineProperty;var aAe=Object.getOwnPropertyDescriptor;var fXe=Object.getOwnPropertyNames;var pXe=Object.getPrototypeOf,mXe=Object.prototype.hasOwnProperty;var oAe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),sAe=t=>{throw TypeError(t)};var s=(t,e)=>w_(t,"name",{value:e,configurable:!0});var hXe=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),d1=(t,e)=>{for(var r in e)w_(t,r,{get:e[r],enumerable:!0})},lAe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fXe(e))!mXe.call(t,i)&&i!==r&&w_(t,i,{get:()=>e[i],enumerable:!(n=aAe(e,i))||n.enumerable});return t};var Ve=(t,e,r)=>(r=t!=null?dXe(pXe(t)):{},lAe(e||!t||!t.__esModule?w_(r,"default",{value:t,enumerable:!0}):r,t)),gXe=t=>lAe(w_({},"__esModule",{value:!0}),t),yu=(t,e,r,n)=>{for(var i=n>1?void 0:n?aAe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&w_(e,r,i),i},$s=(t,e)=>(r,n)=>e(r,n,t);var XJ=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&sAe("Object expected");var n,i;r&&(n=e[oAe("asyncDispose")]),n===void 0&&(n=e[oAe("dispose")],r&&(i=n)),typeof n!="function"&&sAe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},ZJ=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(r)throw e};return o()};var importMetaUrlShim,f=hXe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var uAe=G(eX=>{f();var cAe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");eX.encode=function(t){if(0<=t&&t<cAe.length)return cAe[t];throw new TypeError("Must be between 0 and 63: "+t)};eX.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var nX=G(rX=>{f();var dAe=uAe(),tX=5,fAe=1<<tX,pAe=fAe-1,mAe=fAe;function AXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(AXe,"toVLQSigned");function yXe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(yXe,"fromVLQSigned");rX.encode=s(function(e){var r="",n,i=AXe(e);do n=i&pAe,i>>>=tX,i>0&&(n|=mAe),r+=dAe.encode(n);while(i>0);return r},"base64VLQ_encode");rX.decode=s(function(e,r,n){var i=e.length,o=0,a=0,l,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=dAe.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));l=!!(c&mAe),c&=pAe,o=o+(c<<a),a+=tX}while(l);n.value=yXe(o),n.rest=r},"base64VLQ_decode")});var R_=G(Nc=>{f();function CXe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(CXe,"getArg");Nc.getArg=CXe;var hAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,xXe=/^data:.+\,.+$/;function cB(t){var e=t.match(hAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(cB,"urlParse");Nc.urlParse=cB;function __(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(__,"urlGenerate");Nc.urlGenerate=__;function iX(t){var e=t,r=cB(t);if(r){if(!r.path)return t;e=r.path}for(var n=Nc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,__(r)):e}s(iX,"normalize");Nc.normalize=iX;function gAe(t,e){t===""&&(t="."),e===""&&(e=".");var r=cB(e),n=cB(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),__(r);if(r||e.match(xXe))return e;if(n&&!n.host&&!n.path)return n.host=e,__(n);var i=e.charAt(0)==="/"?e:iX(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,__(n)):i}s(gAe,"join");Nc.join=gAe;Nc.isAbsolute=function(t){return t.charAt(0)==="/"||hAe.test(t)};function vXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(vXe,"relative");Nc.relative=vXe;var AAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function yAe(t){return t}s(yAe,"identity");function bXe(t){return CAe(t)?"$"+t:t}s(bXe,"toSetString");Nc.toSetString=AAe?yAe:bXe;function EXe(t){return CAe(t)?t.slice(1):t}s(EXe,"fromSetString");Nc.fromSetString=AAe?yAe:EXe;function CAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(CAe,"isProtoString");function IXe(t,e,r){var n=S_(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:S_(t.name,e.name)}s(IXe,"compareByOriginalPositions");Nc.compareByOriginalPositions=IXe;function TXe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=S_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:S_(t.name,e.name)}s(TXe,"compareByGeneratedPositionsDeflated");Nc.compareByGeneratedPositionsDeflated=TXe;function S_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(S_,"strcmp");function wXe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=S_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:S_(t.name,e.name)}s(wXe,"compareByGeneratedPositionsInflated");Nc.compareByGeneratedPositionsInflated=wXe;function _Xe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(_Xe,"parseSourceMapInput");Nc.parseSourceMapInput=_Xe;function SXe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=cB(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=gAe(__(n),e)}return iX(e)}s(SXe,"computeSourceURL");Nc.computeSourceURL=SXe});var aX=G(xAe=>{f();var oX=R_(),sX=Object.prototype.hasOwnProperty,ZE=typeof Map<"u";function f1(){this._array=[],this._set=ZE?new Map:Object.create(null)}s(f1,"ArraySet");f1.fromArray=s(function(e,r){for(var n=new f1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");f1.prototype.size=s(function(){return ZE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");f1.prototype.add=s(function(e,r){var n=ZE?e:oX.toSetString(e),i=ZE?this.has(e):sX.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(ZE?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");f1.prototype.has=s(function(e){if(ZE)return this._set.has(e);var r=oX.toSetString(e);return sX.call(this._set,r)},"ArraySet_has");f1.prototype.indexOf=s(function(e){if(ZE){var r=this._set.get(e);if(r>=0)return r}else{var n=oX.toSetString(e);if(sX.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");f1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");f1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");xAe.ArraySet=f1});var EAe=G(bAe=>{f();var vAe=R_();function RXe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||vAe.compareByGeneratedPositionsInflated(t,e)<=0}s(RXe,"generatedPositionAfter");function U7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(U7,"MappingList");U7.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");U7.prototype.add=s(function(e){RXe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");U7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(vAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");bAe.MappingList=U7});var lX=G(IAe=>{f();var uB=nX(),Wa=R_(),q7=aX().ArraySet,kXe=EAe().MappingList;function Cf(t){t||(t={}),this._file=Wa.getArg(t,"file",null),this._sourceRoot=Wa.getArg(t,"sourceRoot",null),this._skipValidation=Wa.getArg(t,"skipValidation",!1),this._sources=new q7,this._names=new q7,this._mappings=new kXe,this._sourcesContents=null}s(Cf,"SourceMapGenerator");Cf.prototype._version=3;Cf.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Cf({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Wa.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Wa.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Cf.prototype.addMapping=s(function(e){var r=Wa.getArg(e,"generated"),n=Wa.getArg(e,"original",null),i=Wa.getArg(e,"source",null),o=Wa.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Cf.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Wa.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Wa.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Wa.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Cf.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Wa.relative(o,i));var a=new q7,l=new q7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=Wa.join(n,c.source)),o!=null&&(c.source=Wa.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=Wa.join(n,c)),o!=null&&(c=Wa.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");Cf.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Cf.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(h>0){if(!Wa.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=uB.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=uB.encode(p-a),a=p,c+=uB.encode(u.originalLine-1-i),i=u.originalLine-1,c+=uB.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=uB.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");Cf.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Wa.relative(r,n));var i=Wa.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Cf.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Cf.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");IAe.SourceMapGenerator=Cf});var TAe=G(eI=>{f();eI.GREATEST_LOWER_BOUND=1;eI.LEAST_UPPER_BOUND=2;function cX(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,l=i(r,n[a],!0);return l===0?a:l>0?e-a>1?cX(a,e,r,n,i,o):o==eI.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?cX(t,a,r,n,i,o):o==eI.LEAST_UPPER_BOUND?a:t<0?-1:t}s(cX,"recursiveSearch");eI.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=cX(-1,r.length,e,r,n,i||eI.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var _Ae=G(wAe=>{f();function uX(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(uX,"swap");function BXe(t,e){return Math.round(t+Math.random()*(e-t))}s(BXe,"randomIntInRange");function dX(t,e,r,n){if(r<n){var i=BXe(r,n),o=r-1;uX(t,i,n);for(var a=t[n],l=r;l<n;l++)e(t[l],a)<=0&&(o+=1,uX(t,o,l));uX(t,o+1,l);var c=o+1;dX(t,e,r,c-1),dX(t,e,c+1,n)}}s(dX,"doQuickSort");wAe.quickSort=function(t,e){dX(t,e,0,t.length-1)}});var RAe=G(W7=>{f();var wr=R_(),fX=TAe(),k_=aX().ArraySet,DXe=nX(),dB=_Ae().quickSort;function as(t,e){var r=t;return typeof t=="string"&&(r=wr.parseSourceMapInput(t)),r.sections!=null?new em(r,e):new ac(r,e)}s(as,"SourceMapConsumer");as.fromSourceMap=function(t,e){return ac.fromSourceMap(t,e)};as.prototype._version=3;as.prototype.__generatedMappings=null;Object.defineProperty(as.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});as.prototype.__originalMappings=null;Object.defineProperty(as.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});as.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");as.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");as.GENERATED_ORDER=1;as.ORIGINAL_ORDER=2;as.GREATEST_LOWER_BOUND=1;as.LEAST_UPPER_BOUND=2;as.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||as.GENERATED_ORDER,a;switch(o){case as.GENERATED_ORDER:a=this._generatedMappings;break;case as.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=wr.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");as.prototype.allGeneratedPositionsFor=s(function(e){var r=wr.getArg(e,"line"),n={source:wr.getArg(e,"source"),originalLine:r,originalColumn:wr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,fX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==c;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");W7.SourceMapConsumer=as;function ac(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sources"),o=wr.getArg(r,"names",[]),a=wr.getArg(r,"sourceRoot",null),l=wr.getArg(r,"sourcesContent",null),c=wr.getArg(r,"mappings"),u=wr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=wr.normalize(a)),i=i.map(String).map(wr.normalize).map(function(d){return a&&wr.isAbsolute(a)&&wr.isAbsolute(d)?wr.relative(a,d):d}),this._names=k_.fromArray(o.map(String),!0),this._sources=k_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return wr.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(ac,"BasicSourceMapConsumer");ac.prototype=Object.create(as.prototype);ac.prototype.consumer=as;ac.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=wr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};ac.fromSourceMap=s(function(e,r){var n=Object.create(ac.prototype),i=n._names=k_.fromArray(e._names.toArray(),!0),o=n._sources=k_.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return wr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),l=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new SAe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return dB(n.__originalMappings,wr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");ac.prototype._version=3;Object.defineProperty(ac.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function SAe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(SAe,"Mapping");ac.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")n++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new SAe,y.generatedLine=n,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)DXe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}dB(g,wr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,dB(h,wr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");ac.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return fX.search(e,r,o,a)},"SourceMapConsumer_findMapping");ac.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");ac.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",wr.compareByGeneratedPositionsDeflated,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=wr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=wr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=wr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:wr.getArg(i,"originalLine",null),column:wr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");ac.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");ac.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=wr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=wr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");ac.prototype.generatedPositionFor=s(function(e){var r=wr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:wr.getArg(e,"line"),originalColumn:wr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:wr.getArg(o,"generatedLine",null),column:wr.getArg(o,"generatedColumn",null),lastColumn:wr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");W7.BasicSourceMapConsumer=ac;function em(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new k_,this._names=new k_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=wr.getArg(a,"offset"),c=wr.getArg(l,"line"),u=wr.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new as(wr.getArg(a,"map"),e)}})}s(em,"IndexedSourceMapConsumer");em.prototype=Object.create(as.prototype);em.prototype.constructor=as;em.prototype._version=3;Object.defineProperty(em.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});em.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=fX.search(r,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");em.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");em.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");em.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(wr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");em.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=wr.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}dB(this.__generatedMappings,wr.compareByGeneratedPositionsDeflated),dB(this.__originalMappings,wr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");W7.IndexedSourceMapConsumer=em});var BAe=G(kAe=>{f();var PXe=lX().SourceMapGenerator,G7=R_(),NXe=/(\r?\n)/,LXe=10,B_="$$$isSourceNode$$$";function t0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[B_]=!0,n!=null&&this.add(n)}s(t0,"SourceNode");t0.fromStringWithSourceMap=s(function(e,r,n){var i=new t0,o=e.split(NXe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return r.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=G7.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?G7.join(n,m.source):m.source;i.add(new t0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");t0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[B_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");t0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[B_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");t0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[B_]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");t0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");t0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[B_]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");t0.prototype.setSourceContent=s(function(e,r){this.sourceContents[G7.toSetString(e)]=r},"SourceNode_setSourceContent");t0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][B_]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(G7.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");t0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");t0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new PXe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){r.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===LXe?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(u,d){n.setSourceContent(u,d)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");kAe.SourceNode=t0});var DAe=G(H7=>{f();H7.SourceMapGenerator=lX().SourceMapGenerator;H7.SourceMapConsumer=RAe().SourceMapConsumer;H7.SourceNode=BAe().SourceNode});var NAe=G((O$t,PAe)=>{f();var FXe=Object.prototype.toString,pX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function MXe(t){return FXe.call(t).slice(8,-1)==="ArrayBuffer"}s(MXe,"isArrayBuffer");function QXe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return pX?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(QXe,"fromArrayBuffer");function OXe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return pX?Buffer.from(t,e):new Buffer(t,e)}s(OXe,"fromString");function UXe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return MXe(t)?QXe(t,e,r):typeof t=="string"?OXe(t,e):pX?Buffer.from(t):new Buffer(t)}s(UXe,"bufferFrom");PAe.exports=UXe});var WAe=G((rI,AX)=>{f();var qXe=DAe().SourceMapConsumer,mX=require("path"),Zh;try{Zh=require("fs"),(!Zh.existsSync||!Zh.readFileSync)&&(Zh=null)}catch{}var WXe=NAe();function LAe(t,e){return t.require(e)}s(LAe,"dynamicRequire");var FAe=!1,MAe=!1,hX=!1,fB="auto",tI={},pB={},GXe=/^data:application\/json[^,]+base64,/,yx=[],Cx=[];function yX(){return fB==="browser"?!0:fB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(yX,"isInBrowser");function HXe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(HXe,"hasGlobalProcessEventEmitter");function jXe(){return typeof process=="object"&&process!==null?process.version:""}s(jXe,"globalProcessVersion");function VXe(){if(typeof process=="object"&&process!==null)return process.stderr}s(VXe,"globalProcessStderr");function $Xe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s($Xe,"globalProcessExit");function j7(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(j7,"handlerExec");var CX=j7(yx);yx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in tI)return tI[t];var e="";try{if(Zh)Zh.existsSync(t)&&(e=Zh.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return tI[t]=e});function gX(t,e){if(!t)return e;var r=mX.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+mX.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+mX.resolve(r.slice(i.length),e)}s(gX,"supportRelativeURL");function zXe(t){var e;if(yX())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=CX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(zXe,"retrieveSourceMapURL");var xX=j7(Cx);Cx.push(function(t){var e=zXe(t);if(!e)return null;var r;if(GXe.test(e)){var n=e.slice(e.indexOf(",")+1);r=WXe(n,"base64").toString(),e=t}else e=gX(t,e),r=CX(e);return r?{url:e,map:r}:null});function vX(t){var e=pB[t.source];if(!e){var r=xX(t.source);r?(e=pB[t.source]={url:r.url,map:new qXe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=gX(e.url,i);tI[l]=a}})):e=pB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=gX(e.url,n.source),n}return t}s(vX,"mapSourcePosition");function OAe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=vX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+OAe(e[2])+")":t}s(OAe,"mapEvalOrigin");function YXe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(YXe,"CallSiteToString");function QAe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=YXe,e}s(QAe,"cloneCallSite");function UAe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(jXe())?0:62;n===1&&i>a&&!yX()&&!t.isEval()&&(i-=a);var l=vX({source:r,line:n,column:i});e.curPosition=l,t=QAe(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=OAe(u),t=QAe(t),t.getEvalOrigin=function(){return u}),t}s(UAe,"wrapCallSite");function KXe(t,e){hX&&(tI={},pB={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+UAe(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(KXe,"prepareStackTrace");function qAe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=tI[r];if(!o&&Zh&&Zh.existsSync(r))try{o=Zh.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(qAe,"getErrorSource");function JXe(t){var e=qAe(t),r=VXe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),$Xe(1)}s(JXe,"printErrorAndExit");function XXe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return JXe(arguments[1])}return t.apply(this,arguments)}}s(XXe,"shimEmitUncaughtException");var ZXe=yx.slice(0),eZe=Cx.slice(0);rI.wrapCallSite=UAe;rI.getErrorSource=qAe;rI.mapSourcePosition=vX;rI.retrieveSourceMap=xX;rI.install=function(t){if(t=t||{},t.environment&&(fB=t.environment,["node","browser","auto"].indexOf(fB)===-1))throw new Error("environment "+fB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(yx.length=0),yx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Cx.length=0),Cx.unshift(t.retrieveSourceMap)),t.hookRequire&&!yX()){var e=LAe(AX,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return tI[a]=o,pB[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(hX||(hX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),FAe||(FAe=!0,Error.prepareStackTrace=KXe),!MAe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=LAe(AX,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&HXe()&&(MAe=!0,XXe())}};rI.resetRetrieveHandlers=function(){yx.length=0,Cx.length=0,yx=ZXe.slice(0),Cx=eZe.slice(0),xX=j7(Cx),CX=j7(yx)}});var Di=G(($7,HAe)=>{f();(function(t,e){typeof $7=="object"?HAe.exports=$7=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})($7,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=r?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,B=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<B;N++){var W=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=W<<24-(k+N)%4*8}else for(var ee=0;ee<B;ee+=4)E[k+ee>>>2]=_[ee>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,B=_.sigBytes,N=this.blockSize,W=N*4,ee=B/W;b?ee=e.ceil(ee):ee=e.max((ee|0)-this._minBufferSize,0);var me=ee*N,ae=e.min(me*4,B);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=ae}return new u.init(E,ae)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var yB=G((z7,jAe)=>{f();(function(t,e){typeof z7=="object"?jAe.exports=z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(z7,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var $Ae=G((Y7,VAe)=>{f();(function(t,e){typeof Y7=="object"?VAe.exports=Y7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Y7,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var YAe=G((K7,zAe)=>{f();(function(t,e){typeof K7=="object"?zAe.exports=K7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(K7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return n.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return n.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var vx=G((J7,KAe)=>{f();(function(t,e){typeof J7=="object"?KAe.exports=J7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(J7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var XAe=G((X7,JAe)=>{f();(function(t,e){typeof X7=="object"?JAe.exports=X7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(X7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var bx=G((Z7,ZAe)=>{f();(function(t,e){typeof Z7=="object"?ZAe.exports=Z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Z7,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],B=h[g+2],N=h[g+3],W=h[g+4],ee=h[g+5],me=h[g+6],ae=h[g+7],H=h[g+8],O=h[g+9],le=h[g+10],ie=h[g+11],j=h[g+12],q=h[g+13],Y=h[g+14],te=h[g+15],pe=E[0],re=E[1],fe=E[2],he=E[3];pe=u(pe,re,fe,he,_,7,l[0]),he=u(he,pe,re,fe,k,12,l[1]),fe=u(fe,he,pe,re,B,17,l[2]),re=u(re,fe,he,pe,N,22,l[3]),pe=u(pe,re,fe,he,W,7,l[4]),he=u(he,pe,re,fe,ee,12,l[5]),fe=u(fe,he,pe,re,me,17,l[6]),re=u(re,fe,he,pe,ae,22,l[7]),pe=u(pe,re,fe,he,H,7,l[8]),he=u(he,pe,re,fe,O,12,l[9]),fe=u(fe,he,pe,re,le,17,l[10]),re=u(re,fe,he,pe,ie,22,l[11]),pe=u(pe,re,fe,he,j,7,l[12]),he=u(he,pe,re,fe,q,12,l[13]),fe=u(fe,he,pe,re,Y,17,l[14]),re=u(re,fe,he,pe,te,22,l[15]),pe=d(pe,re,fe,he,k,5,l[16]),he=d(he,pe,re,fe,me,9,l[17]),fe=d(fe,he,pe,re,ie,14,l[18]),re=d(re,fe,he,pe,_,20,l[19]),pe=d(pe,re,fe,he,ee,5,l[20]),he=d(he,pe,re,fe,le,9,l[21]),fe=d(fe,he,pe,re,te,14,l[22]),re=d(re,fe,he,pe,W,20,l[23]),pe=d(pe,re,fe,he,O,5,l[24]),he=d(he,pe,re,fe,Y,9,l[25]),fe=d(fe,he,pe,re,N,14,l[26]),re=d(re,fe,he,pe,H,20,l[27]),pe=d(pe,re,fe,he,q,5,l[28]),he=d(he,pe,re,fe,B,9,l[29]),fe=d(fe,he,pe,re,ae,14,l[30]),re=d(re,fe,he,pe,j,20,l[31]),pe=p(pe,re,fe,he,ee,4,l[32]),he=p(he,pe,re,fe,H,11,l[33]),fe=p(fe,he,pe,re,ie,16,l[34]),re=p(re,fe,he,pe,Y,23,l[35]),pe=p(pe,re,fe,he,k,4,l[36]),he=p(he,pe,re,fe,W,11,l[37]),fe=p(fe,he,pe,re,ae,16,l[38]),re=p(re,fe,he,pe,le,23,l[39]),pe=p(pe,re,fe,he,q,4,l[40]),he=p(he,pe,re,fe,_,11,l[41]),fe=p(fe,he,pe,re,N,16,l[42]),re=p(re,fe,he,pe,me,23,l[43]),pe=p(pe,re,fe,he,O,4,l[44]),he=p(he,pe,re,fe,j,11,l[45]),fe=p(fe,he,pe,re,te,16,l[46]),re=p(re,fe,he,pe,B,23,l[47]),pe=m(pe,re,fe,he,_,6,l[48]),he=m(he,pe,re,fe,ae,10,l[49]),fe=m(fe,he,pe,re,Y,15,l[50]),re=m(re,fe,he,pe,ee,21,l[51]),pe=m(pe,re,fe,he,j,6,l[52]),he=m(he,pe,re,fe,N,10,l[53]),fe=m(fe,he,pe,re,le,15,l[54]),re=m(re,fe,he,pe,k,21,l[55]),pe=m(pe,re,fe,he,H,6,l[56]),he=m(he,pe,re,fe,te,10,l[57]),fe=m(fe,he,pe,re,me,15,l[58]),re=m(re,fe,he,pe,q,21,l[59]),pe=m(pe,re,fe,he,W,6,l[60]),he=m(he,pe,re,fe,ie,10,l[61]),fe=m(fe,he,pe,re,B,15,l[62]),re=m(re,fe,he,pe,O,21,l[63]),E[0]=E[0]+pe|0,E[1]=E[1]+re|0,E[2]=E[2]+fe|0,E[3]=E[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,B=0;B<4;B++){var N=k[B];k[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),r.MD5=o._createHelper(c),r.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var bX=G((eL,e1e)=>{f();(function(t,e){typeof eL=="object"?e1e.exports=eL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(eL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var rL=G((tL,t1e)=>{f();(function(t,e){typeof tL=="object"?t1e.exports=tL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],B=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var W=u[N-15],ee=(W<<25|W>>>7)^(W<<14|W>>>18)^W>>>3,me=u[N-2],ae=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=ee+u[N-7]+ae+u[N-16]}var H=E&_^~E&k,O=g&y^g&v^y&v,le=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),j=B+ie+H+c[N]+u[N],q=le+O;B=k,k=_,_=E,E=b+j|0,b=v,v=y,y=g,g=j+q|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(d),r.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var n1e=G((nL,r1e)=>{f();(function(t,e,r){typeof nL=="object"?r1e.exports=nL=e(Di(),rL()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(nL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var EX=G((iL,i1e)=>{f();(function(t,e,r){typeof iL=="object"?i1e.exports=iL=e(Di(),yB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(iL,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],B=g[6],N=g[7],W=y.high,ee=y.low,me=v.high,ae=v.low,H=b.high,O=b.low,le=E.high,ie=E.low,j=_.high,q=_.low,Y=k.high,te=k.low,pe=B.high,re=B.low,fe=N.high,he=N.low,Ne=W,Re=ee,Je=me,Me=ae,pt=H,Tt=O,Ct=le,bt=ie,ce=j,Oe=q,ye=Y,tt=te,X=pe,ne=re,We=fe,Pe=he,be=0;be<80;be++){var ze,it,gt=d[be];if(be<16)it=gt.high=m[h+be*2]|0,ze=gt.low=m[h+be*2+1]|0;else{var Ot=d[be-15],lr=Ot.high,Lt=Ot.low,Gr=(lr>>>1|Lt<<31)^(lr>>>8|Lt<<24)^lr>>>7,zr=(Lt>>>1|lr<<31)^(Lt>>>8|lr<<24)^(Lt>>>7|lr<<25),mn=d[be-2],Ae=mn.high,Ge=mn.low,ut=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,yt=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,Ar=Xt.low,xr=d[be-16],jt=xr.high,rr=xr.low;ze=zr+Ar,it=Gr+Gt+(ze>>>0<zr>>>0?1:0),ze=ze+yt,it=it+ut+(ze>>>0<yt>>>0?1:0),ze=ze+rr,it=it+jt+(ze>>>0<rr>>>0?1:0),gt.high=it,gt.low=ze}var Jt=ce&ye^~ce&X,Ir=Oe&tt^~Oe&ne,Nr=Ne&Je^Ne&pt^Je&pt,Yr=Re&Me^Re&Tt^Me&Tt,Wn=(Ne>>>28|Re<<4)^(Ne<<30|Re>>>2)^(Ne<<25|Re>>>7),Jn=(Re>>>28|Ne<<4)^(Re<<30|Ne>>>2)^(Re<<25|Ne>>>7),Qn=(ce>>>14|Oe<<18)^(ce>>>18|Oe<<14)^(ce<<23|Oe>>>9),$n=(Oe>>>14|ce<<18)^(Oe>>>18|ce<<14)^(Oe<<23|ce>>>9),rn=u[be],zn=rn.high,_e=rn.low,U=Pe+$n,ge=We+Qn+(U>>>0<Pe>>>0?1:0),U=U+Ir,ge=ge+Jt+(U>>>0<Ir>>>0?1:0),U=U+_e,ge=ge+zn+(U>>>0<_e>>>0?1:0),U=U+ze,ge=ge+it+(U>>>0<ze>>>0?1:0),ve=Jn+Yr,Z=Wn+Nr+(ve>>>0<Jn>>>0?1:0);We=X,Pe=ne,X=ye,ne=tt,ye=ce,tt=Oe,Oe=bt+U|0,ce=Ct+ge+(Oe>>>0<bt>>>0?1:0)|0,Ct=pt,bt=Tt,pt=Je,Tt=Me,Je=Ne,Me=Re,Re=U+ve|0,Ne=ge+Z+(Re>>>0<U>>>0?1:0)|0}ee=y.low=ee+Re,y.high=W+Ne+(ee>>>0<Re>>>0?1:0),ae=v.low=ae+Me,v.high=me+Je+(ae>>>0<Me>>>0?1:0),O=b.low=O+Tt,b.high=H+pt+(O>>>0<Tt>>>0?1:0),ie=E.low=ie+bt,E.high=le+Ct+(ie>>>0<bt>>>0?1:0),q=_.low=q+Oe,_.high=j+ce+(q>>>0<Oe>>>0?1:0),te=k.low=te+tt,k.high=Y+ye+(te>>>0<tt>>>0?1:0),re=B.low=re+ne,B.high=pe+X+(re>>>0<ne>>>0?1:0),he=N.low=he+Pe,N.high=fe+We+(he>>>0<Pe>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var s1e=G((oL,o1e)=>{f();(function(t,e,r){typeof oL=="object"?o1e.exports=oL=e(Di(),yB(),EX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(oL,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var l1e=G((sL,a1e)=>{f();(function(t,e,r){typeof sL=="object"?a1e.exports=sL=e(Di(),yB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(sL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,l=a.Word,c=r.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var B=0,N=0,W=0;W<7;W++){if(_&1){var ee=(1<<W)-1;ee<32?N^=1<<ee:B^=1<<ee-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(B,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var B=v[E];B.high^=k,B.low^=_}for(var N=0;N<24;N++){for(var W=0;W<5;W++){for(var ee=0,me=0,ae=0;ae<5;ae++){var B=v[W+5*ae];ee^=B.high,me^=B.low}var H=m[W];H.high=ee,H.low=me}for(var W=0;W<5;W++)for(var O=m[(W+4)%5],le=m[(W+1)%5],ie=le.high,j=le.low,ee=O.high^(ie<<1|j>>>31),me=O.low^(j<<1|ie>>>31),ae=0;ae<5;ae++){var B=v[W+5*ae];B.high^=ee,B.low^=me}for(var q=1;q<25;q++){var ee,me,B=v[q],Y=B.high,te=B.low,pe=u[q];pe<32?(ee=Y<<pe|te>>>32-pe,me=te<<pe|Y>>>32-pe):(ee=te<<pe-32|Y>>>64-pe,me=Y<<pe-32|te>>>64-pe);var re=m[d[q]];re.high=ee,re.low=me}var fe=m[0],he=v[0];fe.high=he.high,fe.low=he.low;for(var W=0;W<5;W++)for(var ae=0;ae<5;ae++){var q=W+5*ae,B=v[q],Ne=m[q],Re=m[(W+1)%5+5*ae],Je=m[(W+2)%5+5*ae];B.high=Ne.high^~Re.high&Je.high,B.low=Ne.low^~Re.low&Je.low}var B=v[0],Me=p[N];B.high^=Me.high,B.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,B=k/8,N=[],W=0;W<B;W++){var ee=_[W],me=ee.high,ae=ee.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,ae=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,N.push(ae),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var u1e=G((aL,c1e)=>{f();(function(t,e){typeof aL=="object"?c1e.exports=aL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,B){for(var N=0;N<16;N++){var W=B+N,ee=k[W];k[W]=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360}var me=this._hash.words,ae=p.words,H=m.words,O=l.words,le=c.words,ie=u.words,j=d.words,q,Y,te,pe,re,fe,he,Ne,Re,Je;fe=q=me[0],he=Y=me[1],Ne=te=me[2],Re=pe=me[3],Je=re=me[4];for(var Me,N=0;N<80;N+=1)Me=q+k[B+O[N]]|0,N<16?Me+=g(Y,te,pe)+ae[0]:N<32?Me+=y(Y,te,pe)+ae[1]:N<48?Me+=v(Y,te,pe)+ae[2]:N<64?Me+=b(Y,te,pe)+ae[3]:Me+=E(Y,te,pe)+ae[4],Me=Me|0,Me=_(Me,ie[N]),Me=Me+re|0,q=re,re=pe,pe=_(te,10),te=Y,Y=Me,Me=fe+k[B+le[N]]|0,N<16?Me+=E(he,Ne,Re)+H[0]:N<32?Me+=b(he,Ne,Re)+H[1]:N<48?Me+=v(he,Ne,Re)+H[2]:N<64?Me+=y(he,Ne,Re)+H[3]:Me+=g(he,Ne,Re)+H[4],Me=Me|0,Me=_(Me,j[N]),Me=Me+Je|0,fe=Je,Je=Re,Re=_(Ne,10),Ne=he,he=Me;Me=me[1]+te+Re|0,me[1]=me[2]+pe+Je|0,me[2]=me[3]+re+fe|0,me[3]=me[4]+q+he|0,me[4]=me[0]+Y+Ne|0,me[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,B=k.words,N=this._nDataBytes*8,W=k.sigBytes*8;B[W>>>5]|=128<<24-W%32,B[(W+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var ee=this._hash,me=ee.words,ae=0;ae<5;ae++){var H=me[ae];me[ae]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return ee},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,B,N){return k^B^N}s(g,"f1");function y(k,B,N){return k&B|~k&N}s(y,"f2");function v(k,B,N){return(k|~B)^N}s(v,"f3");function b(k,B,N){return k&N|B&~N}s(b,"f4");function E(k,B,N){return k^(B|~N)}s(E,"f5");function _(k,B){return k<<B|k>>>32-B}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var cL=G((lL,d1e)=>{f();(function(t,e){typeof lL=="object"?d1e.exports=lL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(lL,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=n.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var p1e=G((uL,f1e)=>{f();(function(t,e,r){typeof uL=="object"?f1e.exports=uL=e(Di(),rL(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(uL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,B=k.length,N=_,W=1;W<E;W++){N=m.finalize(N),m.reset();for(var ee=N.words,me=0;me<B;me++)k[me]^=ee[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var p1=G((dL,m1e)=>{f();(function(t,e,r){typeof dL=="object"?m1e.exports=dL=e(Di(),bX(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(dL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var dl=G((fL,h1e)=>{f();(function(t,e,r){typeof fL=="object"?h1e.exports=fL=e(Di(),p1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(fL,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,l=r.enc,c=l.Utf8,u=l.Base64,d=r.algo,p=d.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,O){return this.create(this._ENC_XFORM_MODE,H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.create(this._DEC_XFORM_MODE,H,O)},"createDecryptor"),init:s(function(H,O,le){this.cfg=this.cfg.extend(le),this._xformMode=H,this._key=O,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var O=this._doFinalize();return O},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(O){return typeof O=="string"?ae:W}return s(H,"selectCipherStrategy"),function(O){return{encrypt:s(function(le,ie,j){return H(ie).encrypt(O,le,ie,j)},"encrypt"),decrypt:s(function(le,ie,j){return H(ie).decrypt(O,le,ie,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(H,O){return this.Encryptor.create(H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.Decryptor.create(H,O)},"createDecryptor"),init:s(function(H,O){this._cipher=H,this._iv=O},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,q=j.blockSize;O.call(this,le,ie,q),j.encryptBlock(le,ie),this._prevBlock=le.slice(ie,ie+q)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,q=j.blockSize,Y=le.slice(ie,ie+q);j.decryptBlock(le,ie),O.call(this,le,ie,q),this._prevBlock=Y},"processBlock")});function O(le,ie,j){var q,Y=this._iv;Y?(q=Y,this._iv=e):q=this._prevBlock;for(var te=0;te<j;te++)le[ie+te]^=q[te]}return s(O,"xorBlock"),H}(),b=r.pad={},E=b.Pkcs7={pad:s(function(H,O){for(var le=O*4,ie=le-H.sigBytes%le,j=ie<<24|ie<<16|ie<<8|ie,q=[],Y=0;Y<ie;Y+=4)q.push(j);var te=o.create(q,ie);H.concat(te)},"pad"),unpad:s(function(H){var O=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=O},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var O=this.cfg,le=O.iv,ie=O.mode;this._xformMode==this._ENC_XFORM_MODE?H=ie.createEncryptor:(H=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,le&&le.words):(this._mode=H.call(ie,this,le&&le.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,O){this._mode.processBlock(H,O)},"_doProcessBlock"),_doFinalize:s(function(){var H,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),O.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),B=r.format={},N=B.OpenSSL={stringify:s(function(H){var O,le=H.ciphertext,ie=H.salt;return ie?O=o.create([1398893684,1701076831]).concat(ie).concat(le):O=le,O.toString(u)},"stringify"),parse:s(function(H){var O,le=u.parse(H),ie=le.words;return ie[0]==1398893684&&ie[1]==1701076831&&(O=o.create(ie.slice(2,4)),ie.splice(0,4),le.sigBytes-=16),k.create({ciphertext:le,salt:O})},"parse")},W=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=H.createEncryptor(le,ie),q=j.finalize(O),Y=j.cfg;return k.create({ciphertext:q,key:le,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=H.createDecryptor(le,ie).finalize(O.ciphertext);return j},"decrypt"),_parse:s(function(H,O){return typeof H=="string"?O.parse(H,this):H},"_parse")}),ee=r.kdf={},me=ee.OpenSSL={execute:s(function(H,O,le,ie,j){if(ie||(ie=o.random(64/8)),j)var q=p.create({keySize:O+le,hasher:j}).compute(H,ie);else var q=p.create({keySize:O+le}).compute(H,ie);var Y=o.create(q.words.slice(O),le*4);return q.sigBytes=O*4,k.create({key:q,iv:Y,salt:ie})},"execute")},ae=n.PasswordBasedCipher=W.extend({cfg:W.cfg.extend({kdf:me}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=ie.kdf.execute(le,H.keySize,H.ivSize,ie.salt,ie.hasher);ie.iv=j.iv;var q=W.encrypt.call(this,H,O,j.key,ie);return q.mixIn(j),q},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=ie.kdf.execute(le,H.keySize,H.ivSize,O.salt,ie.hasher);ie.iv=j.iv;var q=W.decrypt.call(this,H,O,j.key,ie);return q},"decrypt")})}()})});var A1e=G((pL,g1e)=>{f();(function(t,e,r){typeof pL=="object"?g1e.exports=pL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=l},"processBlock")});function r(n,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)n[i+u]^=l[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var C1e=G((mL,y1e)=>{f();(function(t,e,r){typeof mL=="object"?y1e.exports=mL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)n[i+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var v1e=G((hL,x1e)=>{f();(function(t,e,r){typeof hL=="object"?x1e.exports=hL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),n(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var E1e=G((gL,b1e)=>{f();(function(t,e,r){typeof gL=="object"?b1e.exports=gL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)n[i+u]^=c[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var T1e=G((AL,I1e)=>{f();(function(t,e,r){typeof AL=="object"?I1e.exports=AL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AL,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var _1e=G((yL,w1e)=>{f();(function(t,e,r){typeof yL=="object"?w1e.exports=yL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yL,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var R1e=G((CL,S1e)=>{f();(function(t,e,r){typeof CL=="object"?S1e.exports=CL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(CL,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var B1e=G((xL,k1e)=>{f();(function(t,e,r){typeof xL=="object"?k1e.exports=xL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xL,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var P1e=G((vL,D1e)=>{f();(function(t,e,r){typeof vL=="object"?D1e.exports=vL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vL,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var L1e=G((bL,N1e)=>{f();(function(t,e,r){typeof bL=="object"?N1e.exports=bL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var M1e=G((EL,F1e)=>{f();(function(t,e,r){typeof EL=="object"?F1e.exports=EL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,l=r.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var O1e=G((IL,Q1e)=>{f();(function(t,e,r){typeof IL=="object"?Q1e.exports=IL=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var B=k^k<<1^k<<2^k<<3^k<<4;B=B>>>8^B&255^99,o[_]=B,a[B]=_;var N=b[_],W=b[N],ee=b[W],me=b[B]*257^B*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=ee*16843009^W*65537^N*257^_*16843008;p[B]=me<<24|me>>>8,m[B]=me<<16|me>>>16,h[B]=me<<8|me>>>24,g[B]=me,_?(_=N^b[b[b[ee^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=n.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,B=this._nRounds=k+6,N=(B+1)*4,W=this._keySchedule=[],ee=0;ee<N;ee++)ee<k?W[ee]=_[ee]:(b=W[ee-1],ee%k?k>6&&ee%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[ee/k|0]<<24),W[ee]=W[ee-k]^b);for(var me=this._invKeySchedule=[],ae=0;ae<N;ae++){var ee=N-ae;if(ae%4)var b=W[ee];else var b=W[ee-4];ae<4||ee<=4?me[ae]=b:me[ae]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,B,N,W,ee){for(var me=this._nRounds,ae=b[E]^_[0],H=b[E+1]^_[1],O=b[E+2]^_[2],le=b[E+3]^_[3],ie=4,j=1;j<me;j++){var q=k[ae>>>24]^B[H>>>16&255]^N[O>>>8&255]^W[le&255]^_[ie++],Y=k[H>>>24]^B[O>>>16&255]^N[le>>>8&255]^W[ae&255]^_[ie++],te=k[O>>>24]^B[le>>>16&255]^N[ae>>>8&255]^W[H&255]^_[ie++],pe=k[le>>>24]^B[ae>>>16&255]^N[H>>>8&255]^W[O&255]^_[ie++];ae=q,H=Y,O=te,le=pe}var q=(ee[ae>>>24]<<24|ee[H>>>16&255]<<16|ee[O>>>8&255]<<8|ee[le&255])^_[ie++],Y=(ee[H>>>24]<<24|ee[O>>>16&255]<<16|ee[le>>>8&255]<<8|ee[ae&255])^_[ie++],te=(ee[O>>>24]<<24|ee[le>>>16&255]<<16|ee[ae>>>8&255]<<8|ee[H&255])^_[ie++],pe=(ee[le>>>24]<<24|ee[ae>>>16&255]<<16|ee[H>>>8&255]<<8|ee[O&255])^_[ie++];b[E]=q,b[E+1]=Y,b[E+2]=te,b[E+3]=pe},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(v)}(),t.AES})});var q1e=G((TL,U1e)=>{f();(function(t,e,r){typeof TL=="object"?U1e.exports=TL=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],B=0;B<16;B++){for(var N=k[B]=[],W=c[B],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+W)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+W)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var ee=this._invSubKeys=[],E=0;E<16;E++)ee[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,B=this._rBlock,N=0,W=0;W<8;W++)N|=u[W][((B^_[W])&d[W])>>>0];this._lBlock=B,this._rBlock=k^N}var ee=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ee,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(n.create(b)),this._des2=p.createEncryptor(n.create(E)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var G1e=G((wL,W1e)=>{f();(function(t,e,r){typeof wL=="object"?W1e.exports=wL=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(wL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(l)}(),t.RC4})});var j1e=G((_L,H1e)=>{f();(function(t,e,r){typeof _L=="object"?H1e.exports=_L=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(_L,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=n.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=B,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(c)}(),t.Rabbit})});var $1e=G((SL,V1e)=>{f();(function(t,e,r){typeof SL=="object"?V1e.exports=SL=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(SL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=n.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=B,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(c)}(),t.RabbitLegacy})});var Y1e=G((RL,z1e)=>{f();(function(t,e,r){typeof RL=="object"?z1e.exports=RL=e(Di(),vx(),bx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(RL,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let B=0;B<4;B++){g.sbox[B]=[];for(let N=0;N<256;N++)g.sbox[B][N]=l[B][N]}let b=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let B=0;B<o+2;B+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[B]=E,g.pbox[B+1]=_;for(let B=0;B<4;B++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[B][N]=E,g.sbox[B][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var Ex=G((kL,K1e)=>{f();(function(t,e,r){typeof kL=="object"?K1e.exports=kL=e(Di(),yB(),$Ae(),YAe(),vx(),XAe(),bx(),bX(),rL(),n1e(),EX(),s1e(),l1e(),u1e(),cL(),p1e(),p1(),dl(),A1e(),C1e(),v1e(),E1e(),T1e(),_1e(),R1e(),B1e(),P1e(),L1e(),M1e(),O1e(),q1e(),G1e(),j1e(),$1e(),Y1e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(kL,function(t){return t})});var aS=G(qc=>{"use strict";f();Object.defineProperty(qc,"__esModule",{value:!0});qc.stringArray=qc.array=qc.func=qc.error=qc.number=qc.string=qc.boolean=void 0;function Ast(t){return t===!0||t===!1}s(Ast,"boolean");qc.boolean=Ast;function kxe(t){return typeof t=="string"||t instanceof String}s(kxe,"string");qc.string=kxe;function yst(t){return typeof t=="number"||t instanceof Number}s(yst,"number");qc.number=yst;function Cst(t){return t instanceof Error}s(Cst,"error");qc.error=Cst;function xst(t){return typeof t=="function"}s(xst,"func");qc.func=xst;function Bxe(t){return Array.isArray(t)}s(Bxe,"array");qc.array=Bxe;function vst(t){return Bxe(t)&&t.every(e=>kxe(e))}s(vst,"stringArray");qc.stringArray=vst});var YZ=G(Hr=>{"use strict";f();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Message=Hr.NotificationType9=Hr.NotificationType8=Hr.NotificationType7=Hr.NotificationType6=Hr.NotificationType5=Hr.NotificationType4=Hr.NotificationType3=Hr.NotificationType2=Hr.NotificationType1=Hr.NotificationType0=Hr.NotificationType=Hr.RequestType9=Hr.RequestType8=Hr.RequestType7=Hr.RequestType6=Hr.RequestType5=Hr.RequestType4=Hr.RequestType3=Hr.RequestType2=Hr.RequestType1=Hr.RequestType=Hr.RequestType0=Hr.AbstractMessageSignature=Hr.ParameterStructures=Hr.ResponseError=Hr.ErrorCodes=void 0;var hI=aS(),TZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(TZ||(Hr.ErrorCodes=TZ={}));var wZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=hI.number(e)?e:TZ.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Hr.ResponseError=wZ;var ud=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Hr.ParameterStructures=ud;ud.auto=new ud("auto");ud.byPosition=new ud("byPosition");ud.byName=new ud("byName");var hs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return ud.auto}};Hr.AbstractMessageSignature=hs;var _Z=class extends hs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Hr.RequestType0=_Z;var SZ=class extends hs{static{s(this,"RequestType")}constructor(e,r=ud.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.RequestType=SZ;var RZ=class extends hs{static{s(this,"RequestType1")}constructor(e,r=ud.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.RequestType1=RZ;var kZ=class extends hs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Hr.RequestType2=kZ;var BZ=class extends hs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Hr.RequestType3=BZ;var DZ=class extends hs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Hr.RequestType4=DZ;var PZ=class extends hs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Hr.RequestType5=PZ;var NZ=class extends hs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Hr.RequestType6=NZ;var LZ=class extends hs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Hr.RequestType7=LZ;var FZ=class extends hs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Hr.RequestType8=FZ;var MZ=class extends hs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Hr.RequestType9=MZ;var QZ=class extends hs{static{s(this,"NotificationType")}constructor(e,r=ud.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.NotificationType=QZ;var OZ=class extends hs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Hr.NotificationType0=OZ;var UZ=class extends hs{static{s(this,"NotificationType1")}constructor(e,r=ud.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.NotificationType1=UZ;var qZ=class extends hs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Hr.NotificationType2=qZ;var WZ=class extends hs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Hr.NotificationType3=WZ;var GZ=class extends hs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Hr.NotificationType4=GZ;var HZ=class extends hs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Hr.NotificationType5=HZ;var jZ=class extends hs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Hr.NotificationType6=jZ;var VZ=class extends hs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Hr.NotificationType7=VZ;var $Z=class extends hs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Hr.NotificationType8=$Z;var zZ=class extends hs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Hr.NotificationType9=zZ;var Dxe;(function(t){function e(i){let o=i;return o&&hI.string(o.method)&&(hI.string(o.id)||hI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&hI.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(hI.string(o.id)||hI.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(Dxe||(Hr.Message=Dxe={}))});var JZ=G(Nx=>{"use strict";f();var Pxe;Object.defineProperty(Nx,"__esModule",{value:!0});Nx.LRUCache=Nx.LinkedMap=Nx.Touch=void 0;var Wc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Wc||(Nx.Touch=Wc={}));var pF=class{static{s(this,"LinkedMap")}constructor(){this[Pxe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Wc.None){let n=this._map.get(e);if(n)return r!==Wc.None&&this.touch(n,r),n.value}set(e,r,n=Wc.None){let i=this._map.get(e);if(i)i.value=r,n!==Wc.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Wc.None:this.addItemLast(i);break;case Wc.First:this.addItemFirst(i);break;case Wc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(Pxe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Wc.First&&r!==Wc.Last)){if(r===Wc.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Wc.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Nx.LinkedMap=pF;var KZ=class extends pF{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Wc.AsNew){return super.get(e,r)}peek(e){return super.get(e,Wc.None)}set(e,r){return super.set(e,r,Wc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Nx.LRUCache=KZ});var Lxe=G(mF=>{"use strict";f();Object.defineProperty(mF,"__esModule",{value:!0});mF.Disposable=void 0;var Nxe;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(Nxe||(mF.Disposable=Nxe={}))});var Lx=G(eee=>{"use strict";f();Object.defineProperty(eee,"__esModule",{value:!0});var XZ;function ZZ(){if(XZ===void 0)throw new Error("No runtime abstraction layer installed");return XZ}s(ZZ,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");XZ=r}s(e,"install"),t.install=e})(ZZ||(ZZ={}));eee.default=ZZ});var cS=G(lS=>{"use strict";f();Object.defineProperty(lS,"__esModule",{value:!0});lS.Emitter=lS.Event=void 0;var bst=Lx(),Fxe;(function(t){let e={dispose(){}};t.None=function(){return e}})(Fxe||(lS.Event=Fxe={}));var tee=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(l){(0,bst.default)().console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},hF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new tee),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};lS.Emitter=hF;hF._noop=function(){}});var yF=G(uS=>{"use strict";f();Object.defineProperty(uS,"__esModule",{value:!0});uS.CancellationTokenSource=uS.CancellationToken=void 0;var Est=Lx(),Ist=aS(),ree=cS(),gF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ree.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ree.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Ist.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(gF||(uS.CancellationToken=gF={}));var Tst=Object.freeze(function(t,e){let r=(0,Est.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),AF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Tst:(this._emitter||(this._emitter=new ree.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},nee=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new AF),this._token}cancel(){this._token?this._token.cancel():this._token=gF.Cancelled}dispose(){this._token?this._token instanceof AF&&this._token.dispose():this._token=gF.None}};uS.CancellationTokenSource=nee});var Mxe=G(dS=>{"use strict";f();Object.defineProperty(dS,"__esModule",{value:!0});dS.SharedArrayReceiverStrategy=dS.SharedArraySenderStrategy=void 0;var wst=yF(),OB;(function(t){t.Continue=0,t.Cancelled=1})(OB||(OB={}));var iee=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=OB.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,OB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};dS.SharedArraySenderStrategy=iee;var oee=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===OB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},see=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new oee(e)}cancel(){}dispose(){}},aee=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new wst.CancellationTokenSource:new see(r)}};dS.SharedArrayReceiverStrategy=aee});var cee=G(CF=>{"use strict";f();Object.defineProperty(CF,"__esModule",{value:!0});CF.Semaphore=void 0;var _st=Lx(),lee=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,_st.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};CF.Semaphore=lee});var Oxe=G(Fx=>{"use strict";f();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.ReadableStreamMessageReader=Fx.AbstractMessageReader=Fx.MessageReader=void 0;var dee=Lx(),fS=aS(),uee=cS(),Sst=cee(),Qxe;(function(t){function e(r){let n=r;return n&&fS.func(n.listen)&&fS.func(n.dispose)&&fS.func(n.onError)&&fS.func(n.onClose)&&fS.func(n.onPartialMessage)}s(e,"is"),t.is=e})(Qxe||(Fx.MessageReader=Qxe={}));var xF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new uee.Emitter,this.closeEmitter=new uee.Emitter,this.partialMessageEmitter=new uee.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${fS.string(e.message)?e.message:"unknown"}`)}};Fx.AbstractMessageReader=xF;var fee;(function(t){function e(r){let n,i,o,a=new Map,l,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,c.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,dee.default)().applicationJson.decoder,c.set(l.name,l)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(fee||(fee={}));var pee=class extends xF{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=fee.fromOptions(r),this.buffer=(0,dee.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Sst.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,dee.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Fx.ReadableStreamMessageReader=pee});var Hxe=G(Mx=>{"use strict";f();Object.defineProperty(Mx,"__esModule",{value:!0});Mx.WriteableStreamMessageWriter=Mx.AbstractMessageWriter=Mx.MessageWriter=void 0;var Uxe=Lx(),UB=aS(),Rst=cee(),qxe=cS(),kst="Content-Length: ",Wxe=`\r
`,Gxe;(function(t){function e(r){let n=r;return n&&UB.func(n.dispose)&&UB.func(n.onClose)&&UB.func(n.onError)&&UB.func(n.write)}s(e,"is"),t.is=e})(Gxe||(Mx.MessageWriter=Gxe={}));var vF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new qxe.Emitter,this.closeEmitter=new qxe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${UB.string(e.message)?e.message:"unknown"}`)}};Mx.AbstractMessageWriter=vF;var mee;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,Uxe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,Uxe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(mee||(mee={}));var hee=class extends vF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=mee.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Rst.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(kst,n.byteLength.toString(),Wxe),i.push(Wxe),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Mx.WriteableStreamMessageWriter=hee});var jxe=G(bF=>{"use strict";f();Object.defineProperty(bF,"__esModule",{value:!0});bF.AbstractMessageBuffer=void 0;var Bst=13,Dst=10,Pst=`\r
`,gee=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case Bst:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case Dst:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(Pst);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};bF.AbstractMessageBuffer=gee});var Kxe=G(Xn=>{"use strict";f();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.createMessageConnection=Xn.ConnectionOptions=Xn.MessageStrategy=Xn.CancellationStrategy=Xn.CancellationSenderStrategy=Xn.CancellationReceiverStrategy=Xn.RequestCancellationReceiverStrategy=Xn.IdCancellationReceiverStrategy=Xn.ConnectionStrategy=Xn.ConnectionError=Xn.ConnectionErrors=Xn.LogTraceNotification=Xn.SetTraceNotification=Xn.TraceFormat=Xn.TraceValues=Xn.Trace=Xn.NullLogger=Xn.ProgressType=Xn.ProgressToken=void 0;var Vxe=Lx(),Ks=aS(),Rn=YZ(),$xe=JZ(),qB=cS(),Aee=yF(),HB;(function(t){t.type=new Rn.NotificationType("$/cancelRequest")})(HB||(HB={}));var yee;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(yee||(Xn.ProgressToken=yee={}));var WB;(function(t){t.type=new Rn.NotificationType("$/progress")})(WB||(WB={}));var Cee=class{static{s(this,"ProgressType")}constructor(){}};Xn.ProgressType=Cee;var xee;(function(t){function e(r){return Ks.func(r)}s(e,"is"),t.is=e})(xee||(xee={}));Xn.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Ao;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ao||(Xn.Trace=Ao={}));var zxe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(zxe||(Xn.TraceValues=zxe={}));(function(t){function e(n){if(!Ks.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(Ao||(Xn.Trace=Ao={}));var d0;(function(t){t.Text="text",t.JSON="json"})(d0||(Xn.TraceFormat=d0={}));(function(t){function e(r){return Ks.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(d0||(Xn.TraceFormat=d0={}));var vee;(function(t){t.type=new Rn.NotificationType("$/setTrace")})(vee||(Xn.SetTraceNotification=vee={}));var EF;(function(t){t.type=new Rn.NotificationType("$/logTrace")})(EF||(Xn.LogTraceNotification=EF={}));var GB;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(GB||(Xn.ConnectionErrors=GB={}));var pS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Xn.ConnectionError=pS;var bee;(function(t){function e(r){let n=r;return n&&Ks.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(bee||(Xn.ConnectionStrategy=bee={}));var IF;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ks.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ks.func(n.dispose))}s(e,"is"),t.is=e})(IF||(Xn.IdCancellationReceiverStrategy=IF={}));var Eee;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ks.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ks.func(n.dispose))}s(e,"is"),t.is=e})(Eee||(Xn.RequestCancellationReceiverStrategy=Eee={}));var TF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new Aee.CancellationTokenSource}});function e(r){return IF.is(r)||Eee.is(r)}s(e,"is"),t.is=e})(TF||(Xn.CancellationReceiverStrategy=TF={}));var wF;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(HB.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ks.func(n.sendCancellation)&&Ks.func(n.cleanup)}s(e,"is"),t.is=e})(wF||(Xn.CancellationSenderStrategy=wF={}));var _F;(function(t){t.Message=Object.freeze({receiver:TF.Message,sender:wF.Message});function e(r){let n=r;return n&&TF.is(n.receiver)&&wF.is(n.sender)}s(e,"is"),t.is=e})(_F||(Xn.CancellationStrategy=_F={}));var SF;(function(t){function e(r){let n=r;return n&&Ks.func(n.handleMessage)}s(e,"is"),t.is=e})(SF||(Xn.MessageStrategy=SF={}));var Yxe;(function(t){function e(r){let n=r;return n&&(_F.is(n.cancellationStrategy)||bee.is(n.connectionStrategy)||SF.is(n.messageStrategy))}s(e,"is"),t.is=e})(Yxe||(Xn.ConnectionOptions=Yxe={}));var hm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(hm||(hm={}));function Nst(t,e,r,n){let i=r!==void 0?r:Xn.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new $xe.LinkedMap,v=new Map,b=new Set,E=new Map,_=Ao.Off,k=d0.Text,B,N=hm.New,W=new qB.Emitter,ee=new qB.Emitter,me=new qB.Emitter,ae=new qB.Emitter,H=new qB.Emitter,O=n&&n.cancellationStrategy?n.cancellationStrategy:_F.Message;function le(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(le,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function q(Ae,Ge){Rn.Message.isRequest(Ge)?Ae.set(le(Ge.id),Ge):Rn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(j(),Ge)}s(q,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function te(){return N===hm.Listening}s(te,"isListening");function pe(){return N===hm.Closed}s(pe,"isClosed");function re(){return N===hm.Disposed}s(re,"isDisposed");function fe(){(N===hm.New||N===hm.Listening)&&(N=hm.Closed,ee.fire(void 0))}s(fe,"closeHandler");function he(Ae){W.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Ne(Ae){W.fire(Ae)}s(Ne,"writeErrorHandler"),t.onClose(fe),t.onError(he),e.onClose(fe),e.onError(Ne);function Re(){g||y.size===0||(g=(0,Vxe.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Re,"triggerMessageQueue");function Je(Ae){Rn.Message.isRequest(Ae)?Tt(Ae):Rn.Message.isNotification(Ae)?bt(Ae):Rn.Message.isResponse(Ae)?Ct(Ae):ce(Ae)}s(Je,"handleMessage");function Me(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;SF.is(Ge)?Ge.handleMessage(Ae,Je):Je(Ae)}finally{Re()}}s(Me,"processMessageQueue");let pt=s(Ae=>{try{if(Rn.Message.isNotification(Ae)&&Ae.method===HB.type.method){let Ge=Ae.params.id,ut=le(Ge),yt=y.get(ut);if(Rn.Message.isRequest(yt)){let Gt=n?.connectionStrategy,Ar=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(yt,Y):void 0;if(Ar&&(Ar.error!==void 0||Ar.result!==void 0)){y.delete(ut),E.delete(Ge),Ar.id=yt.id,X(Ar,Ae.method,Date.now()),e.write(Ar).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(Ge);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(Ge)}q(y,Ae)}finally{Re()}},"callback");function Tt(Ae){if(re())return;function Ge(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id};jt instanceof Rn.ResponseError?Ir.error=jt.toJson():Ir.result=jt===void 0?null:jt,X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ut(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id,error:jt.toJson()};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function yt(jt,rr,Jt){jt===void 0&&(jt=null);let Ir={jsonrpc:c,id:Ae.id,result:jt};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(yt,"replySuccess"),ne(Ae);let Xt=d.get(Ae.method),Gt,Ar;Xt&&(Gt=Xt.type,Ar=Xt.handler);let xr=Date.now();if(Ar||u){let jt=Ae.id??String(Date.now()),rr=IF.is(O.receiver)?O.receiver.createCancellationTokenSource(jt):O.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&rr.cancel(),Ae.id!==null&&E.set(jt,rr);try{let Jt;if(Ar)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new Rn.ResponseError(Rn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,xr);return}Jt=Ar(rr.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===Rn.ParameterStructures.byName){ut(new Rn.ResponseError(Rn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,xr);return}Jt=Ar(...Ae.params,rr.token)}else{if(Gt!==void 0&&Gt.parameterStructures===Rn.ParameterStructures.byPosition){ut(new Rn.ResponseError(Rn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,xr);return}Jt=Ar(Ae.params,rr.token)}else u&&(Jt=u(Ae.method,Ae.params,rr.token));let Ir=Jt;Jt?Ir.then?Ir.then(Nr=>{E.delete(jt),Ge(Nr,Ae.method,xr)},Nr=>{E.delete(jt),Nr instanceof Rn.ResponseError?ut(Nr,Ae.method,xr):Nr&&Ks.string(Nr.message)?ut(new Rn.ResponseError(Rn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Nr.message}`),Ae.method,xr):ut(new Rn.ResponseError(Rn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}):(E.delete(jt),Ge(Jt,Ae.method,xr)):(E.delete(jt),yt(Jt,Ae.method,xr))}catch(Jt){E.delete(jt),Jt instanceof Rn.ResponseError?Ge(Jt,Ae.method,xr):Jt&&Ks.string(Jt.message)?ut(new Rn.ResponseError(Rn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,xr):ut(new Rn.ResponseError(Rn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}}else ut(new Rn.ResponseError(Rn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,xr)}s(Tt,"handleRequest");function Ct(Ae){if(!re())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ut=v.get(Ge);if(Pe(Ae,ut),ut!==void 0){v.delete(Ge);try{if(Ae.error){let yt=Ae.error;ut.reject(new Rn.ResponseError(yt.code,yt.message,yt.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(yt){yt.message?i.error(`Response handler '${ut.method}' failed with message: ${yt.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(Ct,"handleResponse");function bt(Ae){if(re())return;let Ge,ut;if(Ae.method===HB.type.method){let yt=Ae.params.id;b.delete(yt),We(Ae);return}else{let yt=m.get(Ae.method);yt&&(ut=yt.handler,Ge=yt.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Rn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let yt=Ae.params;Ae.method===WB.type.method&&yt.length===2&&yee.is(yt[0])?ut({token:yt[0],value:yt[1]}):(Ge!==void 0&&(Ge.parameterStructures===Rn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${yt.length} arguments`)),ut(...yt))}else Ge!==void 0&&Ge.parameterStructures===Rn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(yt){yt.message?i.error(`Notification handler '${Ae.method}' failed with message: ${yt.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(bt,"handleNotification");function ce(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Ks.string(Ge.id)||Ks.number(Ge.id)){let ut=Ge.id,yt=v.get(ut);yt&&yt.reject(new Error("The received response has neither a result nor an error property."))}}s(ce,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case Ao.Verbose:return JSON.stringify(Ae,null,4);case Ao.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===Ao.Off||!B))if(k===d0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===Ao.Off||!B))if(k===d0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${Ae.method}'.`,Ge)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function X(Ae,Ge,ut){if(!(_===Ao.Off||!B))if(k===d0.Text){let yt;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?yt=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?yt=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(yt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,yt)}else be("send-response",Ae)}s(X,"traceSendingResponse");function ne(Ae){if(!(_===Ao.Off||!B))if(k===d0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("receive-request",Ae)}s(ne,"traceReceivedRequest");function We(Ae){if(!(_===Ao.Off||!B||Ae.method===EF.type.method))if(k===d0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${Ae.method}'.`,Ge)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function Pe(Ae,Ge){if(!(_===Ao.Off||!B))if(k===d0.Text){let ut;if((_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),Ge){let yt=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";B.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${yt}`,ut)}else B.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(Pe,"traceReceivedResponse");function be(Ae,Ge){if(!B||_===Ao.Off)return;let ut={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};B.log(ut)}s(be,"logLSPMessage");function ze(){if(pe())throw new pS(GB.Closed,"Connection is closed.");if(re())throw new pS(GB.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(te())throw new pS(GB.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function gt(){if(!te())throw new Error("Call listen() first.")}s(gt,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function lr(Ae){if(Ae!==null)return Ae}s(lr,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Gr(Ae,Ge){switch(Ae){case Rn.ParameterStructures.auto:return Lt(Ge)?lr(Ge):[Ot(Ge)];case Rn.ParameterStructures.byName:if(!Lt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return lr(Ge);case Rn.ParameterStructures.byPosition:return[Ot(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Gr,"computeSingleParam");function zr(Ae,Ge){let ut,yt=Ae.numberOfParams;switch(yt){case 0:ut=void 0;break;case 1:ut=Gr(Ae.parameterStructures,Ge[0]);break;default:ut=[];for(let Xt=0;Xt<Ge.length&&Xt<yt;Xt++)ut.push(Ot(Ge[Xt]));if(Ge.length<yt)for(let Xt=Ge.length;Xt<yt;Xt++)ut.push(null);break}return ut}s(zr,"computeMessageParams");let mn={sendNotification:s((Ae,...Ge)=>{ze();let ut,yt;if(Ks.string(Ae)){ut=Ae;let Gt=Ge[0],Ar=0,xr=Rn.ParameterStructures.auto;Rn.ParameterStructures.is(Gt)&&(Ar=1,xr=Gt);let jt=Ge.length,rr=jt-Ar;switch(rr){case 0:yt=void 0;break;case 1:yt=Gr(xr,Ge[Ar]);break;default:if(xr===Rn.ParameterStructures.byName)throw new Error(`Received ${rr} parameters for 'by Name' notification parameter structure.`);yt=Ge.slice(Ar,jt).map(Jt=>Ot(Jt));break}}else{let Gt=Ge;ut=Ae.method,yt=zr(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:yt};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,Ge)=>{ze();let ut;return Ks.func(Ae)?p=Ae:Ge&&(Ks.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ut)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ut),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ut)=>mn.sendNotification(WB.type,{token:Ge,value:ut}),"sendProgress"),onUnhandledProgress:ae.event,sendRequest:s((Ae,...Ge)=>{ze(),gt();let ut,yt,Xt;if(Ks.string(Ae)){ut=Ae;let jt=Ge[0],rr=Ge[Ge.length-1],Jt=0,Ir=Rn.ParameterStructures.auto;Rn.ParameterStructures.is(jt)&&(Jt=1,Ir=jt);let Nr=Ge.length;Aee.CancellationToken.is(rr)&&(Nr=Nr-1,Xt=rr);let Yr=Nr-Jt;switch(Yr){case 0:yt=void 0;break;case 1:yt=Gr(Ir,Ge[Jt]);break;default:if(Ir===Rn.ParameterStructures.byName)throw new Error(`Received ${Yr} parameters for 'by Name' request parameter structure.`);yt=Ge.slice(Jt,Nr).map(Wn=>Ot(Wn));break}}else{let jt=Ge;ut=Ae.method,yt=zr(Ae,jt);let rr=Ae.numberOfParams;Xt=Aee.CancellationToken.is(jt[rr])?jt[rr]:void 0}let Gt=o++,Ar;Xt&&(Ar=Xt.onCancellationRequested(()=>{let jt=O.sender.sendCancellation(mn,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let xr={jsonrpc:c,id:Gt,method:ut,params:yt};return ye(xr),typeof O.sender.enableCancellation=="function"&&O.sender.enableCancellation(xr),new Promise(async(jt,rr)=>{let Jt=s(Yr=>{jt(Yr),O.sender.cleanup(Gt),Ar?.dispose()},"resolveWithCleanup"),Ir=s(Yr=>{rr(Yr),O.sender.cleanup(Gt),Ar?.dispose()},"rejectWithCleanup"),Nr={method:ut,timerStart:Date.now(),resolve:Jt,reject:Ir};try{await e.write(xr),v.set(Gt,Nr)}catch(Yr){throw i.error("Sending request failed."),Nr.reject(new Rn.ResponseError(Rn.ErrorCodes.MessageWriteError,Yr.message?Yr.message:"Unknown reason")),Yr}})},"sendRequest"),onRequest:s((Ae,Ge)=>{ze();let ut=null;return xee.is(Ae)?(ut=void 0,u=Ae):Ks.string(Ae)?(ut=null,Ge!==void 0&&(ut=Ae,d.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ut)=>{let yt=!1,Xt=d0.Text;ut!==void 0&&(Ks.boolean(ut)?yt=ut:(yt=ut.sendNotification||!1,Xt=ut.traceFormat||d0.Text)),_=Ae,k=Xt,_===Ao.Off?B=void 0:B=Ge,yt&&!pe()&&!re()&&await mn.sendNotification(vee.type,{value:Ao.toString(Ae)})},"trace"),onError:W.event,onClose:ee.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(re())return;N=hm.Disposed,H.fire(void 0);let Ae=new Rn.ResponseError(Rn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of v.values())Ge.reject(Ae);v=new Map,E=new Map,b=new Set,y=new $xe.LinkedMap,Ks.func(e.dispose)&&e.dispose(),Ks.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=hm.Listening,t.listen(pt)},"listen"),inspect:s(()=>{(0,Vxe.default)().console.log("inspect")},"inspect")};return mn.onNotification(EF.type,Ae=>{if(_===Ao.Off||!B)return;let Ge=_===Ao.Verbose||_===Ao.Compact;B.log(Ae.message,Ge?Ae.verbose:void 0)}),mn.onNotification(WB.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):ae.fire(Ae)}),mn}s(Nst,"createMessageConnection");Xn.createMessageConnection=Nst});var RF=G(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Xo=YZ();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Xo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Xo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Xo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Xo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Xo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Xo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Xo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Xo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Xo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Xo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Xo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Xo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Xo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Xo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Xo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Xo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Xo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Xo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Xo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Xo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Xo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Xo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Xo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Xo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Xo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Xo.ParameterStructures},"get")});var Iee=JZ();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return Iee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return Iee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return Iee.Touch},"get")});var Lst=Lxe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return Lst.Disposable},"get")});var Jxe=cS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return Jxe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return Jxe.Emitter},"get")});var Xxe=yF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return Xxe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return Xxe.CancellationToken},"get")});var Zxe=Mxe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return Zxe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return Zxe.SharedArrayReceiverStrategy},"get")});var Tee=Oxe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return Tee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Tee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Tee.ReadableStreamMessageReader},"get")});var wee=Hxe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return wee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return wee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return wee.WriteableStreamMessageWriter},"get")});var Fst=jxe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return Fst.AbstractMessageBuffer},"get")});var pc=Kxe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return pc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return pc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return pc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return pc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return pc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return pc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return pc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return pc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return pc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return pc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return pc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return pc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return pc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return pc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return pc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return pc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return pc.MessageStrategy},"get")});var Mst=Lx();ct.RAL=Mst.default});var rve=G(kee=>{"use strict";f();Object.defineProperty(kee,"__esModule",{value:!0});var eve=require("util"),S1=RF(),kF=class t extends S1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new eve.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};kF.emptyBuffer=Buffer.allocUnsafe(0);var _ee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),S1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),S1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),S1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),S1.Disposable.create(()=>this.stream.off("data",e))}},See=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),S1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),S1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),S1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},tve=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new kF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new eve.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new _ee(t),"asReadableStream"),asWritableStream:s(t=>new See(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Ree(){return tve}s(Ree,"RIL");(function(t){function e(){S1.RAL.install(tve)}s(e,"install"),t.install=e})(Ree||(Ree={}));kee.default=Ree});var yI=G(Wi=>{"use strict";f();var Qst=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ost=Wi&&Wi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qst(e,t,r)};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createMessageConnection=Wi.createServerSocketTransport=Wi.createClientSocketTransport=Wi.createServerPipeTransport=Wi.createClientPipeTransport=Wi.generateRandomPipeName=Wi.StreamMessageWriter=Wi.StreamMessageReader=Wi.SocketMessageWriter=Wi.SocketMessageReader=Wi.PortMessageWriter=Wi.PortMessageReader=Wi.IPCMessageWriter=Wi.IPCMessageReader=void 0;var mS=rve();mS.default.install();var nve=require("path"),Ust=require("os"),qst=require("crypto"),PF=require("net"),f0=RF();Ost(RF(),Wi);var Bee=class extends f0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),f0.Disposable.create(()=>this.process.off("message",e))}};Wi.IPCMessageReader=Bee;var Dee=class extends f0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.IPCMessageWriter=Dee;var Pee=class extends f0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new f0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Wi.PortMessageReader=Pee;var Nee=class extends f0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.PortMessageWriter=Nee;var gI=class extends f0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,mS.default)().stream.asReadableStream(e),r)}};Wi.SocketMessageReader=gI;var AI=class extends f0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,mS.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Wi.SocketMessageWriter=AI;var BF=class extends f0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,mS.default)().stream.asReadableStream(e),r)}};Wi.StreamMessageReader=BF;var DF=class extends f0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,mS.default)().stream.asWritableStream(e),r)}};Wi.StreamMessageWriter=DF;var ive=process.env.XDG_RUNTIME_DIR,Wst=new Map([["linux",107],["darwin",103]]);function Gst(){let t=(0,qst.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;ive?e=nve.join(ive,`vscode-ipc-${t}.sock`):e=nve.join(Ust.tmpdir(),`vscode-${t}.sock`);let r=Wst.get(process.platform);return r!==void 0&&e.length>r&&(0,mS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(Gst,"generateRandomPipeName");Wi.generateRandomPipeName=Gst;function Hst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),r([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Hst,"createClientPipeTransport");Wi.createClientPipeTransport=Hst;function jst(t,e="utf-8"){let r=(0,PF.createConnection)(t);return[new gI(r,e),new AI(r,e)]}s(jst,"createServerPipeTransport");Wi.createServerPipeTransport=jst;function Vst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),r([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Vst,"createClientSocketTransport");Wi.createClientSocketTransport=Vst;function $st(t,e="utf-8"){let r=(0,PF.createConnection)(t,"127.0.0.1");return[new gI(r,e),new AI(r,e)]}s($st,"createServerSocketTransport");Wi.createServerSocketTransport=$st;function zst(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(zst,"isReadableStream");function Yst(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Yst,"isWritableStream");function Kst(t,e,r,n){r||(r=f0.NullLogger);let i=zst(t)?new BF(t):t,o=Yst(e)?new DF(e):e;return f0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,f0.createMessageConnection)(i,o,r,n)}s(Kst,"createMessageConnection");Wi.createMessageConnection=Kst});var Lee=G((Kfr,ove)=>{"use strict";f();ove.exports=yI()});var LF=G((sve,NF)=>{f();(function(t){if(typeof NF=="object"&&typeof NF.exports=="object"){var e=t(require,sve);e!==void 0&&(NF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(r||(e.DocumentUri=r={}));var n;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(n||(e.URI=n={}));var i;(function(U){U.MIN_VALUE=-2147483648,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(i||(e.integer=i={}));var o;(function(U){U.MIN_VALUE=0,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(o||(e.uinteger=o={}));var a;(function(U){function ge(Z,M){return Z===Number.MAX_VALUE&&(Z=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:Z,character:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),U.is=ve})(a||(e.Position=a={}));var l;(function(U){function ge(Z,M,ke,$e){if(_e.uinteger(Z)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(Z,M),end:a.create(ke,$e)};if(a.is(Z)&&a.is(M))return{start:Z,end:M};throw new Error("Range#create called with invalid arguments[".concat(Z,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),U.is=ve})(l||(e.Range=l={}));var c;(function(U){function ge(Z,M){return{uri:Z,range:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),U.is=ve})(c||(e.Location=c={}));var u;(function(U){function ge(Z,M,ke,$e){return{targetUri:Z,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),U.is=ve})(u||(e.LocationLink=u={}));var d;(function(U){function ge(Z,M,ke,$e){return{red:Z,green:M,blue:ke,alpha:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),U.is=ve})(d||(e.Color=d={}));var p;(function(U){function ge(Z,M){return{range:Z,color:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),U.is=ve})(p||(e.ColorInformation=p={}));var m;(function(U){function ge(Z,M,ke){return{label:Z,textEdit:M,additionalTextEdits:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||B.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,B.is))}s(ve,"is"),U.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(U){U.Comment="comment",U.Imports="imports",U.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={startLine:Z,endLine:M};return _e.defined(ke)&&(pr.startCharacter=ke),_e.defined($e)&&(pr.endCharacter=$e),_e.defined(qt)&&(pr.kind=qt),_e.defined(_r)&&(pr.collapsedText=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),U.is=ve})(g||(e.FoldingRange=g={}));var y;(function(U){function ge(Z,M){return{location:Z,message:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),U.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(U){U.Error=1,U.Warning=2,U.Information=3,U.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(U){U.Unnecessary=1,U.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&_e.string(Z.href)}s(ge,"is"),U.is=ge})(E||(e.CodeDescription=E={}));var _;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={range:Z,message:M};return _e.defined(ke)&&(pr.severity=ke),_e.defined($e)&&(pr.code=$e),_e.defined(qt)&&(pr.source=qt),_e.defined(_r)&&(pr.relatedInformation=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M,ke=Z;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),U.is=ve})(_||(e.Diagnostic=_={}));var k;(function(U){function ge(Z,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:Z,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),U.is=ve})(k||(e.Command=k={}));var B;(function(U){function ge(ke,$e){return{range:ke,newText:$e}}s(ge,"replace"),U.replace=ge;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),U.insert=ve;function Z(ke){return{range:ke,newText:""}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),U.is=M})(B||(e.TextEdit=B={}));var N;(function(U){function ge(Z,M,ke){var $e={label:Z};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),U.is=ve})(N||(e.ChangeAnnotation=N={}));var W;(function(U){function ge(ve){var Z=ve;return _e.string(Z)}s(ge,"is"),U.is=ge})(W||(e.ChangeAnnotationIdentifier=W={}));var ee;(function(U){function ge(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(ge,"replace"),U.replace=ge;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),U.insert=ve;function Z(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return B.is($e)&&(N.is($e.annotationId)||W.is($e.annotationId))}s(M,"is"),U.is=M})(ee||(e.AnnotatedTextEdit=ee={}));var me;(function(U){function ge(Z,M){return{textDocument:Z,edits:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&pe.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),U.is=ve})(me||(e.TextDocumentEdit=me={}));var ae;(function(U){function ge(Z,M,ke){var $e={kind:"create",uri:Z};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),U.is=ve})(ae||(e.CreateFile=ae={}));var H;(function(U){function ge(Z,M,ke,$e){var qt={kind:"rename",oldUri:Z,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),U.is=ve})(H||(e.RenameFile=H={}));var O;(function(U){function ge(Z,M,ke){var $e={kind:"delete",uri:Z};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||W.is(M.annotationId))}s(ve,"is"),U.is=ve})(O||(e.DeleteFile=O={}));var le;(function(U){function ge(ve){var Z=ve;return Z&&(Z.changes!==void 0||Z.documentChanges!==void 0)&&(Z.documentChanges===void 0||Z.documentChanges.every(function(M){return _e.string(M.kind)?ae.is(M)||H.is(M)||O.is(M):me.is(M)}))}s(ge,"is"),U.is=ge})(le||(e.WorkspaceEdit=le={}));var ie=function(){function U(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(U,"TextEditChangeImpl"),U.prototype.insert=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.insert(ge,ve):W.is(Z)?(ke=Z,M=ee.insert(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ee.insert(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.replace=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.replace(ge,ve):W.is(Z)?(ke=Z,M=ee.replace(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ee.replace(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.delete=function(ge,ve){var Z,M;if(ve===void 0?Z=B.del(ge):W.is(ve)?(M=ve,Z=ee.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),Z=ee.del(ge,M)),this.edits.push(Z),M!==void 0)return M},U.prototype.add=function(ge){this.edits.push(ge)},U.prototype.all=function(){return this.edits},U.prototype.clear=function(){this.edits.splice(0,this.edits.length)},U.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},U}(),j=function(){function U(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(U,"ChangeAnnotations"),U.prototype.all=function(){return this._annotations},Object.defineProperty(U.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),U.prototype.manage=function(ge,ve){var Z;if(W.is(ge)?Z=ge:(Z=this.nextId(),ve=ge),this._annotations[Z]!==void 0)throw new Error("Id ".concat(Z," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(Z));return this._annotations[Z]=ve,this._size++,Z},U.prototype.nextId=function(){return this._counter++,this._counter.toString()},U}(),q=function(){function U(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new j(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(Z){if(me.is(Z)){var M=new ie(Z.edits,ve._changeAnnotations);ve._textEditChanges[Z.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(Z){var M=new ie(ge.changes[Z]);ve._textEditChanges[Z]=M})):this._workspaceEdit={}}return s(U,"WorkspaceChange"),Object.defineProperty(U.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),U.prototype.getTextEditChange=function(ge){if(pe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},Z=this._textEditChanges[ve.uri];if(!Z){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),Z=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=Z}return Z}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Z=this._textEditChanges[ge];if(!Z){var M=[];this._workspaceEdit.changes[ge]=M,Z=new ie(M),this._textEditChanges[ge]=Z}return Z}},U.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},U.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},U.prototype.createFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||W.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=ae.create(ge,Z):($e=W.is(M)?M:this._changeAnnotations.manage(M),ke=ae.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U.prototype.renameFile=function(ge,ve,Z,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(Z)||W.is(Z)?ke=Z:M=Z;var $e,qt;if(ke===void 0?$e=H.create(ge,ve,M):(qt=W.is(ke)?ke:this._changeAnnotations.manage(ke),$e=H.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},U.prototype.deleteFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||W.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=O.create(ge,Z):($e=W.is(M)?M:this._changeAnnotations.manage(M),ke=O.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U}();e.WorkspaceChange=q;var Y;(function(U){function ge(Z){return{uri:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),U.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var te;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),U.is=ve})(te||(e.VersionedTextDocumentIdentifier=te={}));var pe;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),U.is=ve})(pe||(e.OptionalVersionedTextDocumentIdentifier=pe={}));var re;(function(U){function ge(Z,M,ke,$e){return{uri:Z,languageId:M,version:ke,text:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(re||(e.TextDocumentItem=re={}));var fe;(function(U){U.PlainText="plaintext",U.Markdown="markdown";function ge(ve){var Z=ve;return Z===U.PlainText||Z===U.Markdown}s(ge,"is"),U.is=ge})(fe||(e.MarkupKind=fe={}));var he;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(ve)&&fe.is(Z.kind)&&_e.string(Z.value)}s(ge,"is"),U.is=ge})(he||(e.MarkupContent=he={}));var Ne;(function(U){U.Text=1,U.Method=2,U.Function=3,U.Constructor=4,U.Field=5,U.Variable=6,U.Class=7,U.Interface=8,U.Module=9,U.Property=10,U.Unit=11,U.Value=12,U.Enum=13,U.Keyword=14,U.Snippet=15,U.Color=16,U.File=17,U.Reference=18,U.Folder=19,U.EnumMember=20,U.Constant=21,U.Struct=22,U.Event=23,U.Operator=24,U.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var Re;(function(U){U.PlainText=1,U.Snippet=2})(Re||(e.InsertTextFormat=Re={}));var Je;(function(U){U.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(U){function ge(Z,M,ke){return{newText:Z,insert:M,replace:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),U.is=ve})(Me||(e.InsertReplaceEdit=Me={}));var pt;(function(U){U.asIs=1,U.adjustIndentation=2})(pt||(e.InsertTextMode=pt={}));var Tt;(function(U){function ge(ve){var Z=ve;return Z&&(_e.string(Z.detail)||Z.detail===void 0)&&(_e.string(Z.description)||Z.description===void 0)}s(ge,"is"),U.is=ge})(Tt||(e.CompletionItemLabelDetails=Tt={}));var Ct;(function(U){function ge(ve){return{label:ve}}s(ge,"create"),U.create=ge})(Ct||(e.CompletionItem=Ct={}));var bt;(function(U){function ge(ve,Z){return{items:ve||[],isIncomplete:!!Z}}s(ge,"create"),U.create=ge})(bt||(e.CompletionList=bt={}));var ce;(function(U){function ge(Z){return Z.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),U.fromPlainText=ge;function ve(Z){var M=Z;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),U.is=ve})(ce||(e.MarkedString=ce={}));var Oe;(function(U){function ge(ve){var Z=ve;return!!Z&&_e.objectLiteral(Z)&&(he.is(Z.contents)||ce.is(Z.contents)||_e.typedArray(Z.contents,ce.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),U.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(U){function ge(ve,Z){return Z?{label:ve,documentation:Z}:{label:ve}}s(ge,"create"),U.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(U){function ge(ve,Z){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(Z)&&($e.documentation=Z),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),U.create=ge})(tt||(e.SignatureInformation=tt={}));var X;(function(U){U.Text=1,U.Read=2,U.Write=3})(X||(e.DocumentHighlightKind=X={}));var ne;(function(U){function ge(ve,Z){var M={range:ve};return _e.number(Z)&&(M.kind=Z),M}s(ge,"create"),U.create=ge})(ne||(e.DocumentHighlight=ne={}));var We;(function(U){U.File=1,U.Module=2,U.Namespace=3,U.Package=4,U.Class=5,U.Method=6,U.Property=7,U.Field=8,U.Constructor=9,U.Enum=10,U.Interface=11,U.Function=12,U.Variable=13,U.Constant=14,U.String=15,U.Number=16,U.Boolean=17,U.Array=18,U.Object=19,U.Key=20,U.Null=21,U.EnumMember=22,U.Struct=23,U.Event=24,U.Operator=25,U.TypeParameter=26})(We||(e.SymbolKind=We={}));var Pe;(function(U){U.Deprecated=1})(Pe||(e.SymbolTag=Pe={}));var be;(function(U){function ge(ve,Z,M,ke,$e){var qt={name:ve,kind:Z,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),U.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(U){function ge(ve,Z,M,ke){return ke!==void 0?{name:ve,kind:Z,location:{uri:M,range:ke}}:{name:ve,kind:Z,location:{uri:M}}}s(ge,"create"),U.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={name:Z,detail:M,kind:ke,range:$e,selectionRange:qt};return _r!==void 0&&(pr.children=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),U.is=ve})(it||(e.DocumentSymbol=it={}));var gt;(function(U){U.Empty="",U.QuickFix="quickfix",U.Refactor="refactor",U.RefactorExtract="refactor.extract",U.RefactorInline="refactor.inline",U.RefactorRewrite="refactor.rewrite",U.Source="source",U.SourceOrganizeImports="source.organizeImports",U.SourceFixAll="source.fixAll"})(gt||(e.CodeActionKind=gt={}));var Ot;(function(U){U.Invoked=1,U.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var lr;(function(U){function ge(Z,M,ke){var $e={diagnostics:Z};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),U.is=ve})(lr||(e.CodeActionContext=lr={}));var Lt;(function(U){function ge(Z,M,ke){var $e={title:Z},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||le.is(M.edit))}s(ve,"is"),U.is=ve})(Lt||(e.CodeAction=Lt={}));var Gr;(function(U){function ge(Z,M){var ke={range:Z};return _e.defined(M)&&(ke.data=M),ke}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),U.is=ve})(Gr||(e.CodeLens=Gr={}));var zr;(function(U){function ge(Z,M){return{tabSize:Z,insertSpaces:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),U.is=ve})(zr||(e.FormattingOptions=zr={}));var mn;(function(U){function ge(Z,M,ke){return{range:Z,target:M,data:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),U.is=ve})(mn||(e.DocumentLink=mn={}));var Ae;(function(U){function ge(Z,M){return{range:Z,parent:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||U.is(M.parent))}s(ve,"is"),U.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(U){U.namespace="namespace",U.type="type",U.class="class",U.enum="enum",U.interface="interface",U.struct="struct",U.typeParameter="typeParameter",U.parameter="parameter",U.variable="variable",U.property="property",U.enumMember="enumMember",U.event="event",U.function="function",U.method="method",U.macro="macro",U.keyword="keyword",U.modifier="modifier",U.comment="comment",U.string="string",U.number="number",U.regexp="regexp",U.operator="operator",U.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ut;(function(U){U.declaration="declaration",U.definition="definition",U.readonly="readonly",U.static="static",U.deprecated="deprecated",U.abstract="abstract",U.async="async",U.modification="modification",U.documentation="documentation",U.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var yt;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&(Z.resultId===void 0||typeof Z.resultId=="string")&&Array.isArray(Z.data)&&(Z.data.length===0||typeof Z.data[0]=="number")}s(ge,"is"),U.is=ge})(yt||(e.SemanticTokens=yt={}));var Xt;(function(U){function ge(Z,M){return{range:Z,text:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(U){function ge(Z,M,ke){return{range:Z,variableName:M,caseSensitiveLookup:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),U.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var Ar;(function(U){function ge(Z,M){return{range:Z,expression:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),U.is=ve})(Ar||(e.InlineValueEvaluatableExpression=Ar={}));var xr;(function(U){function ge(Z,M){return{frameId:Z,stoppedLocation:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(Z.stoppedLocation)}s(ve,"is"),U.is=ve})(xr||(e.InlineValueContext=xr={}));var jt;(function(U){U.Type=1,U.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),U.is=ge})(jt||(e.InlayHintKind=jt={}));var rr;(function(U){function ge(Z){return{value:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),U.is=ve})(rr||(e.InlayHintLabelPart=rr={}));var Jt;(function(U){function ge(Z,M,ke){var $e={position:Z,label:M};return ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,rr.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,B.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),U.is=ve})(Jt||(e.InlayHint=Jt={}));var Ir;(function(U){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),U.createSnippet=ge})(Ir||(e.StringValue=Ir={}));var Nr;(function(U){function ge(ve,Z,M,ke){return{insertText:ve,filterText:Z,range:M,command:ke}}s(ge,"create"),U.create=ge})(Nr||(e.InlineCompletionItem=Nr={}));var Yr;(function(U){function ge(ve){return{items:ve}}s(ge,"create"),U.create=ge})(Yr||(e.InlineCompletionList=Yr={}));var Wn;(function(U){U.Invoked=0,U.Automatic=1})(Wn||(e.InlineCompletionTriggerKind=Wn={}));var Jn;(function(U){function ge(ve,Z){return{range:ve,text:Z}}s(ge,"create"),U.create=ge})(Jn||(e.SelectedCompletionInfo=Jn={}));var Qn;(function(U){function ge(ve,Z){return{triggerKind:ve,selectedCompletionInfo:Z}}s(ge,"create"),U.create=ge})(Qn||(e.InlineCompletionContext=Qn={}));var $n;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&n.is(Z.uri)&&_e.string(Z.name)}s(ge,"is"),U.is=ge})($n||(e.WorkspaceFolder=$n={})),e.EOL=[`
`,`\r
`,"\r"];var rn;(function(U){function ge(ke,$e,qt,_r){return new zn(ke,$e,qt,_r)}s(ge,"create"),U.create=ge;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),U.is=ve;function Z(ke,$e){for(var qt=ke.getText(),_r=M($e,function(On,Ws){var Lp=On.range.start.line-Ws.range.start.line;return Lp===0?On.range.start.character-Ws.range.start.character:Lp}),pr=qt.length,un=_r.length-1;un>=0;un--){var hn=_r[un],vr=ke.offsetAt(hn.range.start),Ht=ke.offsetAt(hn.range.end);if(Ht<=pr)qt=qt.substring(0,vr)+hn.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");pr=vr}return qt}s(Z,"applyEdits"),U.applyEdits=Z;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,_r=ke.slice(0,qt),pr=ke.slice(qt);M(_r,$e),M(pr,$e);for(var un=0,hn=0,vr=0;un<_r.length&&hn<pr.length;){var Ht=$e(_r[un],pr[hn]);Ht<=0?ke[vr++]=_r[un++]:ke[vr++]=pr[hn++]}for(;un<_r.length;)ke[vr++]=_r[un++];for(;hn<pr.length;)ke[vr++]=pr[hn++];return ke}s(M,"mergeSort")})(rn||(e.TextDocument=rn={}));var zn=function(){function U(ge,ve,Z,M){this._uri=ge,this._languageId=ve,this._version=Z,this._content=M,this._lineOffsets=void 0}return s(U,"FullTextDocument"),Object.defineProperty(U.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),U.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),Z=this.offsetAt(ge.end);return this._content.substring(ve,Z)}return this._content},U.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},U.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,Z=!0,M=0;M<ve.length;M++){Z&&(ge.push(M),Z=!1);var ke=ve.charAt(M);Z=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}Z&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},U.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),Z=0,M=ve.length;if(M===0)return a.create(0,ge);for(;Z<M;){var ke=Math.floor((Z+M)/2);ve[ke]>ge?M=ke:Z=ke+1}var $e=Z-1;return a.create($e,ge-ve[$e])},U.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var Z=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(Z+ge.character,M),Z)},Object.defineProperty(U.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),U}(),_e;(function(U){var ge=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),U.defined=ve;function Z(Ht){return typeof Ht>"u"}s(Z,"undefined"),U.undefined=Z;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),U.boolean=M;function ke(Ht){return ge.call(Ht)==="[object String]"}s(ke,"string"),U.string=ke;function $e(Ht){return ge.call(Ht)==="[object Number]"}s($e,"number"),U.number=$e;function qt(Ht,On,Ws){return ge.call(Ht)==="[object Number]"&&On<=Ht&&Ht<=Ws}s(qt,"numberRange"),U.numberRange=qt;function _r(Ht){return ge.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(_r,"integer"),U.integer=_r;function pr(Ht){return ge.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(pr,"uinteger"),U.uinteger=pr;function un(Ht){return ge.call(Ht)==="[object Function]"}s(un,"func"),U.func=un;function hn(Ht){return Ht!==null&&typeof Ht=="object"}s(hn,"objectLiteral"),U.objectLiteral=hn;function vr(Ht,On){return Array.isArray(Ht)&&Ht.every(On)}s(vr,"typedArray"),U.typedArray=vr})(_e||(_e={}))})});var Fs=G(dd=>{"use strict";f();Object.defineProperty(dd,"__esModule",{value:!0});dd.ProtocolNotificationType=dd.ProtocolNotificationType0=dd.ProtocolRequestType=dd.ProtocolRequestType0=dd.RegistrationType=dd.MessageDirection=void 0;var hS=yI(),ave;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(ave||(dd.MessageDirection=ave={}));var Fee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};dd.RegistrationType=Fee;var Mee=class extends hS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};dd.ProtocolRequestType0=Mee;var Qee=class extends hS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,hS.ParameterStructures.byName)}};dd.ProtocolRequestType=Qee;var Oee=class extends hS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};dd.ProtocolNotificationType0=Oee;var Uee=class extends hS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,hS.ParameterStructures.byName)}};dd.ProtocolNotificationType=Uee});var FF=G(ja=>{"use strict";f();Object.defineProperty(ja,"__esModule",{value:!0});ja.objectLiteral=ja.typedArray=ja.stringArray=ja.array=ja.func=ja.error=ja.number=ja.string=ja.boolean=void 0;function Jst(t){return t===!0||t===!1}s(Jst,"boolean");ja.boolean=Jst;function lve(t){return typeof t=="string"||t instanceof String}s(lve,"string");ja.string=lve;function Xst(t){return typeof t=="number"||t instanceof Number}s(Xst,"number");ja.number=Xst;function Zst(t){return t instanceof Error}s(Zst,"error");ja.error=Zst;function eat(t){return typeof t=="function"}s(eat,"func");ja.func=eat;function cve(t){return Array.isArray(t)}s(cve,"array");ja.array=cve;function tat(t){return cve(t)&&t.every(e=>lve(e))}s(tat,"stringArray");ja.stringArray=tat;function rat(t,e){return Array.isArray(t)&&t.every(e)}s(rat,"typedArray");ja.typedArray=rat;function nat(t){return t!==null&&typeof t=="object"}s(nat,"objectLiteral");ja.objectLiteral=nat});var fve=G(MF=>{"use strict";f();Object.defineProperty(MF,"__esModule",{value:!0});MF.ImplementationRequest=void 0;var uve=Fs(),dve;(function(t){t.method="textDocument/implementation",t.messageDirection=uve.MessageDirection.clientToServer,t.type=new uve.ProtocolRequestType(t.method)})(dve||(MF.ImplementationRequest=dve={}))});var hve=G(QF=>{"use strict";f();Object.defineProperty(QF,"__esModule",{value:!0});QF.TypeDefinitionRequest=void 0;var pve=Fs(),mve;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=pve.MessageDirection.clientToServer,t.type=new pve.ProtocolRequestType(t.method)})(mve||(QF.TypeDefinitionRequest=mve={}))});var yve=G(gS=>{"use strict";f();Object.defineProperty(gS,"__esModule",{value:!0});gS.DidChangeWorkspaceFoldersNotification=gS.WorkspaceFoldersRequest=void 0;var OF=Fs(),gve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=OF.MessageDirection.serverToClient,t.type=new OF.ProtocolRequestType0(t.method)})(gve||(gS.WorkspaceFoldersRequest=gve={}));var Ave;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolNotificationType(t.method)})(Ave||(gS.DidChangeWorkspaceFoldersNotification=Ave={}))});var vve=G(UF=>{"use strict";f();Object.defineProperty(UF,"__esModule",{value:!0});UF.ConfigurationRequest=void 0;var Cve=Fs(),xve;(function(t){t.method="workspace/configuration",t.messageDirection=Cve.MessageDirection.serverToClient,t.type=new Cve.ProtocolRequestType(t.method)})(xve||(UF.ConfigurationRequest=xve={}))});var Ive=G(AS=>{"use strict";f();Object.defineProperty(AS,"__esModule",{value:!0});AS.ColorPresentationRequest=AS.DocumentColorRequest=void 0;var qF=Fs(),bve;(function(t){t.method="textDocument/documentColor",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(bve||(AS.DocumentColorRequest=bve={}));var Eve;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(Eve||(AS.ColorPresentationRequest=Eve={}))});var _ve=G(yS=>{"use strict";f();Object.defineProperty(yS,"__esModule",{value:!0});yS.FoldingRangeRefreshRequest=yS.FoldingRangeRequest=void 0;var WF=Fs(),Tve;(function(t){t.method="textDocument/foldingRange",t.messageDirection=WF.MessageDirection.clientToServer,t.type=new WF.ProtocolRequestType(t.method)})(Tve||(yS.FoldingRangeRequest=Tve={}));var wve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=WF.MessageDirection.serverToClient,t.type=new WF.ProtocolRequestType0(t.method)})(wve||(yS.FoldingRangeRefreshRequest=wve={}))});var kve=G(GF=>{"use strict";f();Object.defineProperty(GF,"__esModule",{value:!0});GF.DeclarationRequest=void 0;var Sve=Fs(),Rve;(function(t){t.method="textDocument/declaration",t.messageDirection=Sve.MessageDirection.clientToServer,t.type=new Sve.ProtocolRequestType(t.method)})(Rve||(GF.DeclarationRequest=Rve={}))});var Pve=G(HF=>{"use strict";f();Object.defineProperty(HF,"__esModule",{value:!0});HF.SelectionRangeRequest=void 0;var Bve=Fs(),Dve;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Bve.MessageDirection.clientToServer,t.type=new Bve.ProtocolRequestType(t.method)})(Dve||(HF.SelectionRangeRequest=Dve={}))});var Mve=G(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.WorkDoneProgressCancelNotification=Qx.WorkDoneProgressCreateRequest=Qx.WorkDoneProgress=void 0;var iat=yI(),jF=Fs(),Nve;(function(t){t.type=new iat.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(Nve||(Qx.WorkDoneProgress=Nve={}));var Lve;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=jF.MessageDirection.serverToClient,t.type=new jF.ProtocolRequestType(t.method)})(Lve||(Qx.WorkDoneProgressCreateRequest=Lve={}));var Fve;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=jF.MessageDirection.clientToServer,t.type=new jF.ProtocolNotificationType(t.method)})(Fve||(Qx.WorkDoneProgressCancelNotification=Fve={}))});var qve=G(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.CallHierarchyOutgoingCallsRequest=Ox.CallHierarchyIncomingCallsRequest=Ox.CallHierarchyPrepareRequest=void 0;var CS=Fs(),Qve;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=CS.MessageDirection.clientToServer,t.type=new CS.ProtocolRequestType(t.method)})(Qve||(Ox.CallHierarchyPrepareRequest=Qve={}));var Ove;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=CS.MessageDirection.clientToServer,t.type=new CS.ProtocolRequestType(t.method)})(Ove||(Ox.CallHierarchyIncomingCallsRequest=Ove={}));var Uve;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=CS.MessageDirection.clientToServer,t.type=new CS.ProtocolRequestType(t.method)})(Uve||(Ox.CallHierarchyOutgoingCallsRequest=Uve={}))});var $ve=G(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.SemanticTokensRefreshRequest=fd.SemanticTokensRangeRequest=fd.SemanticTokensDeltaRequest=fd.SemanticTokensRequest=fd.SemanticTokensRegistrationType=fd.TokenFormat=void 0;var R1=Fs(),Wve;(function(t){t.Relative="relative"})(Wve||(fd.TokenFormat=Wve={}));var jB;(function(t){t.method="textDocument/semanticTokens",t.type=new R1.RegistrationType(t.method)})(jB||(fd.SemanticTokensRegistrationType=jB={}));var Gve;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=jB.method})(Gve||(fd.SemanticTokensRequest=Gve={}));var Hve;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=jB.method})(Hve||(fd.SemanticTokensDeltaRequest=Hve={}));var jve;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=jB.method})(jve||(fd.SemanticTokensRangeRequest=jve={}));var Vve;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=R1.MessageDirection.serverToClient,t.type=new R1.ProtocolRequestType0(t.method)})(Vve||(fd.SemanticTokensRefreshRequest=Vve={}))});var Kve=G(VF=>{"use strict";f();Object.defineProperty(VF,"__esModule",{value:!0});VF.ShowDocumentRequest=void 0;var zve=Fs(),Yve;(function(t){t.method="window/showDocument",t.messageDirection=zve.MessageDirection.serverToClient,t.type=new zve.ProtocolRequestType(t.method)})(Yve||(VF.ShowDocumentRequest=Yve={}))});var Zve=G($F=>{"use strict";f();Object.defineProperty($F,"__esModule",{value:!0});$F.LinkedEditingRangeRequest=void 0;var Jve=Fs(),Xve;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Jve.MessageDirection.clientToServer,t.type=new Jve.ProtocolRequestType(t.method)})(Xve||($F.LinkedEditingRangeRequest=Xve={}))});var abe=G(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.WillDeleteFilesRequest=Gc.DidDeleteFilesNotification=Gc.DidRenameFilesNotification=Gc.WillRenameFilesRequest=Gc.DidCreateFilesNotification=Gc.WillCreateFilesRequest=Gc.FileOperationPatternKind=void 0;var Df=Fs(),ebe;(function(t){t.file="file",t.folder="folder"})(ebe||(Gc.FileOperationPatternKind=ebe={}));var tbe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolRequestType(t.method)})(tbe||(Gc.WillCreateFilesRequest=tbe={}));var rbe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolNotificationType(t.method)})(rbe||(Gc.DidCreateFilesNotification=rbe={}));var nbe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolRequestType(t.method)})(nbe||(Gc.WillRenameFilesRequest=nbe={}));var ibe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolNotificationType(t.method)})(ibe||(Gc.DidRenameFilesNotification=ibe={}));var obe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolNotificationType(t.method)})(obe||(Gc.DidDeleteFilesNotification=obe={}));var sbe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Df.MessageDirection.clientToServer,t.type=new Df.ProtocolRequestType(t.method)})(sbe||(Gc.WillDeleteFilesRequest=sbe={}))});var fbe=G(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.MonikerRequest=Ux.MonikerKind=Ux.UniquenessLevel=void 0;var lbe=Fs(),cbe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(cbe||(Ux.UniquenessLevel=cbe={}));var ube;(function(t){t.$import="import",t.$export="export",t.local="local"})(ube||(Ux.MonikerKind=ube={}));var dbe;(function(t){t.method="textDocument/moniker",t.messageDirection=lbe.MessageDirection.clientToServer,t.type=new lbe.ProtocolRequestType(t.method)})(dbe||(Ux.MonikerRequest=dbe={}))});var gbe=G(qx=>{"use strict";f();Object.defineProperty(qx,"__esModule",{value:!0});qx.TypeHierarchySubtypesRequest=qx.TypeHierarchySupertypesRequest=qx.TypeHierarchyPrepareRequest=void 0;var xS=Fs(),pbe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(pbe||(qx.TypeHierarchyPrepareRequest=pbe={}));var mbe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(mbe||(qx.TypeHierarchySupertypesRequest=mbe={}));var hbe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=xS.MessageDirection.clientToServer,t.type=new xS.ProtocolRequestType(t.method)})(hbe||(qx.TypeHierarchySubtypesRequest=hbe={}))});var Cbe=G(vS=>{"use strict";f();Object.defineProperty(vS,"__esModule",{value:!0});vS.InlineValueRefreshRequest=vS.InlineValueRequest=void 0;var zF=Fs(),Abe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=zF.MessageDirection.clientToServer,t.type=new zF.ProtocolRequestType(t.method)})(Abe||(vS.InlineValueRequest=Abe={}));var ybe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=zF.MessageDirection.serverToClient,t.type=new zF.ProtocolRequestType0(t.method)})(ybe||(vS.InlineValueRefreshRequest=ybe={}))});var Ebe=G(Wx=>{"use strict";f();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.InlayHintRefreshRequest=Wx.InlayHintResolveRequest=Wx.InlayHintRequest=void 0;var bS=Fs(),xbe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(xbe||(Wx.InlayHintRequest=xbe={}));var vbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(vbe||(Wx.InlayHintResolveRequest=vbe={}));var bbe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=bS.MessageDirection.serverToClient,t.type=new bS.ProtocolRequestType0(t.method)})(bbe||(Wx.InlayHintRefreshRequest=bbe={}))});var kbe=G(Pf=>{"use strict";f();Object.defineProperty(Pf,"__esModule",{value:!0});Pf.DiagnosticRefreshRequest=Pf.WorkspaceDiagnosticRequest=Pf.DocumentDiagnosticRequest=Pf.DocumentDiagnosticReportKind=Pf.DiagnosticServerCancellationData=void 0;var Rbe=yI(),oat=FF(),ES=Fs(),Ibe;(function(t){function e(r){let n=r;return n&&oat.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(Ibe||(Pf.DiagnosticServerCancellationData=Ibe={}));var Tbe;(function(t){t.Full="full",t.Unchanged="unchanged"})(Tbe||(Pf.DocumentDiagnosticReportKind=Tbe={}));var wbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=ES.MessageDirection.clientToServer,t.type=new ES.ProtocolRequestType(t.method),t.partialResult=new Rbe.ProgressType})(wbe||(Pf.DocumentDiagnosticRequest=wbe={}));var _be;(function(t){t.method="workspace/diagnostic",t.messageDirection=ES.MessageDirection.clientToServer,t.type=new ES.ProtocolRequestType(t.method),t.partialResult=new Rbe.ProgressType})(_be||(Pf.WorkspaceDiagnosticRequest=_be={}));var Sbe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=ES.MessageDirection.serverToClient,t.type=new ES.ProtocolRequestType0(t.method)})(Sbe||(Pf.DiagnosticRefreshRequest=Sbe={}))});var Mbe=G(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var VB=LF(),gm=FF(),cg=Fs(),qee;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(qee||(sa.NotebookCellKind=qee={}));var Wee;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return gm.objectLiteral(o)&&VB.uinteger.is(o.executionOrder)&&(o.success===void 0||gm.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Wee||(sa.ExecutionSummary=Wee={}));var YF;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return gm.objectLiteral(a)&&qee.is(a.kind)&&VB.DocumentUri.is(a.document)&&(a.metadata===void 0||gm.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Wee.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(gm.objectLiteral(o)&&gm.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(YF||(sa.NotebookCell=YF={}));var Bbe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return gm.objectLiteral(i)&&gm.string(i.uri)&&VB.integer.is(i.version)&&gm.typedArray(i.cells,YF.is)}s(r,"is"),t.is=r})(Bbe||(sa.NotebookDocument=Bbe={}));var IS;(function(t){t.method="notebookDocument/sync",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.RegistrationType(t.method)})(IS||(sa.NotebookDocumentSyncRegistrationType=IS={}));var Dbe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=IS.method})(Dbe||(sa.DidOpenNotebookDocumentNotification=Dbe={}));var Pbe;(function(t){function e(n){let i=n;return gm.objectLiteral(i)&&VB.uinteger.is(i.start)&&VB.uinteger.is(i.deleteCount)&&(i.cells===void 0||gm.typedArray(i.cells,YF.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(Pbe||(sa.NotebookCellArrayChange=Pbe={}));var Nbe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=IS.method})(Nbe||(sa.DidChangeNotebookDocumentNotification=Nbe={}));var Lbe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=IS.method})(Lbe||(sa.DidSaveNotebookDocumentNotification=Lbe={}));var Fbe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=IS.method})(Fbe||(sa.DidCloseNotebookDocumentNotification=Fbe={}))});var Ube=G(KF=>{"use strict";f();Object.defineProperty(KF,"__esModule",{value:!0});KF.InlineCompletionRequest=void 0;var Qbe=Fs(),Obe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Qbe.MessageDirection.clientToServer,t.type=new Qbe.ProtocolRequestType(t.method)})(Obe||(KF.InlineCompletionRequest=Obe={}))});var ZEe=G(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Fs(),qbe=LF(),Pl=FF(),sat=fve();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return sat.ImplementationRequest},"get")});var aat=hve();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return aat.TypeDefinitionRequest},"get")});var YEe=yve();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return YEe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return YEe.DidChangeWorkspaceFoldersNotification},"get")});var lat=vve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return lat.ConfigurationRequest},"get")});var KEe=Ive();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return KEe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return KEe.ColorPresentationRequest},"get")});var JEe=_ve();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return JEe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return JEe.FoldingRangeRefreshRequest},"get")});var cat=kve();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return cat.DeclarationRequest},"get")});var uat=Pve();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return uat.SelectionRangeRequest},"get")});var $ee=Mve();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return $ee.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return $ee.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return $ee.WorkDoneProgressCancelNotification},"get")});var zee=qve();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return zee.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return zee.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return zee.CallHierarchyPrepareRequest},"get")});var TS=$ve();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return TS.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return TS.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return TS.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return TS.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return TS.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return TS.SemanticTokensRegistrationType},"get")});var dat=Kve();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return dat.ShowDocumentRequest},"get")});var fat=Zve();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return fat.LinkedEditingRangeRequest},"get")});var CI=abe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return CI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return CI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return CI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return CI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return CI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return CI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return CI.WillDeleteFilesRequest},"get")});var Yee=fbe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return Yee.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return Yee.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return Yee.MonikerRequest},"get")});var Kee=gbe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Kee.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Kee.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Kee.TypeHierarchySupertypesRequest},"get")});var XEe=Cbe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return XEe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return XEe.InlineValueRefreshRequest},"get")});var Jee=Ebe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return Jee.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Jee.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Jee.InlayHintRefreshRequest},"get")});var $B=kbe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return $B.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return $B.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return $B.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return $B.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return $B.DiagnosticRefreshRequest},"get")});var ug=Mbe();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return ug.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return ug.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return ug.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return ug.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return ug.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return ug.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidCloseNotebookDocumentNotification},"get")});var pat=Ube();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return pat.InlineCompletionRequest},"get")});var Gee;(function(t){function e(r){let n=r;return Pl.string(n)||Pl.string(n.language)||Pl.string(n.scheme)||Pl.string(n.pattern)}s(e,"is"),t.is=e})(Gee||(xe.TextDocumentFilter=Gee={}));var Hee;(function(t){function e(r){let n=r;return Pl.objectLiteral(n)&&(Pl.string(n.notebookType)||Pl.string(n.scheme)||Pl.string(n.pattern))}s(e,"is"),t.is=e})(Hee||(xe.NotebookDocumentFilter=Hee={}));var jee;(function(t){function e(r){let n=r;return Pl.objectLiteral(n)&&(Pl.string(n.notebook)||Hee.is(n.notebook))&&(n.language===void 0||Pl.string(n.language))}s(e,"is"),t.is=e})(jee||(xe.NotebookCellTextDocumentFilter=jee={}));var Vee;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Pl.string(n)&&!Gee.is(n)&&!jee.is(n))return!1;return!0}s(e,"is"),t.is=e})(Vee||(xe.DocumentSelector=Vee={}));var Wbe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Wbe||(xe.RegistrationRequest=Wbe={}));var Gbe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Gbe||(xe.UnregistrationRequest=Gbe={}));var Hbe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Hbe||(xe.ResourceOperationKind=Hbe={}));var jbe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(jbe||(xe.FailureHandlingKind=jbe={}));var Vbe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Vbe||(xe.PositionEncodingKind=Vbe={}));var $be;(function(t){function e(r){let n=r;return n&&Pl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})($be||(xe.StaticRegistrationOptions=$be={}));var zbe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Vee.is(n.documentSelector))}s(e,"is"),t.is=e})(zbe||(xe.TextDocumentRegistrationOptions=zbe={}));var Ybe;(function(t){function e(n){let i=n;return Pl.objectLiteral(i)&&(i.workDoneProgress===void 0||Pl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Pl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(Ybe||(xe.WorkDoneProgressOptions=Ybe={}));var Kbe;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Kbe||(xe.InitializeRequest=Kbe={}));var Jbe;(function(t){t.unknownProtocolVersion=1})(Jbe||(xe.InitializeErrorCodes=Jbe={}));var Xbe;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Xbe||(xe.InitializedNotification=Xbe={}));var Zbe;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(Zbe||(xe.ShutdownRequest=Zbe={}));var eEe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(eEe||(xe.ExitNotification=eEe={}));var tEe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(tEe||(xe.DidChangeConfigurationNotification=tEe={}));var rEe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(rEe||(xe.MessageType=rEe={}));var nEe;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(nEe||(xe.ShowMessageNotification=nEe={}));var iEe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(iEe||(xe.ShowMessageRequest=iEe={}));var oEe;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(oEe||(xe.LogMessageNotification=oEe={}));var sEe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(sEe||(xe.TelemetryEventNotification=sEe={}));var aEe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(aEe||(xe.TextDocumentSyncKind=aEe={}));var lEe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(lEe||(xe.DidOpenTextDocumentNotification=lEe={}));var cEe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(cEe||(xe.TextDocumentContentChangeEvent=cEe={}));var uEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(uEe||(xe.DidChangeTextDocumentNotification=uEe={}));var dEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(dEe||(xe.DidCloseTextDocumentNotification=dEe={}));var fEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(fEe||(xe.DidSaveTextDocumentNotification=fEe={}));var pEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(pEe||(xe.TextDocumentSaveReason=pEe={}));var mEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(mEe||(xe.WillSaveTextDocumentNotification=mEe={}));var hEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(hEe||(xe.WillSaveTextDocumentWaitUntilRequest=hEe={}));var gEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(gEe||(xe.DidChangeWatchedFilesNotification=gEe={}));var AEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(AEe||(xe.FileChangeType=AEe={}));var yEe;(function(t){function e(r){let n=r;return Pl.objectLiteral(n)&&(qbe.URI.is(n.baseUri)||qbe.WorkspaceFolder.is(n.baseUri))&&Pl.string(n.pattern)}s(e,"is"),t.is=e})(yEe||(xe.RelativePattern=yEe={}));var CEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(CEe||(xe.WatchKind=CEe={}));var xEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(xEe||(xe.PublishDiagnosticsNotification=xEe={}));var vEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(vEe||(xe.CompletionTriggerKind=vEe={}));var bEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(bEe||(xe.CompletionRequest=bEe={}));var EEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(EEe||(xe.CompletionResolveRequest=EEe={}));var IEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(IEe||(xe.HoverRequest=IEe={}));var TEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(TEe||(xe.SignatureHelpTriggerKind=TEe={}));var wEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.SignatureHelpRequest=wEe={}));var _Ee;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(_Ee||(xe.DefinitionRequest=_Ee={}));var SEe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(SEe||(xe.ReferencesRequest=SEe={}));var REe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(REe||(xe.DocumentHighlightRequest=REe={}));var kEe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(kEe||(xe.DocumentSymbolRequest=kEe={}));var BEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(BEe||(xe.CodeActionRequest=BEe={}));var DEe;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(DEe||(xe.CodeActionResolveRequest=DEe={}));var PEe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(PEe||(xe.WorkspaceSymbolRequest=PEe={}));var NEe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(NEe||(xe.WorkspaceSymbolResolveRequest=NEe={}));var LEe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(LEe||(xe.CodeLensRequest=LEe={}));var FEe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(FEe||(xe.CodeLensResolveRequest=FEe={}));var MEe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(MEe||(xe.CodeLensRefreshRequest=MEe={}));var QEe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(QEe||(xe.DocumentLinkRequest=QEe={}));var OEe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(OEe||(xe.DocumentLinkResolveRequest=OEe={}));var UEe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(UEe||(xe.DocumentFormattingRequest=UEe={}));var qEe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(qEe||(xe.DocumentRangeFormattingRequest=qEe={}));var WEe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(WEe||(xe.DocumentRangesFormattingRequest=WEe={}));var GEe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(GEe||(xe.DocumentOnTypeFormattingRequest=GEe={}));var HEe;(function(t){t.Identifier=1})(HEe||(xe.PrepareSupportDefaultBehavior=HEe={}));var jEe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(jEe||(xe.RenameRequest=jEe={}));var VEe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(VEe||(xe.PrepareRenameRequest=VEe={}));var $Ee;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})($Ee||(xe.ExecuteCommandRequest=$Ee={}));var zEe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(zEe||(xe.ApplyWorkspaceEditRequest=zEe={}))});var tIe=G(JF=>{"use strict";f();Object.defineProperty(JF,"__esModule",{value:!0});JF.createProtocolConnection=void 0;var eIe=yI();function mat(t,e,r,n){return eIe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,eIe.createMessageConnection)(t,e,r,n)}s(mat,"createProtocolConnection");JF.createProtocolConnection=mat});var nIe=G(pd=>{"use strict";f();var hat=pd&&pd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XF=pd&&pd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hat(e,t,r)};Object.defineProperty(pd,"__esModule",{value:!0});pd.LSPErrorCodes=pd.createProtocolConnection=void 0;XF(yI(),pd);XF(LF(),pd);XF(Fs(),pd);XF(ZEe(),pd);var gat=tIe();Object.defineProperty(pd,"createProtocolConnection",{enumerable:!0,get:s(function(){return gat.createProtocolConnection},"get")});var rIe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(rIe||(pd.LSPErrorCodes=rIe={}))});var ii=G(dg=>{"use strict";f();var Aat=dg&&dg.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iIe=dg&&dg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Aat(e,t,r)};Object.defineProperty(dg,"__esModule",{value:!0});dg.createProtocolConnection=void 0;var yat=Lee();iIe(Lee(),dg);iIe(nIe(),dg);function Cat(t,e,r,n){return(0,yat.createMessageConnection)(t,e,r,n)}s(Cat,"createProtocolConnection");dg.createProtocolConnection=Cat});var VIe=G((mM,jIe)=>{f();(function(t,e){typeof mM=="object"&&typeof jIe<"u"?e(mM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(mM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),W=e(Array),ee=r(W,c),me=r(ee,"slice");function ae(w,R){try{return{v:w.apply(this,R)}}catch(D){return{e:D}}}s(ae,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function O(w){var R="[object "+w+"]";return function(D){return!!(D&&le(D)===R)}}s(O,"_createObjIs");function le(w){return _[b].call(w)}s(le,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function j(w){return!Y(w)}s(j,"isStrictUndefined");function q(w){return w===i||ie(w)}s(q,"isNullOrUndefined");function Y(w){return!!w||w!==n}s(Y,"isDefined");var te=H("string"),pe=H(a);function re(w){return!w&&q(w)?!1:!!w&&typeof w===l}s(re,"isObject");var fe=r(W,"isArray"),he=O("Error"),Ne=r(E,"getOwnPropertyDescriptor");function Re(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Re,"objHasOwnProperty");var Je=e(r(E,"hasOwn"),Me);function Me(w,R){return Re(w,R)||!!Ne(w,R)}s(Me,"polyObjHasOwn");function pt(w,R,D){if(w&&re(w)){for(var F in w)if(Je(w,F)&&R[v](D||w,F,w[F])===-1)break}}s(pt,"objForEachKey");var Tt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ct(w){var R={};if(R[Tt.c]=!0,R[Tt.e]=!0,w.l){R.get=function(){return w.l.v};var D=Ne(w.l,"v");D&&D.set&&(R.set=function(F){w.l.v=F})}return pt(w,function(F,oe){R[Tt[F]]=j(oe)?R[Tt[F]]:oe}),R}s(Ct,"_createProp");var bt=r(E,"defineProperty");function ce(w,R,D){return bt(w,R,Ct(D))}s(ce,"objDefine");function Oe(w,R,D,F,oe){var Ee={};return pt(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,D?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,D,F){bt(w,R,{value:D,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),X="[object Error]";function ne(w,R){var D=o,F=_[b][v](w);F===X&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{D=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),D=(D?D.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(oe){D=" - "+ne(oe,R)}return F+": "+D}s(ne,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function Pe(w){throw new TypeError(w)}s(Pe,"throwTypeError");var be=r(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var gt=r(E,"assign"),Ot=r(E,"keys"),lr=e(be,ze),Lt=e(r(E,"getPrototypeOf"),it);function Gr(w){return Oe(w,1,0,lr)}s(Gr,"createEnum");function zr(w){var R={};return pt(w,function(D,F){ye(R,D,F[1]),ye(R,F[0],F[1])}),lr(R)}s(zr,"createSimpleMap");function mn(w){return zr(w)}s(mn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function yt(){if(!Ge){var w=ae(ut).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(yt,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,D){var F=R?R[w]:i;return function(oe){var Ee=(oe?oe[w]:i)||F;if(Ee||D){var we=arguments;return(Ee||D).apply(oe,Ee?me[v](we,1):we)}Pe('"'+tt(w)+'" not defined for '+ne(oe))}}s(Gt,"_unwrapFunctionWithPoly");var Ar=r(N,"min"),xr=r(N,"max"),jt=Xt("slice",B),rr=Xt("substring",B),Jt=Gt("substr",B,Ir);function Ir(w,R,D){return q(w)&&Pe("Invalid "+ne(w)),D<0?o:(R=R||0,R<0&&(R=xr(R+w[g],0)),ie(D)?jt(w,R):jt(w,R,R+D))}s(Ir,"polyStrSubstr");function Nr(w,R){return rr(w,0,R)}s(Nr,"strLeft");var Yr="_urid",Wn;function Jn(){if(!Wn){var w=yt();Wn=w.gblSym=w.gblSym||{k:{},s:{}}}return Wn}s(Jn,"_globalSymbolRegistry");function Qn(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Qn,"polyNewSymbol");function $n(w){var R=Jn();if(!Je(R.k,w)){var D=Qn(w),F=Ot(R.s).length;D[Yr]=function(){return F+"_"+D[b]()},R.k[w]=D,R.s[D[Yr]()]=tt(w)}return R.k[w]}s($n,"polySymbolFor");var rn;function zn(){rn=yt()}s(zn,"_initTestHooks");function _e(w){return bt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var U="window",ge;function ve(w,R){var D;return function(){return!rn&&zn(),(!D||rn.lzy)&&(D=_e(ae(w,R).v)),D.v}}s(ve,"_getGlobalInstFn");function Z(w){return!rn&&zn(),(!ge||w===!1||rn.lzy)&&(ge=_e(ae(ut).v||i)),ge.v}s(Z,"getGlobal");function M(w,R){var D;if(!ge||R===!1?D=Z(R):D=ge.v,D&&D[w])return D[w];if(w===U)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[U]);function _r(){return!!pr()}s(_r,"hasNavigator");var pr=ve(M,["navigator"]),un,hn;function vr(){return un=_e(ae(M,[m]).v),un}s(vr,"_initSymbol");function Ht(w){var R=(rn.lzy?0:un)||vr();return R.v?R.v[w]:n}s(Ht,"_getSymbolKey");function On(w,R){!rn&&zn();var D=(rn.lzy?0:un)||vr();return D.v?D.v(w):R?i:Qn(w)}s(On,"newSymbol");function Ws(w){return!rn&&zn(),hn=(rn.lzy?0:hn)||_e(ae(Ht,["for"]).v),(hn.v||$n)(w)}s(Ws,"symbolFor");function Lp(w,R,D){return w.apply(R,D)}s(Lp,"fnApply");function El(w,R,D){if(w)for(var F=w[g]>>>0,oe=0;oe<F&&!(oe in w&&R[v](D||w,w[oe],oe,w)===-1);oe++);}s(El,"arrForEach");var Fp=Xt("indexOf",ee),nf=Xt("map",ee),ia=Xt("reduce",ee),vh=e(r(E,"create"),rC);function rC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&Pe("Prototype must be an Object or function: "+ne(w));function D(){}return s(D,"tempFunc"),D[c]=w,new D}s(rC,"polyObjCreate");var Uk;function Mp(w,R){var D=E.setPrototypeOf||function(F,oe){var Ee;!Uk&&(Uk=_e((Ee={},Ee[u]=[],Ee instanceof Array))),Uk.v?F[u]=oe:pt(oe,function(we,Qe){return F[we]=Qe})};return D(w,R)}s(Mp,"objSetPrototypeOf");function AK(w,R,D){ae(ce,[R,y,{v:w,c:!0,e:!1}]),R=Mp(R,D);function F(){this[p]=R,ae(ce,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=D===i?vh(D):(F[c]=D[c],new F),R}s(AK,"_createCustomError");function bh(w,R){R&&(w[y]=R)}s(bh,"_setName");function yK(w,R,D){var F=D||Error,oe=F[c][y],Ee=Error.captureStackTrace;return AK(w,function(){var we=this,Qe=arguments;try{ae(bh,[F,w]);var Xe=Lp(F,we,me[v](Qe))||we;if(Xe!==we){var mt=Lt(we);mt!==Lt(Xe)&&Mp(Xe,mt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{ae(bh,[F,oe])}},F)}s(yK,"createCustomError");function QA(){return(Date.now||qk)()}s(QA,"utcNow");function qk(){return new Date().getTime()}s(qk,"polyUtcNow");function uw(w){return s(function(D){return q(D)&&Pe("strTrim called ["+ne(D)+"]"),D&&D.replace&&(D=D.replace(w,o)),D},"_doTrim")}s(uw,"_createTrimFn");var CK=uw(/^\s+|(?=\s)\s+$/g),Rc=Gt("trim",B,CK),Eh=r(N,"floor"),tE,OA,rE;function Ih(w){if(!w||typeof w!==l)return!1;rE||(rE=$e()?qt():!0);var R=!1;if(w!==rE){OA||(tE=Function[c][b],OA=tE[v](E));try{var D=Lt(w);R=!D,R||(Re(D,p)&&(D=D[p]),R=!!(D&&typeof D===a&&tE[v](D)===OA))}catch{}}return R}s(Ih,"isPlainObject");var dw;function nE(){return!rn&&zn(),(!dw||rn.lzy)&&(dw=_e(ae(M,["performance"]).v)),dw.v}s(nE,"getPerformance");var Wk=r(N,"round"),nC=Gt("endsWith",B,iC);function iC(w,R,D){te(w)||Pe("'"+ne(w)+"' is not a string");var F=te(R)?R:tt(R),oe=!ie(D)&&D<w[g]?D:w[g];return rr(w,oe-F[g],oe)===F}s(iC,"polyStrEndsWith");var qr=Xt("indexOf",B),fu="ref",UA="unref",oC="hasRef",xK="enabled";function Th(w,R,D){var F=!0,oe=w?R(i):i,Ee;function we(){return F=!1,oe&&oe[UA]&&oe[UA](),Ee}s(we,"_unref");function Qe(){oe&&D(oe),oe=i}s(Qe,"_cancel");function Xe(){return oe=R(oe),F||we(),Ee}s(Xe,"_refresh");function mt(ir){!ir&&oe&&Qe(),ir&&!oe&&Xe()}return s(mt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[oC]=function(){return oe&&oe[oC]?oe[oC]():F},Ee[fu]=function(){return F=!0,oe&&oe[fu]&&oe[fu](),Ee},Ee[UA]=we,Ee=bt(Ee,xK,{get:s(function(){return!!oe},"get"),set:mt}),{h:Ee,dn:s(function(){oe=i},"dn")}}s(Th,"_createTimerHandler");function vK(w,R,D){var F=fe(R),oe=F?R.length:0,Ee=(oe>0?R[0]:F?n:R)||setTimeout,we=(oe>1?R[1]:n)||clearTimeout,Qe=D[0];D[0]=function(){Xe.dn(),Lp(Qe,n,me[v](arguments))};var Xe=Th(w,function(mt){if(mt){if(mt.refresh)return mt.refresh(),mt;Lp(we,n,[mt])}return Lp(Ee,n,D)},function(mt){Lp(we,n,[mt])});return Xe.h}s(vK,"_createTimeoutWith");function Gk(w,R){return vK(!0,n,me[v](arguments))}s(Gk,"scheduleTimeout");var iE=Gr,bK=mn,oE="toLowerCase",Ma="length",wh="warnToConsole",sE="throwInternal",sN="watch",EK="apply",ji="push",qA="splice",_h="logger",Hk="cancel",aE="name",pu="unload",aN="version",lN="loggingLevelConsole",jk="messageId",WA="message",Vk="diagLog",cN="userAgent",$k="split",sC="replace",Sh="type",uN="evtName",fw="traceFlags",zk="getAttribute",pw;function IK(w,R){pw||(pw=yK("AggregationError",function(F,oe){oe[Ma]>1&&(F.errors=oe[1])}));var D=w||"One or more errors occurred.";throw El(R,function(F,oe){D+=`
`.concat(oe," > ").concat(ne(F))}),new pw(D,R||[])}s(IK,"throwAggregationError");var TK="function",dN="object",wK="undefined",Qp="prototype",mw=Object,Yk=mw[Qp];(Z()||{}).Symbol,(Z()||{}).Reflect;var hw="hasOwnProperty",_K=s(function(w){for(var R,D=1,F=arguments.length;D<F;D++){R=arguments[D];for(var oe in R)Yk[hw].call(R,oe)&&(w[oe]=R[oe])}return w},"__objAssignFnImpl"),gw=gt||_K,Aw=s(function(w,R){return Aw=mw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var oe in F)F[hw](oe)&&(D[oe]=F[oe])},Aw(w,R)},"extendStaticsFn");function Rh(w,R){typeof R!==TK&&R!==null&&Pe("Class extends value "+String(R)+" is not a constructor or null"),Aw(w,R);function D(){this.constructor=w}s(D,"__"),w[Qp]=R===null?vh(R):(D[Qp]=R[Qp],new D)}s(Rh,"__extendsFn");var yw,GA="constructor",Ku="prototype",Ju="function",HA="_dynInstFuncs",aC="_isDynProxy",kh="_dynClass",lC="_dynCls$",Kk="_dynInstChk",jA=Kk,cC="_dfOpts",Jk="_unknown_",Cw="__proto__",uC="_dyn"+Cw,lE="__dynProto$Gbl",xw="_dynInstProto",dC="useBaseInst",fC="setInstFuncs",cE=Object,VA=cE.getPrototypeOf,pC=cE.getOwnPropertyNames,Xk=Z(),vw=Xk[lE]||(Xk[lE]={o:(yw={},yw[fC]=!0,yw[dC]=!0,yw),n:1e3});function mC(w){return w&&(w===cE[Ku]||w===Array[Ku])}s(mC,"_isObjectOrArrayPrototype");function hC(w){return mC(w)||w===Function[Ku]}s(hC,"_isObjectArrayOrFunctionPrototype");function Op(w){var R;if(w){if(VA)return VA(w);var D=w[Cw]||w[Ku]||(w[GA]?w[GA][Ku]:null);R=w[uC]||D,Re(w,uC)||(delete w[xw],R=w[uC]=w[xw]||w[uC],w[xw]=D)}return R}s(Op,"_getObjProto");function of(w,R){var D=[];if(pC)D=pC(w);else for(var F in w)typeof F=="string"&&Re(w,F)&&D.push(F);if(D&&D.length>0)for(var oe=0;oe<D.length;oe++)R(D[oe])}s(of,"_forEachProp");function gC(w,R,D){return R!==GA&&typeof w[R]===Ju&&(D||Re(w,R))&&R!==Cw&&R!==Ku}s(gC,"_isDynamicCandidate");function AC(w){Pe("DynamicProto: "+w)}s(AC,"_throwTypeError");function bw(w){var R=vh(null);return of(w,function(D){!R[D]&&gC(w,D,!1)&&(R[D]=w[D])}),R}s(bw,"_getInstanceFuncs");function Zk(w,R){for(var D=w.length-1;D>=0;D--)if(w[D]===R)return!0;return!1}s(Zk,"_hasVisited");function e3(w,R,D,F){function oe(Xe,mt,ir){var wn=mt[ir];if(wn[aC]&&F){var Gn=Xe[HA]||{};Gn[jA]!==!1&&(wn=(Gn[mt[kh]]||{})[ir]||wn)}return function(){return wn.apply(Xe,arguments)}}s(oe,"_instFuncProxy");var Ee=vh(null);of(D,function(Xe){Ee[Xe]=oe(R,D,Xe)});for(var we=Op(w),Qe=[];we&&!hC(we)&&!Zk(Qe,we);)of(we,function(Xe){!Ee[Xe]&&gC(we,Xe,!VA)&&(Ee[Xe]=oe(R,we,Xe))}),Qe.push(we),we=Op(we);return Ee}s(e3,"_getBaseFuncs");function SK(w,R,D,F){var oe=null;if(w&&Re(D,kh)){var Ee=w[HA]||vh(null);if(oe=(Ee[D[kh]]||vh(null))[R],oe||AC("Missing ["+R+"] "+Ju),!oe[Kk]&&Ee[jA]!==!1){for(var we=!Re(w,R),Qe=Op(w),Xe=[];we&&Qe&&!hC(Qe)&&!Zk(Xe,Qe);){var mt=Qe[R];if(mt){we=mt===F;break}Xe.push(Qe),Qe=Op(Qe)}try{we&&(w[R]=oe),oe[Kk]=1}catch{Ee[jA]=!1}}}return oe}s(SK,"_getInstFunc");function RK(w,R,D){var F=R[w];return F===D&&(F=Op(R)[w]),typeof F!==Ju&&AC("["+w+"] is not a "+Ju),F}s(RK,"_getProtoFunc");function kK(w,R,D,F,oe){function Ee(Xe,mt){var ir=s(function(){var wn=SK(this,mt,Xe,ir)||RK(mt,Xe,ir);return wn.apply(this,arguments)},"dynProtoProxy");return ir[aC]=1,ir}if(s(Ee,"_createDynamicPrototype"),!mC(w)){var we=D[HA]=D[HA]||vh(null);if(!mC(we)){var Qe=we[R]=we[R]||vh(null);we[jA]!==!1&&(we[jA]=!!oe),mC(Qe)||of(D,function(Xe){gC(D,Xe,!1)&&D[Xe]!==F[Xe]&&(Qe[Xe]=D[Xe],delete D[Xe],(!Re(w,Xe)||w[Xe]&&!w[Xe][aC])&&(w[Xe]=Ee(w,Xe)))})}}}s(kK,"_populatePrototype");function BK(w,R){if(VA){for(var D=[],F=Op(R);F&&!hC(F)&&!Zk(D,F);){if(F===w)return!0;D.push(F),F=Op(F)}return!1}return!0}s(BK,"_checkPrototype");function t3(w,R){return Re(w,Ku)?w.name||R||Jk:((w||{})[GA]||{}).name||R||Jk}s(t3,"_getObjName");function uE(w,R,D,F){Re(w,Ku)||AC("theClass is an invalid class definition.");var oe=w[Ku];BK(oe,R)||AC("["+t3(w)+"] not in hierarchy of ["+t3(R)+"]");var Ee=null;Re(oe,kh)?Ee=oe[kh]:(Ee=lC+t3(w,"_")+"$"+vw.n,vw.n++,oe[kh]=Ee);var we=uE[cC],Qe=!!we[dC];Qe&&F&&F[dC]!==void 0&&(Qe=!!F[dC]);var Xe=bw(R),mt=e3(oe,R,Xe,Qe);D(R,mt);var ir=!!VA&&!!we[fC];ir&&F&&(ir=!!F[fC]),kK(oe,Ee,R,Xe,ir!==!1)}s(uE,"dynamicProto"),uE[cC]=vw.o;var rc=void 0,Gs="",fN="Not dynamic - ",pN=/-([a-z])/g,dE=/([^\w\d_$])/g,r3=/^(\d+[\w\d_$])/;function n3(w){return!q(w)}s(n3,"isNotNullOrUndefined");function Ew(w){var R=w;return R&&te(R)&&(R=R[sC](pN,function(D,F){return F.toUpperCase()}),R=R[sC](dE,"_"),R=R[sC](r3,function(D,F){return"_"+F})),R}s(Ew,"normalizeJsName");function mN(w,R){return w&&R?qr(w,R)!==-1:!1}s(mN,"strContains");function Up(w){return w&&w.toISOString()||""}s(Up,"toISOString");function Bh(w){return he(w)?w[aE]:Gs}s(Bh,"getExceptionName");function fE(w){return function(){function R(){var D=this;w&&pt(w,function(F,oe){D[F]=oe})}return s(R,"class_1"),R}()}s(fE,"createClassFromInterface");var hN="console",Iw="JSON",DK="crypto",Dh="msCrypto",yC="msie",Yn="trident/",CC=null,$A=null,qp=null;function Tw(){return typeof console!==wK?console:M(hN)}s(Tw,"getConsole");function Vi(){return!!(typeof JSON===dN&&JSON||M(Iw)!==null)}s(Vi,"hasJSON");function xC(){return Vi()?JSON||M(Iw):null}s(xC,"getJSON");function ga(){return M(DK)}s(ga,"getCrypto");function vC(){return M(Dh)}s(vC,"getMsCrypto");function pE(){var w=pr();if(w&&(w[cN]!==$A||CC===null)){$A=w[cN];var R=($A||Gs)[oE]();CC=mN(R,yC)||mN(R,Yn)}return CC}s(pE,"isIE");function Ph(w){return(qp===null||w===!1)&&(qp=_r()&&!!pr().sendBeacon),qp}s(Ph,"isBeaconsSupported");function mE(w,R){if(w)for(var D=0;D<w[Ma];D++){var F=w[D];if(F[aE]&&F[aE]===R)return F}return{}}s(mE,"_getNamedValue");function ww(w){var R=ke();return R&&w?mE(R.querySelectorAll("meta"),w).content:null}s(ww,"findMetaTag");function sf(w){var R,D=nE();if(D){var F=D.getEntriesByType("navigation")||[];R=mE((F[Ma]>0?F[0]:{}).serverTiming,w).description}return R}s(sf,"findNamedServerTiming");var bC=4294967296,zd=4294967295,EC=123456789,Nh=987654321,Il=!1,IC=EC,af=Nh;function gN(w){w<0&&(w>>>=0),IC=EC+w&zd,af=Nh-w&zd,Il=!0}s(gN,"_mwcSeed");function zA(){try{var w=QA()&2147483647;gN((Math.random()*bC^w)+w)}catch{}}s(zA,"_autoSeedMwc");function _w(w){return w>0?Eh(TC()/zd*(w+1))>>>0:0}s(_w,"randomValue");function TC(w){var R=0,D=ga()||vC();return D&&D.getRandomValues&&(R=D.getRandomValues(new Uint32Array(1))[0]&zd),R===0&&pE()&&(Il||zA(),R=AN()&zd),R===0&&(R=Eh(bC*Math.random()|0)),w||(R>>>=0),R}s(TC,"random32");function AN(w){af=36969*(af&65535)+(af>>16)&zd,IC=18e3*(IC&65535)+(IC>>16)&zd;var R=(af<<16)+(IC&65535)>>>0&zd|0;return w||(R>>>=0),R}s(AN,"mwcRandom32");function YA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=TC()>>>0,F=0,oe=Gs;oe[Ma]<w;)F++,oe+=R.charAt(D&63),D>>>=6,F===5&&(D=(TC()<<2&4294967295|D&3)>>>0,F=0);return oe}s(YA,"newId");var lf="3.3.6",Sw="."+YA(6),KA=0;function cf(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(cf,"_canAcceptData");function Rw(w,R){var D=R[w.id];if(!D){D={};try{cf(R)&&ce(R,w.id,{e:!1,v:D})}catch{}}return D}s(Rw,"_getCache");function Wp(w,R){return R===void 0&&(R=!1),Ew(w+KA+++(R?"."+lf:Gs)+Sw)}s(Wp,"createUniqueNamespace");function uf(w){var R={id:Wp("_aiData-"+(w||Gs)+"."+lf),accept:s(function(D){return cf(D)},"accept"),get:s(function(D,F,oe,Ee){var we=D[R.id];return we?we[Ew(F)]:(Ee&&(we=Rw(R,D),we[Ew(F)]=oe),oe)},"get"),kill:s(function(D,F){if(D&&D[F])try{delete D[F]}catch{}},"kill")};return R}s(uf,"createElmNodeData");function Lh(w){return w&&re(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(Lh,"_isConfigDefaults");function kw(w,R,D){var F,oe=D.dfVal||Y;if(R&&D.fb){var Ee=D.fb;fe(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Ma];we++){var Qe=Ee[we],Xe=R[Qe];if(oe(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],oe(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),oe(F))break}}return!oe(F)&&oe(D.v)&&(F=D.v),F}s(kw,"_getDefault");function Fh(w,R,D){var F=D;if(D&&Lh(D)&&(F=kw(w,R,D)),F){Lh(F)&&(F=Fh(w,R,F));var oe;fe(F)?(oe=[],oe[Ma]=F[Ma]):Ih(F)&&(oe={}),oe&&(pt(F,function(Ee,we){we&&Lh(we)&&(we=Fh(w,R,we)),oe[Ee]=we}),F=oe)}return F}s(Fh,"_resolveDefaultValue");function Mh(w,R,D,F){var oe,Ee,we,Qe=F,Xe,mt,ir,wn;Lh(Qe)?(oe=Qe.isVal,Ee=Qe.set,ir=Qe.rdOnly,wn=Qe.blkVal,Xe=Qe.mrg,mt=Qe.ref,!mt&&ie(mt)&&(mt=!!Xe),we=kw(w,R,Qe)):we=F,wn&&w.blkVal(R,D);var Gn,cr=!0,br=R[D];(br||!q(br))&&(Gn=br,cr=!1,oe&&Gn!==we&&!oe(Gn)&&(Gn=we,cr=!0),Ee&&(Gn=Ee(Gn,we,R),cr=Gn===we)),cr?we?Gn=Fh(w,R,we):Gn=we:(Ih(Gn)||fe(we))&&Xe&&we&&(Ih(we)||fe(we))&&pt(we,function(Un,_n){Mh(w,Gn,Un,_n)}),w.set(R,D,Gn),mt&&w.ref(R,D),ir&&w.rdOnly(R,D)}s(Mh,"_applyDefaultValue");var nc=Ws("[[ai_dynCfg_1]]"),i3=Ws("[[ai_blkDynCfg_1]]"),hE=Ws("[[ai_frcDynCfg_1]]");function o3(w){if(w){var R;if(fe(w)?(R=[],R[Ma]=w[Ma]):Ih(w)&&(R={}),R)return pt(w,function(D,F){R[D]=o3(F)}),R}return w}s(o3,"_cfgDeepCopy");function s3(w){if(w){var R=w[nc]||w;if(R.cfg&&(R.cfg===w||R.cfg[nc]===R))return R}return null}s(s3,"getDynamicConfigHandler");function wC(w){if(w&&(Ih(w)||fe(w)))try{w[i3]=!0}catch{}return w}s(wC,"blockDynamicConversion");function Qh(w,R,D){var F=!1;return D&&!w[R.blkVal]&&(F=D[hE],!F&&!D[i3]&&(F=Ih(D)||fe(D))),F}s(Qh,"_canMakeDynamic");function Yd(w){Pe("InvalidAccess:"+w)}s(Yd,"throwInvalidAccess");var yN=["push","pop","shift","unshift","splice"],Gp=s(function(w,R,D,F){w&&w[sE](3,108,"".concat(D," [").concat(R,"] failed - ")+ne(F))},"_throwDynamicError");function a3(w,R,D){fe(R)&&El(yN,function(F){var oe=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=oe[EK](this,Ee);return JA(w,R,D,"Patching"),Qe}})}s(a3,"_patchArray");function Hp(w,R){var D=Ne(w,R);return D&&D.get}s(Hp,"_getOwnPropGetter");function CN(w,R,D,F){var oe={n:D,h:[],trk:s(function(mt){mt&&mt.fn&&(Fp(oe.h,mt)===-1&&oe.h[ji](mt),w.trk(mt,oe))},"trk"),clr:s(function(mt){var ir=Fp(oe.h,mt);ir!==-1&&oe.h[qA](ir,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||Qh(Qe,w,F),F&&!F[nc]&&we&&(F=JA(w,F,D,"Converting")),Ee=!1);var mt=w.act;return mt&&oe.trk(mt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(oe)},"chng")};function Xe(mt){if(F!==mt){Qe[w.ro]&&!w.upd&&Yd("["+D+"] is read-only:"+ne(R)),Ee&&(we=we||Qh(Qe,w,F),Ee=!1);var ir=we&&Qe[w.rf];if(we)if(ir){pt(F,function(Gn){F[Gn]=mt?mt[Gn]:rc});try{pt(mt,function(Gn,cr){_C(w,F,Gn,cr)}),mt=F}catch(Gn){Gp((w.hdlr||{})[_h],D,"Assigning",Gn),we=!1}}else F&&F[nc]&&pt(F,function(Gn){var cr=Hp(F,Gn);if(cr){var br=cr[w.prop];br&&br.chng()}});if(mt!==F){var wn=mt&&Qh(Qe,w,mt);!ir&&wn&&(mt=JA(w,mt,D,"Converting")),F=mt,we=wn}w.add(oe)}}s(Xe,"_setProperty"),ce(R,oe.n,{g:Qe,s:Xe})}s(CN,"_createDynamicProperty");function _C(w,R,D,F){if(R){var oe=Hp(R,D),Ee=oe&&!!oe[w.prop];Ee?R[D]=F:CN(w,R,D,F)}return R}s(_C,"_setDynamicProperty");function l3(w,R,D,F){if(R){var oe=Hp(R,D),Ee=oe&&!!oe[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{wC(R)}catch(mt){Gp((w.hdlr||{})[_h],D,"Blocking",mt)}try{_C(w,R,D,R[D]),oe=Hp(R,D)}catch(mt){Gp((w.hdlr||{})[_h],D,"State",mt)}}we&&(oe[w.rf]=we),Qe&&(oe[w.ro]=Qe),Xe&&(oe[w.blkVal]=!0)}return R}s(l3,"_setDynamicPropertyState");function JA(w,R,D,F){try{pt(R,function(oe,Ee){_C(w,R,oe,Ee)}),R[nc]||(bt(R,nc,{get:s(function(){return w.hdlr},"get")}),a3(w,R,D))}catch(oe){Gp((w.hdlr||{})[_h],D,F,oe)}return R}s(JA,"_makeDynamicObject");var XA="[[ai_",Xu="]]";function xN(w){var R=On(XA+"get"+w.uid+Xu),D=On(XA+"ro"+w.uid+Xu),F=On(XA+"rf"+w.uid+Xu),oe=On(XA+"blkVal"+w.uid+Xu),Ee=On(XA+"dtl"+w.uid+Xu),we=null,Qe=null,Xe;function mt(cr,br){var Un=Xe.act;try{Xe.act=cr,cr&&cr[Ee]&&(El(cr[Ee],function(hi){hi.clr(cr)}),cr[Ee]=[]),br({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(hi){var _n=w[_h];throw _n&&_n[sE](1,107,ne(hi)),hi}finally{Xe.act=Un||null}}s(mt,"_useHandler");function ir(){if(we){var cr=we;we=null,Qe&&Qe[Hk](),Qe=null;var br=[];if(El(cr,function(Un){if(Un&&(Un[Ee]&&(El(Un[Ee],function(_n){_n.clr(Un)}),Un[Ee]=null),Un.fn))try{mt(Un,Un.fn)}catch(_n){br[ji](_n)}}),we)try{ir()}catch(Un){br[ji](Un)}br[Ma]>0&&IK("Watcher error(s): ",br)}}s(ir,"_notifyWatchers");function wn(cr){if(cr&&cr.h[Ma]>0){we||(we=[]),Qe||(Qe=Gk(function(){Qe=null,ir()},0));for(var br=0;br<cr.h[Ma];br++){var Un=cr.h[br];Un&&Fp(we,Un)===-1&&we[ji](Un)}}}s(wn,"_addWatcher");function Gn(cr,br){if(cr){var Un=cr[Ee]=cr[Ee]||[];Fp(Un,br)===-1&&Un[ji](br)}}return s(Gn,"_trackHandler"),Xe={prop:R,ro:D,rf:F,blkVal:oe,hdlr:w,add:wn,notify:ir,use:mt,trk:Gn},Xe}s(xN,"_createState");function PK(w,R){var D={fn:R,rm:s(function(){D.fn=null,w=null,R=null},"rm")};return ce(D,"toJSON",{v:s(function(){return"WatcherHandler"+(D.fn?"":"[X]")},"v")}),w.use(D,R),D}s(PK,"_createAndUseHandler");function vN(w,R,D){var F=s3(R);if(F)return F;var oe=Wp("dyncfg",!0),Ee=R&&D!==!1?R:o3(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(_n,hi,no){try{_n=_C(we,_n,hi,no)}catch(Bi){Gp(w,hi,"Setting value",Bi)}return _n[hi]}s(Xe,"_setValue");function mt(_n){return PK(we,_n)}s(mt,"_watch");function ir(_n,hi){we.use(null,function(no){var Bi=we.upd;try{ie(hi)||(we.upd=hi),_n(no)}finally{we.upd=Bi}})}s(ir,"_block");function wn(_n,hi){var no;return l3(we,_n,hi,(no={},no[0]=!0,no))[hi]}s(wn,"_ref");function Gn(_n,hi){var no;return l3(we,_n,hi,(no={},no[1]=!0,no))[hi]}s(Gn,"_rdOnly");function cr(_n,hi){var no;return l3(we,_n,hi,(no={},no[2]=!0,no))[hi]}s(cr,"_blkPropValue");function br(_n,hi){return hi&&pt(hi,function(no,Bi){Mh(Un,_n,no,Bi)}),_n}s(br,"_applyDefaults");var Un={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:br,watch:mt,ref:wn,rdOnly:Gn,blkVal:cr,_block:ir};return ce(Un,"uid",{c:!1,e:!1,w:!1,v:oe}),we=xN(Un),JA(we,Ee,"config","Creating"),Un}s(vN,"_createDynamicHandler");function bN(w,R){w?(w[wh](R),w[sE](2,108,R)):Yd(R)}s(bN,"_logInvalidAccess");function gE(w,R,D,F){var oe=vN(D,w||{},F);return R&&oe.setDf(oe.cfg,R),oe}s(gE,"createDynamicConfig");function EN(w,R,D){var F=w[nc]||w;return F.cfg&&(F.cfg===w||F.cfg[nc]===F)?F[sN](R):(bN(D,fN+ne(w)),gE(w,null,D)[sN](R))}s(EN,"onConfigChange");var Bw=null;function IN(){var w=M("Microsoft");return w&&(Bw=w.ApplicationInsights),Bw}s(IN,"_getExtensionNamespace");function NK(w){var R=Bw;return!R&&w.disableDbgExt!==!0&&(R=Bw||IN()),R?R.ChromeDbgExt:null}s(NK,"getDebugExt");var SC,Dw="warnToConsole",TN="AI (Internal): ",wN="AI: ",LK="AITR_",FK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},_N=(SC={},SC[0]=null,SC[1]="errorToConsole",SC[2]=Dw,SC[3]="debugToConsole",SC);function SN(w){return w?'"'+w[sC](/\"/g,Gs)+'"':Gs}s(SN,"_sanitizeDiagnosticText");function Pw(w,R){var D=Tw();if(D){var F="log";D[w]&&(F=w),pe(D[F])&&D[F](R)}}s(Pw,"_logToConsole");var Nw=function(){function w(R,D,F,oe){F===void 0&&(F=!1);var Ee=this;Ee[jk]=R,Ee[WA]=(F?wN:TN)+R;var we=Gs;Vi()&&(we=xC().stringify(oe));var Qe=(D?" message:"+SN(D):Gs)+(oe?" props:"+SN(we):Gs);Ee[WA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function MK(w,R){return(w||{})[_h]||new Lw(R)}s(MK,"safeGetLogger");var Lw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var D=0,F={},oe,Ee,we,Qe,Xe;uE(w,this,function(mt){Xe=wn(R||{}),mt.consoleLoggingLevel=function(){return oe},mt[sE]=function(br,Un,_n,hi,no){no===void 0&&(no=!1);var Bi=new Nw(Un,_n,no,hi);if(Qe)throw ne(Bi);var Qa=_N[br]||Dw;if(ie(Bi[WA]))cr("throw"+(br===1?"Critical":"Warning"),Bi);else{if(no){var ox=+Bi[jk];!F[ox]&&oe>=br&&(mt[Qa](Bi[WA]),F[ox]=!0)}else oe>=br&&mt[Qa](Bi[WA]);ir(br,Bi)}},mt.debugToConsole=function(br){Pw("debug",br),cr("warning",br)},mt[wh]=function(br){Pw("warn",br),cr("warning",br)},mt.errorToConsole=function(br){Pw("error",br),cr("error",br)},mt.resetInternalMessageCount=function(){D=0,F={}},mt.logInternalMessage=ir,mt[pu]=function(br){Xe&&Xe.rm(),Xe=null};function ir(br,Un){if(!Gn()){var _n=!0,hi=LK+Un[jk];if(F[hi]?_n=!1:F[hi]=!0,_n&&(br<=Ee&&(mt.queue[ji](Un),D++,cr(br===1?"error":"warn",Un)),D===we)){var no="Internal events throttle limit per PageView reached for this app.",Bi=new Nw(23,no,!1);mt.queue[ji](Bi),br===1?mt.errorToConsole(no):mt[wh](no)}}}s(ir,"_logInternalMessage");function wn(br){return EN(gE(br,FK,mt).cfg,function(Un){var _n=Un.cfg;oe=_n[lN],Ee=_n.loggingLevelTelemetry,we=_n.maxMessageLimit,Qe=_n.enableDebug})}s(wn,"_setDefaultsFromConfig");function Gn(){return D>=we}s(Gn,"_areInternalMessagesThrottled");function cr(br,Un){var _n=NK(R||{});_n&&_n[Vk]&&_n[Vk](br,Un)}s(cr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function Fw(w){return w||new Lw}s(Fw,"_getLogger");function mu(w,R,D,F,oe,Ee){Ee===void 0&&(Ee=!1),Fw(w)[sE](R,D,F,oe,Ee)}s(mu,"_throwInternal");function Mw(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Gs,D,F=0;F<4;F++)D=TC(),R+=w[D&15]+w[D>>4&15]+w[D>>8&15]+w[D>>12&15]+w[D>>16&15]+w[D>>20&15]+w[D>>24&15]+w[D>>28&15];var oe=w[8+(TC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+oe+Jt(R,16,3)+Jt(R,19,12)}s(Mw,"generateW3CId");var RC=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,c3="00",Zu="ff",mi="00000000000000000000000000000000",jp="0000000000000000",Aa=1;function Kd(w,R,D){return w&&w[Ma]===R&&w!==D?!!w.match(/^[\da-f]*$/i):!1}s(Kd,"_isValid");function Qw(w,R,D){return Kd(w,R)?w:D}s(Qw,"_formatValue");function ZA(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Ma]<2;)R="0"+R;return R}s(ZA,"_formatFlags");function kC(w,R,D,F){return{version:Kd(F,2,Zu)?F:c3,traceId:BC(w)?w:Mw(),spanId:DC(R)?R:Nr(Mw(),16),traceFlags:D>=0&&D<=255?D:1}}s(kC,"createTraceParent");function ed(w,R){if(!w||(fe(w)&&(w=w[0]||""),!w||!te(w)||w[Ma]>8192))return null;if(w.indexOf(",")!==-1){var D=w[$k](",");w=D[R>0&&D[Ma]>R?R:0]}var F=RC.exec(Rc(w));return!F||F[1]===Zu||F[2]===mi||F[3]===jp?null:{version:(F[1]||Gs)[oE](),traceId:(F[2]||Gs)[oE](),spanId:(F[3]||Gs)[oE](),traceFlags:parseInt(F[4],16)}}s(ed,"parseTraceParent");function BC(w){return Kd(w,32,mi)}s(BC,"isValidTraceId");function DC(w){return Kd(w,16,jp)}s(DC,"isValidSpanId");function PC(w){return!(!w||!Kd(w[aN],2,Zu)||!Kd(w.traceId,32,mi)||!Kd(w.spanId,16,jp)||!Kd(ZA(w[fw]),2))}s(PC,"isValidTraceParent");function Ow(w){return PC(w)?(w[fw]&Aa)===Aa:!1}s(Ow,"isSampledFlag");function e1(w){if(w){var R=ZA(w[fw]);Kd(R,2)||(R="01");var D=w[aN]||c3;return D!=="00"&&D!=="ff"&&(D=c3),"".concat(D.toLowerCase(),"-").concat(Qw(w.traceId,32,mi).toLowerCase(),"-").concat(Qw(w.spanId,16,jp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(e1,"formatTraceParent");function u3(w){var R="traceparent",D=ed(ww(R),w);return D||(D=ed(sf(R),w)),D}s(u3,"findW3cTraceParent");function d3(w){var R=w.getElementsByTagName("script"),D=[];return El(R,function(F){var oe=F[zk]("src");if(oe){var Ee=F[zk]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[zk]("referrerpolicy"),mt={url:oe};Ee&&(mt.crossOrigin=Ee),we&&(mt.async=we),Qe&&(mt.defer=Qe),Xe&&(mt.referrerPolicy=Xe),D[ji](mt)}}),D}s(d3,"findAllScripts");var Uw="on",AE="attachEvent",qw="addEventListener",Ww="detachEvent",RN="removeEventListener",f3="events";Wp("aiEvtPageHide"),Wp("aiEvtPageShow");var QK=/\.[\.]+/g,OK=/[\.]+$/,Gw=1,NC=uf("events"),Tl=/^([^.]*)(?:\.(.+)|)/;function yE(w){return w&&w[sC]?w[sC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Gs):w}s(yE,"_normalizeNamespace");function ll(w,R){if(R){var D=Gs;fe(R)?(D=Gs,El(R,function(oe){oe=yE(oe),oe&&(oe[0]!=="."&&(oe="."+oe),D+=oe)})):D=yE(R),D&&(D[0]!=="."&&(D="."+D),w=(w||Gs)+D)}var F=Tl.exec(w||Gs)||[];return{type:F[1],ns:(F[2]||Gs).replace(QK,".").replace(OK,Gs)[$k](".").sort().join(".")}}s(ll,"_getEvtNamespace");function Oh(w,R,D){D===void 0&&(D=!0);var F=NC.get(w,f3,{},D),oe=F[R];return oe||(oe=F[R]=[]),oe}s(Oh,"_getRegisteredEvents");function kN(w,R,D,F){w&&R&&R[Sh]&&(w[RN]?w[RN](R[Sh],D,F):w[Ww]&&w[Ww](Uw+R[Sh],D))}s(kN,"_doDetach");function UK(w,R,D,F){var oe=!1;return w&&R&&R[Sh]&&D&&(w[qw]?(w[qw](R[Sh],D,F),oe=!0):w[AE]&&(w[AE](Uw+R[Sh],D),oe=!0)),oe}s(UK,"_doAttach");function CE(w,R,D,F){for(var oe=R[Ma];oe--;){var Ee=R[oe];Ee&&(!D.ns||D.ns===Ee[uN].ns)&&(!F||F(Ee))&&(kN(w,Ee[uN],Ee.handler,Ee.capture),R[qA](oe,1))}}s(CE,"_doUnregister");function p3(w,R,D){if(R[Sh])CE(w,Oh(w,R[Sh]),R,D);else{var F=NC.get(w,f3,{});pt(F,function(oe,Ee){CE(w,Ee,R,D)}),Ot(F)[Ma]===0&&NC.kill(w,f3)}}s(p3,"_unregisterEvents");function qK(w,R){var D;return R?(fe(R)?D=[w].concat(R):D=[w,R],D=ll("xx",D).ns[$k](".")):D=w,D}s(qK,"mergeEvtNamespace");function m3(w,R,D,F,oe){oe===void 0&&(oe=!1);var Ee=!1;if(w)try{var we=ll(R,F);if(Ee=UK(w,we,D,oe),Ee&&NC.accept(w)){var Qe={guid:Gw++,evtName:we,handler:D,capture:oe};Oh(w,we.type)[ji](Qe)}}catch{}return Ee}s(m3,"eventOn");function BN(w,R,D,F,oe){if(oe===void 0&&(oe=!1),w)try{var Ee=ll(R,F),we=!1;p3(w,Ee,function(Qe){return Ee.ns&&!D||Qe.handler===D?(we=!0,!0):!1}),we||kN(w,Ee,D,oe)}catch{}}s(BN,"eventOff");var Hw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",DN="sampleRate",jw="ProcessLegacy",PN="http.method",h3="https://dc.services.visualstudio.com",xE="/v2/track",df="not_specified",g3="iKey",NN=bK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Uh="split",Tn="length",LC="toLowerCase",t1="ingestionendpoint",r1="toString",A3="removeItem",vE="message",FC="count",Vw="preTriggerDate",y3="getUTCDate",$w="stringify",MC="pathname",n1="match",C3="correlationHeaderExcludePatterns",td="name",QC="extensionConfig",ff="properties",kc="measurements",OC="sizeInBytes",bE="typeName",UC="exceptions",EE="severityLevel",qC="problemGroup",hu="parsedStack",zw="hasFullStack",Yw="assembly",Jd="fileName",WC="line",qh="aiDataContract",IE="duration";function x3(w,R,D){var F=R[Tn],oe=v3(w,R);if(oe[Tn]!==F){for(var Ee=0,we=oe;D[we]!==void 0;)Ee++,we=rr(oe,0,147)+LN(Ee);oe=we}return oe}s(x3,"dataSanitizeKeyAndAddUniqueness");function v3(w,R){var D;return R&&(R=Rc(tt(R)),R[Tn]>150&&(D=rr(R,0,150),mu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),D||R}s(v3,"dataSanitizeKey");function cl(w,R,D){D===void 0&&(D=1024);var F;return R&&(D=D||1024,R=Rc(tt(R)),R[Tn]>D&&(F=rr(R,0,D),mu(w,2,61,"string value is too long. It has been truncated to "+D+" characters.",{value:R},!0))),F||R}s(cl,"dataSanitizeString");function pf(w,R){return E3(w,R,2048,66)}s(pf,"dataSanitizeUrl");function Kw(w,R){var D;return R&&R[Tn]>32768&&(D=rr(R,0,32768),mu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),D||R}s(Kw,"dataSanitizeMessage");function b3(w,R){var D;if(R){var F=""+R;F[Tn]>32768&&(D=rr(F,0,32768),mu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return D||R}s(b3,"dataSanitizeException");function Vp(w,R){if(R){var D={};pt(R,function(F,oe){if(re(oe)&&Vi())try{oe=xC()[$w](oe)}catch(Ee){mu(w,2,49,"custom property is not valid",{exception:Ee},!0)}oe=cl(w,oe,8192),F=x3(w,F,D),D[F]=oe}),R=D}return R}s(Vp,"dataSanitizeProperties");function rd(w,R){if(R){var D={};pt(R,function(F,oe){F=x3(w,F,D),D[F]=oe}),R=D}return R}s(rd,"dataSanitizeMeasurements");function GC(w,R){return R&&E3(w,R,128,69)[r1]()}s(GC,"dataSanitizeId");function E3(w,R,D,F){var oe;return R&&(R=Rc(tt(R)),R[Tn]>D&&(oe=rr(R,0,D),mu(w,2,F,"input is too long, it has been truncated to "+D+" characters.",{data:R},!0))),oe||R}s(E3,"dataSanitizeInput");function LN(w){var R="00"+w;return Jt(R,R[Tn]-3)}s(LN,"dsPadNumber");var I3=ke()||{},FN=0,WK=[null,null,null,null,null];function HC(w){var R=FN,D=WK,F=D[R];return I3.createElement?D[R]||(F=D[R]=I3.createElement("a")):F={host:QN(w,!0)},F.href=w,R++,R>=D[Tn]&&(R=0),FN=R,F}s(HC,"urlParseUrl");function GK(w){var R,D=HC(w);return D&&(R=D.href),R}s(GK,"urlGetAbsoluteUrl");function HK(w){var R,D=HC(w);return D&&(R=D[MC]),R}s(HK,"urlGetPathName");function MN(w,R){return w?w.toUpperCase()+" "+R:R}s(MN,"urlGetCompleteUrl");function QN(w,R){var D=$p(w,R)||"";if(D){var F=D[n1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Tn]>3&&te(F[2])&&F[2][Tn]>0)return F[2]+(F[3]||"")}return D}s(QN,"urlParseHost");function $p(w,R){var D=null;if(w){var F=w[n1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Tn]>2&&te(F[2])&&F[2][Tn]>0&&(D=F[2]||"",R&&F[Tn]>2)){var oe=(F[1]||"")[LC](),Ee=F[3]||"";(oe==="http"&&Ee===":80"||oe==="https"&&Ee===":443")&&(Ee=""),D+=Ee}}return D}s($p,"urlParseFullHost");var ON=[h3+xE,"https://breeze.aimon.applicationinsights.io"+xE,"https://dc-int.services.visualstudio.com"+xE],jC="cid-v1:";function UN(w){return Fp(ON,w[LC]())!==-1}s(UN,"isInternalApplicationInsightsEndpoint");function T3(w){jC=w}s(T3,"correlationIdSetPrefix");function w3(){return jC}s(w3,"correlationIdGetPrefix");function Wh(w,R,D){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[C3]){for(var F=0;F<w.correlationHeaderExcludePatterns[Tn];F++)if(w[C3][F].test(R))return!1}var oe=HC(R).host[LC]();if(oe&&(qr(oe,":443")!==-1||qr(oe,":80")!==-1)&&(oe=($p(R,!0)||"")[LC]()),(!w||!w.enableCorsCorrelation)&&oe&&oe!==D)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(El(Ee,function(mt){var ir=new RegExp(mt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||ir.test(oe)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[Tn]===0)return!0;for(var F=0;F<Qe[Tn];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(oe))return!1}return oe&&oe[Tn]>0}s(Wh,"correlationIdCanIncludeCorrelationHeader");function qN(w){if(w){var R=WN(w,NN[1]);if(R&&R!==jC)return R}}s(qN,"correlationIdGetCorrelationContext");function WN(w,R){if(w)for(var D=w[Uh](","),F=0;F<D[Tn];++F){var oe=D[F][Uh]("=");if(oe[Tn]===2&&oe[0]===R)return oe[1]}}s(WN,"correlationIdGetCorrelationContextValue");function GN(w,R,D,F){var oe,Ee=F,we=F;if(R&&R[Tn]>0){var Qe=HC(R);if(oe=Qe.host,!Ee)if(Qe[MC]!=null){var Xe=Qe.pathname[Tn]===0?"/":Qe[MC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[MC],Ee=cl(w,D?D+" "+Xe:Xe)}else Ee=cl(w,R)}else oe=F,Ee=F;return{target:oe,name:Ee,data:we}}s(GN,"AjaxHelperParseDependencyPath");function jK(){var w=nE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return QA()}s(jK,"dateTimeUtilsNow");function VK(w,R){var D=null;return w!==0&&R!==0&&!q(w)&&!q(R)&&(D=R-w),D}s(VK,"dateTimeUtilsDuration");function _3(w,R){var D=w||{};return{getName:s(function(){return D[td]},"getName"),setName:s(function(F){R&&R.setName(F),D[td]=F},"setName"),getTraceId:s(function(){return D.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),BC(F)&&(D.traceID=F)},"setTraceId"),getSpanId:s(function(){return D.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),DC(F)&&(D.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return D.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),D.traceFlags=F},"setTraceFlags")}}s(_3,"createDistributedTraceContextFromTrace");var VC=iE({LocalStorage:0,SessionStorage:1}),$K=iE({AI:0,AI_AND_W3C:1,W3C:2}),TE=iE({Normal:1,Critical:2}),Gh=void 0,Xd=void 0,HN="";function $C(){return Jw()?zC(VC.LocalStorage):null}s($C,"_getLocalStorageObject");function zC(w){try{if(q(Z()))return null;var R=new Date()[r1](),D=M(w===VC.LocalStorage?"localStorage":"sessionStorage"),F=HN+R;D.setItem(F,R);var oe=D.getItem(F)!==R;if(D[A3](F),!oe)return D}catch{}return null}s(zC,"_getVerifiedStorageObject");function YC(){return zp()?zC(VC.SessionStorage):null}s(YC,"_getSessionStorageObject");function wE(){Gh=!1,Xd=!1}s(wE,"utlDisableStorage");function _E(w){HN=w||""}s(_E,"utlSetStoragePrefix");function zK(){Gh=Jw(!0),Xd=zp(!0)}s(zK,"utlEnableStorage");function Jw(w){return(w||Gh===void 0)&&(Gh=!!zC(VC.LocalStorage)),Gh}s(Jw,"utlCanUseLocalStorage");function jN(w,R){var D=$C();if(D!==null)try{return D.getItem(R)}catch(F){Gh=!1,mu(w,2,1,"Browser failed read of local storage. "+Bh(F),{exception:ne(F)})}return null}s(jN,"utlGetLocalStorage");function VN(w,R,D){var F=$C();if(F!==null)try{return F.setItem(R,D),!0}catch(oe){Gh=!1,mu(w,2,3,"Browser failed write to local storage. "+Bh(oe),{exception:ne(oe)})}return!1}s(VN,"utlSetLocalStorage");function nd(w,R){var D=$C();if(D!==null)try{return D[A3](R),!0}catch(F){Gh=!1,mu(w,2,5,"Browser failed removal of local storage item. "+Bh(F),{exception:ne(F)})}return!1}s(nd,"utlRemoveStorage");function zp(w){return(w||Xd===void 0)&&(Xd=!!zC(VC.SessionStorage)),Xd}s(zp,"utlCanUseSessionStorage");function KC(){var w=[];return zp()&&pt(M("sessionStorage"),function(R){w.push(R)}),w}s(KC,"utlGetSessionStorageKeys");function $N(w,R){var D=YC();if(D!==null)try{return D.getItem(R)}catch(F){Xd=!1,mu(w,2,2,"Browser failed read of session storage. "+Bh(F),{exception:ne(F)})}return null}s($N,"utlGetSessionStorage");function YK(w,R,D){var F=YC();if(F!==null)try{return F.setItem(R,D),!0}catch(oe){Xd=!1,mu(w,2,4,"Browser failed write to session storage. "+Bh(oe),{exception:ne(oe)})}return!1}s(YK,"utlSetSessionStorage");function zN(w,R){var D=YC();if(D!==null)try{return D[A3](R),!0}catch(F){Xd=!1,mu(w,2,6,"Browser failed removal of session storage item. "+Bh(F),{exception:ne(F)})}return!1}s(zN,"utlRemoveSessionStorage");var KK="appInsightsThrottle",JK=function(){function w(R,D){var F=this,oe,Ee,we,Qe,Xe,mt,ir,wn=!1,Gn=!1;br(),F._getDbgPlgTargets=function(){return[ir]},F.getConfig=function(){return we},F.canThrottle=function(It){var Br=q3(It),nn=Un(It);return no(nn,oe,Br)},F.isTriggered=function(It){return d7(It)},F.isReady=function(){return wn},F.flush=function(It){try{var Br=f7(It);if(Br&&Br[Tn]>0){var nn=Br.slice(0);return ir[It]=[],El(nn,function(Lo){cr(Lo.msgID,Lo[vE],Lo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(ir){var It=!0;return pt(ir,function(Br){var nn=F.flush(parseInt(Br));It=It&&nn}),It}}catch{}return!1},F.onReadyState=function(It,Br){return Br===void 0&&(Br=!0),wn=q(It)?!0:It,wn&&Br?F.flushAll():null},F.sendMessage=function(It,Br,nn){return cr(It,Br,nn,!0)};function cr(It,Br,nn,Lo){if(wn){var Oa=hJ(It);if(!Oa)return;var Hs=Un(It),Ua=q3(It),o1=no(Hs,oe,Ua),zh=!1,sx=0,p7=d7(It);try{o1&&!p7?(sx=Ar(Hs.limit.maxSendNumber,Ua[FC]+1),Ua[FC]=0,zh=!0,Xe[It]=!0,Ua[Vw]=new Date):(Xe[It]=o1,Ua[FC]+=1);var m7=Bi(It);U3(Ee,m7,Ua);for(var d_=0;d_<sx;d_++)u7(It,Ee,Br,nn)}catch{}return{isThrottled:zh,throttleNum:sx}}else if(Lo){var gJ=f7(It);gJ.push({msgID:It,message:Br,severity:nn})}return null}s(cr,"_flushMessage");function br(){Ee=MK(R),Xe={},Qe={},ir={},we={},_n(109),mt=n3(D)?D:"",R.addUnloadHook(EN(R.config,function(It){var Br=It.cfg;oe=Jw();var nn=Br.throttleMgrCfg||{};pt(nn,function(Lo,Oa){_n(parseInt(Lo),Oa)})}))}s(br,"_initConfig");function Un(It){return we[It]||we[109]}s(Un,"_getCfgByKey");function _n(It,Br){var nn,Lo;try{var Oa=Br||{},Hs={};Hs.disabled=!!Oa.disabled;var Ua=Oa.interval||{};Gn=Ua?.daysOfMonth&&Ua?.daysOfMonth[Tn]>0,Hs.interval=hi(Ua);var o1={samplingRate:((nn=Oa.limit)===null||nn===void 0?void 0:nn.samplingRate)||100,maxSendNumber:((Lo=Oa.limit)===null||Lo===void 0?void 0:Lo.maxSendNumber)||1};Hs.limit=o1,we[It]=Hs}catch{}}s(_n,"_setCfgByKey");function hi(It){It=It||{};var Br=It?.monthInterval,nn=It?.dayInterval;return q(Br)&&q(nn)&&(It.monthInterval=3,Gn||(It.daysOfMonth=[28],Gn=!0)),It={monthInterval:It?.monthInterval,dayInterval:It?.dayInterval,daysOfMonth:It?.daysOfMonth},It}s(hi,"_getIntervalConfig");function no(It,Br,nn){if(It&&!It.disabled&&Br&&n3(nn)){var Lo=LE(),Oa=nn.date,Hs=It.interval,Ua=1;if(Hs?.monthInterval){var o1=(Lo.getUTCFullYear()-Oa.getUTCFullYear())*12+Lo.getUTCMonth()-Oa.getUTCMonth();Ua=u_(Hs.monthInterval,0,o1)}var zh=1;if(Gn)zh=Fp(Hs.daysOfMonth,Lo[y3]());else if(Hs?.dayInterval){var sx=Eh((Lo.getTime()-Oa.getTime())/864e5);zh=u_(Hs.dayInterval,0,sx)}return Ua>=0&&zh>=0}return!1}s(no,"_canThrottle");function Bi(It,Br){var nn=n3(Br)?Br:"";return It?KK+nn+"-"+It:null}s(Bi,"_getLocalStorageName");function Qa(It){try{if(It){var Br=new Date;return It.getUTCFullYear()===Br.getUTCFullYear()&&It.getUTCMonth()===Br.getUTCMonth()&&It[y3]()===Br[y3]()}}catch{}return!1}s(Qa,"_isTriggeredOnCurDate");function ox(It,Br,nn){try{var Lo={date:LE(),count:0};if(It){var Oa=JSON.parse(It),Hs={date:LE(Oa.date)||Lo.date,count:Oa[FC]||Lo[FC],preTriggerDate:Oa.preTriggerDate?LE(Oa[Vw]):void 0};return Hs}else return U3(Br,nn,Lo),Lo}catch{}return null}s(ox,"_getLocalStorageObj");function LE(It){try{if(It){var Br=new Date(It);if(!isNaN(Br.getDate()))return Br}else return new Date}catch{}return null}s(LE,"_getThrottleDate");function U3(It,Br,nn){try{return VN(It,Br,Rc(JSON[$w](nn)))}catch{}return!1}s(U3,"_resetLocalStorage");function u_(It,Br,nn){return It<=0?1:nn>=Br&&(nn-Br)%It==0?Eh((nn-Br)/It)+1:-1}s(u_,"_checkInterval");function u7(It,Br,nn,Lo){mu(Br,Lo||1,It,nn)}s(u7,"_sendMessage");function hJ(It){try{var Br=Un(It);return _w(1e6)<=Br.limit.samplingRate}catch{}return!1}s(hJ,"_canSampledIn");function q3(It){try{var Br=Qe[It];if(!Br){var nn=Bi(It,mt);Br=ox(jN(Ee,nn),Ee,nn),Qe[It]=Br}return Qe[It]}catch{}return null}s(q3,"_getLocalStorageObjByKey");function d7(It){var Br=Xe[It];if(q(Br)){Br=!1;var nn=q3(It);nn&&(Br=Qa(nn[Vw])),Xe[It]=Br}return Xe[It]}s(d7,"_isTrigger");function f7(It){return ir=ir||{},q(ir[It])&&(ir[It]=[]),ir[It]}s(f7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),S3=";",mf="=";function Xw(w){if(!w)return{};var R=w[Uh](S3),D=ia(R,function(oe,Ee){var we=Ee[Uh](mf);if(we[Tn]===2){var Qe=we[0][LC](),Xe=we[1];oe[Qe]=Xe}return oe},{});if(Ot(D)[Tn]>0){if(D.endpointsuffix){var F=D.location?D.location+".":"";D[t1]=D[t1]||"https://"+F+"dc."+D.endpointsuffix}D[t1]=D[t1]||h3,nC(D[t1],"/")&&(D[t1]=D[t1].slice(0,-1))}return D}s(Xw,"parseConnectionString");var Zw={parse:Xw},e_=function(){function w(R,D,F){var oe=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[td]=cl(R,F)||df,Ee.data=D,Ee.time=Up(new Date),Ee[qh]={time:1,iKey:1,name:1,sampleRate:s(function(){return oe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),XK=function(){function w(R,D,F,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[td]=cl(R,D)||df,Ee[ff]=Vp(R,F),Ee[kc]=rd(R,oe)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),ZK=58,YN=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,eJ=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,JC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,KN=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,tJ=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,rJ=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,nJ=/([^\(\s\n]+):([0-9]+)$/,JN="<no_method>",XC="error",gu="stack",SE="stackDetails",t_="errorSrc",RE="message",kE="description",R3=[{re:eJ,len:5,m:1,fn:2,ln:3,col:4},{chk:r_,pre:Tr,re:JC,len:4,m:1,fn:2,ln:3},{re:KN,len:3,m:1,fn:2,hdl:B3},{re:tJ,len:2,fn:1,hdl:B3}];function Tr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Tr,"_scrubAnonymous");function r_(w){return qr(w,"[native")<0}s(r_,"_ignoreNative");function BE(w,R){var D=w;return D&&!te(D)&&(JSON&&JSON[$w]?(D=JSON[$w](w),R&&(!D||D==="{}")&&(pe(w[r1])?D=w[r1]():D=""+w)):D=""+w+" - (Missing JSON.stringify)"),D||""}s(BE,"_stringify");function Hh(w,R){var D=w;return w&&(D&&!te(D)&&(D=w[RE]||w[kE]||D),D&&!te(D)&&(D=BE(D,!0)),w.filename&&(D=D+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&qr(D||"",R)===-1&&(D=R+": "+D),D||""}s(Hh,"_formatMessage");function XN(w){try{if(re(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(XN,"_isExceptionDetailsInternal");function ZN(w){try{if(re(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(ZN,"_isExceptionInternal");function n_(w){return w&&w.src&&te(w.src)&&w.obj&&fe(w.obj)}s(n_,"_isStackDetails");function Yp(w){var R=w||"";te(R)||(te(R[gu])?R=R[gu]:R=""+R);var D=R[Uh](`
`);return{src:R,obj:D}}s(Yp,"_convertStackObj");function e7(w){for(var R=[],D=w[Uh](`
`),F=0;F<D[Tn];F++){var oe=D[F];D[F+1]&&(oe+="@"+D[F+1],F++),R.push(oe)}return{src:w,obj:R}}s(e7,"_getOperaStack");function i_(w){var R=null;if(w)try{if(w[gu])R=Yp(w[gu]);else if(w[XC]&&w[XC][gu])R=Yp(w[XC][gu]);else if(w.exception&&w.exception[gu])R=Yp(w.exception[gu]);else if(n_(w))R=w;else if(n_(w[SE]))R=w[SE];else if(qt()&&qt().opera&&w[RE])R=e7(w[vE]);else if(w.reason&&w.reason[gu])R=Yp(w.reason[gu]);else if(te(w))R=Yp(w);else{var D=w[RE]||w[kE]||"";te(w[t_])&&(D&&(D+=`
`),D+=" from "+w[t_]),D&&(R=Yp(D))}}catch(F){R=Yp(F)}return R||{src:"",obj:null}}s(i_,"_getStackFromErrorObj");function t7(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(t7,"_formatStackTrace");function o_(w){var R,D=w.obj;if(D&&D[Tn]>0){R=[];var F=0,oe=!1,Ee=0;El(D,function(Un){if(oe||iJ(Un)){var _n=tt(Un);oe=!0;var hi=oJ(_n,F);hi&&(Ee+=hi[OC],R.push(hi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[Tn]-1,mt=0,ir=Qe,wn=Xe;Qe<Xe;){var Gn=R[Qe][OC],cr=R[Xe][OC];if(mt+=Gn+cr,mt>we){var br=wn-ir+1;R.splice(ir,br);break}ir=Qe,wn=Xe,Qe++,Xe--}}return R}s(o_,"_parseStack");function ZC(w){var R="";if(w&&(R=w.typeName||w[td]||"",!R))try{var D=/function (.{1,200})\(/,F=D.exec(w.constructor[r1]());R=F&&F[Tn]>1?F[1]:""}catch{}return R}s(ZC,"_getErrorType");function s_(w){if(w)try{if(!te(w)){var R=ZC(w),D=BE(w,!1);return(!D||D==="{}")&&(w[XC]&&(w=w[XC],R=ZC(w)),D=BE(w,!0)),qr(D,R)!==0&&R!=="String"?R+":"+D:D}}catch{}return""+(w||"")}s(s_,"_formatErrorCode");var hf=function(){function w(R,D,F,oe,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,ZN(D)?(Qe[UC]=D[UC]||[],Qe[ff]=D[ff],Qe[kc]=D[kc],D[EE]&&(Qe[EE]=D[EE]),D.id&&(Qe.id=D.id,D[ff].id=D.id),D[qC]&&(Qe[qC]=D[qC]),q(D.isManual)||(Qe.isManual=D.isManual)):(F||(F={}),we&&(F.id=we),Qe[UC]=[i7(R,D,F)],Qe[ff]=Vp(R,F),Qe[kc]=rd(R,oe),Ee&&(Qe[EE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,D,F,oe,Ee,we,Qe,Xe){var mt=ZC(Ee||we||R);return{message:Hh(R,mt),url:D,lineNumber:F,columnNumber:oe,error:s_(Ee||we||R),evt:s_(we||R),typeName:mt,stackDetails:i_(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,D,F,oe){var Ee=D[UC]&&nf(D[UC],function(Qe){return k3(R,Qe)}),we=new w(R,gw(gw({},D),{exceptions:Ee}),F,oe);return we},w.prototype.toInterface=function(){var R=this,D=R.exceptions,F=R.properties,oe=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,mt=D instanceof Array&&nf(D,function(ir){return ir.toInterface()})||void 0;return{ver:"4.0",exceptions:mt,severityLevel:Ee,properties:F,measurements:oe,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,D,F,oe,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[zw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=D,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=s_,w}(),r7=lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function n7(){var w=this,R=fe(w[hu])&&nf(w[hu],function(F){return s7(F)}),D={id:w.id,outerId:w.outerId,typeName:w[bE],message:w[vE],hasFullStack:w[zw],stack:w[gu],parsedStack:R||void 0};return D}s(n7,"_toInterface");function i7(w,R,D){var F,oe,Ee,we,Qe,Xe,mt,ir;if(XN(R))we=R[bE],Qe=R[vE],mt=R[gu],ir=R[hu]||[],Xe=R[zw];else{var wn=R,Gn=wn&&wn.evt;he(wn)||(wn=wn[XC]||Gn||wn),we=cl(w,ZC(wn))||df,Qe=Kw(w,Hh(R||wn,we))||df;var cr=R[SE]||i_(R);ir=o_(cr),fe(ir)&&nf(ir,function(br){br[Yw]=cl(w,br[Yw]),br[Jd]=cl(w,br[Jd])}),mt=b3(w,t7(cr)),Xe=fe(ir)&&ir[Tn]>0,D&&(D[bE]=D[bE]||we)}return F={},F[qh]=r7,F.id=oe,F.outerId=Ee,F.typeName=we,F.message=Qe,F[zw]=Xe,F.stack=mt,F.parsedStack=ir,F.toInterface=n7,F}s(i7,"_createExceptionDetails");function k3(w,R){var D=fe(R[hu])&&nf(R[hu],function(oe){return o7(oe)})||R[hu],F=i7(w,gw(gw({},R),{parsedStack:D}));return F}s(k3,"_createExDetailsFromInterface");function DE(w,R){var D=R[n1](rJ);if(D&&D[Tn]>=4)w[Jd]=D[1],w[WC]=parseInt(D[2]);else{var F=R[n1](nJ);F&&F[Tn]>=3?(w[Jd]=F[1],w[WC]=parseInt(F[2])):w[Jd]=R}}s(DE,"_parseFilename");function B3(w,R,D){var F=w[Jd];R.fn&&D&&D[Tn]>R.fn&&(R.ln&&D[Tn]>R.ln?(F=Rc(D[R.fn]||""),w[WC]=parseInt(Rc(D[R.ln]||""))||0):F=Rc(D[R.fn]||"")),F&&DE(w,F)}s(B3,"_handleFilename");function iJ(w){var R=!1;if(w&&te(w)){var D=Rc(w);D&&(R=YN.test(D))}return R}s(iJ,"_isStackFrame");var D3=lr({level:1,method:1,assembly:0,fileName:0,line:0});function oJ(w,R){var D,F;if(w&&te(w)&&Rc(w)){F=(D={},D[qh]=D3,D.level=R,D.assembly=Rc(w),D.method=JN,D.fileName="",D.line=0,D.sizeInBytes=0,D);for(var oe=0;oe<R3[Tn];){var Ee=R3[oe];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[n1](Ee.re);if(we&&we[Tn]>=Ee.len){Ee.m&&(F.method=Rc(we[Ee.m]||JN)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Jd]=Rc(we[Ee.fn]||""),F[WC]=parseInt(Rc(we[Ee.ln]||""))||0):DE(F,we[Ee.fn]||""));break}oe++}}return P3(F)}s(oJ,"_extractStackFrame");function o7(w){var R,D=(R={},R[qh]=D3,R.level=w.level,R.method=w.method,R.assembly=w[Yw],R.fileName=w[Jd],R.line=w[WC],R.sizeInBytes=0,R);return P3(D)}s(o7,"_stackFrameFromInterface");function P3(w){var R=ZK;return w&&(R+=w.method[Tn],R+=w.assembly[Tn],R+=w.fileName[Tn],R+=w.level.toString()[Tn],R+=w.line.toString()[Tn],w[OC]=R),w}s(P3,"_populateFrameSizeInBytes");function s7(w){return{level:w.level,method:w.method,assembly:w[Yw],fileName:w[Jd],line:w[WC]}}s(s7,"_parsedFrameToInterface");var a7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),sJ=function(){function w(R,D,F,oe,Ee,we,Qe,Xe,mt){this.aiDataContract={ver:1,metrics:1,properties:0};var ir=this;ir.ver=2;var wn=new a7;wn[FC]=oe>0?oe:void 0,wn.max=isNaN(we)||we===null?void 0:we,wn.min=isNaN(Ee)||Ee===null?void 0:Ee,wn[td]=cl(R,D)||df,wn.value=F,wn.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,ir.metrics=[wn],ir[ff]=Vp(R,Xe),ir[kc]=rd(R,mt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),ex="";function aJ(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[LC]()==="true"}s(aJ,"stringToBoolOrDefault");function N3(w){(isNaN(w)||w<0)&&(w=0),w=Wk(w);var R=ex+w%1e3,D=ex+Eh(w/1e3)%60,F=ex+Eh(w/(1e3*60))%60,oe=ex+Eh(w/(1e3*60*60))%24,Ee=Eh(w/(1e3*60*60*24));return R=R[Tn]===1?"00"+R:R[Tn]===2?"0"+R:R,D=D[Tn]<2?"0"+D:D,F=F[Tn]<2?"0"+F:F,oe=oe[Tn]<2?"0"+oe:oe,(Ee>0?Ee+".":ex)+oe+":"+F+":"+D+"."+R}s(N3,"msToTimeSpan");function lJ(w,R){var D=null;return El(w,function(F){if(F.identifier===R)return D=F,-1}),D}s(lJ,"getExtensionByName");function jh(w,R,D,F,oe){return!oe&&te(w)&&(w==="Script error."||w==="Script error")}s(jh,"isCrossOriginError");var cJ=function(){function w(R,D,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=GC(R,Qe),Xe.url=pf(R,F),Xe[td]=cl(R,D)||df,isNaN(oe)||(Xe[IE]=N3(oe)),Xe[ff]=Vp(R,Ee),Xe[kc]=rd(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),tx=function(){function w(R,D,F,oe,Ee,we,Qe,Xe,mt,ir,wn,Gn){mt===void 0&&(mt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cr=this;cr.ver=2,cr.id=D,cr[IE]=N3(Ee),cr.success=we,cr.resultCode=Qe+"",cr.type=cl(R,mt);var br=GN(R,F,Xe,oe);cr.data=pf(R,oe)||br.data,cr.target=cl(R,br.target),ir&&(cr.target="".concat(cr.target," | ").concat(ir)),cr[td]=cl(R,br[td]),cr[ff]=Vp(R,wn),cr[kc]=rd(R,Gn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),L3=function(){function w(R,D,F,oe,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,D=D||df,we[vE]=Kw(R,D),we[ff]=Vp(R,oe),we[kc]=rd(R,Ee),F&&(we[EE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),PE=function(){function w(R,D,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=pf(R,F),Xe[td]=cl(R,D)||df,Xe[ff]=Vp(R,Ee),Xe[kc]=rd(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[IE]=Qe[IE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),uJ=function(){function w(R,D){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=D}return s(w,"Data"),w}(),a_=iE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),dJ=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,D,F,oe){oe===void 0&&(oe=!1);var Ee;return F&&R[QC]&&R[QC][F]&&!q(R[QC][F][D])?Ee=R[QC][F][D]:Ee=R[D],q(Ee)?oe:Ee},w}();function gf(w){var R="ai."+w+".";return function(D){return R+D}}s(gf,"_aiNameFunc");var rx=gf("application"),ya=gf("device"),l_=gf("location"),nx=gf("operation"),c_=gf("session"),Vh=gf("user"),i1=gf("cloud"),NE=gf("internal"),$h=function(w){Rh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(fE({applicationVersion:rx("ver"),applicationBuild:rx("build"),applicationTypeId:rx("typeId"),applicationId:rx("applicationId"),applicationLayer:rx("layer"),deviceId:ya("id"),deviceIp:ya("ip"),deviceLanguage:ya("language"),deviceLocale:ya("locale"),deviceModel:ya("model"),deviceFriendlyName:ya("friendlyName"),deviceNetwork:ya("network"),deviceNetworkName:ya("networkName"),deviceOEMName:ya("oemName"),deviceOS:ya("os"),deviceOSVersion:ya("osVersion"),deviceRoleInstance:ya("roleInstance"),deviceRoleName:ya("roleName"),deviceScreenResolution:ya("screenResolution"),deviceType:ya("type"),deviceMachineName:ya("machineName"),deviceVMName:ya("vmName"),deviceBrowser:ya("browser"),deviceBrowserVersion:ya("browserVersion"),locationIp:l_("ip"),locationCountry:l_("country"),locationProvince:l_("province"),locationCity:l_("city"),operationId:nx("id"),operationName:nx("name"),operationParentId:nx("parentId"),operationRootId:nx("rootId"),operationSyntheticSource:nx("syntheticSource"),operationCorrelationVector:nx("correlationVector"),sessionId:c_("id"),sessionIsFirst:c_("isFirst"),sessionIsNew:c_("isNew"),userAccountAcquisitionDate:Vh("accountAcquisitionDate"),userAccountId:Vh("accountId"),userAgent:Vh("userAgent"),userId:Vh("id"),userStoreRegion:Vh("storeRegion"),userAuthUserId:Vh("authUserId"),userAnonymousUserAcquisitionDate:Vh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Vh("authUserAcquisitionDate"),cloudName:i1("name"),cloudRole:i1("role"),cloudRoleVer:i1("roleVer"),cloudRoleInstance:i1("roleInstance"),cloudEnvironment:i1("environment"),cloudLocation:i1("location"),cloudDeploymentUnit:i1("deploymentUnit"),internalNodeName:NE("nodeName"),internalSdkVersion:NE("sdkVersion"),internalAgentVersion:NE("agentVersion"),internalSnippet:NE("snippet"),internalSdkSrc:NE("sdkSrc")}));function F3(w,R,D,F,oe,Ee){D=cl(F,D)||df,(q(w)||q(R)||q(D))&&We("Input doesn't contain all required fields");var we="";w[g3]&&(we=w[g3],delete w[g3]);var Qe={name:D,time:Up(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return q(oe)||pt(oe,function(Xe,mt){Qe.data[Xe]=mt}),Qe}s(F3,"createTelemetryItem");var M3=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=F3,w}(),fJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},pJ=new $h;function l7(w){var R=null;if(pe(Event))R=new Event(w);else{var D=ke();D&&D.createEvent&&(R=D.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(l7,"createDomEvent");function Q3(w,R){BN(w,null,null,R)}s(Q3,"_disableEvents");function c7(w){var R=ke(),D=pr(),F=!1,oe=[],Ee=1;D&&!q(D.onLine)&&!D.onLine&&(Ee=2);var we=0,Qe=Gn(),Xe=qK(Wp("OfflineListener"),w);try{if(ir(qt())&&(F=!0),R){var mt=R.body||R;mt.ononline&&ir(mt)&&(F=!0)}}catch{F=!1}function ir(Bi){var Qa=!1;return Bi&&(Qa=m3(Bi,"online",Un,Xe),Qa&&m3(Bi,"offline",_n,Xe)),Qa}s(ir,"_enableEvents");function wn(){return Qe}s(wn,"_isOnline");function Gn(){return!(we===2||Ee===2)}s(Gn,"calCurrentState");function cr(){var Bi=Gn();Qe!==Bi&&(Qe=Bi,El(oe,function(Qa){var ox={isOnline:Qe,rState:Ee,uState:we};try{Qa(ox)}catch{}}))}s(cr,"listnerNoticeCheck");function br(Bi){we=Bi,cr()}s(br,"setOnlineState");function Un(){Ee=1,cr()}s(Un,"_setOnline");function _n(){Ee=2,cr()}s(_n,"_setOffline");function hi(){var Bi=qt();if(Bi&&F){if(Q3(Bi,Xe),R){var Qa=R.body||R;ie(Qa.ononline)||Q3(Qa,Xe)}F=!1}}s(hi,"_unload");function no(Bi){return oe.push(Bi),{rm:s(function(){var Qa=oe.indexOf(Bi);if(Qa>-1)return oe.splice(Qa,1)},"rm")}}return s(no,"addListener"),{isOnline:wn,isListening:s(function(){return F},"isListening"),unload:hi,addListener:no,setOnlineState:br}}s(c7,"createOfflineListener");var mJ="AppInsightsPropertiesPlugin",O3="AppInsightsChannelPlugin",ix="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=ix,t.BreezeChannelIdentifier=O3,t.ConfigurationManager=dJ,t.ConnectionStringParser=Zw,t.ContextTagKeys=$h,t.CtxTagKeys=pJ,t.DEFAULT_BREEZE_ENDPOINT=h3,t.DEFAULT_BREEZE_PATH=xE,t.Data=uJ,t.DisabledPropertyName=Hw,t.DistributedTracingModes=$K,t.Envelope=e_,t.Event=XK,t.EventPersistence=TE,t.Exception=hf,t.Extensions=fJ,t.HttpMethod=PN,t.Metric=sJ,t.PageView=cJ,t.PageViewPerformance=PE,t.ProcessLegacy=jw,t.PropertiesPluginIdentifier=mJ,t.RemoteDependencyData=tx,t.RequestHeaders=NN,t.SampleRate=DN,t.SeverityLevel=a_,t.TelemetryItemCreator=M3,t.ThrottleMgr=JK,t.Trace=L3,t.correlationIdCanIncludeCorrelationHeader=Wh,t.correlationIdGetCorrelationContext=qN,t.correlationIdGetCorrelationContextValue=WN,t.correlationIdGetPrefix=w3,t.correlationIdSetPrefix=T3,t.createDistributedTraceContextFromTrace=_3,t.createDomEvent=l7,t.createOfflineListener=c7,t.createTelemetryItem=F3,t.createTraceParent=kC,t.dataSanitizeException=b3,t.dataSanitizeId=GC,t.dataSanitizeInput=E3,t.dataSanitizeKey=v3,t.dataSanitizeKeyAndAddUniqueness=x3,t.dataSanitizeMeasurements=rd,t.dataSanitizeMessage=Kw,t.dataSanitizeProperties=Vp,t.dataSanitizeString=cl,t.dataSanitizeUrl=pf,t.dateTimeUtilsDuration=VK,t.dateTimeUtilsNow=jK,t.dsPadNumber=LN,t.findAllScripts=d3,t.findW3cTraceParent=u3,t.formatTraceParent=e1,t.getExtensionByName=lJ,t.isBeaconApiSupported=Ph,t.isCrossOriginError=jh,t.isInternalApplicationInsightsEndpoint=UN,t.isSampledFlag=Ow,t.isValidSpanId=DC,t.isValidTraceId=BC,t.isValidTraceParent=PC,t.msToTimeSpan=N3,t.parseConnectionString=Xw,t.parseTraceParent=ed,t.strNotSpecified=df,t.stringToBoolOrDefault=aJ,t.urlGetAbsoluteUrl=GK,t.urlGetCompleteUrl=MN,t.urlGetPathName=HK,t.urlParseFullHost=$p,t.urlParseHost=QN,t.urlParseUrl=HC,t.utlCanUseLocalStorage=Jw,t.utlCanUseSessionStorage=zp,t.utlDisableStorage=wE,t.utlEnableStorage=zK,t.utlGetLocalStorage=jN,t.utlGetSessionStorage=$N,t.utlGetSessionStorageKeys=KC,t.utlRemoveSessionStorage=zN,t.utlRemoveStorage=nd,t.utlSetLocalStorage=VN,t.utlSetSessionStorage=YK,t.utlSetStoragePrefix=_E})});var zIe=G((hM,$Ie)=>{f();(function(t,e){typeof hM=="object"&&typeof $Ie<"u"?e(hM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(hM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function r(A,x){return A[x]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),W=e(Array),ee=r(W,c),me=r(ee,"slice");function ae(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(ae,"safe");function H(A,x){var T=ae(A);return T.e?x:T.v}s(H,"safeGet");var O;function le(A){return function(x){return typeof x===A}}s(le,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&j(T)===x)}}s(ie,"_createObjIs");function j(A){return _[b].call(A)}s(j,"objToString");function q(A){return typeof A===d||A===d}s(q,"isUndefined");function Y(A){return!re(A)}s(Y,"isStrictUndefined");function te(A){return A===i||q(A)}s(te,"isNullOrUndefined");function pe(A){return A===i||!re(A)}s(pe,"isStrictNullOrUndefined");function re(A){return!!A||A!==n}s(re,"isDefined");function fe(A){return!O&&(O=["string","number","boolean",d,"symbol","bigint"]),A!==l&&O.indexOf(A)!==-1}s(fe,"isPrimitiveType");var he=le("string"),Ne=le(a);function Re(A){return!A&&te(A)?!1:!!A&&typeof A===l}s(Re,"isObject");var Je=r(W,"isArray"),Me=ie("Date"),pt=le("number"),Tt=le("boolean"),Ct=ie("Error");function bt(A){return!!(A&&A.then&&Ne(A.then))}s(bt,"isPromiseLike");function ce(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(ce,"isTruthy");var Oe=r(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(r(E,"hasOwn"),X);function X(A,x){return ye(A,x)||!!Oe(A,x)}s(X,"polyObjHasOwn");function ne(A,x,T){if(A&&Re(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(ne,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Pe(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return ne(A,function(S,P){x[We[S]]=Y(P)?x[We[S]]:P}),x}s(Pe,"_createProp");var be=r(E,"defineProperty");function ze(A,x,T){return be(A,x,Pe(T))}s(ze,"objDefine");function it(A,x,T,S,P){var L={};return ne(A,function(Q,J){gt(L,Q,x?J:Q),gt(L,J,T?J:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function gt(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(gt,"_assignMapValue");var Ot=e(k),lr="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===lr&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(P){T=" - "+Lt(P,x)}return S+": "+T}s(Lt,"dumpObj");function Gr(A){throw new Error(A)}s(Gr,"throwError");function zr(A){throw new TypeError(A)}s(zr,"throwTypeError");var mn=r(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ut=r(E,"assign"),yt=r(E,"keys");function Xt(A){return mn&&ne(A,function(x,T){(Je(T)||Re(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(mn,Ae),Ar=e(r(E,"getPrototypeOf"),Ge);function xr(A){return it(A,1,0,Gt)}s(xr,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function rr(A){var x={};return ne(A,function(T,S){gt(x,T,S[1]),gt(x,S[0],S[1])}),Gt(x)}s(rr,"createSimpleMap");function Jt(A){return rr(A)}s(Jt,"createTypeMap");var Ir=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nr="__tsUtils$gblCfg",Yr;function Wn(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(Wn,"_getGlobalValue");function Jn(){if(!Yr){var A=ae(Wn).v||{};Yr=A[Nr]=A[Nr]||{}}return Yr}s(Jn,"_getGlobalConfig");var Qn=$n;function $n(A,x,T){var S=x?x[A]:i;return function(P){var L=(P?P[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(P,L?me[v](Q,1):Q)}zr('"'+Ot(A)+'" not defined for '+Lt(P))}}s($n,"_unwrapFunctionWithPoly");function rn(A){return function(x){return x[A]}}s(rn,"_unwrapProp");var zn=r(N,"min"),_e=r(N,"max"),U=Qn("slice",B),ge=Qn("substring",B),ve=$n("substr",B,Z);function Z(A,x,T){return te(A)&&zr("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),q(T)?U(A,x):U(A,x,x+T))}s(Z,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Jn();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var _r;function pr(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(pr,"polyNewSymbol");function un(A){var x=qt();if(!tt(x.k,A)){var T=pr(A),S=yt(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(un,"polySymbolFor");function hn(A){!_r&&(_r={});var x,T=Ir[A];return T&&(x=_r[T]=_r[T]||pr(m+"."+T)),x}s(hn,"polyGetKnownSymbol");var vr;function Ht(){vr=Jn()}s(Ht,"_initTestHooks");function On(A){var x={};return!vr&&Ht(),x.b=vr.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return vr.lzy||be(x,"v",{value:T}),x.b=vr.lzy,T},"get")}),x}s(On,"getLazy");function Ws(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(Ws,"createCachedValue");var Lp="window",El;function Fp(A,x){var T;return function(){return!vr&&Ht(),(!T||vr.lzy)&&(T=Ws(ae(A,x).v)),T.v}}s(Fp,"_getGlobalInstFn");function nf(A){return!vr&&Ht(),(!El||A===!1||vr.lzy)&&(El=Ws(ae(Wn).v||i)),El.v}s(nf,"getGlobal");function ia(A,x){var T;if(!El||x===!1?T=nf(x):T=El.v,T&&T[A])return T[A];if(A===Lp)try{return window}catch{}return i}s(ia,"getInst");function vh(){return!!rC()}s(vh,"hasDocument");var rC=Fp(ia,["document"]);function Uk(){return!!Mp()}s(Uk,"hasWindow");var Mp=Fp(ia,[Lp]);function AK(){return!!bh()}s(AK,"hasNavigator");var bh=Fp(ia,["navigator"]),yK=Fp(function(){return!!ae(function(){return process&&(process.versions||{}).node}).v}),QA,qk;function uw(){return QA=Ws(ae(ia,[m]).v),QA}s(uw,"_initSymbol");function CK(A){var x=(vr.lzy?0:QA)||uw();return x.v?x.v[A]:n}s(CK,"_getSymbolKey");function Rc(){return!!Eh()}s(Rc,"hasSymbol");function Eh(){return!vr&&Ht(),((vr.lzy?0:QA)||uw()).v}s(Eh,"getSymbol");function tE(A,x){var T=Ir[A];!vr&&Ht();var S=(vr.lzy?0:QA)||uw();return S.v?S.v[T||A]:x?n:hn(A)}s(tE,"getKnownSymbol");function OA(A,x){!vr&&Ht();var T=(vr.lzy?0:QA)||uw();return T.v?T.v(A):x?i:pr(A)}s(OA,"newSymbol");function rE(A){return!vr&&Ht(),qk=(vr.lzy?0:qk)||Ws(ae(CK,["for"]).v),(qk.v||un)(A)}s(rE,"symbolFor");function Ih(A){return!!A&&Ne(A.next)}s(Ih,"isIterator");function dw(A){return!pe(A)&&Ne(A[tE(3)])}s(dw,"isIterable");var nE;function Wk(A,x,T){if(A&&(Ih(A)||(!nE&&(nE=Ws(tE(3))),A=A[nE.v]?A[nE.v]():i),Ih(A))){var S=n,P=n;try{for(var L=0;!(P=A.next()).done&&x[v](T||A,P.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(P=i,A.throw(S))}finally{try{P&&!P.done&&A.return&&A.return(P)}finally{if(S)throw S.e}}}}s(Wk,"iterForOf");function nC(A,x,T){return A.apply(x,T)}s(nC,"fnApply");function iC(A,x){return!q(x)&&A&&(Je(x)?nC(A.push,A,x):Ih(x)||dw(x)?Wk(x,function(T){A.push(T)}):A.push(x)),A}s(iC,"arrAppend");function qr(A,x,T){if(A)for(var S=A[g]>>>0,P=0;P<S&&!(P in A&&x[v](T||A,A[P],P,A)===-1);P++);}s(qr,"arrForEach");var fu=Qn("indexOf",ee),UA=Qn("map",ee);function oC(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(oC,"arrSlice");var xK=Qn("reduce",ee),Th=e(r(E,"create"),vK);function vK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&zr("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(vK,"polyObjCreate");var Gk;function iE(A,x){var T=E.setPrototypeOf||function(S,P){var L;!Gk&&(Gk=Ws((L={},L[u]=[],L instanceof Array))),Gk.v?S[u]=P:ne(P,function(Q,J){return S[Q]=J})};return T(A,x)}s(iE,"objSetPrototypeOf");function bK(A,x,T){ae(ze,[x,y,{v:A,c:!0,e:!1}]),x=iE(x,T);function S(){this[p]=x,ae(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?Th(T):(S[c]=T[c],new S),x}s(bK,"_createCustomError");function oE(A,x){x&&(A[y]=x)}s(oE,"_setName");function Ma(A,x,T){var S=T||Error,P=S[c][y],L=Error.captureStackTrace;return bK(A,function(){var Q=this,J=arguments;try{ae(oE,[S,A]);var se=nC(S,Q,me[v](J))||Q;if(se!==Q){var Ce=Ar(Q);Ce!==Ar(se)&&iE(se,Ce)}return L&&L(se,Q[p]),x&&x(se,J),se}finally{ae(oE,[S,P])}},S)}s(Ma,"createCustomError");function wh(){return(Date.now||sE)()}s(wh,"utcNow");function sE(){return new Date().getTime()}s(sE,"polyUtcNow");function sN(A){return s(function(T){return te(T)&&zr("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(sN,"_createTrimFn");var EK=sN(/^\s+|(?=\s)\s+$/g),ji=$n("trim",B,EK),qA=r(N,"floor"),_h,Hk,aE;function pu(A){if(!A||typeof A!==l)return!1;aE||(aE=Uk()?Mp():!0);var x=!1;if(A!==aE){Hk||(_h=Function[c][b],Hk=_h[v](E));try{var T=Ar(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&_h[v](T)===Hk))}catch{}}return x}s(pu,"isPlainObject");function aN(A){return A.value&&fw(A),!0}s(aN,"_defaultDeepCopyHandler");var lN=[sC,fw,uN,Sh];function jk(A,x,T,S){var P;return qr(A,function(L){if(L.k===x)return P=L,-1}),P||(P={k:x,v:x},A.push(P),S(P)),P.v}s(jk,"_getSetVisited");function WA(A,x,T,S){var P=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},J=typeof x,se=!1,Ce=x===i;Ce||(x&&J===l?se=pu(x):Ce=fe(J));var Te={type:J,isPrim:Ce,isPlain:se,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return WA(A,Le,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return Vk(A,Le,Ye,Q)},"copyTo")};return Te.isPrim?P&&P[v](T,Te)?Te.result:x:jk(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(He){Le.v=He},"s")});for(var Ye=0,Fe=P;!(Fe||(Ye<lN.length?lN[Ye++]:aN))[v](T,Te);)Fe=i})}s(WA,"_deepCopy");function Vk(A,x,T,S){if(!te(T))for(var P in T)x[P]=WA(A,T[P],S,P);return x}s(Vk,"_copyProps");function cN(A,x,T){var S={handler:T,src:x,path:[]};return Vk([],A,x,S)}s(cN,"objCopyProps");function $k(A,x){var T={handler:x,src:A};return WA([],A,T)}s($k,"objDeepCopy");function sC(A){var x=A.value;if(Je(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(sC,"arrayDeepCopyHandler");function Sh(A){var x=A.value;return Me(x)?(A.result=new Date(x.getTime()),!0):!1}s(Sh,"dateDeepCopyHandler");function uN(A){return A.type===a}s(uN,"functionDeepCopyHandler");function fw(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(fw,"plainObjDeepCopyHandler");function zk(A,x){return qr(x,function(T){cN(A,T)}),A}s(zk,"_doExtend");function pw(A,x,T,S,P,L,Q){return zk($k(A)||{},me[v](arguments))}s(pw,"deepExtend");var IK=rn(g),TK=r(N,"round"),dN=$n("endsWith",B,wK);function wK(A,x,T){he(A)||zr("'"+Lt(A)+"' is not a string");var S=he(x)?x:Ot(x),P=!q(T)&&T<A[g]?T:A[g];return ge(A,P-S[g],P)===S}s(wK,"polyStrEndsWith");var Qp=Qn("indexOf",B),mw="ref",Yk="unref",hw="hasRef",_K="enabled";function gw(A,x,T){var S=!0,P=A?x(i):i,L;function Q(){return S=!1,P&&P[Yk]&&P[Yk](),L}s(Q,"_unref");function J(){P&&T(P),P=i}s(J,"_cancel");function se(){return P=x(P),S||Q(),L}s(se,"_refresh");function Ce(Te){!Te&&P&&J(),Te&&!P&&se()}return s(Ce,"_setEnabled"),L={cancel:J,refresh:se},L[hw]=function(){return P&&P[hw]?P[hw]():S},L[mw]=function(){return S=!0,P&&P[mw]&&P[mw](),L},L[Yk]=Q,L=be(L,_K,{get:s(function(){return!!P},"get"),set:Ce}),{h:L,dn:s(function(){P=i},"dn")}}s(gw,"_createTimerHandler");function Aw(A,x,T){var S=Je(x),P=S?x.length:0,L=(P>0?x[0]:S?n:x)||setTimeout,Q=(P>1?x[1]:n)||clearTimeout,J=T[0];T[0]=function(){se.dn(),nC(J,n,me[v](arguments))};var se=gw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;nC(Q,n,[Ce])}return nC(L,n,T)},function(Ce){nC(Q,n,[Ce])});return se.h}s(Aw,"_createTimeoutWith");function Rh(A,x){return Aw(!0,n,me[v](arguments))}s(Rh,"scheduleTimeout");function yw(A,x){return Aw(!1,n,me[v](arguments))}s(yw,"createTimeout");var GA,Ku="constructor",Ju="prototype",HA="function",aC="_dynInstFuncs",kh="_isDynProxy",lC="_dynClass",Kk="_dynCls$",jA="_dynInstChk",cC=jA,Jk="_dfOpts",Cw="_unknown_",uC="__proto__",lE="_dyn"+uC,xw="__dynProto$Gbl",dC="_dynInstProto",fC="useBaseInst",cE="setInstFuncs",VA=Object,pC=VA.getPrototypeOf,Xk=VA.getOwnPropertyNames,vw=nf(),mC=vw[xw]||(vw[xw]={o:(GA={},GA[cE]=!0,GA[fC]=!0,GA),n:1e3});function hC(A){return A&&(A===VA[Ju]||A===Array[Ju])}s(hC,"_isObjectOrArrayPrototype");function Op(A){return hC(A)||A===Function[Ju]}s(Op,"_isObjectArrayOrFunctionPrototype");function of(A){var x;if(A){if(pC)return pC(A);var T=A[uC]||A[Ju]||(A[Ku]?A[Ku][Ju]:null);x=A[lE]||T,ye(A,lE)||(delete A[dC],x=A[lE]=A[dC]||A[lE],A[dC]=T)}return x}s(of,"_getObjProto");function gC(A,x){var T=[];if(Xk)T=Xk(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var P=0;P<T.length;P++)x(T[P])}s(gC,"_forEachProp");function AC(A,x,T){return x!==Ku&&typeof A[x]===HA&&(T||ye(A,x))&&x!==uC&&x!==Ju}s(AC,"_isDynamicCandidate");function bw(A){zr("DynamicProto: "+A)}s(bw,"_throwTypeError");function Zk(A){var x=Th(null);return gC(A,function(T){!x[T]&&AC(A,T,!1)&&(x[T]=A[T])}),x}s(Zk,"_getInstanceFuncs");function e3(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(e3,"_hasVisited");function SK(A,x,T,S){function P(se,Ce,Te){var Le=Ce[Te];if(Le[kh]&&S){var Ye=se[aC]||{};Ye[cC]!==!1&&(Le=(Ye[Ce[lC]]||{})[Te]||Le)}return function(){return Le.apply(se,arguments)}}s(P,"_instFuncProxy");var L=Th(null);gC(T,function(se){L[se]=P(x,T,se)});for(var Q=of(A),J=[];Q&&!Op(Q)&&!e3(J,Q);)gC(Q,function(se){!L[se]&&AC(Q,se,!pC)&&(L[se]=P(x,Q,se))}),J.push(Q),Q=of(Q);return L}s(SK,"_getBaseFuncs");function RK(A,x,T,S){var P=null;if(A&&ye(T,lC)){var L=A[aC]||Th(null);if(P=(L[T[lC]]||Th(null))[x],P||bw("Missing ["+x+"] "+HA),!P[jA]&&L[cC]!==!1){for(var Q=!ye(A,x),J=of(A),se=[];Q&&J&&!Op(J)&&!e3(se,J);){var Ce=J[x];if(Ce){Q=Ce===S;break}se.push(J),J=of(J)}try{Q&&(A[x]=P),P[jA]=1}catch{L[cC]=!1}}}return P}s(RK,"_getInstFunc");function kK(A,x,T){var S=x[A];return S===T&&(S=of(x)[A]),typeof S!==HA&&bw("["+A+"] is not a "+HA),S}s(kK,"_getProtoFunc");function BK(A,x,T,S,P){function L(se,Ce){var Te=s(function(){var Le=RK(this,Ce,se,Te)||kK(Ce,se,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[kh]=1,Te}if(s(L,"_createDynamicPrototype"),!hC(A)){var Q=T[aC]=T[aC]||Th(null);if(!hC(Q)){var J=Q[x]=Q[x]||Th(null);Q[cC]!==!1&&(Q[cC]=!!P),hC(J)||gC(T,function(se){AC(T,se,!1)&&T[se]!==S[se]&&(J[se]=T[se],delete T[se],(!ye(A,se)||A[se]&&!A[se][kh])&&(A[se]=L(A,se)))})}}}s(BK,"_populatePrototype");function t3(A,x){if(pC){for(var T=[],S=of(x);S&&!Op(S)&&!e3(T,S);){if(S===A)return!0;T.push(S),S=of(S)}return!1}return!0}s(t3,"_checkPrototype");function uE(A,x){return ye(A,Ju)?A.name||x||Cw:((A||{})[Ku]||{}).name||x||Cw}s(uE,"_getObjName");function rc(A,x,T,S){ye(A,Ju)||bw("theClass is an invalid class definition.");var P=A[Ju];t3(P,x)||bw("["+uE(A)+"] not in hierarchy of ["+uE(x)+"]");var L=null;ye(P,lC)?L=P[lC]:(L=Kk+uE(A,"_")+"$"+mC.n,mC.n++,P[lC]=L);var Q=rc[Jk],J=!!Q[fC];J&&S&&S[fC]!==void 0&&(J=!!S[fC]);var se=Zk(x),Ce=SK(P,x,se,J);T(x,Ce);var Te=!!pC&&!!Q[cE];Te&&S&&(Te=!!S[cE]),BK(P,L,x,se,Te!==!1)}s(rc,"dynamicProto"),rc[Jk]=mC.o;var Gs="function",fN="object",pN="undefined",dE="prototype",r3=Object,n3=r3[dE];(nf()||{}).Symbol,(nf()||{}).Reflect;var Ew="hasOwnProperty",mN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var P in x)n3[Ew].call(x,P)&&(A[P]=x[P])}return A},"__objAssignFnImpl"),Up=ut||mN,Bh=s(function(A,x){return Bh=r3.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)S[Ew](P)&&(T[P]=S[P])},Bh(A,x)},"extendStaticsFn");function fE(A,x){typeof x!==Gs&&x!==null&&zr("Class extends value "+String(x)+" is not a constructor or null"),Bh(A,x);function T(){this.constructor=A}s(T,"__"),A[dE]=x===null?Th(x):(T[dE]=x[dE],new T)}s(fE,"__extendsFn");function hN(A,x){for(var T=0,S=x.length,P=A.length;T<S;T++,P++)A[P]=x[T];return A}s(hN,"__spreadArrayFn");var Iw=xr,DK=Jt,Dh=Iw({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),yC="toLowerCase",Yn="length",CC="warnToConsole",$A="throwInternal",qp="watch",Tw="apply",Vi="push",xC="splice",ga="logger",vC="cancel",pE="initialize",Ph="identifier",mE="removeNotificationListener",ww="addNotificationListener",sf="isInitialized",bC="value",zd="getNotifyMgr",EC="getPlugin",Nh="name",Il="processNext",IC="getProcessTelContext",af="enabled",gN="stopPollingInternalLogs",zA="unload",_w="onComplete",TC="version",AN="loggingLevelConsole",YA="createNew",lf="teardown",Sw="messageId",KA="message",cf="diagLog",Rw="_doTeardown",Wp="update",uf="getNext",Lh="setNextPlugin",kw="userAgent",Fh="split",Mh="replace",nc="type",i3="evtName",hE="status",o3="getAllResponseHeaders",s3="isChildEvt",wC="data",Qh="getCtx",Yd="setCtx",yN="itemsReceived",Gp="urlString",a3="headers",Hp="timeout",CN="traceFlags",_C;function l3(A,x){_C||(_C=Ma("AggregationError",function(S,P){P[Yn]>1&&(S.errors=P[1])}));var T=A||"One or more errors occurred.";throw qr(x,function(S,P){T+=`
`.concat(P," > ").concat(Lt(S))}),new _C(T,x||[])}s(l3,"throwAggregationError");var JA="Promise",XA="rejected";function Xu(A,x){return xN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:XA,rejected:!0,reason:T}):T})}s(Xu,"doAwaitResponse");function xN(A,x,T,S){var P=A;try{if(bt(A))(x||T)&&(P=A.then(x,T));else try{x&&(P=x(A))}catch(L){if(T)P=T(L);else throw L}}finally{S&&PK(P,S)}return P}s(xN,"doAwait");function PK(A,x){var T=A;return x&&(bt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(PK,"doFinally");var vN=["pending","resolving","resolved",XA],bN="dispatchEvent",gE;function EN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(EN,"_hasInitEventFn");function Bw(A,x,T,S){var P=rC();!gE&&(gE=Ws(!!ae(EN,[P]).v));var L=gE.v?P.createEvent("Event"):S?new Event(x):{};if(T&&T(L),gE.v&&L.initEvent(x,!1,!0),L&&A[bN])A[bN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var J=ia("console");J&&(J.error||J.log)(x,Lt(L))}}}s(Bw,"emitEvent");var IN="unhandledRejection",NK=IN.toLowerCase(),SC=10,Dw;function TN(A){return Ne(A)?A.toString():Lt(A)}s(TN,"dumpFnObj");function wN(A,x,T){var S=oC(arguments,3),P=0,L=!1,Q,J=[],se=!1,Ce=null,Te;function Le(Vt,mr){try{se=!0,Ce&&Ce.cancel(),Ce=null;var Hn=A(function(xi,vi){J.push(function(){try{var ho=P===2?Vt:mr,dn=q(ho)?Q:Ne(ho)?ho(Q):ho;bt(dn)?dn.then(xi,vi):ho?xi(dn):P===3?vi(dn):xi(dn)}catch(Lr){vi(Lr)}}),L&&lt()},S);return Hn}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Fe(Vt){var mr=Vt,Hn=Vt;return Ne(Vt)&&(mr=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Hn=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Le(mr,Hn)}s(Fe,"_finally");function He(){return vN[P]}s(He,"_strState");function lt(){if(J.length>0){var Vt=J.slice();J=[],se=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,mr){return function(Hn){if(P===mr){if(Vt===2&&bt(Hn)){P=1,Hn.then(et(2,1),et(3,1));return}P=Vt,L=!0,Q=Hn,lt(),!se&&Vt===3&&!Ce&&(Ce=Rh(At,SC))}}}s(et,"_createSettleIfFn");function At(){if(!se)if(se=!0,yK())process.emit(IN,Q,Te);else{var Vt=Mp()||nf();!Dw&&(Dw=Ws(ae(ia,[JA+"RejectionEvent"]).v)),Bw(Vt,NK,function(mr){return ze(mr,"promise",{g:s(function(){return Te},"g")}),mr.reason=Q,mr},!!Dw.v)}}s(At,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Fe},be(Te,"state",{get:He}),Rc()&&(Te[tE(11)]="IPromise");function Nt(){return"IPromise "+He()+(L?" - "+TN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Ne(T)||zr(JA+": executor is not a function - "+TN(T));var mr=et(3,0);try{T.call(Te,et(2,0),mr)}catch(Hn){mr(Hn)}},"_initialize")(),Te}s(wN,"_createPromise");function LK(A){return function(x){var T=oC(arguments,1);return A(function(S,P){try{var L=[],Q=1;Wk(x,function(J,se){J&&(Q++,xN(J,function(Ce){L[se]=Ce,--Q===0&&S(L)},P))}),Q--,Q===0&&S(L)}catch(J){P(J)}},T)}}s(LK,"_createAllPromise");function FK(A){return Ws(function(x){var T=oC(arguments,1);return A(function(S,P){var L=[],Q=1;function J(se,Ce){Q++,Xu(se,function(Te){Te.rejected?L[Ce]={status:XA,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(J,"processItem");try{Je(x)?qr(x,J):dw(x)?Wk(x,J):zr("Input is not an iterable"),Q--,Q===0&&S(L)}catch(se){P(se)}},T)})}s(FK,"_createAllSettledPromise");function _N(A){qr(A,function(x){try{x()}catch{}})}s(_N,"syncItemProcessor");function SN(A){var x=pt(A)?A:0;return function(T){Rh(function(){_N(T)},x)}}s(SN,"timeoutItemProcessor");function Pw(A,x){return wN(Pw,SN(x),A,x)}s(Pw,"createAsyncPromise");var Nw;function MK(A,x){!Nw&&(Nw=Ws(ae(ia,[JA]).v||null));var T=Nw.v;if(!T)return Pw(A);Ne(A)||zr(JA+": executor is not a function - "+Lt(A));var S=0;function P(){return vN[S]}s(P,"_strState");var L=new T(function(Q,J){function se(Te){S=2,Q(Te)}s(se,"_resolve");function Ce(Te){S=3,J(Te)}s(Ce,"_reject"),A(se,Ce)});return be(L,"state",{get:P}),L}s(MK,"createNativePromise");var Lw;function Fw(A){return wN(Fw,_N,A)}s(Fw,"createSyncPromise");function mu(A,x){return!Lw&&(Lw=FK(Fw)),Lw.v(A,x)}s(mu,"createSyncAllSettledPromise");var Mw;function RC(A,x){return!Mw&&(Mw=Ws(MK)),Mw.v.call(this,A,x)}s(RC,"createPromise");var c3=LK(RC),Zu=void 0,mi="",jp="channels",Aa="core",Kd="createPerfMgr",Qw="disabled",ZA="extensionConfig",kC="extensions",ed="processTelemetry",BC="priority",DC="eventsSent",PC="eventsDiscarded",Ow="eventsSendRequest",e1="perfEvent",u3="offlineEventsStored",d3="offlineBatchSent",Uw="offlineBatchDrop",AE="getPerfMgr",qw="domain",Ww="path",RN="Not dynamic - ",f3=/-([a-z])/g,QK=/([^\w\d_$])/g,OK=/^(\d+[\w\d_$])/;function Gw(A){return!te(A)}s(Gw,"isNotNullOrUndefined");function NC(A){var x=A;return x&&he(x)&&(x=x[Mh](f3,function(T,S){return S.toUpperCase()}),x=x[Mh](QK,"_"),x=x[Mh](OK,function(T,S){return"_"+S})),x}s(NC,"normalizeJsName");function Tl(A,x){return A&&x?Qp(A,x)!==-1:!1}s(Tl,"strContains");function yE(A){return A&&A.toISOString()||""}s(yE,"toISOString");function ll(A){return Ct(A)?A[Nh]:mi}s(ll,"getExceptionName");function Oh(A,x,T,S,P){var L=T;return A&&(L=A[x],L!==T&&(!P||P(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Oh,"setValue");function kN(A,x,T){var S;return A?(S=A[x],!S&&te(S)&&(S=q(T)?{}:T,A[x]=S)):S=q(T)?{}:T,S}s(kN,"getSetValue");function UK(A,x){var T=null,S=null;return Ne(A)?T=A:S=A,function(){var P=arguments;if(T&&(S=T()),S)return S[x][Tw](S,P)}}s(UK,"_createProxyFunction");function CE(A,x,T,S,P){A&&x&&T&&(P!==!1||q(A[x]))&&(A[x]=UK(T,S))}s(CE,"proxyFunctionAs");function p3(A,x,T,S){return A&&x&&Re(A)&&Je(T)&&qr(T,function(P){he(P)&&CE(A,P,x,P,S)}),A}s(p3,"proxyFunctions");function qK(A){return function(){function x(){var T=this;A&&ne(A,function(S,P){T[S]=P})}return s(x,"class_1"),x}()}s(qK,"createClassFromInterface");function m3(A){return A&&ut&&(A=r3(ut({},A))),A}s(m3,"optimizeObject");function BN(A,x,T,S,P,L){var Q=arguments,J=Q[0]||{},se=Q[Yn],Ce=!1,Te=1;for(se>0&&Tt(J)&&(Ce=J,J=Q[Te]||{},Te++),Re(J)||(J={});Te<se;Te++){var Le=Q[Te],Ye=Je(Le),Fe=Re(Le);for(var He in Le){var lt=Ye&&He in Le||Fe&&tt(Le,He);if(lt){var et=Le[He],At=void 0;if(Ce&&et&&((At=Je(et))||pu(et))){var Nt=J[He];At?Je(Nt)||(Nt=[]):pu(Nt)||(Nt={}),et=BN(Ce,Nt,et)}et!==void 0&&(J[He]=et)}}}return J}s(BN,"objExtend");function Hw(A){try{return A.responseText}catch{}return null}s(Hw,"getResponseText");function DN(A,x){return A?"XDomainRequest,Response:"+Hw(A)||"":x}s(DN,"formatErrorMessageXdr");function jw(A,x){return A?"XMLHttpRequest,Status:"+A[hE]+",Response:"+Hw(A)||A.response||"":x}s(jw,"formatErrorMessageXhr");function PN(A,x){return x&&(pt(x)?A=[x].concat(A):Je(x)&&(A=x.concat(A))),A}s(PN,"prependTransports");var h3="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",xE="withCredentials",df="timeout";function g3(A,x,T,S,P,L){S===void 0&&(S=!1),P===void 0&&(P=!1);function Q(se,Ce,Te){try{se[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var J=new XMLHttpRequest;return S&&Q(J,h3,S),T&&Q(J,xE,T),J.open(A,x,!P),T&&Q(J,xE,T),!P&&L&&Q(J,df,L),J}s(g3,"openXhr");function NN(A){var x={};if(he(A)){var T=ji(A)[Fh](/[\r\n]+/);qr(T,function(S){if(S){var P=S.indexOf(": ");if(P!==-1){var L=ji(S.substring(0,P))[yC](),Q=ji(S.substring(P+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(NN,"convertAllHeadersToMap");function Uh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(Uh,"_appendHeader");var Tn="kill-duration",LC="kill-duration-seconds",t1="time-delta-millis";function r1(A,x){var T={};return A[o3]?T=NN(A[o3]()):x&&(T=Uh(T,A,t1),T=Uh(T,A,Tn),T=Uh(T,A,LC)),T}s(r1,"_getAllResponseHeaders");var A3="documentMode",vE="location",FC="console",Vw="JSON",y3="crypto",$w="msCrypto",MC="msie",n1="trident/",C3="XMLHttpRequest",td=null,QC=null,ff=!1,kc=null,OC=null;function bE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[dE];S&&(T=x in S)}}catch{}if(!T)try{var P=new A;T=!q(P[x])}catch{}}return T}s(bE,"_hasProperty");function UC(A){if(A&&ff){var x=ia("__mockLocation");if(x)return x}return typeof location===fN&&location?location:ia(vE)}s(UC,"getLocation");function EE(){return typeof console!==pN?console:ia(FC)}s(EE,"getConsole");function qC(){return!!(typeof JSON===fN&&JSON||ia(Vw)!==null)}s(qC,"hasJSON");function hu(){return qC()?JSON||ia(Vw):null}s(hu,"getJSON");function zw(){return ia(y3)}s(zw,"getCrypto");function Yw(){return ia($w)}s(Yw,"getMsCrypto");function Jd(){var A=bh();if(A&&(A[kw]!==QC||td===null)){QC=A[kw];var x=(QC||mi)[yC]();td=Tl(x,MC)||Tl(x,n1)}return td}s(Jd,"isIE");function WC(A){if(A===void 0&&(A=null),!A){var x=bh()||{};A=x?(x.userAgent||mi)[yC]():mi}var T=(A||mi)[yC]();if(Tl(T,MC)){var S=rC()||{};return _e(parseInt(T[Fh](MC)[1]),S[A3]||0)}else if(Tl(T,n1)){var P=parseInt(T[Fh](n1)[1]);if(P)return P+4}return null}s(WC,"getIEVersion");function qh(A){return(OC===null||A===!1)&&(OC=AK()&&!!bh().sendBeacon),OC}s(qh,"isBeaconsSupported");function IE(A){var x=!1;try{x=!!ia("fetch");var T=ia("Request");x&&A&&T&&(x=bE(T,"keepalive"))}catch{}return x}s(IE,"isFetchSupported");function x3(){return kc===null&&(kc=typeof XDomainRequest!==pN,kc&&v3()&&(kc=kc&&!bE(ia(C3),"withCredentials"))),kc}s(x3,"useXDomainRequest");function v3(){var A=!1;try{var x=ia(C3);A=!!x}catch{}return A}s(v3,"isXhrSupported");var cl=4294967296,pf=4294967295,Kw=123456789,b3=987654321,Vp=!1,rd=Kw,GC=b3;function E3(A){A<0&&(A>>>=0),rd=Kw+A&pf,GC=b3-A&pf,Vp=!0}s(E3,"_mwcSeed");function LN(){try{var A=wh()&2147483647;E3((Math.random()*cl^A)+A)}catch{}}s(LN,"_autoSeedMwc");function I3(A){var x=0,T=zw()||Yw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&pf),x===0&&Jd()&&(Vp||LN(),x=FN()&pf),x===0&&(x=qA(cl*Math.random()|0)),A||(x>>>=0),x}s(I3,"random32");function FN(A){GC=36969*(GC&65535)+(GC>>16)&pf,rd=18e3*(rd&65535)+(rd>>16)&pf;var x=(GC<<16)+(rd&65535)>>>0&pf|0;return A||(x>>>=0),x}s(FN,"mwcRandom32");function WK(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=I3()>>>0,S=0,P=mi;P[Yn]<A;)S++,P+=x.charAt(T&63),T>>>=6,S===5&&(T=(I3()<<2&4294967295|T&3)>>>0,S=0);return P}s(WK,"newId");var HC="3.3.6",GK="."+WK(6),HK=0;function MN(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(MN,"_canAcceptData");function QN(A,x){var T=x[A.id];if(!T){T={};try{MN(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(QN,"_getCache");function $p(A,x){return x===void 0&&(x=!1),NC(A+HK+++(x?"."+HC:mi)+GK)}s($p,"createUniqueNamespace");function ON(A){var x={id:$p("_aiData-"+(A||mi)+"."+HC),accept:s(function(T){return MN(T)},"accept"),get:s(function(T,S,P,L){var Q=T[x.id];return Q?Q[NC(S)]:(L&&(Q=QN(x,T),Q[NC(S)]=P),P)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(ON,"createElmNodeData");function jC(A){return A&&Re(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(jC,"_isConfigDefaults");function UN(A,x,T){var S,P=T.dfVal||re;if(x&&T.fb){var L=T.fb;Je(L)||(L=[L]);for(var Q=0;Q<L[Yn];Q++){var J=L[Q],se=x[J];if(P(se)?S=se:A&&(se=A.cfg[J],P(se)&&(S=se),A.set(A.cfg,Ot(J),se)),P(S))break}}return!P(S)&&P(T.v)&&(S=T.v),S}s(UN,"_getDefault");function T3(A,x,T){var S=T;if(T&&jC(T)&&(S=UN(A,x,T)),S){jC(S)&&(S=T3(A,x,S));var P;Je(S)?(P=[],P[Yn]=S[Yn]):pu(S)&&(P={}),P&&(ne(S,function(L,Q){Q&&jC(Q)&&(Q=T3(A,x,Q)),P[L]=Q}),S=P)}return S}s(T3,"_resolveDefaultValue");function w3(A,x,T,S){var P,L,Q,J=S,se,Ce,Te,Le;jC(J)?(P=J.isVal,L=J.set,Te=J.rdOnly,Le=J.blkVal,se=J.mrg,Ce=J.ref,!Ce&&q(Ce)&&(Ce=!!se),Q=UN(A,x,J)):Q=S,Le&&A.blkVal(x,T);var Ye,Fe=!0,He=x[T];(He||!te(He))&&(Ye=He,Fe=!1,P&&Ye!==Q&&!P(Ye)&&(Ye=Q,Fe=!0),L&&(Ye=L(Ye,Q,x),Fe=Ye===Q)),Fe?Q?Ye=T3(A,x,Q):Ye=Q:(pu(Ye)||Je(Q))&&se&&Q&&(pu(Q)||Je(Q))&&ne(Q,function(lt,et){w3(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(w3,"_applyDefaultValue");var Wh=rE("[[ai_dynCfg_1]]"),qN=rE("[[ai_blkDynCfg_1]]"),WN=rE("[[ai_frcDynCfg_1]]");function GN(A){if(A){var x;if(Je(A)?(x=[],x[Yn]=A[Yn]):pu(A)&&(x={}),x)return ne(A,function(T,S){x[T]=GN(S)}),x}return A}s(GN,"_cfgDeepCopy");function jK(A){if(A){var x=A[Wh]||A;if(x.cfg&&(x.cfg===A||x.cfg[Wh]===x))return x}return null}s(jK,"getDynamicConfigHandler");function VK(A){if(A&&(pu(A)||Je(A)))try{A[qN]=!0}catch{}return A}s(VK,"blockDynamicConversion");function _3(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[WN],!S&&!T[qN]&&(S=pu(T)||Je(T))),S}s(_3,"_canMakeDynamic");function VC(A){zr("InvalidAccess:"+A)}s(VC,"throwInvalidAccess");var $K=["push","pop","shift","unshift","splice"],TE=s(function(A,x,T,S){A&&A[$A](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Gh(A,x,T){Je(x)&&qr($K,function(S){var P=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var J=P[Tw](this,L);return YC(A,x,T,"Patching"),J}})}s(Gh,"_patchArray");function Xd(A,x){var T=Oe(A,x);return T&&T.get}s(Xd,"_getOwnPropGetter");function HN(A,x,T,S){var P={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(fu(P.h,Ce)===-1&&P.h[Vi](Ce),A.trk(Ce,P))},"trk"),clr:s(function(Ce){var Te=fu(P.h,Ce);Te!==-1&&P.h[xC](Te,1)},"clr")},L=!0,Q=!1;function J(){L&&(Q=Q||_3(J,A,S),S&&!S[Wh]&&Q&&(S=YC(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&P.trk(Ce),S}s(J,"_getProperty"),J[A.prop]={chng:s(function(){A.add(P)},"chng")};function se(Ce){if(S!==Ce){J[A.ro]&&!A.upd&&VC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||_3(J,A,S),L=!1);var Te=Q&&J[A.rf];if(Q)if(Te){ne(S,function(Ye){S[Ye]=Ce?Ce[Ye]:Zu});try{ne(Ce,function(Ye,Fe){$C(A,S,Ye,Fe)}),Ce=S}catch(Ye){TE((A.hdlr||{})[ga],T,"Assigning",Ye),Q=!1}}else S&&S[Wh]&&ne(S,function(Ye){var Fe=Xd(S,Ye);if(Fe){var He=Fe[A.prop];He&&He.chng()}});if(Ce!==S){var Le=Ce&&_3(J,A,Ce);!Te&&Le&&(Ce=YC(A,Ce,T,"Converting")),S=Ce,Q=Le}A.add(P)}}s(se,"_setProperty"),ze(x,P.n,{g:J,s:se})}s(HN,"_createDynamicProperty");function $C(A,x,T,S){if(x){var P=Xd(x,T),L=P&&!!P[A.prop];L?x[T]=S:HN(A,x,T,S)}return x}s($C,"_setDynamicProperty");function zC(A,x,T,S){if(x){var P=Xd(x,T),L=P&&!!P[A.prop],Q=S&&S[0],J=S&&S[1],se=S&&S[2];if(!L){if(se)try{VK(x)}catch(Ce){TE((A.hdlr||{})[ga],T,"Blocking",Ce)}try{$C(A,x,T,x[T]),P=Xd(x,T)}catch(Ce){TE((A.hdlr||{})[ga],T,"State",Ce)}}Q&&(P[A.rf]=Q),J&&(P[A.ro]=J),se&&(P[A.blkVal]=!0)}return x}s(zC,"_setDynamicPropertyState");function YC(A,x,T,S){try{ne(x,function(P,L){$C(A,x,P,L)}),x[Wh]||(be(x,Wh,{get:s(function(){return A.hdlr},"get")}),Gh(A,x,T))}catch(P){TE((A.hdlr||{})[ga],T,S,P)}return x}s(YC,"_makeDynamicObject");var wE="[[ai_",_E="]]";function zK(A){var x=OA(wE+"get"+A.uid+_E),T=OA(wE+"ro"+A.uid+_E),S=OA(wE+"rf"+A.uid+_E),P=OA(wE+"blkVal"+A.uid+_E),L=OA(wE+"dtl"+A.uid+_E),Q=null,J=null,se;function Ce(Fe,He){var lt=se.act;try{se.act=Fe,Fe&&Fe[L]&&(qr(Fe[L],function(At){At.clr(Fe)}),Fe[L]=[]),He({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(At){var et=A[ga];throw et&&et[$A](1,107,Lt(At)),At}finally{se.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Fe=Q;Q=null,J&&J[vC](),J=null;var He=[];if(qr(Fe,function(lt){if(lt&&(lt[L]&&(qr(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){He[Vi](et)}}),Q)try{Te()}catch(lt){He[Vi](lt)}He[Yn]>0&&l3("Watcher error(s): ",He)}}s(Te,"_notifyWatchers");function Le(Fe){if(Fe&&Fe.h[Yn]>0){Q||(Q=[]),J||(J=Rh(function(){J=null,Te()},0));for(var He=0;He<Fe.h[Yn];He++){var lt=Fe.h[He];lt&&fu(Q,lt)===-1&&Q[Vi](lt)}}}s(Le,"_addWatcher");function Ye(Fe,He){if(Fe){var lt=Fe[L]=Fe[L]||[];fu(lt,He)===-1&&lt[Vi](He)}}return s(Ye,"_trackHandler"),se={prop:x,ro:T,rf:S,blkVal:P,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},se}s(zK,"_createState");function Jw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Jw,"_createAndUseHandler");function jN(A,x,T){var S=jK(x);if(S)return S;var P=$p("dyncfg",!0),L=x&&T!==!1?x:GN(x),Q;function J(){Q.notify()}s(J,"_notifyWatchers");function se(et,At,Nt){try{et=$C(Q,et,At,Nt)}catch(Vt){TE(A,At,"Setting value",Vt)}return et[At]}s(se,"_setValue");function Ce(et){return Jw(Q,et)}s(Ce,"_watch");function Te(et,At){Q.use(null,function(Nt){var Vt=Q.upd;try{q(At)||(Q.upd=At),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Le(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[0]=!0,Nt))[At]}s(Le,"_ref");function Ye(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[1]=!0,Nt))[At]}s(Ye,"_rdOnly");function Fe(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[2]=!0,Nt))[At]}s(Fe,"_blkPropValue");function He(et,At){return At&&ne(At,function(Nt,Vt){w3(lt,et,Nt,Vt)}),et}s(He,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:J,set:se,setDf:He,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Fe,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:P}),Q=zK(lt),YC(Q,L,"config","Creating"),lt}s(jN,"_createDynamicHandler");function VN(A,x){A?(A[CC](x),A[$A](2,108,x)):VC(x)}s(VN,"_logInvalidAccess");function nd(A,x,T,S){var P=jN(T,A||{},S);return x&&P.setDf(P.cfg,x),P}s(nd,"createDynamicConfig");function zp(A,x,T){var S=A[Wh]||A;return S.cfg&&(S.cfg===A||S.cfg[Wh]===S)?S[qp](x):(VN(T,RN+Lt(A)),nd(A,null,T)[qp](x))}s(zp,"onConfigChange");function KC(A,x){if(A&&A[zA])return A[zA](x)}s(KC,"runTargetUnload");function $N(A,x,T){var S;return T||(S=RC(function(P){T=P})),A&&IK(A)>0?Xu(KC(A[0],x),function(){$N(oC(A,1),x,T)}):T(),S}s($N,"doUnloadAll");var YK=500,zN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function KK(A,x,T){return!A&&te(A)?x:Tt(A)?A:Ot(A)[yC]()==="true"}s(KK,"_stringToBoolOrDefault");function JK(A){return{mrg:!0,v:A}}s(JK,"cfgDfMerge");function S3(A,x,T){return{fb:T,isVal:A,v:x}}s(S3,"cfgDfValidate");function mf(A,x){return{fb:x,set:KK,v:!!A}}s(mf,"cfgDfBoolean");var Xw=[DC,PC,Ow,e1],Zw=null,e_;function XK(A,x){return function(){var T=arguments,S=YN(x);if(S){var P=S.listener;P&&P[A]&&P[A][Tw](P,T)}}}s(XK,"_listenerProxyFunc");function ZK(){var A=ia("Microsoft");return A&&(Zw=A.ApplicationInsights),Zw}s(ZK,"_getExtensionNamespace");function YN(A){var x=Zw;return!x&&A.disableDbgExt!==!0&&(x=Zw||ZK()),x?x.ChromeDbgExt:null}s(YN,"getDebugExt");function eJ(A){if(!e_){e_={};for(var x=0;x<Xw[Yn];x++)e_[Xw[x]]=XK(Xw[x],A)}return e_}s(eJ,"getDebugListener");var JC,KN="warnToConsole",tJ="AI (Internal): ",rJ="AI: ",nJ="AITR_",JN={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},XC=(JC={},JC[0]=null,JC[1]="errorToConsole",JC[2]=KN,JC[3]="debugToConsole",JC);function gu(A){return A?'"'+A[Mh](/\"/g,mi)+'"':mi}s(gu,"_sanitizeDiagnosticText");function SE(A,x){var T=EE();if(T){var S="log";T[A]&&(S=A),Ne(T[S])&&T[S](x)}}s(SE,"_logToConsole");var t_=function(){function A(x,T,S,P){S===void 0&&(S=!1);var L=this;L[Sw]=x,L[KA]=(S?rJ:tJ)+x;var Q=mi;qC()&&(Q=hu().stringify(P));var J=(T?" message:"+gu(T):mi)+(P?" props:"+gu(Q):mi);L[KA]+=J}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function RE(A,x){return(A||{})[ga]||new kE(x)}s(RE,"safeGetLogger");var kE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},P,L,Q,J,se;rc(A,this,function(Ce){se=Le(x||{}),Ce.consoleLoggingLevel=function(){return P},Ce[$A]=function(He,lt,et,At,Nt){Nt===void 0&&(Nt=!1);var Vt=new t_(lt,et,Nt,At);if(J)throw Lt(Vt);var mr=XC[He]||KN;if(q(Vt[KA]))Fe("throw"+(He===1?"Critical":"Warning"),Vt);else{if(Nt){var Hn=+Vt[Sw];!S[Hn]&&P>=He&&(Ce[mr](Vt[KA]),S[Hn]=!0)}else P>=He&&Ce[mr](Vt[KA]);Te(He,Vt)}},Ce.debugToConsole=function(He){SE("debug",He),Fe("warning",He)},Ce[CC]=function(He){SE("warn",He),Fe("warning",He)},Ce.errorToConsole=function(He){SE("error",He),Fe("error",He)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[zA]=function(He){se&&se.rm(),se=null};function Te(He,lt){if(!Ye()){var et=!0,At=nJ+lt[Sw];if(S[At]?et=!1:S[At]=!0,et&&(He<=L&&(Ce.queue[Vi](lt),T++,Fe(He===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new t_(23,Nt,!1);Ce.queue[Vi](Vt),He===1?Ce.errorToConsole(Nt):Ce[CC](Nt)}}}s(Te,"_logInternalMessage");function Le(He){return zp(nd(He,JN,Ce).cfg,function(lt){var et=lt.cfg;P=et[AN],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,J=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Fe(He,lt){var et=YN(x||{});et&&et[cf]&&et[cf](He,lt)}s(Fe,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function R3(A){return A||new kE}s(R3,"_getLogger");function Tr(A,x,T,S,P,L){L===void 0&&(L=!1),R3(A)[$A](x,T,S,P,L)}s(Tr,"_throwInternal");function r_(A,x){R3(A)[CC](x)}s(r_,"_warnToConsole");var BE,Hh,XN="toGMTString",ZN="toUTCString",n_="cookie",Yp="expires",e7="isCookieUseDisabled",i_="disableCookiesUsage",t7="_ckMgr",o_=null,ZC=null,s_=null,hf,r7={},n7={},i7=(BE={cookieCfg:JK((Hh={},Hh[qw]={fb:"cookieDomain",dfVal:Gw},Hh.path={fb:"cookiePath",dfVal:Gw},Hh.enabled=Zu,Hh.ignoreCookies=Zu,Hh.blockedCookies=Zu,Hh)),cookieDomain:Zu,cookiePath:Zu},BE[i_]=Zu,BE);function k3(){!hf&&(hf=On(function(){return rC()}))}s(k3,"_getDoc");function DE(A){return A?A.isEnabled():!0}s(DE,"_isMgrEnabled");function B3(A,x){return x&&A&&Je(A.ignoreCookies)?fu(A.ignoreCookies,x)!==-1:!1}s(B3,"_isIgnoredCookie");function iJ(A,x){return x&&A&&Je(A.blockedCookies)&&fu(A.blockedCookies,x)!==-1?!0:B3(A,x)}s(iJ,"_isBlockedCookie");function D3(A,x){var T=x[af];if(te(T)){var S=void 0;q(A[e7])||(S=!A[e7]),q(A[i_])||(S=!A[i_]),T=S}return T}s(D3,"_isCfgEnabled");function oJ(A,x){var T,S,P,L,Q,J,se,Ce;A=nd(A||n7,null,x).cfg,L=zp(A,function(Le){Le.setDf(Le.cfg,i7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Ww]||"/",P=T[qw],Q=D3(A,T)!==!1,J=T.getCookie||sJ,se=T.setCookie||ex,Ce=T.delCookie||ex},x);var Te={isEnabled:s(function(){var Le=D3(A,T)!==!1&&Q&&o7(x),Ye=n7[t7];return Le&&Ye&&Te!==Ye&&(Le=DE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){Q=Le!==!1,T[af]=Le},"setEnabled"),set:s(function(Le,Ye,Fe,He,lt){var et=!1;if(DE(Te)&&!iJ(T,Le)){var At={},Nt=ji(Ye||mi),Vt=Qp(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),At=P3(ge(Ye,Vt+1))),Oh(At,qw,He||P,ce,q),!te(Fe)){var mr=Jd();if(q(At[Yp])){var Hn=wh(),xi=Hn+Fe*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Oh(At,Yp,s7(vi,mr?XN:ZN)||s7(vi,mr?XN:ZN)||mi,ce)}}mr||Oh(At,"max-age",mi+Fe,null,q)}var ho=UC();ho&&ho.protocol==="https:"&&(Oh(At,"secure",null,null,q),ZC===null&&(ZC=!aJ((bh()||{})[kw])),ZC&&Oh(At,"SameSite","None",null,q)),Oh(At,Ww,lt||S,null,q),se(Le,a7(Nt,At)),et=!0}return et},"set"),get:s(function(Le){var Ye=mi;return DE(Te)&&!B3(T,Le)&&(Ye=J(Le)),Ye},"get"),del:s(function(Le,Ye){var Fe=!1;return DE(Te)&&(Fe=Te.purge(Le,Ye)),Fe},"del"),purge:s(function(Le,Ye){var Fe,He=!1;if(o7(x)){var lt=(Fe={},Fe[Ww]=Ye||"/",Fe[Yp]="Thu, 01 Jan 1970 00:00:01 GMT",Fe);Jd()||(lt["max-age"]="0"),Ce(Le,a7(mi,lt)),He=!0}return He},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[t7]=Te,Te}s(oJ,"createCookieMgr");function o7(A){if(o_===null){o_=!1,!hf&&k3();try{var x=hf.v||{};o_=x[n_]!==void 0}catch(T){Tr(A,2,68,"Cannot access document.cookie - "+ll(T),{exception:Lt(T)})}}return o_}s(o7,"areCookiesSupported");function P3(A){var x={};if(A&&A[Yn]){var T=ji(A)[Fh](";");qr(T,function(S){if(S=ji(S||mi),S){var P=Qp(S,"=");P===-1?x[S]=null:x[ji(M(S,P))]=ji(ge(S,P+1))}})}return x}s(P3,"_extractParts");function s7(A,x){return Ne(A[x])?A[x]():null}s(s7,"_formatDate");function a7(A,x){var T=A||mi;return ne(x,function(S,P){T+="; "+S+(te(P)?mi:"="+P)}),T}s(a7,"_formatCookieValue");function sJ(A){var x=mi;if(!hf&&k3(),hf.v){var T=hf.v[n_]||mi;s_!==T&&(r7=P3(T),s_=T),x=ji(r7[A]||mi)}return x}s(sJ,"_getCookieValue");function ex(A,x){!hf&&k3(),hf.v&&(hf.v[n_]=A+"="+x)}s(ex,"_setCookieValue");function aJ(A){return he(A)?!!(Tl(A,"CPU iPhone OS 12")||Tl(A,"iPad; CPU OS 12")||Tl(A,"Macintosh; Intel Mac OS X 10_14")&&Tl(A,"Version/")&&Tl(A,"Safari")||Tl(A,"Macintosh; Intel Mac OS X 10_14")&&dN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Tl(A,"Chrome/5")||Tl(A,"Chrome/6")||Tl(A,"UnrealEngine")&&!Tl(A,"Chrome")||Tl(A,"UCBrowser/12")||Tl(A,"UCBrowser/11")):!1}s(aJ,"uaDisallowsSameSiteNone");var N3={perfEvtsSendAll:!1};function lJ(A){A.h=null;var x=A.cb;A.cb=[],qr(x,function(T){ae(T.fn,[T.arg])})}s(lJ,"_runScheduledListeners");function jh(A,x,T,S){qr(A,function(P){P&&P[x]&&(T?(T.cb[Vi]({fn:S,arg:P}),T.h=T.h||Rh(lJ,0,T)):ae(S,[P]))})}s(jh,"_runListeners");var cJ=function(){function A(x){this.listeners=[];var T,S,P=[],L={h:null,cb:[]},Q=nd(x,N3);S=Q[qp](function(J){T=!!J.cfg.perfEvtsSendAll}),rc(A,this,function(J){ze(J,"listeners",{g:s(function(){return P},"g")}),J[ww]=function(se){P[Vi](se)},J[mE]=function(se){for(var Ce=fu(P,se);Ce>-1;)P[xC](Ce,1),Ce=fu(P,se)},J[DC]=function(se){jh(P,DC,L,function(Ce){Ce[DC](se)})},J[PC]=function(se,Ce){jh(P,PC,L,function(Te){Te[PC](se,Ce)})},J[Ow]=function(se,Ce){jh(P,Ow,Ce?L:null,function(Te){Te[Ow](se,Ce)})},J[e1]=function(se){se&&(T||!se[s3]())&&jh(P,e1,null,function(Ce){se.isAsync?Rh(function(){return Ce[e1](se)},0):Ce[e1](se)})},J[u3]=function(se){se&&se[Yn]&&jh(P,u3,L,function(Ce){Ce[u3](se)})},J[d3]=function(se){se&&se[wC]&&jh(P,d3,L,function(Ce){Ce[d3](se)})},J[Uw]=function(se,Ce){if(se>0){var Te=Ce||0;jh(P,Uw,L,function(Le){Le[Uw](se,Te)})}},J[zA]=function(se){var Ce=s(function(){S&&S.rm(),S=null,P=[],L.h&&L.h[vC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(jh(P,"unload",null,function(Le){var Ye=Le[zA](se);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return RC(function(Le){return Xu(c3(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),tx="ctx",L3="ParentContextKey",PE="ChildrenContextKey",uJ=null,a_=function(){function A(x,T,S){var P=this;if(P.start=wh(),P[Nh]=x,P.isAsync=S,P[s3]=function(){return!1},Ne(T)){var L;ze(P,"payload",{g:s(function(){return!L&&Ne(T)&&(L=T(),T=null),L},"g")})}P[Qh]=function(Q){return Q?Q===A[L3]||Q===A[PE]?P[Q]:(P[tx]||{})[Q]:null},P[Yd]=function(Q,J){if(Q)if(Q===A[L3])P[Q]||(P[s3]=function(){return!0}),P[Q]=J;else if(Q===A[PE])P[Q]=J;else{var se=P[tx]=P[tx]||{};se[Q]=J}},P.complete=function(){var Q=0,J=P[Qh](A[PE]);if(Je(J))for(var se=0;se<J[Yn];se++){var Ce=J[se];Ce&&(Q+=Ce.time)}P.time=wh()-P.start,P.exTime=P.time-Q,P.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),dJ=function(){function A(x){this.ctx={},rc(A,this,function(T){T.create=function(S,P,L){return new a_(S,P,L)},T.fire=function(S){S&&(S.complete(),x&&Ne(x[e1])&&x[e1](S))},T[Yd]=function(S,P){if(S){var L=T[tx]=T[tx]||{};L[S]=P}},T[Qh]=function(S){return(T[tx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),gf="CoreUtils.doPerf";function rx(A,x,T,S,P){if(A){var L=A;if(L[AE]&&(L=L[AE]()),L){var Q=void 0,J=L[Qh](gf);try{if(Q=L.create(x(),S,P),Q){if(J&&Q[Yd]&&(Q[Yd](a_[L3],J),J[Qh]&&J[Yd])){var se=J[Qh](a_[PE]);se||(se=[],J[Yd](a_[PE],se)),se[Vi](Q)}return L[Yd](gf,Q),T(Q)}}catch(Ce){Q&&Q[Yd]&&Q[Yd]("exception",Ce)}finally{Q&&L.fire(Q),L[Yd](gf,J)}}}return T()}s(rx,"doPerf");function ya(){return uJ}s(ya,"getGblPerfMgr");var l_="00000000000000000000000000000000",nx="0000000000000000";function c_(A,x,T){return A&&A[Yn]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(c_,"_isValid");function Vh(A){return c_(A,32,l_)}s(Vh,"isValidTraceId");function i1(A){return c_(A,16,nx)}s(i1,"isValidSpanId");var NE=ON("plugin");function $h(A){return NE.get(A,"state",{},!0)}s($h,"_getPluginState");function F3(A,x){for(var T=[],S=null,P=A[uf](),L;P;){var Q=P[EC]();if(Q){S&&S[Lh]&&Q[ed]&&S[Lh](Q),L=$h(Q);var J=!!L[sf];Q[sf]&&(J=Q[sf]()),J||T[Vi](Q),S=Q,P=P[uf]()}}qr(T,function(se){var Ce=A[Aa]();se[pE](A.getCfg(),Ce,x,A[uf]()),L=$h(se),!se[Aa]&&!L[Aa]&&(L[Aa]=Ce),L[sf]=!0,delete L[lf]})}s(F3,"initializePlugins");function M3(A){return A.sort(function(x,T){var S=0;if(T){var P=T[ed];x[ed]?S=P?x[BC]-T[BC]:1:P&&(S=-1)}else S=x?1:-1;return S})}s(M3,"sortPlugins");function fJ(A){var x={};return{getName:s(function(){return x[Nh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Nh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),Vh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),i1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[CN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[CN]=T},"setTraceFlags")}}s(fJ,"createDistributedTraceContext");var pJ="TelemetryPluginChain",l7="_hasRun",Q3="_getTelCtx",c7=0;function mJ(A,x,T){for(;A;){if(A[EC]()===T)return A;A=A[uf]()}return D([T],x.config||{},x)}s(mJ,"_getNextProxyStart");function O3(A,x,T,S){var P=null,L=[];x||(x=nd({},null,T[ga])),S!==null&&(P=S?mJ(A,T,S):A);var Q={_next:se,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return RE(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!P},"hasNext"),getNext:s(function(){return P},"getNext"),setNext:s(function(Fe){P=Fe},"setNext"),iterate:Ye,onComplete:J}};function J(Fe,He){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Fe&&L[Vi]({func:Fe,self:q(He)?Q.ctx:He,args:lt})}s(J,"_addOnComplete");function se(){var Fe=P;if(P=Fe?Fe[uf]():null,!Fe){var He=L;He&&He[Yn]>0&&(qr(He,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){Tr(T[ga],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Fe}s(se,"_moveNext");function Ce(Fe,He){var lt=null,et=x.cfg;if(et&&Fe){var At=et[ZA];!At&&He&&(At={}),et[ZA]=At,At=x.ref(et,ZA),At&&(lt=At[Fe],!lt&&He&&(lt={}),At[Fe]=lt,lt=x.ref(At,Fe))}return lt}s(Ce,"_getExtCfg");function Te(Fe,He){var lt=Ce(Fe,!0);return He&&ne(He,function(et,At){if(te(lt[et])){var Nt=x.cfg[et];(Nt||!te(Nt))&&(lt[et]=Nt)}w3(x,lt,et,At)}),x.setDf(lt,He)}s(Te,"_resolveExtCfg");function Le(Fe,He,lt){lt===void 0&&(lt=!1);var et,At=Ce(Fe,!1),Nt=x.cfg;return At&&(At[He]||!te(At[He]))?et=At[He]:(Nt[He]||!te(Nt[He]))&&(et=Nt[He]),et||!te(et)?et:lt}s(Le,"_getConfig");function Ye(Fe){for(var He;He=Q._next();){var lt=He[EC]();lt&&Fe(lt)}}return s(Ye,"_iterateChain"),Q}s(O3,"_createInternalContext");function ix(A,x,T,S){var P=nd(x),L=O3(A,P,T,S),Q=L.ctx;function J(Ce){var Te=L._next();return Te&&Te[ed](Ce,Q),!Te}s(J,"_processNext");function se(Ce,Te){return Ce===void 0&&(Ce=null),Je(Ce)&&(Ce=D(Ce,P.cfg,T,Te)),ix(Ce||Q[uf](),P.cfg,T,Te)}return s(se,"_createNew"),Q[Il]=J,Q[YA]=se,Q}s(ix,"createProcessTelemetryContext");function w(A,x,T){var S=nd(x.config),P=O3(A,S,x,T),L=P.ctx;function Q(se){var Ce=P._next();return Ce&&Ce[zA](L,se),!Ce}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=D(se,S.cfg,x,Ce)),w(se||L[uf](),x,Ce)}return s(J,"_createNew"),L[Il]=Q,L[YA]=J,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=nd(x.config),P=O3(A,S,x,T),L=P.ctx;function Q(se){return L.iterate(function(Ce){Ne(Ce[Wp])&&Ce[Wp](L,se)})}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=D(se,S.cfg,x,Ce)),R(se||L[uf](),x,Ce)}return s(J,"_createNew"),L[Il]=Q,L[YA]=J,L}s(R,"createProcessTelemetryUpdateContext");function D(A,x,T,S){var P=null,L=!S;if(Je(A)&&A[Yn]>0){var Q=null;qr(A,function(J){if(!L&&S===J&&(L=!0),L&&J&&Ne(J[ed])){var se=F(J,x,T);P||(P=se),Q&&Q._setNext(se),Q=se}})}return S&&!P?D([S],x,T):P}s(D,"createTelemetryProxyChain");function F(A,x,T){var S=null,P=Ne(A[ed]),L=Ne(A[Lh]),Q;A?Q=A[Ph]+"-"+A[BC]+"-"+c7++:Q="Unknown-0-"+c7++;var J={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:Q,_setNext:s(function(Fe){S=Fe},"_setNext")};function se(){var Fe;return A&&Ne(A[Q3])&&(Fe=A[Q3]()),Fe||(Fe=ix(J,x,T)),Fe}s(se,"_getTelCtx");function Ce(Fe,He,lt,et,At){var Nt=!1,Vt=A?A[Ph]:pJ,mr=Fe[l7];return mr||(mr=Fe[l7]={}),Fe.setNext(S),A&&rx(Fe[Aa](),function(){return Vt+":"+lt},function(){mr[Q]=!0;try{var Hn=S?S._id:mi;Hn&&(mr[Hn]=!1),Nt=He(Fe)}catch(vi){var xi=S?mr[S._id]:!0;xi&&(Nt=!0),(!S||!xi)&&Tr(Fe[cf](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(mr))}},et,At),Nt}s(Ce,"_processChain");function Te(Fe,He){He=He||se();function lt(et){if(!A||!P)return!1;var At=$h(A);return At[lf]||At[Qw]?!1:(L&&A[Lh](S),A[ed](Fe,et),!0)}s(lt,"_callProcessTelemetry"),Ce(He,lt,"processTelemetry",function(){return{item:Fe}},!Fe.sync)||He[Il](Fe)}s(Te,"_processTelemetry");function Le(Fe,He){function lt(){var et=!1;if(A){var At=$h(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[lf]&&(At[Aa]=null,At[lf]=!0,At[sf]=!1,A[lf]&&A[lf](Fe,He)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Fe,lt,"unload",function(){},He.isAsync)||Fe[Il](He)}s(Le,"_unloadPlugin");function Ye(Fe,He){function lt(){var et=!1;if(A){var At=$h(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[lf]&&A[Wp]&&A[Wp](Fe,He)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Fe,lt,"update",function(){},!1)||Fe[Il](He)}return s(Ye,"_updatePlugin"),Gt(J)}s(F,"createTelemetryPluginProxy");function oe(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,P){qr(A,function(L){try{L(S,P)}catch(Q){Tr(S[cf](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(oe,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var P=A;A=[],qr(P,function(L){try{(L.rm||L.remove).call(L)}catch(Q){Tr(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&iC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[ZA]={isVal:Gw,v:{}},we),mt=function(){function A(){var x=this,T,S,P,L,Q;Ce(),rc(A,x,function(Te){Te[pE]=function(Le,Ye,Fe,He){se(Le,Ye,He),T=!0},Te[lf]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||w(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[cf]()),He===!0&&et[Il](At),Ce())}return s(Nt,"_unloadCallback"),!Te[Rw]||Te[Rw](et,At,Nt)!==!0?Nt():He=!0,He},Te[Wp]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||R(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0};function Nt(){lt||(lt=!0,se(et.getCfg(),et.core(),et[uf]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,At,Nt)!==!0?Nt():He=!0,He},CE(Te,"_addUnloadCb",function(){return L},"add"),CE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[cf]=function(Te){return J(Te)[cf]()},x[sf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Lh]=function(Te){P=Te},x[Il]=function(Te,Le){Le?Le[Il](Te):P&&Ne(P[ed])&&P[ed](Te,null)},x._getTelCtx=J;function J(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||ix(null,{},x[Aa]);P&&P[Qe]?Le=Ye[YA](null,P[Qe]):Le=Ye[YA](null,P)}return Le}s(J,"_getTelCtx");function se(Te,Le,Ye){nd(Te,Xe,RE(Le)),!Ye&&Le&&(Ye=Le[IC]()[uf]());var Fe=P;P&&P[Qe]&&(Fe=P[Qe]()),x[Aa]=Le,S=ix(Ye,Te,Le,Fe)}s(se,"_setDefaults");function Ce(){T=!1,x[Aa]=null,S=null,P=null,Q=Ee(),L=oe()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function ir(A,x,T){var S={id:x,fn:T};iC(A,S);var P={remove:s(function(){qr(A,function(L,Q){if(L.id===S.id)return A[xC](Q,1),-1})},"remove")};return P}s(ir,"_addInitializer");function wn(A,x,T){for(var S=!1,P=A[Yn],L=0;L<P;++L){var Q=A[L];if(Q)try{if(Q.fn[Tw](null,[x])===!1){S=!0;break}}catch(J){Tr(T,2,64,"Telemetry initializer failed: "+ll(J),{exception:Lt(J)},!0)}}return!S}s(wn,"_runInitializers");var Gn=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,P;L(),rc(x,T,function(Q,J){Q.addTelemetryInitializer=function(se){return ir(P,S++,se)},Q[ed]=function(se,Ce){wn(P,se,Ce?Ce[cf]():Q[cf]())&&Q[Il](se,Ce)},Q[Rw]=function(){L()}});function L(){S=0,P=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(mt),cr,br="Plugins must provide initialize method",Un="_notificationManager",_n="SDK is still unloading...",hi="SDK is not initialized",no=100,Bi=5e4,Qa=Xt((cr={cookieCfg:{}},cr[kC]={rdOnly:!0,ref:!0,v:[]},cr[jp]={rdOnly:!0,ref:!0,v:[]},cr[ZA]={ref:!0,v:{}},cr[Kd]=Zu,cr.loggingLevelConsole=0,cr.diagnosticLogInterval=Zu,cr));function ox(A,x){return new dJ(x)}s(ox,"_createPerfManager");function LE(A,x,T){var S=[],P=[],L={};return qr(T,function(Q){(te(Q)||te(Q[pE]))&&Gr(br);var J=Q[BC],se=Q[Ph];Q&&J&&(te(L[J])?L[J]=se:r_(A,"Two extensions have same priority #"+J+" - "+L[J]+", "+se)),!J||J<x?S[Vi](Q):P[Vi](Q)}),{core:S,channels:P}}s(LE,"_validateExtensions");function U3(A,x){var T=!1;return qr(x,function(S){if(S===A)return T=!0,-1}),T}s(U3,"_isPluginPresent");function u_(A,x,T,S){T&&ne(T,function(P,L){S&&pu(L)&&pu(x[P])&&u_(A,x[P],L,S),S&&pu(L)&&pu(x[P])?u_(A,x[P],L,S):A.set(x,P,L)})}s(u_,"_deepMergeConfig");function u7(A,x){var T=null,S=-1;return qr(A,function(P,L){if(P.w===x)return T=P,S=L,-1}),{i:S,l:T}}s(u7,"_findWatcher");function hJ(A,x){var T=u7(A,x).l;return T||(T={w:x,rm:s(function(){var S=u7(A,x);S.i!==-1&&A[xC](S.i,1)},"rm")},A[Vi](T)),T}s(hJ,"_addDelayedCfgListener");function q3(A,x,T){qr(x,function(S){var P=zp(A,S.w,T);delete S.w,S.rm=function(){P.rm()}})}s(q3,"_registerDelayedCfgListener");function d7(A,x,T,S){return x.add(A[qp](function(P){var L=P.cfg.disableDbgExt;L===!0&&S&&(T[mE](S),S=null),T&&!S&&L!==!0&&(S=eJ(P.cfg),T[ww](S))})),S}s(d7,"_initDebugListener");function f7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(f7,"_createUnloadHook");var It=function(){function A(){var x,T,S,P,L,Q,J,se,Ce,Te,Le,Ye,Fe,He,lt,et,At,Nt,Vt,mr,Hn,xi,vi,ho,dn,Lr,bi,Rs,Oo,Ft,Fr,io;rc(A,this,function(Et){ot(),Et._getDbgPlgTargets=function(){return[vi,P]},Et[sf]=function(){return T},Et.activeStatus=function(){return Lr},Et._setPendingStatus=function(){Lr=3},Et[pE]=function(dt,dr,Pn,Dr){Fe&&Gr(_n),Et[sf]()&&Gr("Core cannot be initialized more than once"),x=nd(dt,Qa,Pn||Et[ga],!1),dt=x.cfg,oc(x[qp](function(wo){var ss=wo.cfg,Pc=Lr===3;if(!Pc){Rs=ss.initInMemoMaxSize||no;var id=ss.instrumentationKey,Xp=ss.endpointUrl;if(te(id)){Hn=null,Lr=Dh.INACTIVE;var Zp="Please provide instrumentation key";T?(Tr(S,1,100,Zp),js()):Gr(Zp);return}var E_=[];if(bt(id)?(E_[Vi](id),Hn=null):Hn=id,bt(Xp)?(E_[Vi](Xp),bi=null):bi=Xp,E_[Yn]){Oo=!1,Lr=3;var aB=Gw(ss.initTimeOut)?ss.initTimeOut:Bi,$J=mu(E_);Rh(function(){Oo||Sn()},aB),Xu($J,function(gx){try{if(Oo)return;if(!gx.rejected){var Ax=gx[bC];if(Ax&&Ax[Yn]){var F7=Ax[0];if(Hn=F7&&F7[bC],Ax[Yn]>1){var M7=Ax[1];bi=M7&&M7[bC]}}Hn&&(dt.instrumentationKey=Hn,dt.endpointUrl=bi)}Sn()}catch{Oo||Sn()}})}else Sn();var I_=wo.ref(wo.cfg,ZA);ne(I_,function(gx){wo.ref(I_,gx)})}})),L=Dr,Vt=d7(x,Nt,L&&Et[zd](),Vt),mx(),Et[ga]=Pn;var Nn=dt[kC];if(Te=[],Te[Vi].apply(Te,hN(hN([],dr,!1),Nn)),Le=dt[jp],Vs(null),(!Ye||Ye[Yn]===0)&&Gr("No "+jp+" available"),Le&&Le[Yn]>1){var vo=Et[EC]("TeeChannelController");(!vo||!vo.plugin)&&Tr(S,1,28,"TeeChannel required")}q3(dt,xi,S),xi=null,T=!0,Lr===Dh.ACTIVE&&js()},Et.getChannels=function(){var dt=[];return Ye&&qr(Ye,function(dr){dt[Vi](dr)}),Gt(dt)},Et.track=function(dt){rx(Et[AE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(ks(dt),Gr("Invalid telemetry item")),!dt[Nh]&&te(dt[Nh])&&(ks(dt),Gr("telemetry name required")),dt.iKey=dt.iKey||Hn,dt.time=dt.time||yE(new Date),dt.ver=dt.ver||"4.0",!Fe&&Et[sf]()&&Lr===Dh.ACTIVE?qa()[Il](dt):Lr!==Dh.INACTIVE&&P[Yn]<=Rs&&P[Vi](dt)},function(){return{item:dt}},!dt.sync)},Et[IC]=qa,Et[zd]=function(){return L||(L=new cJ(x.cfg),Et[Un]=L),L},Et[ww]=function(dt){Et.getNotifyMgr()[ww](dt)},Et[mE]=function(dt){L&&L[mE](dt)},Et.getCookieMgr=function(){return se||(se=oJ(x.cfg,Et[ga])),se},Et.setCookieMgr=function(dt){se!==dt&&(KC(se,!1),se=dt)},Et[AE]=function(){return Q||J||ya()},Et.setPerfMgr=function(dt){Q=dt},Et.eventCnt=function(){return P[Yn]},Et.releaseQueue=function(){if(T&&P[Yn]>0){var dt=P;P=[],Lr===2?qr(dt,function(dr){dr.iKey=dr.iKey||Hn,qa()[Il](dr)}):Tr(S,2,20,"core init status is not active")}},Et.pollInternalLogs=function(dt){return lt=dt||null,io=!1,Ft&&Ft[vC](),go(!0)};function Sn(){Oo=!0,te(Hn)?(Lr=Dh.INACTIVE,Tr(S,1,112,"ikey can't be resolved from promises")):Lr=Dh.ACTIVE,js()}s(Sn,"_setStatus");function js(){T&&(Et.releaseQueue(),Et.pollInternalLogs())}s(js,"_releaseQueues");function go(dt){if((!Ft||!Ft[af])&&!io){var dr=dt||S&&S.queue[Yn]>0;dr&&(Fr||(Fr=!0,oc(x[qp](function(Pn){var Dr=Pn.cfg.diagnosticLogInterval;(!Dr||!(Dr>0))&&(Dr=1e4);var Nn=!1;Ft&&(Nn=Ft[af],Ft[vC]()),Ft=yw(px,Dr),Ft.unref(),Ft[af]=Nn}))),Ft[af]=!0)}return Ft}s(go,"_startLogPoller"),Et[gN]=function(){io=!0,Ft&&Ft[vC](),px()},p3(Et,function(){return He},["addTelemetryInitializer"]),Et[zA]=function(dt,dr,Pn){dt===void 0&&(dt=!0),T||Gr(hi),Fe&&Gr(_n);var Dr={reason:50,isAsync:dt,flushComplete:!1},Nn;dt&&!dr&&(Nn=RC(function(ss){dr=ss}));var vo=w(yf(),Et);vo[_w](function(){Nt.run(Et[ga]),$N([se,L,S],dt,function(){ot(),dr&&dr(Dr)})},Et);function wo(ss){Dr.flushComplete=ss,Fe=!0,At.run(vo,Dr),Et[gN](),vo[Il](Dr)}return s(wo,"_doUnload"),px(),Kp(dt,wo,6,Pn),Nn},Et[EC]=Rl,Et.addPlugin=function(dt,dr,Pn,Dr){if(!dt){Dr&&Dr(!1),hx(br);return}var Nn=Rl(dt[Ph]);if(Nn&&!dr){Dr&&Dr(!1),hx("Plugin ["+dt[Ph]+"] is already loaded!");return}var vo={reason:16};function wo(id){Te[Vi](dt),vo.added=[dt],Vs(vo),Dr&&Dr(!0)}if(s(wo,"_addPlugin"),Nn){var ss=[Nn.plugin],Pc={reason:2,isAsync:!!Pn};Au(ss,Pc,function(id){id?(vo.removed=ss,vo.reason|=32,wo()):Dr&&Dr(!1)})}else wo()},Et.updateCfg=function(dt,dr){dr===void 0&&(dr=!0);var Pn;if(Et[sf]()){Pn={reason:1,cfg:x.cfg,oldCfg:pw({},x.cfg),newConfig:pw({},dt),merge:dr},dt=Pn.newConfig;var Dr=x.cfg;dt[kC]=Dr[kC],dt[jp]=Dr[jp]}x._block(function(Nn){var vo=Nn.cfg;u_(Nn,vo,dt,dr),dr||ne(vo,function(wo){tt(dt,wo)||Nn.set(vo,wo,Zu)}),Nn.setDf(vo,Qa)},!0),x.notify(),Pn&&Jp(Pn)},Et.evtNamespace=function(){return et},Et.flush=Kp,Et.getTraceCtx=function(dt){return mr||(mr=fJ()),mr},Et.setTraceCtx=function(dt){mr=dt||null},Et.addUnloadHook=oc,CE(Et,"addUnloadCb",function(){return At},"add"),Et.onCfgChange=function(dt){var dr;return T?dr=zp(x.cfg,dt,Et[ga]):dr=hJ(xi,dt),f7(dr)},Et.getWParam=function(){return vh()||x.cfg.enableWParam?0:-1};function Sl(){var dt={};ho=[];var dr=s(function(Pn){Pn&&qr(Pn,function(Dr){if(Dr[Ph]&&Dr[TC]&&!dt[Dr.identifier]){var Nn=Dr[Ph]+"="+Dr[TC];ho[Vi](Nn),dt[Dr.identifier]=Dr}})},"_addPluginVersions");dr(Ye),Le&&qr(Le,function(Pn){dr(Pn)}),dr(Te)}s(Sl,"_setPluginVersions");function ot(){T=!1,x=nd({},Qa,Et[ga]),x.cfg[AN]=1,ze(Et,"config",{g:s(function(){return x.cfg},"g"),s:s(function(dr){Et.updateCfg(dr,!1)},"s")}),ze(Et,"pluginVersionStringArr",{g:s(function(){return ho||Sl(),ho},"g")}),ze(Et,"pluginVersionString",{g:s(function(){return dn||(ho||Sl(),dn=ho.join(";")),dn||mi},"g")}),ze(Et,"logger",{g:s(function(){return S||(S=new kE(x.cfg),x[ga]=S),S},"g"),s:s(function(dr){x[ga]=dr,S!==dr&&(KC(S,!1),S=dr)},"s")}),Et[ga]=new kE(x.cfg),vi=[];var dt=Et.config[kC]||[];dt.splice(0,dt[Yn]),iC(dt,vi),He=new Gn,P=[],KC(L,!1),L=null,Q=null,J=null,KC(se,!1),se=null,Ce=null,Te=[],Le=null,Ye=null,Fe=!1,lt=null,et=$p("AIBaseCore",!0),At=oe(),mr=null,Hn=null,Nt=Ee(),xi=[],dn=null,ho=null,io=!1,Ft=null,Fr=!1,Lr=0,bi=null,Rs=null,Oo=!1}s(ot,"_initDefaults");function qa(){var dt=ix(yf(),x.cfg,Et);return dt[_w](go),dt}s(qa,"_createTelCtx");function Vs(dt){var dr=LE(Et[ga],YK,Te);Ce=null,dn=null,ho=null,Ye=(Le||[])[0]||[],Ye=M3(iC(Ye,dr[jp]));var Pn=iC(M3(dr[Aa]),Ye);vi=Gt(Pn);var Dr=Et.config[kC]||[];Dr.splice(0,Dr[Yn]),iC(Dr,vi);var Nn=qa();Ye&&Ye[Yn]>0&&F3(Nn[YA](Ye),Pn),F3(Nn,Pn),dt&&Jp(dt)}s(Vs,"_initPluginChain");function Rl(dt){var dr=null,Pn=null,Dr=[];return qr(vi,function(Nn){if(Nn[Ph]===dt&&Nn!==He)return Pn=Nn,-1;Nn.getChannel&&Dr[Vi](Nn)}),!Pn&&Dr[Yn]>0&&qr(Dr,function(Nn){if(Pn=Nn.getChannel(dt),!Pn)return-1}),Pn&&(dr={plugin:Pn,setEnabled:s(function(Nn){$h(Pn)[Qw]=!Nn},"setEnabled"),isEnabled:s(function(){var Nn=$h(Pn);return!Nn[lf]&&!Nn[Qw]},"isEnabled"),remove:s(function(Nn,vo){Nn===void 0&&(Nn=!0);var wo=[Pn],ss={reason:1,isAsync:Nn};Au(wo,ss,function(Pc){Pc&&Vs({reason:32,removed:wo}),vo&&vo(Pc)})},"remove")}),dr}s(Rl,"_getPlugin");function yf(){if(!Ce){var dt=(vi||[]).slice();fu(dt,He)===-1&&dt[Vi](He),Ce=D(M3(dt),x.cfg,Et)}return Ce}s(yf,"_getPluginChain");function Au(dt,dr,Pn){if(dt&&dt[Yn]>0){var Dr=D(dt,x.cfg,Et),Nn=w(Dr,Et);Nn[_w](function(){var vo=!1,wo=[];qr(Te,function(Pc,id){U3(Pc,dt)?vo=!0:wo[Vi](Pc)}),Te=wo,dn=null,ho=null;var ss=[];Le&&(qr(Le,function(Pc,id){var Xp=[];qr(Pc,function(Zp){U3(Zp,dt)?vo=!0:Xp[Vi](Zp)}),ss[Vi](Xp)}),Le=ss),Pn&&Pn(vo),go()}),Nn[Il](dr)}else Pn(!1)}s(Au,"_removePlugins");function px(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[Yn]=0,qr(dt,function(dr){var Pn={name:lt||"InternalMessageId: "+dr[Sw],iKey:Hn,time:yE(new Date),baseType:t_.dataType,baseData:{message:dr[KA]}};Et.track(Pn)})}}s(px,"_flushInternalLogs");function Kp(dt,dr,Pn,Dr){var Nn=1,vo=!1,wo=null;Dr=Dr||5e3;function ss(){Nn--,vo&&Nn===0&&(wo&&wo[vC](),wo=null,dr&&dr(vo),dr=null)}if(s(ss,"doCallback"),Ye&&Ye[Yn]>0){var Pc=qa()[YA](Ye);Pc.iterate(function(id){if(id.flush){Nn++;var Xp=!1;id.flush(dt,function(){Xp=!0,ss()},Pn)||Xp||(dt&&wo==null?wo=Rh(function(){wo=null,ss()},Dr):ss())}})}return vo=!0,ss(),!0}s(Kp,"_flushChannels");function mx(){var dt;oc(x[qp](function(dr){var Pn=dr.cfg.enablePerfMgr;if(Pn){var Dr=dr.cfg[Kd];(dt!==Dr||!dt)&&(Dr||(Dr=ox),kN(dr.cfg,Kd,Dr),dt=Dr,J=null),!Q&&!J&&Ne(Dr)&&(J=Dr(Et,Et[zd]()))}else J=null,dt=null}))}s(mx,"_initPerfManager");function Jp(dt){var dr=R(yf(),Et);dr[_w](go),(!Et._updateHook||Et._updateHook(dr,dt)!==!0)&&dr[Il](dt)}s(Jp,"_doUpdate");function hx(dt){var dr=Et[ga];dr?(Tr(dr,2,73,dt),go()):Gr(dt)}s(hx,"_logOrThrowError");function ks(dt){var dr=Et[zd]();dr&&dr[PC]([dt],2)}s(ks,"_notifyInvalidEvent");function oc(dt){Nt.add(dt)}s(oc,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Br(A,x){try{if(A&&A!==""){var T=hu().parse(A);if(T&&T[yN]&&T[yN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[Yn])return T}}catch(S){Tr(x,1,43,"Cannot parse the response. "+(S[Nh]||Lt(S)),{response:A})}return null}s(Br,"parseResponse");var nn="",Lo="NoResponseBody",Oa="&"+Lo+"=true",Hs="POST",Ua=function(){function A(){var x=0,T,S,P,L,Q,J,se,Ce,Te,Le,Ye,Fe,He,lt;rc(A,this,function(et,At){var Nt=!0;Oo(),et[pE]=function(Ft,Fr){P=Fr,S&&Tr(P,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,J,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},J=!!Ft.disableCredentials,se=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,He=!!Ft.addNoResponse,Fe=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Lr},L||(Nt=!1),J){var Fr=UC();Fr&&Fr.protocol&&Fr.protocol[yC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Fr){return Ft&&Ft[Yn]?xi(Ft,Fr):null},et.getFallbackInst=function(){return Ce},et[Rw]=function(Ft,Fr){Oo()};function Vt(Ft,Fr){vi(Fr,200,{},Ft)}s(Vt,"_onSuccess");function mr(Ft,Fr){Tr(P,2,26,"Failed to send telemetry.",{message:Ft}),vi(Fr,400,{})}s(mr,"_onError");function Hn(Ft){mr("No endpoint url is provided for the batch",Ft)}s(Hn,"_onNoPayloadUrl");function xi(Ft,Fr){for(var io=0,Et=null,Sn=0;Et==null&&Sn<Ft[Yn];)io=Ft[Sn],!Te&&io===1?x3()?Et=Rs:v3()&&(Et=Lr):io===2&&IE(Fr)&&(!Fr||!Fe)?Et=bi:io===3&&qh()&&(Fr?!Ye:!Le)&&(Et=dn),Sn++;return Et?{_transport:io,_isSync:Fr,sendPOST:Et}:null}s(xi,"_getSenderInterface");function vi(Ft,Fr,io,Et){try{Ft&&Ft(Fr,io,Et)}catch{}}s(vi,"_doOnComplete");function ho(Ft,Fr){var io=bh(),Et=Ft[Gp];if(!Et)return Hn(Fr),!0;Et=Ft[Gp]+(He?Oa:nn);var Sn=Ft[wC],js=L?Sn:new Blob([Sn],{type:"text/plain;charset=UTF-8"}),go=io.sendBeacon(Et,js);return go}s(ho,"_doBeaconSend");function dn(Ft,Fr,io){var Et=Ft[wC];try{if(Et)if(ho(Ft,Fr))Vt(nn,Fr);else{var Sn=Q&&Q.beaconOnRetry;Sn&&Ne(Sn)?Sn(Ft,Fr,ho):(Ce&&Ce.sendPOST(Ft,Fr,!0),Tr(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(js){L&&r_(P,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(js)),vi(Fr,L?0:400,{},nn)}}s(dn,"_beaconSender");function Lr(Ft,Fr,io){var Et,Sn,js,go=Ft[a3]||{};!io&&T&&(Et=RC(function(Vs,Rl){Sn=Vs,js=Rl})),L&&io&&Ft.disableXhrSync&&(io=!1);var Sl=Ft[Gp];if(!Sl){Hn(Fr),Sn&&Sn(!1);return}var ot=g3(Hs,Sl,Nt,!0,io,Ft[Hp]);L||ot.setRequestHeader("Content-type","application/json"),qr(yt(go),function(Vs){ot.setRequestHeader(Vs,go[Vs])}),ot.onreadystatechange=function(){L||(qa(ot),ot.readyState===4&&Sn&&Sn(!0))},ot.onload=function(){L&&qa(ot)};function qa(Vs){var Rl=Q&&Q.xhrOnComplete,yf=Rl&&Ne(Rl);if(yf)Rl(Vs,Fr,Ft);else{var Au=Hw(Vs);vi(Fr,Vs[hE],r1(Vs,L),Au)}}return s(qa,"_doOnReadyFunc"),ot.onerror=function(Vs){vi(Fr,L?ot[hE]:400,r1(ot,L),L?nn:jw(ot)),js&&js(Vs)},ot.ontimeout=function(){vi(Fr,L?ot[hE]:500,r1(ot,L),L?nn:jw(ot)),Sn&&Sn(!1)},ot.send(Ft[wC]),Et}s(Lr,"_xhrSender");function bi(Ft,Fr,io){var Et,Sn=Ft[Gp],js=Ft[wC],go=L?js:new Blob([js],{type:"application/json"}),Sl,ot,qa,Vs=new Headers,Rl=js[Yn],yf=!1,Au=!1,px=Ft[a3]||{},Kp=(Et={method:Hs,body:go},Et[zN]=!0,Et);Ft.headers&&yt(Ft.headers)[Yn]>0&&(qr(yt(px),function(ks){Vs.append(ks,px[ks])}),Kp[a3]=Vs),se?Kp.credentials=se:Nt&&L&&(Kp.credentials="include"),io&&(Kp.keepalive=!0,x+=Rl,L?Ft._sendReason===2&&(yf=!0,He&&(Sn+=Oa)):yf=!0);var mx=new Request(Sn,Kp);try{mx[zN]=!0}catch{}if(!io&&T&&(Sl=RC(function(ks,oc){ot=ks,qa=oc})),!Sn){Hn(Fr),ot&&ot(!1);return}function Jp(ks){vi(Fr,L?0:400,{},L?nn:ks)}s(Jp,"_handleError");function hx(ks,oc,dt){var dr=ks[hE],Pn=Q.fetchOnComplete;Pn&&Ne(Pn)?Pn(ks,Fr,dt||nn,oc):vi(Fr,dr,{},dt||nn)}s(hx,"_onFetchComplete");try{Xu(fetch(L?Sn:mx,L?Kp:null),function(ks){if(io&&(x-=Rl,Rl=0),!Au)if(Au=!0,ks.rejected)Jp(ks.reason&&ks.reason[KA]),qa&&qa(ks.reason);else{var oc=ks[bC];try{!L&&!oc.ok?(Jp(oc.statusText),ot&&ot(!1)):L&&!oc.body?(hx(oc,null,nn),ot&&ot(!0)):Xu(oc.text(),function(dt){hx(oc,Ft,dt[bC]),ot&&ot(!0)})}catch(dt){Jp(Lt(dt)),qa&&qa(dt)}}})}catch(ks){Au||(Jp(Lt(ks)),qa&&qa(ks))}return yf&&!Au&&(Au=!0,vi(Fr,200,{}),ot&&ot(!0)),L&&!Au&&Ft[Hp]>0&&lt&&lt.set(function(){Au||(Au=!0,vi(Fr,500,{}),ot&&ot(!0))},Ft[Hp]),Sl}s(bi,"_doFetchSender");function Rs(Ft,Fr,io){var Et=Mp(),Sn=new XDomainRequest,js=Ft[wC];Sn.onload=function(){var Vs=Hw(Sn),Rl=Q&&Q.xdrOnComplete;Rl&&Ne(Rl)?Rl(Sn,Fr,Ft):vi(Fr,200,{},Vs)},Sn.onerror=function(){vi(Fr,400,{},L?nn:DN(Sn))},Sn.ontimeout=function(){vi(Fr,500,{})},Sn.onprogress=function(){};var go=Et&&Et.location&&Et.location.protocol||"",Sl=Ft[Gp];if(!Sl){Hn(Fr);return}if(!L&&Sl.lastIndexOf(go,0)!==0){var ot="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Tr(P,2,40,". "+ot),mr(ot,Fr);return}var qa=L?Sl:Sl[Mh](/^(https?:)/,"");Sn.open(Hs,qa),Ft[Hp]&&(Sn[Hp]=Ft[Hp]),Sn.send(js),L&&io?lt&&lt.set(function(){Sn.send(js)},0):Sn.send(js)}s(Rs,"_xdrSender");function Oo(){x=0,S=!1,T=!1,P=null,L=null,Q=null,J=null,se=null,Ce=null,Te=!1,Le=!1,Ye=!1,Fe=!1,He=!1,lt=null}s(Oo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),o1="on",zh="attachEvent",sx="addEventListener",p7="detachEvent",m7="removeEventListener",d_="events";$p("aiEvtPageHide"),$p("aiEvtPageShow");var gJ=/\.[\.]+/g,sge=/[\.]+$/,VKe=1,h7=ON("events"),$Ke=/^([^.]*)(?:\.(.+)|)/;function age(A){return A&&A[Mh]?A[Mh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mi):A}s(age,"_normalizeNamespace");function AJ(A,x){if(x){var T=mi;Je(x)?(T=mi,qr(x,function(P){P=age(P),P&&(P[0]!=="."&&(P="."+P),T+=P)})):T=age(x),T&&(T[0]!=="."&&(T="."+T),A=(A||mi)+T)}var S=$Ke.exec(A||mi)||[];return{type:S[1],ns:(S[2]||mi).replace(gJ,".").replace(sge,mi)[Fh](".").sort().join(".")}}s(AJ,"_getEvtNamespace");function lge(A,x,T){T===void 0&&(T=!0);var S=h7.get(A,d_,{},T),P=S[x];return P||(P=S[x]=[]),P}s(lge,"_getRegisteredEvents");function cge(A,x,T,S){A&&x&&x[nc]&&(A[m7]?A[m7](x[nc],T,S):A[p7]&&A[p7](o1+x[nc],T))}s(cge,"_doDetach");function zKe(A,x,T,S){var P=!1;return A&&x&&x[nc]&&T&&(A[sx]?(A[sx](x[nc],T,S),P=!0):A[zh]&&(A[zh](o1+x[nc],T),P=!0)),P}s(zKe,"_doAttach");function uge(A,x,T,S){for(var P=x[Yn];P--;){var L=x[P];L&&(!T.ns||T.ns===L[i3].ns)&&(!S||S(L))&&(cge(A,L[i3],L.handler,L.capture),x[xC](P,1))}}s(uge,"_doUnregister");function YKe(A,x,T){if(x[nc])uge(A,lge(A,x[nc]),x,T);else{var S=h7.get(A,d_,{});ne(S,function(P,L){uge(A,L,x,T)}),yt(S)[Yn]===0&&h7.kill(A,d_)}}s(YKe,"_unregisterEvents");function dge(A,x){var T;return x?(Je(x)?T=[A].concat(x):T=[A,x],T=AJ("xx",T).ns[Fh](".")):T=A,T}s(dge,"mergeEvtNamespace");function fge(A,x,T,S,P){P===void 0&&(P=!1);var L=!1;if(A)try{var Q=AJ(x,S);if(L=zKe(A,Q,T,P),L&&h7.accept(A)){var J={guid:VKe++,evtName:Q,handler:T,capture:P};lge(A,Q.type)[Vi](J)}}catch{}return L}s(fge,"eventOn");function KKe(A,x,T,S,P){if(P===void 0&&(P=!1),A)try{var L=AJ(x,S),Q=!1;YKe(A,L,function(J){return L.ns&&!T||J.handler===T?(Q=!0,!0):!1}),Q||cge(A,L,T,P)}catch{}}s(KKe,"eventOff");var pge="sampleRate",yJ="ProcessLegacy",mge="http.method",CJ="https://dc.services.visualstudio.com",f_="/v2/track",ax="not_specified",hge=DK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),g7="split",fi="length",xJ="toLowerCase",FE="ingestionendpoint",W3="toString",gge="removeItem",A7="message",JKe="count",vJ="stringify",bJ="pathname",G3="match",lx="name",Yh="properties",s1="measurements",y7="sizeInBytes",C7="typeName",H3="exceptions",j3="severityLevel",EJ="problemGroup",p_="parsedStack",x7="hasFullStack",v7="assembly",a1="fileName",m_="line",b7="aiDataContract",E7="duration";function Age(A,x,T){var S=x[fi],P=XKe(A,x);if(P[fi]!==S){for(var L=0,Q=P;T[Q]!==void 0;)L++,Q=ge(P,0,147)+tJe(L);P=Q}return P}s(Age,"dataSanitizeKeyAndAddUniqueness");function XKe(A,x){var T;return x&&(x=ji(Ot(x)),x[fi]>150&&(T=ge(x,0,150),Tr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(XKe,"dataSanitizeKey");function Bc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[fi]>T&&(S=ge(x,0,T),Tr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Bc,"dataSanitizeString");function IJ(A,x){return Cge(A,x,2048,66)}s(IJ,"dataSanitizeUrl");function yge(A,x){var T;return x&&x[fi]>32768&&(T=ge(x,0,32768),Tr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(yge,"dataSanitizeMessage");function ZKe(A,x){var T;if(x){var S=""+x;S[fi]>32768&&(T=ge(S,0,32768),Tr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(ZKe,"dataSanitizeException");function ME(A,x){if(x){var T={};ne(x,function(S,P){if(Re(P)&&qC())try{P=hu()[vJ](P)}catch(L){Tr(A,2,49,"custom property is not valid",{exception:L},!0)}P=Bc(A,P,8192),S=Age(A,S,T),T[S]=P}),x=T}return x}s(ME,"dataSanitizeProperties");function QE(A,x){if(x){var T={};ne(x,function(S,P){S=Age(A,S,T),T[S]=P}),x=T}return x}s(QE,"dataSanitizeMeasurements");function eJe(A,x){return x&&Cge(A,x,128,69)[W3]()}s(eJe,"dataSanitizeId");function Cge(A,x,T,S){var P;return x&&(x=ji(Ot(x)),x[fi]>T&&(P=ge(x,0,T),Tr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),P||x}s(Cge,"dataSanitizeInput");function tJe(A){var x="00"+A;return ve(x,x[fi]-3)}s(tJe,"dsPadNumber");var xge=rC()||{},vge=0,rJe=[null,null,null,null,null];function nJe(A){var x=vge,T=rJe,S=T[x];return xge.createElement?T[x]||(S=T[x]=xge.createElement("a")):S={host:iJe(A,!0)},S.href=A,x++,x>=T[fi]&&(x=0),vge=x,S}s(nJe,"urlParseUrl");function iJe(A,x){var T=oJe(A,x)||"";if(T){var S=T[G3](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>3&&he(S[2])&&S[2][fi]>0)return S[2]+(S[3]||"")}return T}s(iJe,"urlParseHost");function oJe(A,x){var T=null;if(A){var S=A[G3](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>2&&he(S[2])&&S[2][fi]>0&&(T=S[2]||"",x&&S[fi]>2)){var P=(S[1]||"")[xJ](),L=S[3]||"";(P==="http"&&L===":80"||P==="https"&&L===":443")&&(L=""),T+=L}}return T}s(oJe,"urlParseFullHost");var sJe=[CJ+f_,"https://breeze.aimon.applicationinsights.io"+f_,"https://dc-int.services.visualstudio.com"+f_];function bge(A){return fu(sJe,A[xJ]())!==-1}s(bge,"isInternalApplicationInsightsEndpoint");function aJe(A,x,T,S){var P,L=S,Q=S;if(x&&x[fi]>0){var J=nJe(x);if(P=J.host,!L)if(J[bJ]!=null){var se=J.pathname[fi]===0?"/":J[bJ];se.charAt(0)!=="/"&&(se="/"+se),Q=J[bJ],L=Bc(A,T?T+" "+se:se)}else L=Bc(A,x)}else P=S,L=S;return{target:P,name:L,data:Q}}s(aJe,"AjaxHelperParseDependencyPath");var TJ=Iw({LocalStorage:0,SessionStorage:1}),h_=void 0,Ege="";function Ige(A){try{if(te(nf()))return null;var x=new Date()[W3](),T=ia(A===TJ.LocalStorage?"localStorage":"sessionStorage"),S=Ege+x;T.setItem(S,x);var P=T.getItem(S)!==x;if(T[gge](S),!P)return T}catch{}return null}s(Ige,"_getVerifiedStorageObject");function wJ(){return Tge()?Ige(TJ.SessionStorage):null}s(wJ,"_getSessionStorageObject");function lJe(A){Ege=A||""}s(lJe,"utlSetStoragePrefix");function Tge(A){return(A||h_===void 0)&&(h_=!!Ige(TJ.SessionStorage)),h_}s(Tge,"utlCanUseSessionStorage");function cJe(A,x){var T=wJ();if(T!==null)try{return T.getItem(x)}catch(S){h_=!1,Tr(A,2,2,"Browser failed read of session storage. "+ll(S),{exception:Lt(S)})}return null}s(cJe,"utlGetSessionStorage");function uJe(A,x,T){var S=wJ();if(S!==null)try{return S.setItem(x,T),!0}catch(P){h_=!1,Tr(A,2,4,"Browser failed write to session storage. "+ll(P),{exception:Lt(P)})}return!1}s(uJe,"utlSetSessionStorage");function dJe(A,x){var T=wJ();if(T!==null)try{return T[gge](x),!0}catch(S){h_=!1,Tr(A,2,6,"Browser failed removal of session storage item. "+ll(S),{exception:Lt(S)})}return!1}s(dJe,"utlRemoveSessionStorage");var fJe=";",pJe="=";function _J(A){if(!A)return{};var x=A[g7](fJe),T=xK(x,function(P,L){var Q=L[g7](pJe);if(Q[fi]===2){var J=Q[0][xJ](),se=Q[1];P[J]=se}return P},{});if(yt(T)[fi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[FE]=T[FE]||"https://"+S+"dc."+T.endpointsuffix}T[FE]=T[FE]||CJ,dN(T[FE],"/")&&(T[FE]=T[FE].slice(0,-1))}return T}s(_J,"parseConnectionString");var mJe=function(){function A(x,T,S){var P=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[lx]=Bc(x,S)||ax,L.data=T,L.time=yE(new Date),L[b7]={time:1,iKey:1,name:1,sampleRate:s(function(){return P.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),g_=function(){function A(x,T,S,P){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[lx]=Bc(x,T)||ax,L[Yh]=ME(x,S),L[s1]=QE(x,P)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),hJe=58,gJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,AJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,yJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,CJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,xJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,vJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,bJe=/([^\(\s\n]+):([0-9]+)$/,wge="<no_method>",A_="error",Af="stack",SJ="stackDetails",_ge="errorSrc",RJ="message",Sge="description",Rge=[{re:AJe,len:5,m:1,fn:2,ln:3,col:4},{chk:IJe,pre:EJe,re:yJe,len:4,m:1,fn:2,ln:3},{re:CJe,len:3,m:1,fn:2,hdl:Lge},{re:xJe,len:2,fn:1,hdl:Lge}];function EJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(EJe,"_scrubAnonymous");function IJe(A){return Qp(A,"[native")<0}s(IJe,"_ignoreNative");function kJ(A,x){var T=A;return T&&!he(T)&&(JSON&&JSON[vJ]?(T=JSON[vJ](A),x&&(!T||T==="{}")&&(Ne(A[W3])?T=A[W3]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(kJ,"_stringify");function kge(A,x){var T=A;return A&&(T&&!he(T)&&(T=A[RJ]||A[Sge]||T),T&&!he(T)&&(T=kJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Qp(T||"",x)===-1&&(T=x+": "+T),T||""}s(kge,"_formatMessage");function TJe(A){try{if(Re(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(TJe,"_isExceptionDetailsInternal");function wJe(A){try{if(Re(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(wJe,"_isExceptionInternal");function Bge(A){return A&&A.src&&he(A.src)&&A.obj&&Je(A.obj)}s(Bge,"_isStackDetails");function OE(A){var x=A||"";he(x)||(he(x[Af])?x=x[Af]:x=""+x);var T=x[g7](`
`);return{src:x,obj:T}}s(OE,"_convertStackObj");function _Je(A){for(var x=[],T=A[g7](`
`),S=0;S<T[fi];S++){var P=T[S];T[S+1]&&(P+="@"+T[S+1],S++),x.push(P)}return{src:A,obj:x}}s(_Je,"_getOperaStack");function Dge(A){var x=null;if(A)try{if(A[Af])x=OE(A[Af]);else if(A[A_]&&A[A_][Af])x=OE(A[A_][Af]);else if(A.exception&&A.exception[Af])x=OE(A.exception[Af]);else if(Bge(A))x=A;else if(Bge(A[SJ]))x=A[SJ];else if(Mp()&&Mp().opera&&A[RJ])x=_Je(A[A7]);else if(A.reason&&A.reason[Af])x=OE(A.reason[Af]);else if(he(A))x=OE(A);else{var T=A[RJ]||A[Sge]||"";he(A[_ge])&&(T&&(T+=`
`),T+=" from "+A[_ge]),T&&(x=OE(T))}}catch(S){x=OE(S)}return x||{src:"",obj:null}}s(Dge,"_getStackFromErrorObj");function SJe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(SJe,"_formatStackTrace");function RJe(A){var x,T=A.obj;if(T&&T[fi]>0){x=[];var S=0,P=!1,L=0;qr(T,function(lt){if(P||PJe(lt)){var et=Ot(lt);P=!0;var At=NJe(et,S);At&&(L+=At[y7],x.push(At),S++)}});var Q=32*1024;if(L>Q)for(var J=0,se=x[fi]-1,Ce=0,Te=J,Le=se;J<se;){var Ye=x[J][y7],Fe=x[se][y7];if(Ce+=Ye+Fe,Ce>Q){var He=Le-Te+1;x.splice(Te,He);break}Te=J,Le=se,J++,se--}}return x}s(RJe,"_parseStack");function I7(A){var x="";if(A&&(x=A.typeName||A[lx]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[W3]());x=S&&S[fi]>1?S[1]:""}catch{}return x}s(I7,"_getErrorType");function BJ(A){if(A)try{if(!he(A)){var x=I7(A),T=kJ(A,!1);return(!T||T==="{}")&&(A[A_]&&(A=A[A_],x=I7(A)),T=kJ(A,!0)),Qp(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(BJ,"_formatErrorCode");var T7=function(){function A(x,T,S,P,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var J=this;J.ver=2,wJe(T)?(J[H3]=T[H3]||[],J[Yh]=T[Yh],J[s1]=T[s1],T[j3]&&(J[j3]=T[j3]),T.id&&(J.id=T.id,T[Yh].id=T.id),T[EJ]&&(J[EJ]=T[EJ]),te(T.isManual)||(J.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),J[H3]=[Pge(x,T,S)],J[Yh]=ME(x,S),J[s1]=QE(x,P),L&&(J[j3]=L),Q&&(J.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,P,L,Q,J,se){var Ce=I7(L||Q||x);return{message:kge(x,Ce),url:T,lineNumber:S,columnNumber:P,error:BJ(L||Q||x),evt:BJ(Q||x),typeName:Ce,stackDetails:Dge(J||L||Q),errorSrc:se}},A.CreateFromInterface=function(x,T,S,P){var L=T[H3]&&UA(T[H3],function(J){return DJe(x,J)}),Q=new A(x,Up(Up({},T),{exceptions:L}),S,P);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,P=x.measurements,L=x.severityLevel,Q=x.problemGroup,J=x.id,se=x.isManual,Ce=T instanceof Array&&UA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:P,problemGroup:Q,id:J,isManual:se}},A.CreateSimpleException=function(x,T,S,P,L,Q){var J;return{exceptions:[(J={},J[x7]=!0,J.message=x,J.stack=L,J.typeName=T,J)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=BJ,A}(),kJe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function BJe(){var A=this,x=Je(A[p_])&&UA(A[p_],function(S){return FJe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[C7],message:A[A7],hasFullStack:A[x7],stack:A[Af],parsedStack:x||void 0};return T}s(BJe,"_toInterface");function Pge(A,x,T){var S,P,L,Q,J,se,Ce,Te;if(TJe(x))Q=x[C7],J=x[A7],Ce=x[Af],Te=x[p_]||[],se=x[x7];else{var Le=x,Ye=Le&&Le.evt;Ct(Le)||(Le=Le[A_]||Ye||Le),Q=Bc(A,I7(Le))||ax,J=yge(A,kge(x||Le,Q))||ax;var Fe=x[SJ]||Dge(x);Te=RJe(Fe),Je(Te)&&UA(Te,function(He){He[v7]=Bc(A,He[v7]),He[a1]=Bc(A,He[a1])}),Ce=ZKe(A,SJe(Fe)),se=Je(Te)&&Te[fi]>0,T&&(T[C7]=T[C7]||Q)}return S={},S[b7]=kJe,S.id=P,S.outerId=L,S.typeName=Q,S.message=J,S[x7]=se,S.stack=Ce,S.parsedStack=Te,S.toInterface=BJe,S}s(Pge,"_createExceptionDetails");function DJe(A,x){var T=Je(x[p_])&&UA(x[p_],function(P){return LJe(P)})||x[p_],S=Pge(A,Up(Up({},x),{parsedStack:T}));return S}s(DJe,"_createExDetailsFromInterface");function Nge(A,x){var T=x[G3](vJe);if(T&&T[fi]>=4)A[a1]=T[1],A[m_]=parseInt(T[2]);else{var S=x[G3](bJe);S&&S[fi]>=3?(A[a1]=S[1],A[m_]=parseInt(S[2])):A[a1]=x}}s(Nge,"_parseFilename");function Lge(A,x,T){var S=A[a1];x.fn&&T&&T[fi]>x.fn&&(x.ln&&T[fi]>x.ln?(S=ji(T[x.fn]||""),A[m_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&Nge(A,S)}s(Lge,"_handleFilename");function PJe(A){var x=!1;if(A&&he(A)){var T=ji(A);T&&(x=gJe.test(T))}return x}s(PJe,"_isStackFrame");var Fge=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function NJe(A,x){var T,S;if(A&&he(A)&&ji(A)){S=(T={},T[b7]=Fge,T.level=x,T.assembly=ji(A),T.method=wge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var P=0;P<Rge[fi];){var L=Rge[P];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[G3](L.re);if(Q&&Q[fi]>=L.len){L.m&&(S.method=ji(Q[L.m]||wge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[a1]=ji(Q[L.fn]||""),S[m_]=parseInt(ji(Q[L.ln]||""))||0):Nge(S,Q[L.fn]||""));break}P++}}return Mge(S)}s(NJe,"_extractStackFrame");function LJe(A){var x,T=(x={},x[b7]=Fge,x.level=A.level,x.method=A.method,x.assembly=A[v7],x.fileName=A[a1],x.line=A[m_],x.sizeInBytes=0,x);return Mge(T)}s(LJe,"_stackFrameFromInterface");function Mge(A){var x=hJe;return A&&(x+=A.method[fi],x+=A.assembly[fi],x+=A.fileName[fi],x+=A.level.toString()[fi],x+=A.line.toString()[fi],A[y7]=x),A}s(Mge,"_populateFrameSizeInBytes");function FJe(A){return{level:A.level,method:A.method,assembly:A[v7],fileName:A[a1],line:A[m_]}}s(FJe,"_parsedFrameToInterface");var MJe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),V3=function(){function A(x,T,S,P,L,Q,J,se,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new MJe;Le[JKe]=P>0?P:void 0,Le.max=isNaN(Q)||Q===null?void 0:Q,Le.min=isNaN(L)||L===null?void 0:L,Le[lx]=Bc(x,T)||ax,Le.value=S,Le.stdDev=isNaN(J)||J===null?void 0:J,Te.metrics=[Le],Te[Yh]=ME(x,se),Te[s1]=QE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),$3="";function Qge(A){(isNaN(A)||A<0)&&(A=0),A=TK(A);var x=$3+A%1e3,T=$3+qA(A/1e3)%60,S=$3+qA(A/(1e3*60))%60,P=$3+qA(A/(1e3*60*60))%24,L=qA(A/(1e3*60*60*24));return x=x[fi]===1?"00"+x:x[fi]===2?"0"+x:x,T=T[fi]<2?"0"+T:T,S=S[fi]<2?"0"+S:S,P=P[fi]<2?"0"+P:P,(L>0?L+".":$3)+P+":"+S+":"+T+"."+x}s(Qge,"msToTimeSpan");var w7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var se=this;se.ver=2,se.id=eJe(x,J),se.url=IJ(x,S),se[lx]=Bc(x,T)||ax,isNaN(P)||(se[E7]=Qge(P)),se[Yh]=ME(x,L),se[s1]=QE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),_7=function(){function A(x,T,S,P,L,Q,J,se,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Fe=this;Fe.ver=2,Fe.id=T,Fe[E7]=Qge(L),Fe.success=Q,Fe.resultCode=J+"",Fe.type=Bc(x,Ce);var He=aJe(x,S,se,P);Fe.data=IJ(x,P)||He.data,Fe.target=Bc(x,He.target),Te&&(Fe.target="".concat(Fe.target," | ").concat(Te)),Fe[lx]=Bc(x,He[lx]),Fe[Yh]=ME(x,Le),Fe[s1]=QE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),S7=function(){function A(x,T,S,P,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||ax,Q[A7]=yge(x,T),Q[Yh]=ME(x,P),Q[s1]=QE(x,L),S&&(Q[j3]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),R7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var se=this;se.ver=2,se.url=IJ(x,S),se[lx]=Bc(x,T)||ax,se[Yh]=ME(x,L),se[s1]=QE(x,Q),J&&(se.domProcessing=J.domProcessing,se[E7]=J[E7],se.networkConnect=J.networkConnect,se.perfTotal=J.perfTotal,se.receivedResponse=J.receivedResponse,se.sentRequest=J.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),UE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),QJe=Iw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function cx(A){var x="ai."+A+".";return function(T){return x+T}}s(cx,"_aiNameFunc");var z3=cx("application"),ul=cx("device"),k7=cx("location"),y_=cx("operation"),DJ=cx("session"),ux=cx("user"),qE=cx("cloud"),Y3=cx("internal"),Oge=function(A){fE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(qK({applicationVersion:z3("ver"),applicationBuild:z3("build"),applicationTypeId:z3("typeId"),applicationId:z3("applicationId"),applicationLayer:z3("layer"),deviceId:ul("id"),deviceIp:ul("ip"),deviceLanguage:ul("language"),deviceLocale:ul("locale"),deviceModel:ul("model"),deviceFriendlyName:ul("friendlyName"),deviceNetwork:ul("network"),deviceNetworkName:ul("networkName"),deviceOEMName:ul("oemName"),deviceOS:ul("os"),deviceOSVersion:ul("osVersion"),deviceRoleInstance:ul("roleInstance"),deviceRoleName:ul("roleName"),deviceScreenResolution:ul("screenResolution"),deviceType:ul("type"),deviceMachineName:ul("machineName"),deviceVMName:ul("vmName"),deviceBrowser:ul("browser"),deviceBrowserVersion:ul("browserVersion"),locationIp:k7("ip"),locationCountry:k7("country"),locationProvince:k7("province"),locationCity:k7("city"),operationId:y_("id"),operationName:y_("name"),operationParentId:y_("parentId"),operationRootId:y_("rootId"),operationSyntheticSource:y_("syntheticSource"),operationCorrelationVector:y_("correlationVector"),sessionId:DJ("id"),sessionIsFirst:DJ("isFirst"),sessionIsNew:DJ("isNew"),userAccountAcquisitionDate:ux("accountAcquisitionDate"),userAccountId:ux("accountId"),userAgent:ux("userAgent"),userId:ux("id"),userStoreRegion:ux("storeRegion"),userAuthUserId:ux("authUserId"),userAnonymousUserAcquisitionDate:ux("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ux("authUserAcquisitionDate"),cloudName:qE("name"),cloudRole:qE("role"),cloudRoleVer:qE("roleVer"),cloudRoleInstance:qE("roleInstance"),cloudEnvironment:qE("environment"),cloudLocation:qE("location"),cloudDeploymentUnit:qE("deploymentUnit"),internalNodeName:Y3("nodeName"),internalSdkVersion:Y3("sdkVersion"),internalAgentVersion:Y3("agentVersion"),internalSnippet:Y3("snippet"),internalSdkSrc:Y3("sdkSrc")})),wl=new Oge;function Uge(A,x){KKe(A,null,null,x)}s(Uge,"_disableEvents");function OJe(A){var x=rC(),T=bh(),S=!1,P=[],L=1;T&&!te(T.onLine)&&!T.onLine&&(L=2);var Q=0,J=Ye(),se=dge($p("OfflineListener"),A);try{if(Te(Mp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var mr=!1;return Vt&&(mr=fge(Vt,"online",lt,se),mr&&fge(Vt,"offline",et,se)),mr}s(Te,"_enableEvents");function Le(){return J}s(Le,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Fe(){var Vt=Ye();J!==Vt&&(J=Vt,qr(P,function(mr){var Hn={isOnline:J,rState:L,uState:Q};try{mr(Hn)}catch{}}))}s(Fe,"listnerNoticeCheck");function He(Vt){Q=Vt,Fe()}s(He,"setOnlineState");function lt(){L=1,Fe()}s(lt,"_setOnline");function et(){L=2,Fe()}s(et,"_setOffline");function At(){var Vt=Mp();if(Vt&&S){if(Uge(Vt,se),x){var mr=x.body||x;q(mr.ononline)||Uge(mr,se)}S=!1}}s(At,"_unload");function Nt(Vt){return P.push(Vt),{rm:s(function(){var mr=P.indexOf(Vt);if(mr>-1)return P.splice(mr,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:At,addListener:Nt,setOnlineState:He}}s(OJe,"createOfflineListener");var UJe="AppInsightsChannelPlugin",WE="duration",ic="tags",PJ="deviceType",Zd="data",l1="name",K3="traceID",gi="length",J3="stringify",GE="measurements",Kh="dataType",HE="envelopeType",jE="toString",VE="enqueue",$E="count",c1="push",NJ="emitLineDelimitedJson",C_="clear",B7="markAsSent",X3="clearSent",LJ="bufferOverride",Z3="BUFFER_KEY",dx="SENT_BUFFER_KEY",x_="concat",eB="MAX_BUFFER_SIZE",tB="triggerSend",Dc="diagLog",FJ="initialize",rB="_sender",nB="endpointUrl",iB="instrumentationKey",MJ="customHeaders",qge="maxBatchSizeInBytes",QJ="onunloadDisableBeacon",OJ="isBeaconApiDisabled",Wge="alwaysUseXhrOverride",Gge="enableSessionStorageBuffer",Jh="_buffer",Hge="onunloadDisableFetch",jge="disableSendBeaconSplit",D7="getSenderInst",zE="_onError",UJ="_onPartialSuccess",P7="_onSuccess",qJ="itemsReceived",WJ="itemsAccepted",GJ="baseType",N7="sampleRate",qJe="getHashCodeScore",HJ="baseType",Ss="baseData",_l="properties",Vge="true";function Ca(A,x,T){return Oh(A,x,T,ce)}s(Ca,"_setValueIf");function WJe(A,x,T){var S=T[ic]=T[ic]||{},P=x.ext=x.ext||{},L=x[ic]=x[ic]||[],Q=P.user;Q&&(Ca(S,wl.userAuthUserId,Q.authId),Ca(S,wl.userId,Q.id||Q.localId));var J=P.app;J&&Ca(S,wl.sessionId,J.sesId);var se=P.device;se&&(Ca(S,wl.deviceId,se.id||se.localId),Ca(S,wl[PJ],se.deviceClass),Ca(S,wl.deviceIp,se.ip),Ca(S,wl.deviceModel,se.model),Ca(S,wl[PJ],se[PJ]));var Ce=x.ext.web;if(Ce){Ca(S,wl.deviceLanguage,Ce.browserLang),Ca(S,wl.deviceBrowserVersion,Ce.browserVer),Ca(S,wl.deviceBrowser,Ce.browser);var Te=T[Zd]=T[Zd]||{},Le=Te[Ss]=Te[Ss]||{},Ye=Le[_l]=Le[_l]||{};Ca(Ye,"domain",Ce.domain),Ca(Ye,"isManual",Ce.isManual?Vge:null),Ca(Ye,"screenRes",Ce.screenRes),Ca(Ye,"userConsent",Ce.userConsent?Vge:null)}var Fe=P.os;Fe&&(Ca(S,wl.deviceOS,Fe[l1]),Ca(S,wl.deviceOSVersion,Fe.osVer));var He=P.trace;He&&(Ca(S,wl.operationParentId,He.parentID),Ca(S,wl.operationName,Bc(A,He[l1])),Ca(S,wl.operationId,He[K3]));for(var lt={},et=L[gi]-1;et>=0;et--){var At=L[et];ne(At,function(Vt,mr){lt[Vt]=mr}),L.splice(et,1)}ne(L,function(Vt,mr){lt[Vt]=mr});var Nt=Up(Up({},S),lt);Nt[wl.internalSdkVersion]||(Nt[wl.internalSdkVersion]=Bc(A,"javascript:".concat(GJe.Version),64)),T[ic]=m3(Nt)}s(WJe,"_extractPartAExtensions");function fx(A,x,T){te(A)||ne(A,function(S,P){pt(P)?T[S]=P:he(P)?x[S]=P:qC()&&(x[S]=hu()[J3](P))})}s(fx,"_extractPropsAndMeasurements");function YE(A,x){te(A)||ne(A,function(T,S){A[T]=S||x})}s(YE,"_convertPropsUndefinedToCustomDefinedValue");function KE(A,x,T,S){var P=new mJe(A,S,x);Ca(P,"sampleRate",T[pge]),(T[Ss]||{}).startTime&&(P.time=yE(T[Ss].startTime)),P.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return P[l1]=P[l1].replace("{0}",L),WJe(A,T,P),T[ic]=T[ic]||[],m3(P)}s(KE,"_createEnvelope");function JE(A,x){te(x[Ss])&&Tr(A,1,46,"telemetryItem.baseData cannot be null.")}s(JE,"EnvelopeCreatorInit");var GJe={Version:"3.3.6"};function HJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][_l]||{};fx(x[Zd],P,S),te(T)||YE(P,T);var L=x[Ss];if(te(L))return r_(A,"Invalid input for dependency data"),null;var Q=L[_l]&&L[_l][mge]?L[_l][mge]:"GET",J=new _7(A,L.id,L.target,L[l1],L[WE],L.success,L.responseCode,Q,L.type,L.correlationContext,P,S),se=new UE(_7[Kh],J);return KE(A,_7[HE],x,se)}s(HJe,"DependencyEnvelopeCreator");function $ge(A,x,T){JE(A,x);var S={},P={};x[HJ]!==g_[Kh]&&(S.baseTypeSource=x[HJ]),x[HJ]===g_[Kh]?(S=x[Ss][_l]||{},P=x[Ss][GE]||{}):x[Ss]&&fx(x[Ss],S,P),fx(x[Zd],S,P),te(T)||YE(S,T);var L=x[Ss][l1],Q=new g_(A,L,S,P),J=new UE(g_[Kh],Q);return KE(A,g_[HE],x,J)}s($ge,"EventEnvelopeCreator");function jJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][_l]||{};fx(x[Zd],P,S),te(T)||YE(P,T);var L=x[Ss],Q=T7.CreateFromInterface(A,L,P,S),J=new UE(T7[Kh],Q);return KE(A,T7[HE],x,J)}s(jJe,"ExceptionEnvelopeCreator");function VJe(A,x,T){JE(A,x);var S=x[Ss],P=S[_l]||{},L=S[GE]||{};fx(x[Zd],P,L),te(T)||YE(P,T);var Q=new V3(A,S[l1],S.average,S.sampleCount,S.min,S.max,S.stdDev,P,L),J=new UE(V3[Kh],Q);return KE(A,V3[HE],x,J)}s(VJe,"MetricEnvelopeCreator");function $Je(A,x,T){JE(A,x);var S,P=x[Ss];!te(P)&&!te(P[_l])&&!te(P[_l][WE])?(S=P[_l][WE],delete P[_l][WE]):!te(x[Zd])&&!te(x[Zd][WE])&&(S=x[Zd][WE],delete x[Zd][WE]);var L=x[Ss],Q;((x.ext||{}).trace||{})[K3]&&(Q=x.ext.trace[K3]);var J=L.id||Q,se=L[l1],Ce=L.uri,Te=L[_l]||{},Le=L[GE]||{};if(te(L.refUri)||(Te.refUri=L.refUri),te(L.pageType)||(Te.pageType=L.pageType),te(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[jE]()),!te(L[_l])){var Ye=L[_l];ne(Ye,function(lt,et){Te[lt]=et})}fx(x[Zd],Te,Le),te(T)||YE(Te,T);var Fe=new w7(A,se,Ce,S,Te,Le,J),He=new UE(w7[Kh],Fe);return KE(A,w7[HE],x,He)}s($Je,"PageViewEnvelopeCreator");function zJe(A,x,T){JE(A,x);var S=x[Ss],P=S[l1],L=S.uri||S.url,Q=S[_l]||{},J=S[GE]||{};fx(x[Zd],Q,J),te(T)||YE(Q,T);var se=new R7(A,P,L,void 0,Q,J,S),Ce=new UE(R7[Kh],se);return KE(A,R7[HE],x,Ce)}s(zJe,"PageViewPerformanceEnvelopeCreator");function YJe(A,x,T){JE(A,x);var S=x[Ss].message,P=x[Ss].severityLevel,L=x[Ss][_l]||{},Q=x[Ss][GE]||{};fx(x[Zd],L,Q),te(T)||YE(L,T);var J=new S7(A,S,P,L,Q),se=new UE(S7[Kh],J);return KE(A,S7[HE],x,se)}s(YJe,"TraceEnvelopeCreator");var zge=function(){function A(x,T){var S=[],P=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},rc(A,this,function(Q){Q[VE]=function(J){if(Q[$E]()>=T.eventsLimitInMem){P||(Tr(x,2,105,"Maximum in-memory buffer size reached: "+Q[$E](),!0),P=!0);return}J.cnt=J.cnt||0,!(!te(L)&&J.cnt>L)&&S[c1](J)},Q[$E]=function(){return S[gi]},Q.size=function(){for(var J=S[gi],se=0;se<S[gi];se++)J+=S[se].item[gi];return T[NJ]||(J+=2),J},Q[C_]=function(){S=[],P=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(J){if(J&&J[gi]>0){var se=[];qr(J,function(Te){se[c1](Te.item)});var Ce=T[NJ]?se.join(`
`):"["+se.join(",")+"]";return Ce}return null},Q.createNew=function(J,se,Ce){var Te=S.slice(0);J=J||x,se=se||{};var Le=Ce?new Yge(J,se):new jJ(J,se);return qr(Te,function(Ye){Le[VE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),jJ=function(A){fE(x,A);function x(T,S){var P=A.call(this,T,S)||this;return rc(x,P,function(L,Q){L[B7]=function(J){Q[C_]()},L[X3]=function(J){}}),P}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(zge),KJe=["AI_buffer","AI_sentBuffer"],Yge=function(A){fE(x,A);function x(S,P){var L=A.call(this,S,P)||this,Q=!1,J=P?.namePrefix,se=P[LJ]||{getItem:cJe,setItem:uJe},Ce=se.getItem,Te=se.setItem,Le=P.maxRetryCnt;return rc(x,L,function(Ye,Fe){var He=mr(x[Z3]),lt=mr(x[dx]),et=vi(),At=lt[x_](et),Nt=Ye._set(He[x_](At));Nt[gi]>x[eB]&&(Nt[gi]=x[eB]),xi(x[dx],[]),xi(x[Z3],Nt),Ye[VE]=function(dn){if(Ye[$E]()>=x[eB]){Q||(Tr(S,2,67,"Maximum buffer size reached: "+Ye[$E](),!0),Q=!0);return}dn.cnt=dn.cnt||0,!(!te(Le)&&dn.cnt>Le)&&(Fe[VE](dn),xi(x[Z3],Ye._get()))},Ye[C_]=function(){Fe[C_](),xi(x[Z3],Ye._get()),xi(x[dx],[]),Q=!1},Ye[B7]=function(dn){xi(x[Z3],Ye._set(Vt(dn,Ye._get())));var Lr=mr(x[dx]);Lr instanceof Array&&dn instanceof Array&&(Lr=Lr[x_](dn),Lr[gi]>x[eB]&&(Tr(S,1,67,"Sent buffer reached its maximum size: "+Lr[gi],!0),Lr[gi]=x[eB]),xi(x[dx],Lr))},Ye[X3]=function(dn){var Lr=mr(x[dx]);Lr=Vt(dn,Lr),xi(x[dx],Lr)},Ye.createNew=function(dn,Lr,bi){bi=!!bi;var Rs=Ye._get().slice(0),Oo=mr(x[dx]).slice(0);dn=dn||S,Lr=Lr||{},Ye[C_]();var Ft=bi?new x(dn,Lr):new jJ(dn,Lr);return qr(Rs,function(Fr){Ft[VE](Fr)}),bi&&Ft[B7](Oo),Ft};function Vt(dn,Lr){var bi=[],Rs=[];return qr(dn,function(Oo){Rs[c1](Oo.item)}),qr(Lr,function(Oo){!Ne(Oo)&&fu(Rs,Oo.item)===-1&&bi[c1](Oo)}),bi}s(Vt,"_removePayloadsFromBuffer");function mr(dn){var Lr=dn;return Lr=J?J+"_"+Lr:Lr,Hn(Lr)}s(mr,"_getBuffer");function Hn(dn){try{var Lr=Ce(S,dn);if(Lr){var bi=hu().parse(Lr);if(he(bi)&&(bi=hu().parse(bi)),bi&&Je(bi))return bi}}catch(Rs){Tr(S,1,42," storage key: "+dn+", "+ll(Rs),{exception:Lt(Rs)})}return[]}s(Hn,"_getBufferBase");function xi(dn,Lr){var bi=dn;try{bi=J?J+"_"+bi:bi;var Rs=JSON[J3](Lr);Te(S,bi,Rs)}catch(Oo){Te(S,bi,JSON[J3]([])),Tr(S,2,41," storage key: "+bi+", "+ll(Oo)+". Buffer cleared",{exception:Lt(Oo)})}}s(xi,"_setBuffer");function vi(){var dn=[];try{return qr(KJe,function(Lr){var bi=ho(Lr);if(dn=dn[x_](bi),J){var Rs=J+"_"+Lr,Oo=ho(Rs);dn=dn[x_](Oo)}}),dn}catch(Lr){Tr(S,2,41,"Transfer events from previous buffers: "+ll(Lr)+". previous Buffer items can not be removed",{exception:Lt(Lr)})}return[]}s(vi,"_getPreviousEvents");function ho(dn){try{var Lr=Hn(dn),bi=[];return qr(Lr,function(Rs){var Oo={item:Rs,cnt:0};bi[c1](Oo)}),dJe(S,dn),bi}catch{}return[]}s(ho,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(zge),JJe=function(){function A(x){rc(A,this,function(T){T.serialize=function(Q){var J=S(Q,"root");try{return hu()[J3](J)}catch(se){Tr(x,1,48,se&&Ne(se[jE])?se[jE]():"Error serializing object",null,!0)}};function S(Q,J){var se="__aiCircularRefCheck",Ce={};if(!Q)return Tr(x,1,48,"cannot serialize object because it is null or undefined",{name:J},!0),Ce;if(Q[se])return Tr(x,2,50,"Circular reference detected while serializing object",{name:J},!0),Ce;if(!Q.aiDataContract){if(J==="measurements")Ce=L(Q,"number",J);else if(J==="properties")Ce=L(Q,"string",J);else if(J==="tags")Ce=L(Q,"string",J);else if(Je(Q))Ce=P(Q,J);else{Tr(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:J},!0);try{hu()[J3](Q),Ce=Q}catch(Te){Tr(x,1,48,Te&&Ne(Te[jE])?Te[jE]():"Error serializing object",null,!0)}}return Ce}return Q[se]=!0,ne(Q.aiDataContract,function(Te,Le){var Ye=Ne(Le)?Le()&1:Le&1,Fe=Ne(Le)?Le()&4:Le&4,He=Le&2,lt=Q[Te]!==void 0,et=Re(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!He)Tr(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:J});else if(!Fe){var At=void 0;et?He?At=P(Q[Te],Te):At=S(Q[Te],Te):At=Q[Te],At!==void 0&&(Ce[Te]=At)}}),delete Q[se],Ce}s(S,"_serializeObject");function P(Q,J){var se;if(Q)if(!Je(Q))Tr(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:J},!0);else{se=[];for(var Ce=0;Ce<Q[gi];Ce++){var Te=Q[Ce],Le=S(Te,J+"["+Ce+"]");se[c1](Le)}}return se}s(P,"_serializeArray");function L(Q,J,se){var Ce;return Q&&(Ce={},ne(Q,function(Te,Le){if(J==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[jE]?Ce[Te]=Le[jE]():Ce[Te]="invalid field: toString() is not defined.";else if(J==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+se+" is of unknown type.",Tr(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),XJe=8,ZJe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[gi]<XJe;)x=x[x_](x);for(var T=5381,S=0;S<x[gi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),eXe=function(){function A(){var x=this,T=new ZJe,S=new Oge;x.getSamplingScore=function(P){var L=0;return P[ic]&&P[ic][S.userId]?L=T.getHashCodeScore(P[ic][S.userId]):P.ext&&P.ext.user&&P.ext.user.id?L=T[qJe](P.ext.user.id):P[ic]&&P[ic][S.operationId]?L=T.getHashCodeScore(P[ic][S.operationId]):P.ext&&P.ext.telemetryTrace&&P.ext.telemetryTrace[K3]?L=T.getHashCodeScore(P.ext.telemetryTrace[K3]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),tXe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||RE(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[N7]=x,this.samplingScoreGenerator=new eXe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[N7],S=!1;return T==null||T>=100||x.baseType===V3[Kh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),os,u1,Xh=void 0,Kge="",rXe=65e3;function Jge(A){try{return A.responseText}catch{}return null}s(Jge,"_getResponseText");function nXe(A){return A&&A.sendPOST}s(nXe,"isOverrideFn");var Xge=Xt((os={endpointUrl:S3(ce,CJ+f_)},os[NJ]=mf(),os.maxBatchInterval=15e3,os[qge]=102400,os.disableTelemetry=mf(),os[Gge]=mf(!0),os.isRetryDisabled=mf(),os[OJ]=mf(!0),os[jge]=mf(!0),os.disableXhr=mf(),os[Hge]=mf(),os[QJ]=mf(),os[iB]=Xh,os.namePrefix=Xh,os.samplingPercentage=S3(iXe,100),os[MJ]=Xh,os.convertUndefined=Xh,os.eventsLimitInMem=1e4,os[LJ]=!1,os.httpXHROverride={isVal:nXe,v:Xh},os[Wge]=mf(),os.transports=Xh,os.retryCodes=Xh,os.maxRetryCnt={isVal:pt,v:10},os));function iXe(A){return!isNaN(A)&&A>0&&A<=100}s(iXe,"_chkSampling");var oXe=(u1={},u1[g_.dataType]=$ge,u1[S7.dataType]=YJe,u1[w7.dataType]=$Je,u1[R7.dataType]=zJe,u1[T7.dataType]=jJe,u1[V3.dataType]=VJe,u1[_7.dataType]=HJe,u1),Zge=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=UJe;var S,P,L,Q,J,se,Ce,Te=0,Le,Ye,Fe,He,lt,et,At,Nt,Vt,mr,Hn,xi,vi,ho,dn,Lr,bi,Rs,Oo,Ft,Fr,io,Et,Sn,js,go,Sl;return rc(x,T,function(ot,qa){tAe(),ot.pause=function(){gx(),L=!0},ot.resume=function(){L&&(L=!1,P=null,wo(),I_())},ot.flush=function(Ue,ht,Zt){if(Ue===void 0&&(Ue=!0),!L){gx();try{return ot[tB](Ue,null,Zt||1)}catch(Sr){Tr(ot[Dc](),1,22,"flush failed, telemetry will not be collected: "+ll(Sr),{exception:Lt(Sr)})}}},ot.onunloadFlush=function(){if(!L)if(At||Ft)try{return ot[tB](!0,id,2)}catch(Ue){Tr(ot[Dc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ll(Ue),{exception:Lt(Ue)})}else ot.flush(!1)},ot.addHeader=function(Ue,ht){Ce[Ue]=ht},ot[FJ]=function(Ue,ht,Zt,Sr){ot.isInitialized()&&Tr(ot[Dc](),1,28,"Sender is already initialized"),qa[FJ](Ue,ht,Zt,Sr);var Ln=ot.identifier;J=new JJe(ht.logger),S=0,P=null,ot[rB]=null,se=0;var gn=ot[Dc]();Fe=dge($p("Sender"),ht.evtNamespace&&ht.evtNamespace()),Ye=OJe(Fe),ot._addHook(zp(Ue,function($i){var xa=$i.cfg;xa.storagePrefix&&lJe(xa.storagePrefix);var e0=ix(null,xa,ht),ci=e0.getExtCfg(Ln,Xge),rAe=ci[nB];if(He&&rAe===He){var zJ=xa[nB];zJ&&zJ!==rAe&&(ci[nB]=zJ)}bt(ci[iB])&&(ci[iB]=xa[iB]),ze(ot,"_senderConfig",{g:s(function(){return ci},"g")}),lt!==ci[nB]&&(He=lt=ci[nB]),ht.activeStatus()===Dh.PENDING?ot.pause():ht.activeStatus()===Dh.ACTIVE&&ot.resume(),mr&&mr!==ci[MJ]&&qr(mr,function(sc){delete Ce[sc.header]}),et=ci[qge],At=(ci[QJ]===!1||ci[OJ]===!1)&&qh(),Nt=ci[QJ]===!1&&qh(),Vt=ci[OJ]===!1&&qh(),Ft=ci[Wge],Fr=!!ci.disableXhr,Sl=ci.retryCodes;var YJ=ci[LJ],T_=!!ci[Gge]&&(!!YJ||Tge()),nAe=ci.namePrefix,cXe=T_!==Lr||T_&&Rs!==nAe||T_&&bi!==YJ;if(ot[Jh]){if(cXe)try{ot[Jh]=ot[Jh].createNew(gn,ci,T_)}catch(sc){Tr(ot[Dc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+ll(sc),{exception:Lt(sc)})}wo()}else ot[Jh]=T_?new Yge(gn,ci):new jJ(gn,ci);Rs=nAe,Lr=T_,bi=YJ,io=!ci[Hge]&&IE(!0),js=!!ci[jge],ot._sample=new tXe(ci.samplingPercentage,gn),xi=ci[iB],!bt(xi)&&!eAe(xi,xa)&&Tr(gn,1,100,"Invalid Instrumentation key "+xi),mr=ci[MJ],he(He)&&!bge(He)&&mr&&mr[gi]>0?qr(mr,function(sc){T.addHeader(sc.header,sc.value)}):mr=null,Oo=ci.enableSendPromise;var iAe=Rl();go?go.SetConfig(iAe):(go=new Ua,go[FJ](iAe,gn));var Q7=ci.httpXHROverride,O7=null,lB=null,uXe=PN([3,1,2],ci.transports);O7=go&&go[D7](uXe,!1);var KJ=go&&go.getFallbackInst();Et=s(function(sc,XE){return Dr(KJ,sc,XE)},"_xhrSend"),Sn=s(function(sc,XE){return Dr(KJ,sc,XE,!1)},"_fallbackSend"),O7=Ft?Q7:O7||Q7||KJ,ot[rB]=function(sc,XE){return Dr(O7,sc,XE)},io&&(Le=E_);var JJ=PN([3,1],ci.unloadTransports);io||(JJ=JJ.filter(function(sc){return sc!==2})),lB=go&&go[D7](JJ,!0),lB=Ft?Q7:lB||Q7,(Ft||ci.unloadTransports||!Le)&&lB&&(Le=s(function(sc,XE){return Dr(lB,sc,XE)},"_syncUnloadSender")),Le||(Le=Et),Hn=ci.disableTelemetry,vi=ci.convertUndefined||Xh,ho=ci.isRetryDisabled,dn=ci.maxBatchInterval}))},ot.processTelemetry=function(Ue,ht){ht=ot._getTelCtx(ht);var Zt=ht[Dc]();try{var Sr=Jp(Ue,Zt);if(!Sr)return;var Ln=hx(Ue,Zt);if(!Ln)return;var gn=J.serialize(Ln),$i=ot[Jh];wo(gn);var xa={item:gn,cnt:0};$i[VE](xa),I_()}catch(e0){Tr(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ll(e0),{exception:Lt(e0)})}ot.processNext(Ue,ht)},ot.isCompletelyIdle=function(){return!L&&Te===0&&ot._buffer[$E]()===0},ot.getOfflineListener=function(){return Ye},ot._xhrReadyStateChange=function(Ue,ht,Zt){if(!Zp(ht))return yf(Ue,ht,Zt)},ot[tB]=function(Ue,ht,Zt){Ue===void 0&&(Ue=!0);var Sr;if(!L)try{var Ln=ot[Jh];if(Hn)Ln[C_]();else if(Ln[$E]()>0){var gn=Ln.getItems();M7(Zt||0,Ue),ht?Sr=ht.call(ot,gn,Ue):Sr=ot[rB](gn,Ue)}gx()}catch(xa){var $i=WC();(!$i||$i>9)&&Tr(ot[Dc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+ll(xa),{exception:Lt(xa)})}return Sr},ot.getOfflineSupport=function(){return{getUrl:s(function(){return He},"getUrl"),createPayload:dt,serialize:ks,batch:oc,shouldProcess:s(function(Ue){return!!Jp(Ue)},"shouldProcess")}},ot._doTeardown=function(Ue,ht){ot.onunloadFlush(),KC(Ye,!1),tAe()},ot[zE]=function(Ue,ht,Zt){if(!Zp(Ue))return Au(Ue,ht)},ot[UJ]=function(Ue,ht){if(!Zp(Ue))return px(Ue,ht)},ot[P7]=function(Ue,ht){if(!Zp(Ue))return Kp(Ue)},ot._xdrOnLoad=function(Ue,ht){if(!Zp(ht))return Vs(Ue,ht)};function Vs(Ue,ht){var Zt=Jge(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,ot[P7](ht,0);else{var Sr=Br(Zt);Sr&&Sr[qJ]&&Sr[qJ]>Sr[WJ]&&!ho?ot[UJ](ht,Sr):ot[zE](ht,DN(Ue))}}s(Vs,"_xdrOnLoad");function Rl(){try{var Ue={xdrOnComplete:s(function(Zt,Sr,Ln){var gn=mx(Ln);if(gn)return Vs(Zt,gn)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Sr,Ln,gn){var $i=mx(gn);if($i)return ss(Zt.status,$i,Zt.url,$i[gi],Zt.statusText,Ln||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Sr,Ln){var gn=mx(Ln);if(gn)return yf(Zt,gn,gn[gi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Sr,Ln){return Xp(Zt,Sr,Ln)},"beaconOnRetry")},ht={enableSendPromise:Oo,isOneDs:!1,disableCredentials:!1,disableXhr:Fr,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return ht}catch{}return null}s(Rl,"_getSendPostMgrConfig");function yf(Ue,ht,Zt){Ue.readyState===4&&ss(Ue.status,ht,Ue.responseURL,Zt,jw(Ue),Jge(Ue)||Ue.response)}s(yf,"_xhrReadyStateChange");function Au(Ue,ht,Zt){Tr(ot[Dc](),2,26,"Failed to send telemetry.",{message:ht}),ot._buffer&&ot._buffer[X3](Ue)}s(Au,"_onError");function px(Ue,ht){for(var Zt=[],Sr=[],Ln=ht.errors.reverse(),gn=0,$i=Ln;gn<$i.length;gn++){var xa=$i[gn],e0=Ue.splice(xa.index,1)[0];Ax(xa.statusCode)?Sr[c1](e0):Zt[c1](e0)}Ue[gi]>0&&ot[P7](Ue,ht[WJ]),Zt[gi]>0&&ot[zE](Zt,jw(null,["partial success",ht[WJ],"of",ht.itemsReceived].join(" "))),Sr[gi]>0&&(aB(Sr),Tr(ot[Dc](),2,40,"Partial success. Delivered: "+Ue[gi]+", Failed: "+Zt[gi]+". Will retry to send "+Sr[gi]+" our of "+ht[qJ]+" items"))}s(px,"_onPartialSuccess");function Kp(Ue,ht){ot._buffer&&ot._buffer[X3](Ue)}s(Kp,"_onSuccess");function mx(Ue){try{if(Ue){var ht=Ue,Zt=ht.oriPayload;return Zt&&Zt[gi]?Zt:null}}catch{}return null}s(mx,"_getPayloadArr");function Jp(Ue,ht){if(Hn)return!1;if(!Ue)return ht&&Tr(ht,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[GJ])return ht&&Tr(ht,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[GJ]||(Ue[GJ]="EventData"),!ot[rB])return ht&&Tr(ht,1,28,"Sender was not initialized"),!1;if(dr(Ue))Ue[pge]=ot._sample[N7];else return ht&&Tr(ht,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ot._sample[N7]}),!1;return!0}s(Jp,"_validate");function hx(Ue,ht){var Zt=Ue.iKey||xi,Sr=x.constructEnvelope(Ue,Zt,ht,vi);if(!Sr){Tr(ht,1,47,"Unable to create an AppInsights envelope");return}var Ln=!1;if(Ue[ic]&&Ue[ic][yJ]&&(qr(Ue[ic][yJ],function(gn){try{gn&&gn(Sr)===!1&&(Ln=!0,r_(ht,"Telemetry processor check returns false"))}catch($i){Tr(ht,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ll($i),{exception:Lt($i)},!0)}}),delete Ue[ic][yJ]),!Ln)return Sr}s(hx,"_getEnvelope");function ks(Ue){var ht=Kge,Zt=ot[Dc]();try{var Sr=Jp(Ue,Zt),Ln=null;Sr&&(Ln=hx(Ue,Zt)),Ln&&(ht=J.serialize(Ln))}catch{}return ht}s(ks,"_serialize");function oc(Ue){var ht=Kge;return Ue&&Ue[gi]&&(ht="["+Ue.join(",")+"]"),ht}s(oc,"_batch");function dt(Ue){var ht=vo();return{urlString:He,data:Ue,headers:ht}}s(dt,"_createPayload");function dr(Ue){return ot._sample.isSampledIn(Ue)}s(dr,"_isSampledIn");function Pn(Ue,ht,Zt,Sr){ht===200&&Ue?ot._onSuccess(Ue,Ue[gi]):Sr&&ot[zE](Ue,Sr)}s(Pn,"_getOnComplete");function Dr(Ue,ht,Zt,Sr){Sr===void 0&&(Sr=!0);var Ln=s(function(xa,e0,ci){return Pn(ht,xa,e0,ci)},"onComplete"),gn=Nn(ht),$i=Ue&&Ue.sendPOST;return $i&&gn?(Sr&&ot._buffer[B7](ht),$i(gn,Ln,!Zt)):null}s(Dr,"_doSend");function Nn(Ue){if(Je(Ue)&&Ue[gi]>0){var ht=ot[Jh].batchPayloads(Ue),Zt=vo(),Sr={data:ht,urlString:He,headers:Zt,disableXhrSync:Fr,disableFetchKeepAlive:!io,oriPayload:Ue};return Sr}return null}s(Nn,"_getPayload");function vo(){try{var Ue=Ce||{};return bge(He)&&(Ue[hge[6]]=hge[7]),Ue}catch{}return null}s(vo,"_getHeaders");function wo(Ue){var ht=Ue?Ue[gi]:0;return ot[Jh].size()+ht>et?((!Ye||Ye.isOnline())&&ot[tB](!0,null,10),!0):!1}s(wo,"_checkMaxSize");function ss(Ue,ht,Zt,Sr,Ln,gn){var $i=null;if(ot._appId||($i=Br(gn),$i&&$i.appId&&(ot._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Pc(Zt)){ot[zE](ht,Ln);return}if(Ye&&!Ye.isOnline()){if(!ho){var xa=10;aB(ht,xa),Tr(ot[Dc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(ht.length," items."))}return}!ho&&Ax(Ue)?(aB(ht),Tr(ot[Dc](),2,40,". Response code "+Ue+". Will retry to send "+ht[gi]+" items.")):ot[zE](ht,Ln)}else Pc(Zt),Ue===206?($i||($i=Br(gn)),$i&&!ho?ot[UJ](ht,$i):ot[zE](ht,Ln)):(S=0,ot[P7](ht,Sr))}s(ss,"_checkResponsStatus");function Pc(Ue){return se>=10?!1:!te(Ue)&&Ue!==""&&Ue!==He?(He=Ue,++se,!0):!1}s(Pc,"_checkAndUpdateEndPointUrl");function id(Ue,ht){if(Le)Le(Ue,!1);else{var Zt=go&&go[D7]([3],!0);return Dr(Zt,Ue,ht)}}s(id,"_doUnloadSend");function Xp(Ue,ht,Zt){var Sr=Ue,Ln=Sr&&Sr.oriPayload;if(js)Sn&&Sn(Ln,!0),Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var gn=[],$i=0;$i<Ln[gi];$i++){var xa=Ln[$i],e0=[xa],ci=Nn(e0);Zt(ci,ht)?ot._onSuccess(e0,e0[gi]):gn[c1](xa)}gn[gi]>0&&(Sn&&Sn(gn,!0),Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Xp,"_onBeaconRetry");function Zp(Ue){try{if(Ue&&Ue[gi])return he(Ue[0])}catch{}return null}s(Zp,"_isStringArr");function E_(Ue,ht){var Zt=null;if(Je(Ue)){for(var Sr=Ue[gi],Ln=0;Ln<Ue[gi];Ln++)Sr+=Ue[Ln].item[gi];var gn=go.getSyncFetchPayload();gn+Sr<=rXe?Zt=2:qh()?Zt=3:(Zt=1,Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=go&&go[D7]([Zt],!0);return Dr($i,Ue,ht)}return null}s(E_,"_fetchKeepAliveSender");function aB(Ue,ht){if(ht===void 0&&(ht=1),!(!Ue||Ue[gi]===0)){var Zt=ot[Jh];Zt[X3](Ue),S++;for(var Sr=0,Ln=Ue;Sr<Ln.length;Sr++){var gn=Ln[Sr];gn.cnt=gn.cnt||0,gn.cnt++,Zt[VE](gn)}$J(ht),I_()}}s(aB,"_resendPayload");function $J(Ue){var ht=10,Zt;if(S<=1)Zt=ht;else{var Sr=(Math.pow(2,S)-1)/2,Ln=qA(Math.random()*Sr*ht)+1;Ln=Ue*Ln,Zt=_e(zn(Ln,3600),ht)}var gn=wh()+Zt*1e3;P=gn}s($J,"_setRetryTime");function I_(){if(!Q&&!L){var Ue=P?_e(0,P-wh()):0,ht=_e(dn,Ue);Q=Rh(function(){Q=null,ot[tB](!0,null,1)},ht)}}s(I_,"_setupTimer");function gx(){Q&&Q.cancel(),Q=null,P=null}s(gx,"_clearScheduledTimer");function Ax(Ue){return te(Sl)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:Sl[gi]&&Sl.indexOf(Ue)>-1}s(Ax,"_isRetriable");function F7(){var Ue="getNotifyMgr";return ot.core[Ue]?ot.core[Ue]():ot.core._notificationManager}s(F7,"_getNotifyMgr");function M7(Ue,ht){var Zt=F7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,ht)}catch(Sr){Tr(ot[Dc](),1,74,"send request notification failed: "+ll(Sr),{exception:Lt(Sr)})}}s(M7,"_notifySendRequest");function eAe(Ue,ht){var Zt=ht.disableInstrumentationKeyValidation,Sr=te(Zt)?!1:Zt;if(Sr)return!0;var Ln="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",gn=new RegExp(Ln);return gn.test(Ue)}s(eAe,"_validateInstrumentationKey");function tAe(){ot[rB]=null,ot[Jh]=null,ot._appId=null,ot._sample=null,Ce={},Ye=null,S=0,P=null,L=!1,Q=null,J=null,se=0,Te=0,Le=null,Fe=null,He=null,lt=null,et=0,At=!1,mr=null,Hn=!1,xi=null,vi=Xh,ho=!1,Lr=null,Rs=Xh,Fr=!1,io=!1,js=!1,Et=null,Sn=null,go=null,ze(ot,"_senderConfig",{g:s(function(){return BN({},Xge)},"g")})}s(tAe,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,P,L){var Q;S!==T.iKey&&!te(S)?Q=Up(Up({},T),{iKey:S}):Q=T;var J=oXe[Q.baseType]||$ge;return J(P,Q,L)},x}(mt),v_="instrumentationKey",L7="connectionString",oB="endpointUrl",sB="userOverrideEndpointUrl",b_,VJ=void 0,sXe=(b_={diagnosticLogInterval:S3(aXe,1e4)},b_[L7]=VJ,b_.endpointUrl=VJ,b_[v_]=VJ,b_.extensionConfig={},b_);function aXe(A){return A&&A>0}s(aXe,"_chkDiagLevel");var lXe=function(){function A(x){var T=new It,S;(te(x)||te(x[v_])&&te(x[L7]))&&Gr("Invalid input configuration"),rc(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=P,p3(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var J=nd(x||{},sXe);S=J.cfg,T.addUnloadHook(zp(J,function(){var se=S[L7];if(bt(se)){var Ce=Fw(function(Fe,He){Xu(se,function(lt){var et=lt.value,At=S[v_];if(!lt.rejected&&et){S[L7]=et;var Nt=_J(et);At=Nt.instrumentationkey||At}Fe(At)})}),Te=Fw(function(Fe,He){Xu(se,function(lt){var et=lt.value,At=S[oB];if(!lt.rejected&&et){var Nt=_J(et),Vt=Nt.ingestionendpoint;At=Vt?Vt+f_:At}Fe(At)})});S[v_]=Ce,S[oB]=S[sB]||Te}if(he(se)){var Le=_J(se),Ye=Le.ingestionendpoint;S[oB]=S[sB]?S[sB]:Ye+f_,S[v_]=Le.instrumentationkey||S[v_]}S[oB]=S[sB]?S[sB]:S[oB]})),T.initialize(S,[new Zge])}s(Q,"_initialize")});function P(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(P,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=It,t.ApplicationInsights=lXe,t.Sender=Zge,t.SeverityLevel=QJe,t.arrForEach=qr,t.isNullOrUndefined=te,t.proxyFunctions=p3,t.throwError=Gr})});var s2e=G(gg=>{"use strict";f();Object.defineProperty(gg,"__esModule",{value:!0});gg.bytePairEncode=gg.BinaryMap=gg.binaryMapKey=void 0;var Zat=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");gg.binaryMapKey=Zat;var yte=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,gg.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,gg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};gg.BinaryMap=yte;var hg=new Int32Array(128),Tu=new Int32Array(128);function elt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;hg.length<r*2;)Tu=new Int32Array(Tu.length*2),hg=new Int32Array(hg.length*2);for(let c=0;c<r-1;c++){let u=e.get(t,c,c+2)??2147483647;u<n&&(n=u,i=c),Tu[c]=c,hg[c]=u}Tu[r-1]=r-1,hg[r-1]=2147483647,Tu[r]=r,hg[r]=2147483647;let o=r+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,Tu[c],Tu[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");n!==2147483647;){hg[Tu[i]]=a(i,1),i>0&&(hg[Tu[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)Tu[c]=Tu[c+1];o--,i=-1,n=2147483647;for(let c=0;c<o-1;c++){let u=hg[Tu[c]];hg[Tu[c]]<n&&(n=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,Tu[c],Tu[c+1]));return l}s(elt,"bytePairEncode");gg.bytePairEncode=elt});var a2e=G(RM=>{"use strict";f();Object.defineProperty(RM,"__esModule",{value:!0});RM.makeTextEncoder=void 0;var Cte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},xte=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},tlt=s(()=>typeof Buffer<"u"?new xte:new Cte,"makeTextEncoder");RM.makeTextEncoder=tlt});var l2e=G(kM=>{"use strict";f();Object.defineProperty(kM,"__esModule",{value:!0});kM.LRUCache=void 0;var vte=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new bte(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};kM.LRUCache=vte;var bte=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Ite=G(DM=>{"use strict";f();Object.defineProperty(DM,"__esModule",{value:!0});DM.TikTokenizer=void 0;var BM=s2e(),rlt=a2e(),nlt=l2e();function ilt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(ilt,"loadTikTokenBpe");function olt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(olt,"escapeRegExp");var Ete=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,rlt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new nlt.LRUCache(i);let o=typeof e=="string"?ilt(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new BM.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>olt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)r.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let d=(0,BM.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)r.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,l){let c,u=e.substring(n,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,r.push(...p);else{let m=o-a;a+=m,l+=d.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,r.push(h);else break;else{let g=(0,BM.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)r.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,n),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,r,a,l);if(a=p,l=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=r)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,BM.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let B of k)i.push(B);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};DM.TikTokenizer=Ete});var y2e=G(za=>{"use strict";f();Object.defineProperty(za,"__esModule",{value:!0});za.createTokenizer=za.createByEncoderName=za.createByModelName=za.getRegexByModel=za.getRegexByEncoder=za.getSpecialTokensByModel=za.getSpecialTokensByEncoder=za.MODEL_TO_ENCODING=void 0;var slt=Ite(),alt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);za.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var PM="<|endoftext|>",c2e="<|fim_prefix|>",u2e="<|fim_middle|>",d2e="<|fim_suffix|>",f2e="<|endofprompt|>",t8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",p2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",llt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],m2e=llt.join("|");function Tte(t){let e="";if(za.MODEL_TO_ENCODING.has(t))e=za.MODEL_TO_ENCODING.get(t);else for(let[r,n]of alt)if(t.startsWith(r)){e=n;break}return e}s(Tte,"getEncoderFromModelName");async function clt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(clt,"fetchAndSaveFile");function wte(t){let e=new Map([[PM,50256]]);switch(t){case"o200k_base":e=new Map([[PM,199999],[f2e,200018]]);break;case"cl100k_base":e=new Map([[PM,100257],[c2e,100258],[u2e,100259],[d2e,100260],[f2e,100276]]);break;case"p50k_edit":e=new Map([[PM,50256],[c2e,50281],[u2e,50282],[d2e,50283]]);break;default:break}return e}s(wte,"getSpecialTokensByEncoder");za.getSpecialTokensByEncoder=wte;function ult(t){let e=Tte(t);return wte(e)}s(ult,"getSpecialTokensByModel");za.getSpecialTokensByModel=ult;function h2e(t){switch(t){case"o200k_base":return m2e;case"cl100k_base":return p2e;default:break}return t8}s(h2e,"getRegexByEncoder");za.getRegexByEncoder=h2e;function dlt(t){let e=Tte(t);return h2e(e)}s(dlt,"getRegexByModel");za.getRegexByModel=dlt;async function flt(t,e=null){return g2e(Tte(t),e)}s(flt,"createByModelName");za.createByModelName=flt;async function g2e(t,e=null){let r,n,i=wte(t);switch(t){case"o200k_base":r=m2e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=p2e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=t8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=t8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=t8,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=t8,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(n),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await clt(n,u),console.log(`Saved file to ${u}`)),A2e(u,i,r)}s(g2e,"createByEncoderName");za.createByEncoderName=g2e;function A2e(t,e,r,n=8192){return new slt.TikTokenizer(t,e,r,n)}s(A2e,"createTokenizer");za.createTokenizer=A2e});var C2e=G(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTokenizer=Ya.createByEncoderName=Ya.createByModelName=Ya.getSpecialTokensByModel=Ya.getSpecialTokensByEncoder=Ya.getRegexByModel=Ya.getRegexByEncoder=Ya.MODEL_TO_ENCODING=Ya.TikTokenizer=void 0;var plt=Ite();Object.defineProperty(Ya,"TikTokenizer",{enumerable:!0,get:s(function(){return plt.TikTokenizer},"get")});var $x=y2e();Object.defineProperty(Ya,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return $x.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ya,"getRegexByEncoder",{enumerable:!0,get:s(function(){return $x.getRegexByEncoder},"get")});Object.defineProperty(Ya,"getRegexByModel",{enumerable:!0,get:s(function(){return $x.getRegexByModel},"get")});Object.defineProperty(Ya,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ya,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByModel},"get")});Object.defineProperty(Ya,"createByModelName",{enumerable:!0,get:s(function(){return $x.createByModelName},"get")});Object.defineProperty(Ya,"createByEncoderName",{enumerable:!0,get:s(function(){return $x.createByEncoderName},"get")});Object.defineProperty(Ya,"createTokenizer",{enumerable:!0,get:s(function(){return $x.createTokenizer},"get")})});var Nte=G((wvr,q2e)=>{"use strict";f();q2e.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var G2e=G((Rvr,W2e)=>{"use strict";f();var $ut=Nte();function zut(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=$ut(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(zut,"parsePath");W2e.exports=zut});var Y2e=G((Dvr,z2e)=>{"use strict";f();var Yut=G2e();function Kut(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Kut,"_interopDefaultLegacy");var Jut=Kut(Yut);function Xut(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(Xut,"getAugmentedNamespace");var j2e={},Zut="text/plain",edt="us-ascii",H2e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),tdt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===edt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==Zut)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function rdt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return tdt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];H2e(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])H2e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(rdt,"normalizeUrl");var ndt=Object.freeze({__proto__:null,default:rdt}),idt=Xut(ndt);Object.defineProperty(j2e,"__esModule",{value:!0});var odt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sdt=idt,adt=V2e(sdt),ldt=Jut.default,cdt=V2e(ldt);function V2e(t){return t&&t.__esModule?t:{default:t}}s(V2e,"_interopRequireDefault");var $2e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":odt(r))!=="object"&&(r={stripHash:!1}),e=(0,adt.default)(e,r));var o=(0,cdt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");$2e.MAX_INPUT_LENGTH=2048;var udt=j2e.default=$2e;z2e.exports=udt});var X2e=G((Lvr,J2e)=>{"use strict";f();var ddt=Nte();function K2e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=ddt(t);if(t=t.substring(t.indexOf("://")+3),K2e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(K2e,"isSsh");J2e.exports=K2e});var tTe=G((Qvr,eTe)=>{"use strict";f();var fdt=Y2e(),Z2e=X2e();function pdt(t){let e=fdt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),Z2e(e.protocols)||e.protocols.length===0&&Z2e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(pdt,"gitUp");eTe.exports=pdt});var nTe=G((qvr,rTe)=>{"use strict";f();var mdt=tTe();function Lte(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=mdt(t),i=n.resource.split("."),o=null;switch(n.toString=function(E){return Lte.stringify(this,E)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],d&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(n.pathname);return b!=null&&(n.source="bitbucket-server",b[1]==="users"?n.owner="~"+b[2]:n.owner=b[2],n.organization=n.owner,n.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=Adt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Lte,"gitUrlParse");Lte.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?hdt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+gdt(t)+i;default:return t.href}};function hdt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(hdt,"buildToken");function gdt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(gdt,"buildPath");function Adt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(Adt,"findLongestMatchingSubstring");rTe.exports=Lte});var pTe=G((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(r>=o)break;e[r++]=l}else if(l<=2047){if(r+1>=o)break;e[r++]=192|l>>6,e[r++]=128|63&l}else if(l<=65535){if(r+2>=o)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|63&l}else{if(r+3>=o)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|63&l}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(n,"_");function i(){var b=n();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),r=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var d=n(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(d=n(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var v=i();256&n()&&u.tlsExports.add(v)}else if(h===4)for(y=n();y--;)i(),v=i(),(3&n())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(l){n.global&&mergeLibSymbols(l,t),n.module=l}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(n),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let B=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(B===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let W=E[0].value,ee=!0;switch(W){case"not-eq?":ee=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let O=E[1].name,le=E[2].name;g[y].push(function(ie){let j,q;for(let Y of ie)Y.name===O&&(j=Y.node),Y.name===le&&(q=Y.node);return j===void 0||q===void 0||j.text===q.text===ee})}else{let O=E[1].name,le=E[2].value;g[y].push(function(ie){for(let j of ie)if(j.name===O)return j.node.text===le===ee;return!0})}break;case"not-match?":ee=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,ae=new RegExp(E[2].value);g[y].push(function(O){for(let le of O)if(le.name===me)return ae.test(le.node.text)===ee;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${W}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error(`Arguments to \`#${W}\` predicate must be a strings.".`);let H=W==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:W,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,l,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),l=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:l}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=r,l.startIndex=n,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var wre=G((twr,GTe)=>{f();var Tre=require("fs"),DQ=require("path"),L8=DQ.join,gft=DQ.dirname,qTe=Tre.accessSync&&function(t){try{Tre.accessSync(t)}catch{return!1}return!0}||Tre.existsSync||DQ.existsSync,WTe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function Aft(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(WTe).map(function(c){c in t||(t[c]=WTe[c])}),t.module_root||(t.module_root=yft(__filename)),DQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,l;n<i;n++){o=L8.apply(null,t.try[n].map(function(c){return t[c]||c})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(c){return t.arrow+c}).join(`
`)),l.tries=r,l}s(Aft,"bindings");GTe.exports=Aft;function yft(t){for(var e=gft(t),r;;){if(e==="."&&(e=process.cwd()),qTe(L8(e,"dist")))return L8(e,"dist");if(qTe(L8(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=L8(e,"..")}}s(yft,"getRoot")});var jTe=G((iwr,HTe)=>{f();HTe.exports=wre()("node_sqlite3.node")});var zTe=G($Te=>{f();var Cft=require("util");function xft(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return Cft.inspect(l,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=VTe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+VTe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(xft,"extendTrace");$Te.extendTrace=xft;function VTe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(VTe,"filter")});var XTe=G((KTe,JTe)=>{f();var vft=require("path"),Wf=jTe(),GS=require("events").EventEmitter;JTe.exports=KTe=Wf;function HS(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new PQ(this,e,r);return t.call(this,i,n)}}s(HS,"normalizeMethod");function Sre(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(Sre,"inherits");Wf.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Su(t,e,r);let n;if(t=vft.resolve(t),!Wf.cached.objects[t])n=Wf.cached.objects[t]=new Su(t,e,r);else{n=Wf.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Su=Wf.Database,PQ=Wf.Statement,_re=Wf.Backup;Sre(Su,GS);Sre(PQ,GS);Sre(_re,GS);Su.prototype.prepare=HS(function(t,e){return e.length?t.bind.apply(t,e):t});Su.prototype.run=HS(function(t,e){return t.run.apply(t,e).finalize(),this});Su.prototype.get=HS(function(t,e){return t.get.apply(t,e).finalize(),this});Su.prototype.all=HS(function(t,e){return t.all.apply(t,e).finalize(),this});Su.prototype.each=HS(function(t,e){return t.each.apply(t,e).finalize(),this});Su.prototype.map=HS(function(t,e){return t.map.apply(t,e).finalize(),this});Su.prototype.backup=function(){let t;return arguments.length<=2?t=new _re(this,arguments[0],"main","main",!0,arguments[1]):t=new _re(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Wf.BUSY,Wf.LOCKED],t};PQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let l=0;l<n.length;l++)i[n[l][a]]=n[l];else{let l=o[1];for(let c=0;c<n.length;c++)i[n[c][a]]=n[c][l]}}e(r,i)}),this.all.apply(this,t)};var YTe=!1,Rre=["trace","profile","change"];Su.prototype.addListener=Su.prototype.on=function(t){let e=GS.prototype.addListener.apply(this,arguments);return Rre.indexOf(t)>=0&&this.configure(t,!0),e};Su.prototype.removeListener=function(t){let e=GS.prototype.removeListener.apply(this,arguments);return Rre.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Su.prototype.removeAllListeners=function(t){let e=GS.prototype.removeAllListeners.apply(this,arguments);return Rre.indexOf(t)>=0&&this.configure(t,!1),e};Wf.verbose=function(){if(!YTe){let t=zTe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Su.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(PQ.prototype,e)}),YTe=!0}return Wf}});var VQ=G(Xa=>{"use strict";f();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.thenable=Xa.typedArray=Xa.stringArray=Xa.array=Xa.func=Xa.error=Xa.number=Xa.string=Xa.boolean=void 0;function Eft(t){return t===!0||t===!1}s(Eft,"boolean");Xa.boolean=Eft;function nwe(t){return typeof t=="string"||t instanceof String}s(nwe,"string");Xa.string=nwe;function Ift(t){return typeof t=="number"||t instanceof Number}s(Ift,"number");Xa.number=Ift;function Tft(t){return t instanceof Error}s(Tft,"error");Xa.error=Tft;function iwe(t){return typeof t=="function"}s(iwe,"func");Xa.func=iwe;function owe(t){return Array.isArray(t)}s(owe,"array");Xa.array=owe;function wft(t){return owe(t)&&t.every(e=>nwe(e))}s(wft,"stringArray");Xa.stringArray=wft;function _ft(t,e){return Array.isArray(t)&&t.every(e)}s(_ft,"typedArray");Xa.typedArray=_ft;function Sft(t){return t&&iwe(t.then)}s(Sft,"thenable");Xa.thenable=Sft});var Dre=G(Gf=>{"use strict";f();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.generateUuid=Gf.parse=Gf.isUUID=Gf.v4=Gf.empty=void 0;var Q8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},O8=class t extends Q8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};O8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];O8._timeHighBits=["8","9","a","b"];Gf.empty=new Q8("00000000-0000-0000-0000-000000000000");function swe(){return new O8}s(swe,"v4");Gf.v4=swe;var Rft=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function awe(t){return Rft.test(t)}s(awe,"isUUID");Gf.isUUID=awe;function kft(t){if(!awe(t))throw new Error("invalid uuid");return new Q8(t)}s(kft,"parse");Gf.parse=kft;function Bft(){return swe().asHex()}s(Bft,"generateUuid");Gf.generateUuid=Bft});var lwe=G(nv=>{"use strict";f();Object.defineProperty(nv,"__esModule",{value:!0});nv.attachPartialResult=nv.ProgressFeature=nv.attachWorkDone=void 0;var rv=ii(),Dft=Dre(),MI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(rv.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(rv.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(rv.WorkDoneProgress.type,this._token,{kind:"end"})}};MI.Instances=new Map;var $Q=class extends MI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new rv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},U8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},zQ=class extends U8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new rv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Pft(t,e){if(e===void 0||e.workDoneToken===void 0)return new U8;let r=e.workDoneToken;return delete e.workDoneToken,new MI(t,r)}s(Pft,"attachWorkDone");nv.attachWorkDone=Pft;var Nft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(rv.WorkDoneProgressCancelNotification.type,r=>{let n=MI.Instances.get(r.token);(n instanceof $Q||n instanceof zQ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new U8:new MI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Dft.generateUuid)();return this.connection.sendRequest(rv.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new $Q(this.connection,e))}else return Promise.resolve(new zQ)}},"ProgressFeature");nv.ProgressFeature=Nft;var Pre;(function(t){t.type=new rv.ProgressType})(Pre||(Pre={}));var Nre=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Pre.type,this._token,e)}};function Lft(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Nre(t,r)}s(Lft,"attachPartialResult");nv.attachPartialResult=Lft});var cwe=G(YQ=>{"use strict";f();Object.defineProperty(YQ,"__esModule",{value:!0});YQ.ConfigurationFeature=void 0;var Fft=ii(),Mft=VQ(),Qft=s(t=>class extends t{getConfiguration(e){return e?Mft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Fft.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");YQ.ConfigurationFeature=Qft});var uwe=G(JQ=>{"use strict";f();Object.defineProperty(JQ,"__esModule",{value:!0});JQ.WorkspaceFoldersFeature=void 0;var KQ=ii(),Oft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new KQ.Emitter,this.connection.onNotification(KQ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(KQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(KQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");JQ.WorkspaceFoldersFeature=Oft});var dwe=G(XQ=>{"use strict";f();Object.defineProperty(XQ,"__esModule",{value:!0});XQ.CallHierarchyFeature=void 0;var Lre=ii(),Uft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Lre.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Lre.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Lre.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");XQ.CallHierarchyFeature=Uft});var Mre=G(iv=>{"use strict";f();Object.defineProperty(iv,"__esModule",{value:!0});iv.SemanticTokensBuilder=iv.SemanticTokensDiff=iv.SemanticTokensFeature=void 0;var ZQ=ii(),qft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(ZQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=ZQ.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=ZQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=ZQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");iv.SemanticTokensFeature=qft;var eO=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,l=this.modifiedSequence.slice(n,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:l}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};iv.SemanticTokensDiff=eO;var Fre=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,l=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new eO(this._prevData,this._data).computeDiff()}:this.build()}};iv.SemanticTokensBuilder=Fre});var fwe=G(tO=>{"use strict";f();Object.defineProperty(tO,"__esModule",{value:!0});tO.ShowDocumentFeature=void 0;var Wft=ii(),Gft=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(Wft.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");tO.ShowDocumentFeature=Gft});var pwe=G(rO=>{"use strict";f();Object.defineProperty(rO,"__esModule",{value:!0});rO.FileOperationsFeature=void 0;var VS=ii(),Hft=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(VS.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(VS.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(VS.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(VS.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(VS.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(VS.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");rO.FileOperationsFeature=Hft});var mwe=G(nO=>{"use strict";f();Object.defineProperty(nO,"__esModule",{value:!0});nO.LinkedEditingRangeFeature=void 0;var jft=ii(),Vft=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(jft.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");nO.LinkedEditingRangeFeature=Vft});var hwe=G(iO=>{"use strict";f();Object.defineProperty(iO,"__esModule",{value:!0});iO.TypeHierarchyFeature=void 0;var Qre=ii(),$ft=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Qre.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=Qre.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=Qre.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");iO.TypeHierarchyFeature=$ft});var Awe=G(oO=>{"use strict";f();Object.defineProperty(oO,"__esModule",{value:!0});oO.InlineValueFeature=void 0;var gwe=ii(),zft=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(gwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(gwe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");oO.InlineValueFeature=zft});var Cwe=G(sO=>{"use strict";f();Object.defineProperty(sO,"__esModule",{value:!0});sO.FoldingRangeFeature=void 0;var ywe=ii(),Yft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(ywe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=ywe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");sO.FoldingRangeFeature=Yft});var xwe=G(aO=>{"use strict";f();Object.defineProperty(aO,"__esModule",{value:!0});aO.InlayHintFeature=void 0;var Ore=ii(),Kft=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Ore.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Ore.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Ore.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");aO.InlayHintFeature=Kft});var vwe=G(lO=>{"use strict";f();Object.defineProperty(lO,"__esModule",{value:!0});lO.DiagnosticFeature=void 0;var q8=ii(),Jft=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(q8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(q8.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(q8.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(q8.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(q8.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");lO.DiagnosticFeature=Jft});var qre=G(cO=>{"use strict";f();Object.defineProperty(cO,"__esModule",{value:!0});cO.TextDocuments=void 0;var QI=ii(),Ure=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new QI.Emitter,this._onDidOpen=new QI.Emitter,this._onDidClose=new QI.Emitter,this._onDidSave=new QI.Emitter,this._onWillSave=new QI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=QI.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),QI.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};cO.TextDocuments=Ure});var Gre=G($S=>{"use strict";f();Object.defineProperty($S,"__esModule",{value:!0});$S.NotebookDocuments=$S.NotebookSyncFeature=void 0;var Hf=ii(),bwe=qre(),Xft=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Hf.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Hf.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Hf.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Hf.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");$S.NotebookSyncFeature=Xft;var uO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Hf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Hf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Hf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};uO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Wre=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof bwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new bwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Hf.Emitter,this._onDidChange=new Hf.Emitter,this._onDidSave=new Hf.Emitter,this._onDidClose=new Hf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new uO,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)r.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let B=o.cells.splice(_,1,k);if(p.push({old:B[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)r.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Hf.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};$S.NotebookDocuments=Wre});var Ewe=G(dO=>{"use strict";f();Object.defineProperty(dO,"__esModule",{value:!0});dO.MonikerFeature=void 0;var Zft=ii(),ept=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=Zft.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");dO.MonikerFeature=ept});var Yre=G(mo=>{"use strict";f();Object.defineProperty(mo,"__esModule",{value:!0});mo.createConnection=mo.combineFeatures=mo.combineNotebooksFeatures=mo.combineLanguagesFeatures=mo.combineWorkspaceFeatures=mo.combineWindowFeatures=mo.combineClientFeatures=mo.combineTracerFeatures=mo.combineTelemetryFeatures=mo.combineConsoleFeatures=mo._NotebooksImpl=mo._LanguagesImpl=mo.BulkUnregistration=mo.BulkRegistration=mo.ErrorMessageTracker=void 0;var $t=ii(),jf=VQ(),jre=Dre(),Kn=lwe(),tpt=cwe(),rpt=uwe(),npt=dwe(),ipt=Mre(),opt=fwe(),spt=pwe(),apt=mwe(),lpt=hwe(),cpt=Awe(),upt=Cwe(),dpt=xwe(),fpt=vwe(),ppt=Gre(),mpt=Ewe();function Hre(t){if(t!==null)return t}s(Hre,"null2Undefined");var Vre=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};mo.ErrorMessageTracker=Vre;var fO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},$re=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:$t.MessageType.Error,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Hre)}showWarningMessage(e,...r){let n={type:$t.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Hre)}showInformationMessage(e,...r){let n={type:$t.MessageType.Info,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Hre)}},Iwe=(0,opt.ShowDocumentFeature)((0,Kn.ProgressFeature)($re)),Twe;(function(t){function e(){return new pO}s(e,"create"),t.create=e})(Twe||(mo.BulkRegistration=Twe={}));var pO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=jf.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=jre.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},wwe;(function(t){function e(){return new W8(void 0,[])}s(e,"create"),t.create=e})(wwe||(mo.BulkUnregistration=wwe={}));var W8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=jf.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},mO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof pO?this.registerMany(e):e instanceof W8?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=jf.string(r)?r:r.method,o=jre.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,r){let n=jf.string(e)?e:e.method,i=jre.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,r).then(()=>new W8(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},zre=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,n)}},_we=(0,spt.FileOperationsFeature)((0,rpt.WorkspaceFoldersFeature)((0,tpt.ConfigurationFeature)(zre))),hO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?r:void 0}).catch(()=>{})}},gO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},AO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Kn.attachPartialResult)(this.connection,r)}};mo._LanguagesImpl=AO;var Swe=(0,upt.FoldingRangeFeature)((0,mpt.MonikerFeature)((0,fpt.DiagnosticFeature)((0,dpt.InlayHintFeature)((0,cpt.InlineValueFeature)((0,lpt.TypeHierarchyFeature)((0,apt.LinkedEditingRangeFeature)((0,ipt.SemanticTokensFeature)((0,npt.CallHierarchyFeature)(AO))))))))),yO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Kn.attachPartialResult)(this.connection,r)}};mo._NotebooksImpl=yO;var Rwe=(0,ppt.NotebookSyncFeature)(yO);function kwe(t,e){return function(r){return e(t(r))}}s(kwe,"combineConsoleFeatures");mo.combineConsoleFeatures=kwe;function Bwe(t,e){return function(r){return e(t(r))}}s(Bwe,"combineTelemetryFeatures");mo.combineTelemetryFeatures=Bwe;function Dwe(t,e){return function(r){return e(t(r))}}s(Dwe,"combineTracerFeatures");mo.combineTracerFeatures=Dwe;function Pwe(t,e){return function(r){return e(t(r))}}s(Pwe,"combineClientFeatures");mo.combineClientFeatures=Pwe;function Nwe(t,e){return function(r){return e(t(r))}}s(Nwe,"combineWindowFeatures");mo.combineWindowFeatures=Nwe;function Lwe(t,e){return function(r){return e(t(r))}}s(Lwe,"combineWorkspaceFeatures");mo.combineWorkspaceFeatures=Lwe;function Fwe(t,e){return function(r){return e(t(r))}}s(Fwe,"combineLanguagesFeatures");mo.combineLanguagesFeatures=Fwe;function Mwe(t,e){return function(r){return e(t(r))}}s(Mwe,"combineNotebooksFeatures");mo.combineNotebooksFeatures=Mwe;function hpt(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,kwe),tracer:r(t.tracer,e.tracer,Dwe),telemetry:r(t.telemetry,e.telemetry,Bwe),client:r(t.client,e.client,Pwe),window:r(t.window,e.window,Nwe),workspace:r(t.workspace,e.workspace,Lwe),languages:r(t.languages,e.languages,Fwe),notebooks:r(t.notebooks,e.notebooks,Mwe)}}s(hpt,"combineFeatures");mo.combineFeatures=hpt;function gpt(t,e,r){let n=r&&r.console?new(r.console(fO)):new fO,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(hO)):new hO,a=r&&r.telemetry?new(r.telemetry(gO)):new gO,l=r&&r.client?new(r.client(mO)):new mO,c=r&&r.window?new(r.window(Iwe)):new Iwe,u=r&&r.workspace?new(r.workspace(_we)):new _we,d=r&&r.languages?new(r.languages(Swe)):new Swe,p=r&&r.notebooks?new(r.notebooks(Rwe)):new Rwe,m=[n,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:jf.thenable(E)?new Promise((_,k)=>{E.then(B=>_(B),B=>k(B))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(jf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=jf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),jf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,Kn.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let B=k;B||(B={capabilities:{}});let N=B.capabilities;N||(N={},B.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=jf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!jf.number(N.textDocumentSync)&&!jf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=jf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let W of m)W.fillServerCapabilities(N);return B})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(gpt,"createConnection");mo.createConnection=gpt});var Qwe=G(xd=>{"use strict";f();Object.defineProperty(xd,"__esModule",{value:!0});xd.resolveModulePath=xd.FileSystem=xd.resolveGlobalYarnPath=xd.resolveGlobalNodePath=xd.resolve=xd.uriToFilePath=void 0;var Apt=require("url"),Tm=require("path"),Kre=require("fs"),ene=require("child_process");function ypt(t){let e=Apt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return Tm.normalize(r.join("/"))}s(ypt,"uriToFilePath");xd.uriToFilePath=ypt;function Jre(){return process.platform==="win32"}s(Jre,"isWindows");function CO(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&Kre.existsSync(e)&&(u[i]?u[i]=e+Tm.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,ene.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(CO,"resolve");xd.resolve=CO;function Xre(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};Jre()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,ene.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Jre()?Tm.join(a,"node_modules"):Tm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(Xre,"resolveGlobalNodePath");xd.resolveGlobalNodePath=Xre;function Cpt(t){let e="yarn",r={encoding:"utf8"};Jre()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,ene.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return Tm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(Cpt,"resolveGlobalYarnPath");xd.resolveGlobalYarnPath=Cpt;var Zre;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Kre.existsSync(__filename.toUpperCase())||!Kre.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?Tm.normalize(o).indexOf(Tm.normalize(i))===0:Tm.normalize(o).toLowerCase().indexOf(Tm.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Zre||(xd.FileSystem=Zre={}));function xpt(t,e,r,n){return r?(Tm.isAbsolute(r)||(r=Tm.join(t,r)),CO(e,r,r,n).then(i=>Zre.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>CO(e,Xre(n),t,n))):CO(e,Xre(n),t,n)}s(xpt,"resolveModulePath");xd.resolveModulePath=xpt});var tne=G((xSr,Owe)=>{"use strict";f();Owe.exports=ii()});var Uwe=G(xO=>{"use strict";f();Object.defineProperty(xO,"__esModule",{value:!0});xO.InlineCompletionFeature=void 0;var vpt=ii(),bpt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(vpt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");xO.InlineCompletionFeature=bpt});var Gwe=G($c=>{"use strict";f();var Ept=$c&&$c.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wwe=$c&&$c.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ept(e,t,r)};Object.defineProperty($c,"__esModule",{value:!0});$c.ProposedFeatures=$c.NotebookDocuments=$c.TextDocuments=$c.SemanticTokensBuilder=void 0;var Ipt=Mre();Object.defineProperty($c,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return Ipt.SemanticTokensBuilder},"get")});var Tpt=Uwe();Wwe(ii(),$c);var wpt=qre();Object.defineProperty($c,"TextDocuments",{enumerable:!0,get:s(function(){return wpt.TextDocuments},"get")});var _pt=Gre();Object.defineProperty($c,"NotebookDocuments",{enumerable:!0,get:s(function(){return _pt.NotebookDocuments},"get")});Wwe(Yre(),$c);var qwe;(function(t){t.all={__brand:"features",languages:Tpt.InlineCompletionFeature}})(qwe||($c.ProposedFeatures=qwe={}))});var Za=G(Vf=>{"use strict";f();var Spt=Vf&&Vf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$we=Vf&&Vf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Spt(e,t,r)};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.createConnection=Vf.Files=void 0;var Hwe=require("node:util"),rne=VQ(),Rpt=Yre(),G8=Qwe(),OI=tne();$we(tne(),Vf);$we(Gwe(),Vf);var jwe;(function(t){t.uriToFilePath=G8.uriToFilePath,t.resolveGlobalNodePath=G8.resolveGlobalNodePath,t.resolveGlobalYarnPath=G8.resolveGlobalYarnPath,t.resolve=G8.resolve,t.resolveModulePath=G8.resolveModulePath})(jwe||(Vf.Files=jwe={}));var Vwe;function vO(){if(Vwe!==void 0)try{Vwe.end()}catch{}}s(vO,"endProtocolConnection");var zS=!1,zwe;function kpt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(zwe=setInterval(()=>{try{process.kill(n,0)}catch{vO(),process.exit(zS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(kpt,"setupExitTimer");kpt();var Bpt={initialize:s(t=>{let e=t.processId;rne.number(e)&&zwe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(zS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return zS},set shutdownReceived(t){zS=t},exit:s(t=>{vO(),process.exit(t)},"exit")};function Dpt(t,e,r,n){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),OI.ConnectionStrategy.is(t)||OI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=r),Ppt(o,a,l,i)}s(Dpt,"createConnection");Vf.createConnection=Dpt;function Ppt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new OI.IPCMessageReader(process),e=new OI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,OI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,OI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(rne.func(t.read)&&rne.func(t.on)){let c=t;c.on("end",()=>{vO(),process.exit(zS?0:1)}),c.on("close",()=>{vO(),process.exit(zS?0:1)})}let l=s(c=>{let u=(0,OI.createProtocolConnection)(t,e,c,r);return i&&Npt(c),u},"connectionFactory");return(0,Rpt.createConnection)(l,Bpt,n)}s(Ppt,"_createConnection");function Npt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,Hwe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,Hwe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(Npt,"patchConsole")});var wm=G((DSr,Ywe)=>{"use strict";f();Ywe.exports=Za()});var q5e=G((G3r,U5e)=>{"use strict";f();U5e.exports=Q5e;function Q5e(t,e,r){t instanceof RegExp&&(t=M5e(t,r)),e instanceof RegExp&&(e=M5e(e,r));var n=O5e(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(Q5e,"balanced");function M5e(t,e){var r=e.match(t);return r?r[0]:null}s(M5e,"maybeMatch");Q5e.range=O5e;function O5e(t,e,r){var n,i,o,a,l,c=r.indexOf(t),u=r.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;d>=0&&!l;)d==c?(n.push(d),c=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=c<u&&c>=0?c:u;n.length&&(l=[o,a])}return l}s(O5e,"range")});var Y5e=G((V3r,z5e)=>{f();var W5e=q5e();z5e.exports=Tmt;var G5e="\0SLASH"+Math.random()+"\0",H5e="\0OPEN"+Math.random()+"\0",iie="\0CLOSE"+Math.random()+"\0",j5e="\0COMMA"+Math.random()+"\0",V5e="\0PERIOD"+Math.random()+"\0";function nie(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(nie,"numeric");function Emt(t){return t.split("\\\\").join(G5e).split("\\{").join(H5e).split("\\}").join(iie).split("\\,").join(j5e).split("\\.").join(V5e)}s(Emt,"escapeBraces");function Imt(t){return t.split(G5e).join("\\").split(H5e).join("{").split(iie).join("}").split(j5e).join(",").split(V5e).join(".")}s(Imt,"unescapeBraces");function $5e(t){if(!t)return[""];var e=[],r=W5e("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=$5e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s($5e,"parseCommaParts");function Tmt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),rD(Emt(t),!0).map(Imt)):[]}s(Tmt,"expandTop");function wmt(t){return"{"+t+"}"}s(wmt,"embrace");function _mt(t){return/^-?0\d/.test(t)}s(_mt,"isPadded");function Smt(t,e){return t<=e}s(Smt,"lte");function Rmt(t,e){return t>=e}s(Rmt,"gte");function rD(t,e){var r=[],n=W5e("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?rD(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=c||u,p=n.body.indexOf(",")>=0;if(!d&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+iie+n.post,rD(t)):[t];var m;if(d)m=n.body.split(/\.\./);else if(m=$5e(n.body),m.length===1&&(m=rD(m[0],!1).map(wmt),m.length===1))return o.map(function(ae){return n.pre+m[0]+ae});var h;if(d){var g=nie(m[0]),y=nie(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(nie(m[2])):1,E=Smt,_=y<g;_&&(b*=-1,E=Rmt);var k=m.some(_mt);h=[];for(var B=g;E(B,y);B+=b){var N;if(u)N=String.fromCharCode(B),N==="\\"&&(N="");else if(N=String(B),k){var W=v-N.length;if(W>0){var ee=new Array(W+1).join("0");B<0?N="-"+ee+N.slice(1):N=ee+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,rD(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&r.push(l)}}return r}s(rD,"expand")});var Os=G((iYr,A3e)=>{f();A3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=G((sYr,y3e)=>{"use strict";f();var ea=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Poe=class extends ea{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Noe=class extends ea{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},Loe=class extends ea{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Foe=class extends ea{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Moe=class extends ea{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Qoe=class extends ea{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Ooe=class extends ea{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Mq=class extends ea{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Uoe=class extends Mq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},qoe=class extends ea{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Woe=class extends ea{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Goe=class extends ea{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Hoe=class extends ea{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},joe=class extends ea{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Voe=class extends ea{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},$oe=class extends ea{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},zoe=class extends ea{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Yoe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},Koe=class extends ea{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Joe=class extends ea{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Xoe=class extends ea{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},Zoe=class extends ea{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};y3e.exports={AbortError:Mq,HTTPParserError:Yoe,UndiciError:ea,HeadersTimeoutError:Noe,HeadersOverflowError:Loe,BodyTimeoutError:Foe,RequestContentLengthMismatchError:Woe,ConnectTimeoutError:Poe,ResponseStatusCodeError:Moe,InvalidArgumentError:Qoe,InvalidReturnValueError:Ooe,RequestAbortedError:Uoe,ClientDestroyedError:Hoe,ClientClosedError:joe,InformationalError:qoe,SocketError:Voe,NotSupportedError:$oe,ResponseContentLengthMismatchError:Goe,BalancedPoolMissingUpstreamError:zoe,ResponseExceededMaxSizeError:Koe,RequestRetryError:Joe,ResponseError:Xoe,SecureProxyConnectionError:Zoe}});var Oq=G((cYr,C3e)=>{"use strict";f();var Qq={},ese=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<ese.length;++t){let e=ese[t],r=e.toLowerCase();Qq[e]=Qq[r]=r}Object.setPrototypeOf(Qq,null);C3e.exports={wellknownHeaderNames:ese,headerNameLowerCasedRecord:Qq}});var E3e=G((dYr,b3e)=>{"use strict";f();var{wellknownHeaderNames:x3e,headerNameLowerCasedRecord:k1t}=Oq(),tse=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},Uq=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new tse(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},v3e=new Uq;for(let t=0;t<x3e.length;++t){let e=k1t[x3e[t]];v3e.insert(e,e)}b3e.exports={TernarySearchTree:Uq,tree:v3e}});var yi=G((mYr,O3e)=>{"use strict";f();var RD=require("node:assert"),{kDestroyed:T3e,kBodyUsed:q5,kListeners:rse,kBody:I3e}=Os(),{IncomingMessage:B1t}=require("node:http"),Gq=require("node:stream"),D1t=require("node:net"),{Blob:P1t}=require("node:buffer"),N1t=require("node:util"),{stringify:L1t}=require("node:querystring"),{EventEmitter:F1t}=require("node:events"),{InvalidArgumentError:jl}=yo(),{headerNameLowerCasedRecord:M1t}=Oq(),{tree:w3e}=E3e(),[Q1t,O1t]=process.versions.node.split(".").map(t=>Number(t)),Wq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[I3e]=e,this[q5]=!1}async*[Symbol.asyncIterator](){RD(!this[q5],"disturbed"),this[q5]=!0,yield*this[I3e]}};function U1t(t){return Hq(t)?(B3e(t)===0&&t.on("data",function(){RD(!1)}),typeof t.readableDidRead!="boolean"&&(t[q5]=!1,F1t.prototype.on.call(t,"data",function(){this[q5]=!0})),t):t&&typeof t.pipeTo=="function"?new Wq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&k3e(t)?new Wq(t):t}s(U1t,"wrapRequestBody");function q1t(){}s(q1t,"nop");function Hq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Hq,"isStream");function _3e(t){if(t===null)return!1;if(t instanceof P1t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(_3e,"isBlobLike");function W1t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=L1t(e);return r&&(t+="?"+r),t}s(W1t,"buildURL");function S3e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(S3e,"isValidPort");function qq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(qq,"isHttpOrHttpsPrefixed");function R3e(t){if(typeof t=="string"){if(t=new URL(t),!qq(t.origin||t.protocol))throw new jl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new jl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&S3e(t.port)===!1)throw new jl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new jl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new jl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new jl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new jl("Invalid URL origin: the origin must be a string or null/undefined.");if(!qq(t.origin||t.protocol))throw new jl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!qq(t.origin||t.protocol))throw new jl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(R3e,"parseURL");function G1t(t){if(t=R3e(t),t.pathname!=="/"||t.search||t.hash)throw new jl("invalid url");return t}s(G1t,"parseOrigin");function H1t(t){if(t[0]==="["){let r=t.indexOf("]");return RD(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(H1t,"getHostname");function j1t(t){if(!t)return null;RD(typeof t=="string");let e=H1t(t);return D1t.isIP(e)?"":e}s(j1t,"getServerName");function V1t(t){return JSON.parse(JSON.stringify(t))}s(V1t,"deepClone");function $1t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s($1t,"isAsyncIterable");function k3e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(k3e,"isIterable");function B3e(t){if(t==null)return 0;if(Hq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(_3e(t))return t.size!=null?t.size:null;if(N3e(t))return t.byteLength}return null}s(B3e,"bodyLength");function D3e(t){return t&&!!(t.destroyed||t[T3e]||Gq.isDestroyed?.(t))}s(D3e,"isDestroyed");function z1t(t,e){t==null||!Hq(t)||D3e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===B1t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[T3e]=!0))}s(z1t,"destroy");var Y1t=/timeout=(\d+)/;function K1t(t){let e=t.toString().match(Y1t);return e?parseInt(e[1],10)*1e3:null}s(K1t,"parseKeepAliveTimeout");function P3e(t){return typeof t=="string"?M1t[t]??t.toLowerCase():w3e.lookup(t)??t.toString("latin1").toLowerCase()}s(P3e,"headerNameToString");function J1t(t){return w3e.lookup(t)??t.toString("latin1").toLowerCase()}s(J1t,"bufferToLowerCasedHeaderName");function X1t(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=P3e(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(X1t,"parseHeaders");function Z1t(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),r[c]=o,r[c+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(Z1t,"parseRawHeaders");function N3e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(N3e,"isBuffer");function eyt(t,e,r){if(!t||typeof t!="object")throw new jl("handler must be an object");if(typeof t.onConnect!="function")throw new jl("invalid onConnect method");if(typeof t.onError!="function")throw new jl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new jl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new jl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new jl("invalid onHeaders method");if(typeof t.onData!="function")throw new jl("invalid onData method");if(typeof t.onComplete!="function")throw new jl("invalid onComplete method")}}s(eyt,"validateHandler");function tyt(t){return!!(t&&(Gq.isDisturbed(t)||t[q5]))}s(tyt,"isDisturbed");function ryt(t){return!!(t&&Gq.isErrored(t))}s(ryt,"isErrored");function nyt(t){return!!(t&&Gq.isReadable(t))}s(nyt,"isReadable");function iyt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(iyt,"getSocketInfo");function oyt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(oyt,"ReadableStreamFrom");function syt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(syt,"isFormDataLike");function ayt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(ayt,"addAbortListener");var lyt=typeof String.prototype.toWellFormed=="function",cyt=typeof String.prototype.isWellFormed=="function";function L3e(t){return lyt?`${t}`.toWellFormed():N1t.toUSVString(t)}s(L3e,"toUSVString");function uyt(t){return cyt?`${t}`.isWellFormed():L3e(t)===`${t}`}s(uyt,"isUSVString");function F3e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(F3e,"isTokenCharCode");function dyt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!F3e(t.charCodeAt(e)))return!1;return!0}s(dyt,"isValidHTTPToken");var fyt=/[^\t\x20-\x7e\x80-\xff]/;function pyt(t){return!fyt.test(t)}s(pyt,"isValidHeaderValue");function myt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(myt,"parseRangeHeader");function hyt(t,e,r){return(t[rse]??=[]).push([e,r]),t.on(e,r),t}s(hyt,"addListener");function gyt(t){for(let[e,r]of t[rse]??[])t.removeListener(e,r);t[rse]=null}s(gyt,"removeAllListeners");function Ayt(t,e,r){try{e.onError(r),RD(e.aborted)}catch(n){t.emit("error",n)}}s(Ayt,"errorRequest");var M3e=Object.create(null);M3e.enumerable=!0;var nse={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},Q3e={...nse,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(nse,null);Object.setPrototypeOf(Q3e,null);O3e.exports={kEnumerableProperty:M3e,nop:q1t,isDisturbed:tyt,isErrored:ryt,isReadable:nyt,toUSVString:L3e,isUSVString:uyt,isBlobLike:_3e,parseOrigin:G1t,parseURL:R3e,getServerName:j1t,isStream:Hq,isIterable:k3e,isAsyncIterable:$1t,isDestroyed:D3e,headerNameToString:P3e,bufferToLowerCasedHeaderName:J1t,addListener:hyt,removeAllListeners:gyt,errorRequest:Ayt,parseRawHeaders:Z1t,parseHeaders:X1t,parseKeepAliveTimeout:K1t,destroy:z1t,bodyLength:B3e,deepClone:V1t,ReadableStreamFrom:oyt,isBuffer:N3e,validateHandler:eyt,getSocketInfo:iyt,isFormDataLike:syt,buildURL:W1t,addAbortListener:ayt,isValidHTTPToken:dyt,isValidHeaderValue:pyt,isTokenCharCode:F3e,parseRangeHeader:myt,normalizedMethodRecordsBase:nse,normalizedMethodRecords:Q3e,isValidPort:S3e,isHttpOrHttpsPrefixed:qq,nodeMajor:Q1t,nodeMinor:O1t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:U1t}});var W5=G((AYr,q3e)=>{"use strict";f();var Eo=require("node:diagnostics_channel"),ose=require("node:util"),jq=ose.debuglog("undici"),ise=ose.debuglog("fetch"),C2=ose.debuglog("websocket"),U3e=!1,yyt={beforeConnect:Eo.channel("undici:client:beforeConnect"),connected:Eo.channel("undici:client:connected"),connectError:Eo.channel("undici:client:connectError"),sendHeaders:Eo.channel("undici:client:sendHeaders"),create:Eo.channel("undici:request:create"),bodySent:Eo.channel("undici:request:bodySent"),headers:Eo.channel("undici:request:headers"),trailers:Eo.channel("undici:request:trailers"),error:Eo.channel("undici:request:error"),open:Eo.channel("undici:websocket:open"),close:Eo.channel("undici:websocket:close"),socketError:Eo.channel("undici:websocket:socket_error"),ping:Eo.channel("undici:websocket:ping"),pong:Eo.channel("undici:websocket:pong")};if(jq.enabled||ise.enabled){let t=ise.enabled?ise:jq;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Eo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Eo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Eo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),U3e=!0}if(C2.enabled){if(!U3e){let t=jq.enabled?jq:C2;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Eo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;C2("connection opened %s%s",e,r?`:${r}`:"")}),Eo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;C2("closed connection to %s - %s %s",e.url,r,n)}),Eo.channel("undici:websocket:socket_error").subscribe(t=>{C2("connection errored - %s",t.message)}),Eo.channel("undici:websocket:ping").subscribe(t=>{C2("ping received")}),Eo.channel("undici:websocket:pong").subscribe(t=>{C2("pong received")})}q3e.exports={channels:yyt}});var V3e=G((CYr,j3e)=>{"use strict";f();var{InvalidArgumentError:ta,NotSupportedError:Cyt}=yo(),Z1=require("node:assert"),{isValidHTTPToken:H3e,isValidHeaderValue:W3e,isStream:xyt,destroy:vyt,isBuffer:byt,isFormDataLike:Eyt,isIterable:Iyt,isBlobLike:Tyt,buildURL:wyt,validateHandler:_yt,getServerName:Syt,normalizedMethodRecords:Ryt}=yi(),{channels:Lg}=W5(),{headerNameLowerCasedRecord:G3e}=Oq(),kyt=/[^\u0021-\u00ff]/,op=Symbol("handler"),sse=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof r!="string")throw new ta("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new ta("path must be an absolute URL or start with a slash");if(kyt.test(r))throw new ta("invalid request path");if(typeof n!="string")throw new ta("method must be a string");if(Ryt[n]===void 0&&!H3e(n))throw new ta("invalid request method");if(u&&typeof u!="string")throw new ta("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ta("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ta("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ta("invalid reset");if(g!=null&&typeof g!="boolean")throw new ta("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(xyt(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){vyt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(byt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(Eyt(i)||Iyt(i)||Tyt(i))this.body=i;else throw new ta("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?wyt(r,a):r,this.origin=e,this.idempotent=l??(n==="HEAD"||n==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ta("headers array must be even");for(let b=0;b<o.length;b+=2)Vq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ta("headers must be in key-value pair format");Vq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)Vq(this,b[E],o[b[E]])}else if(o!=null)throw new ta("headers must be an object or an array");_yt(v,n,u),this.servername=y||Syt(this.host),this[op]=v,Lg.create.hasSubscribers&&Lg.create.publish({request:this})}onBodySent(e){if(this[op].onBodySent)try{return this[op].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(Lg.bodySent.hasSubscribers&&Lg.bodySent.publish({request:this}),this[op].onRequestSent)try{return this[op].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Z1(!this.aborted),Z1(!this.completed),this.error)e(this.error);else return this.abort=e,this[op].onConnect(e)}onResponseStarted(){return this[op].onResponseStarted?.()}onHeaders(e,r,n,i){Z1(!this.aborted),Z1(!this.completed),Lg.headers.hasSubscribers&&Lg.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[op].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){Z1(!this.aborted),Z1(!this.completed);try{return this[op].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Z1(!this.aborted),Z1(!this.completed),this[op].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Z1(!this.aborted),this.completed=!0,Lg.trailers.hasSubscribers&&Lg.trailers.publish({request:this,trailers:e});try{return this[op].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),Lg.error.hasSubscribers&&Lg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[op].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return Vq(this,e,r),this}};function Vq(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new ta(`invalid ${e} header`);if(r===void 0)return;let n=G3e[e];if(n===void 0&&(n=e.toLowerCase(),G3e[n]===void 0&&!H3e(n)))throw new ta("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!W3e(r[o]))throw new ta(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new ta(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!W3e(r))throw new ta(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new ta("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new ta("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new ta(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ta("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new Cyt("expect header not supported");t.headers.push(e,r)}}}s(Vq,"processHeader");j3e.exports=sse});var kD=G((bYr,$3e)=>{"use strict";f();var Byt=require("node:events"),$q=class extends Byt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new ase(this,n)}},ase=class extends $q{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};$3e.exports=$q});var V5=G((TYr,z3e)=>{"use strict";f();var Dyt=kD(),{ClientDestroyedError:lse,ClientClosedError:Pyt,InvalidArgumentError:G5}=yo(),{kDestroy:Nyt,kClose:Lyt,kClosed:BD,kDestroyed:H5,kDispatch:cse,kInterceptors:x2}=Os(),ey=Symbol("onDestroyed"),j5=Symbol("onClosed"),zq=Symbol("Intercepted Dispatch"),use=class extends Dyt{static{s(this,"DispatcherBase")}constructor(){super(),this[H5]=!1,this[ey]=null,this[BD]=!1,this[j5]=[]}get destroyed(){return this[H5]}get closed(){return this[BD]}get interceptors(){return this[x2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[x2][r]!="function")throw new G5("interceptor must be an function")}this[x2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new G5("invalid callback");if(this[H5]){queueMicrotask(()=>e(new lse,null));return}if(this[BD]){this[j5]?this[j5].push(e):queueMicrotask(()=>e(null,null));return}this[BD]=!0,this[j5].push(e);let r=s(()=>{let n=this[j5];this[j5]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[Lyt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof r!="function")throw new G5("invalid callback");if(this[H5]){this[ey]?this[ey].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new lse),this[H5]=!0,this[ey]=this[ey]||[],this[ey].push(r);let n=s(()=>{let i=this[ey];this[ey]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[Nyt](e).then(()=>{queueMicrotask(n)})}[zq](e,r){if(!this[x2]||this[x2].length===0)return this[zq]=this[cse],this[cse](e,r);let n=this[cse].bind(this);for(let i=this[x2].length-1;i>=0;i--)n=this[x2][i](n);return this[zq]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new G5("handler must be an object");try{if(!e||typeof e!="object")throw new G5("opts must be an object.");if(this[H5]||this[ey])throw new lse;if(this[BD])throw new Pyt;return this[zq](e,r)}catch(n){if(typeof r.onError!="function")throw new G5("invalid onError method");return r.onError(n),!1}}};z3e.exports=use});var Ase=G((SYr,X3e)=>{"use strict";f();var $5=0,dse=1e3,fse=(dse>>1)-1,ty,pse=Symbol("kFastTimer"),ry=[],mse=-2,hse=-1,K3e=0,Y3e=1;function gse(){$5+=fse;let t=0,e=ry.length;for(;t<e;){let r=ry[t];r._state===K3e?(r._idleStart=$5-fse,r._state=Y3e):r._state===Y3e&&$5>=r._idleStart+r._idleTimeout&&(r._state=hse,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===hse?(r._state=mse,--e!==0&&(ry[t]=ry[e])):++t}ry.length=e,ry.length!==0&&J3e()}s(gse,"onTick");function J3e(){ty?ty.refresh():(clearTimeout(ty),ty=setTimeout(gse,fse),ty.unref&&ty.unref())}s(J3e,"refreshTimeout");var Yq=class{static{s(this,"FastTimer")}[pse]=!0;_state=mse;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===mse&&ry.push(this),(!ty||ry.length===1)&&J3e(),this._state=K3e}clear(){this._state=hse,this._idleStart=-1}};X3e.exports={setTimeout(t,e,r){return e<=dse?setTimeout(t,e,r):new Yq(t,e,r)},clearTimeout(t){t[pse]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new Yq(t,e,r)},clearFastTimeout(t){t.clear()},now(){return $5},tick(t=0){$5+=t-dse+1,gse(),gse()},reset(){$5=0,ry.length=0,clearTimeout(ty),ty=null},kFastTimer:pse}});var DD=G((PYr,nBe)=>{"use strict";f();var Fyt=require("node:net"),Z3e=require("node:assert"),rBe=yi(),{InvalidArgumentError:Myt,ConnectTimeoutError:Qyt}=yo(),Kq=Ase();function eBe(){}s(eBe,"noop");var yse,Cse;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?Cse=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:Cse=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function Oyt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new Myt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},l=new Cse(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){yse||(yse=require("node:tls")),h=h||a.servername||rBe.getServerName(d)||null;let _=h||u;Z3e(_);let k=i||l.get(_)||null;m=m||443,b=yse.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(B){l.set(_,B)})}else Z3e(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=Fyt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=Uyt(new WeakRef(b),{timeout:n,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(Oyt,"buildConnector");var Uyt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return eBe;let r=null,n=null,i=Kq.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>tBe(t.deref(),e))})},e.timeout);return()=>{Kq.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return eBe;let r=null,n=Kq.setFastTimeout(()=>{r=setImmediate(()=>{tBe(t.deref(),e)})},e.timeout);return()=>{Kq.clearFastTimeout(n),clearImmediate(r)}};function tBe(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,rBe.destroy(t,new Qyt(r))}s(tBe,"onConnectTimeout");nBe.exports=Oyt});var iBe=G(Jq=>{"use strict";f();Object.defineProperty(Jq,"__esModule",{value:!0});Jq.enumToMap=void 0;function qyt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(qyt,"enumToMap");Jq.enumToMap=qyt});var oBe=G(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var Wyt=iBe(),Gyt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(Gyt=Ut.ERROR||(Ut.ERROR={}));var Hyt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(Hyt=Ut.TYPE||(Ut.TYPE={}));var jyt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(jyt=Ut.FLAGS||(Ut.FLAGS={}));var Vyt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(Vyt=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var cn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(cn=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[cn.DELETE,cn.GET,cn.HEAD,cn.POST,cn.PUT,cn.CONNECT,cn.OPTIONS,cn.TRACE,cn.COPY,cn.LOCK,cn.MKCOL,cn.MOVE,cn.PROPFIND,cn.PROPPATCH,cn.SEARCH,cn.UNLOCK,cn.BIND,cn.REBIND,cn.UNBIND,cn.ACL,cn.REPORT,cn.MKACTIVITY,cn.CHECKOUT,cn.MERGE,cn["M-SEARCH"],cn.NOTIFY,cn.SUBSCRIBE,cn.UNSUBSCRIBE,cn.PATCH,cn.PURGE,cn.MKCALENDAR,cn.LINK,cn.UNLINK,cn.PRI,cn.SOURCE];Ut.METHODS_ICE=[cn.SOURCE];Ut.METHODS_RTSP=[cn.OPTIONS,cn.DESCRIBE,cn.ANNOUNCE,cn.SETUP,cn.PLAY,cn.PAUSE,cn.TEARDOWN,cn.GET_PARAMETER,cn.SET_PARAMETER,cn.REDIRECT,cn.RECORD,cn.FLUSH,cn.GET,cn.POST];Ut.METHOD_MAP=Wyt.enumToMap(cn);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var $yt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})($yt=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var z5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(z5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:z5.CONNECTION,"content-length":z5.CONTENT_LENGTH,"proxy-connection":z5.CONNECTION,"transfer-encoding":z5.TRANSFER_ENCODING,upgrade:z5.UPGRADE}});var xse=G((qYr,sBe)=>{"use strict";f();var{Buffer:zyt}=require("node:buffer");sBe.exports=zyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var lBe=G((GYr,aBe)=>{"use strict";f();var{Buffer:Yyt}=require("node:buffer");aBe.exports=Yyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var PD=G((jYr,gBe)=>{"use strict";f();var cBe=["GET","HEAD","POST"],Kyt=new Set(cBe),Jyt=[101,204,205,304],uBe=[301,302,303,307,308],Xyt=new Set(uBe),dBe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Zyt=new Set(dBe),fBe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],eCt=new Set(fBe),tCt=["follow","manual","error"],pBe=["GET","HEAD","OPTIONS","TRACE"],rCt=new Set(pBe),nCt=["navigate","same-origin","no-cors","cors"],iCt=["omit","same-origin","include"],oCt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],sCt=["content-encoding","content-language","content-location","content-type","content-length"],aCt=["half"],mBe=["CONNECT","TRACE","TRACK"],lCt=new Set(mBe),hBe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],cCt=new Set(hBe);gBe.exports={subresource:hBe,forbiddenMethods:mBe,requestBodyHeader:sCt,referrerPolicy:fBe,requestRedirect:tCt,requestMode:nCt,requestCredentials:iCt,requestCache:oCt,redirectStatus:uBe,corsSafeListedMethods:cBe,nullBodyStatus:Jyt,safeMethods:pBe,badPorts:dBe,requestDuplex:aCt,subresourceSet:cCt,badPortsSet:Zyt,redirectStatusSet:Xyt,corsSafeListedMethodsSet:Kyt,safeMethodsSet:rCt,forbiddenMethodsSet:lCt,referrerPolicySet:eCt}});var bse=G(($Yr,ABe)=>{"use strict";f();var vse=Symbol.for("undici.globalOrigin.1");function uCt(){return globalThis[vse]}s(uCt,"getGlobalOrigin");function dCt(t){if(t===void 0){Object.defineProperty(globalThis,vse,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,vse,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(dCt,"setGlobalOrigin");ABe.exports={getGlobalOrigin:uCt,setGlobalOrigin:dCt}});var _d=G((KYr,IBe)=>{"use strict";f();var Zq=require("node:assert"),fCt=new TextEncoder,ND=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,pCt=/[\u000A\u000D\u0009\u0020]/,mCt=/[\u0009\u000A\u000C\u000D\u0020]/g,hCt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function gCt(t){Zq(t.protocol==="data:");let e=xBe(t,!0);e=e.slice(5);let r={position:0},n=Y5(",",e,r),i=n.length;if(n=bCt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=vBe(o);if(/;(\u0020){0,}base64$/i.test(n)){let c=EBe(a);if(a=yCt(c),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let l=Ese(n);return l==="failure"&&(l=Ese("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(gCt,"dataURLProcessor");function xBe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(xBe,"URLSerializer");function eW(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(eW,"collectASequenceOfCodePoints");function Y5(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(Y5,"collectASequenceOfCodePointsFast");function vBe(t){let e=fCt.encode(t);return ACt(e)}s(vBe,"stringPercentDecode");function yBe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(yBe,"isHexCharByte");function CBe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(CBe,"hexByteToNumber");function ACt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(yBe(t[i+1])&&yBe(t[i+2]))?r[n++]=37:(r[n++]=CBe(t[i+1])<<4|CBe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(ACt,"percentDecode");function Ese(t){t=Xq(t,!0,!0);let e={position:0},r=Y5("/",t,e);if(r.length===0||!ND.test(r)||e.position>t.length)return"failure";e.position++;let n=Y5(";",t,e);if(n=Xq(n,!1,!0),n.length===0||!ND.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,eW(u=>pCt.test(u),t,e);let l=eW(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=bBe(t,e,!0),Y5(";",t,e);else if(c=Y5(";",t,e),c=Xq(c,!1,!0),c.length===0)continue;l.length!==0&&ND.test(l)&&(c.length===0||hCt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(Ese,"parseMIMEType");function yCt(t){t=t.replace(mCt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(yCt,"forgivingBase64");function bBe(t,e,r){let n=e.position,i="";for(Zq(t[e.position]==='"'),e.position++;i+=eW(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Zq(o==='"');break}}return r?i:t.slice(n,e.position)}s(bBe,"collectAnHTTPQuotedString");function CCt(t){Zq(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",ND.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(CCt,"serializeAMimeType");function xCt(t){return t===13||t===10||t===9||t===32}s(xCt,"isHTTPWhiteSpace");function Xq(t,e=!0,r=!0){return Ise(t,e,r,xCt)}s(Xq,"removeHTTPWhitespace");function vCt(t){return t===13||t===10||t===9||t===12||t===32}s(vCt,"isASCIIWhitespace");function bCt(t,e=!0,r=!0){return Ise(t,e,r,vCt)}s(bCt,"removeASCIIWhitespace");function Ise(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(Ise,"removeChars");function EBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(EBe,"isomorphicDecode");function ECt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(ECt,"minimizeSupportedMimeType");IBe.exports={dataURLProcessor:gCt,URLSerializer:xBe,collectASequenceOfCodePoints:eW,collectASequenceOfCodePointsFast:Y5,stringPercentDecode:vBe,parseMIMEType:Ese,collectAnHTTPQuotedString:bBe,serializeAMimeType:CCt,removeChars:Ise,removeHTTPWhitespace:Xq,minimizeSupportedMimeType:ECt,HTTP_TOKEN_CODEPOINTS:ND,isomorphicDecode:EBe}});var Ac=G((ZYr,TBe)=>{"use strict";f();var{types:Fg,inspect:ICt}=require("node:util"),{markAsUncloneable:TCt}=require("node:worker_threads"),{toUSVString:wCt}=yi(),Pt={};Pt.converters={};Pt.util={};Pt.errors={};Pt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Pt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Pt.errors.exception({header:t.prefix,message:r})};Pt.errors.invalidArgument=function(t){return Pt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Pt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Pt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Pt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Pt.illegalConstructor=function(){throw Pt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Pt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Pt.util.markAsUncloneable=TCt||(()=>{});Pt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Pt.errors.exception({header:"Integer conversion",message:`Could not convert ${Pt.util.Stringify(t)} to an integer.`});if(a=Pt.util.IntegerPart(a),a<o||a>i)throw Pt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Pt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Pt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Pt.util.Stringify=function(t){switch(Pt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return ICt(t);case"String":return`"${t}"`;default:return`${t}`}};Pt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Pt.util.Type(e)!=="Object")throw Pt.errors.exception({header:r,message:`${n} (${Pt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Pt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,r,`${n}[${l++}]`))}return a}};Pt.recordConverter=function(t,e){return(r,n,i)=>{if(Pt.util.Type(r)!=="Object")throw Pt.errors.exception({header:n,message:`${i} ("${Pt.util.Type(r)}") is not an Object.`});let o={};if(!Fg.isProxy(r)){let l=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let c of l){let u=t(c,n,i),d=e(r[c],n,i);o[u]=d}return o}let a=Reflect.ownKeys(r);for(let l of a)if(Reflect.getOwnPropertyDescriptor(r,l)?.enumerable){let u=t(l,n,i),d=e(r[l],n,i);o[u]=d}return o}};Pt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Pt.errors.exception({header:r,message:`Expected ${n} ("${Pt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Pt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Pt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Pt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Pt.errors.exception({header:r,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,r,`${n}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Pt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Pt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Pt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Pt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Pt.converters.ByteString=function(t,e,r){let n=Pt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Pt.converters.USVString=wCt;Pt.converters.boolean=function(t){return!!t};Pt.converters.any=function(t){return t};Pt.converters["long long"]=function(t,e,r){return Pt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Pt.converters["unsigned long long"]=function(t,e,r){return Pt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Pt.converters["unsigned long"]=function(t,e,r){return Pt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Pt.converters["unsigned short"]=function(t,e,r,n){return Pt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Pt.converters.ArrayBuffer=function(t,e,r,n){if(Pt.util.Type(t)!=="Object"||!Fg.isAnyArrayBuffer(t))throw Pt.errors.conversionFailed({prefix:e,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&Fg.isSharedArrayBuffer(t))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.TypedArray=function(t,e,r,n,i){if(Pt.util.Type(t)!=="Object"||!Fg.isTypedArray(t)||t.constructor.name!==e.name)throw Pt.errors.conversionFailed({prefix:r,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Fg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.DataView=function(t,e,r,n){if(Pt.util.Type(t)!=="Object"||!Fg.isDataView(t))throw Pt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&Fg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.BufferSource=function(t,e,r,n){if(Fg.isAnyArrayBuffer(t))return Pt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(Fg.isTypedArray(t))return Pt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(Fg.isDataView(t))return Pt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Pt.errors.conversionFailed({prefix:e,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:["BufferSource"]})};Pt.converters["sequence<ByteString>"]=Pt.sequenceConverter(Pt.converters.ByteString);Pt.converters["sequence<sequence<ByteString>>"]=Pt.sequenceConverter(Pt.converters["sequence<ByteString>"]);Pt.converters["record<ByteString, ByteString>"]=Pt.recordConverter(Pt.converters.ByteString,Pt.converters.ByteString);TBe.exports={webidl:Pt}});var R0=G((tKr,OBe)=>{"use strict";f();var{Transform:_Ct}=require("node:stream"),wBe=require("node:zlib"),{redirectStatusSet:SCt,referrerPolicySet:RCt,badPortsSet:kCt}=PD(),{getGlobalOrigin:_Be}=bse(),{collectASequenceOfCodePoints:v2,collectAnHTTPQuotedString:BCt,removeChars:DCt,parseMIMEType:PCt}=_d(),{performance:NCt}=require("node:perf_hooks"),{isBlobLike:LCt,ReadableStreamFrom:FCt,isValidHTTPToken:SBe,normalizedMethodRecordsBase:MCt}=yi(),b2=require("node:assert"),{isUint8Array:QCt}=require("node:util/types"),{webidl:LD}=Ac(),RBe=[],rW;try{rW=require("node:crypto");let t=["sha256","sha384","sha512"];RBe=rW.getHashes().filter(e=>t.includes(e))}catch{}function kBe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(kBe,"responseURL");function OCt(t,e){if(!SCt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&DBe(r)&&(BBe(r)||(r=UCt(r)),r=new URL(r,kBe(t))),r&&!r.hash&&(r.hash=e),r}s(OCt,"responseLocationURL");function BBe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(BBe,"isValidEncodedURL");function UCt(t){return Buffer.from(t,"binary").toString("utf8")}s(UCt,"normalizeBinaryStringToUtf8");function MD(t){return t.urlList[t.urlList.length-1]}s(MD,"requestCurrentURL");function qCt(t){let e=MD(t);return MBe(e)&&kCt.has(e.port)?"blocked":"allowed"}s(qCt,"requestBadPort");function WCt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(WCt,"isErrorLike");function GCt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(GCt,"isValidReasonPhrase");var HCt=SBe;function DBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(DBe,"isValidHeaderValue");function jCt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(RCt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(jCt,"setRequestReferrerPolicyOnRedirect");function VCt(){return"allowed"}s(VCt,"crossOriginResourcePolicyCheck");function $Ct(){return"success"}s($Ct,"corsCheck");function zCt(){return"success"}s(zCt,"TAOCheck");function YCt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(YCt,"appendFetchMetadata");function KCt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&wse(t.origin)&&!wse(MD(t))&&(e=null);break;case"same-origin":nW(t,MD(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(KCt,"appendRequestOriginHeader");function K5(t,e){return t}s(K5,"coarsenTime");function JCt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:K5(t.domainLookupStartTime,r),domainLookupEndTime:K5(t.domainLookupEndTime,r),connectionStartTime:K5(t.connectionStartTime,r),connectionEndTime:K5(t.connectionEndTime,r),secureConnectionStartTime:K5(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(JCt,"clampAndCoarsenConnectionTimingInfo");function XCt(t){return K5(NCt.now(),t)}s(XCt,"coarsenedSharedCurrentTime");function ZCt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(ZCt,"createOpaqueTimingInfo");function PBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(PBe,"makePolicyContainer");function ext(t){return{referrerPolicy:t.referrerPolicy}}s(ext,"clonePolicyContainer");function txt(t){let e=t.referrerPolicy;b2(e);let r=null;if(t.referrer==="client"){let l=_Be();if(!l||l.origin==="null")return"no-referrer";r=new URL(l)}else t.referrer instanceof URL&&(r=t.referrer);let n=Tse(r),i=Tse(r,!0);n.toString().length>4096&&(n=i);let o=nW(t,n),a=FD(n)&&!FD(t.url);switch(e){case"origin":return i??Tse(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let l=MD(t);return nW(n,l)?n:FD(n)&&!FD(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(txt,"determineRequestsReferrer");function Tse(t,e){return b2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(Tse,"stripURLForReferrer");function FD(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(FD,"isURLPotentiallyTrustworthy");function rxt(t,e){if(rW===void 0)return!0;let r=NBe(e);if(r==="no metadata"||r.length===0)return!0;let n=ixt(r),i=oxt(r,n);for(let o of i){let a=o.algo,l=o.hash,c=rW.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),sxt(c,l))return!0}return!1}s(rxt,"bytesMatch");var nxt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function NBe(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=nxt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();RBe.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(NBe,"parseMetadata");function ixt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(ixt,"getStrongestMetadata");function oxt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(oxt,"filterMetadataListByAlgorithm");function sxt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(sxt,"compareBase64Mixed");function axt(t){}s(axt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function nW(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(nW,"sameOrigin");function lxt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(lxt,"createDeferredPromise");function cxt(t){return t.controller.state==="aborted"}s(cxt,"isAborted");function uxt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(uxt,"isCancelled");function dxt(t){return MCt[t.toLowerCase()]??t}s(dxt,"normalizeMethod");function fxt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return b2(typeof e=="string"),e}s(fxt,"serializeJavascriptValueToJSONString");var pxt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function LBe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[r]:u,[n]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,pxt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(LBe,"createIterator");function mxt(t,e,r,n=0,i=1){let o=LBe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return LD.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return LD.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return LD.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(LD.brandCheck(this,e),LD.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(mxt,"iteratorMixin");async function hxt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await FBe(o))}catch(a){i(a)}}s(hxt,"fullyReadBody");function gxt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(gxt,"isReadableStreamLike");function Axt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(Axt,"readableStreamClose");var yxt=/[^\x00-\xFF]/;function tW(t){return b2(!yxt.test(t)),t}s(tW,"isomorphicEncode");async function FBe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!QCt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(FBe,"readAllBytes");function Cxt(t){b2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(Cxt,"urlIsLocal");function wse(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(wse,"urlHasHttpsScheme");function MBe(t){b2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(MBe,"urlIsHttpHttpsScheme");function xxt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&v2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&v2(c=>c==="	"||c===" ",r,n);let i=v2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&v2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&v2(c=>c==="	"||c===" ",r,n);let a=v2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),l=a.length?Number(a):null;return n.position<r.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(xxt,"simpleRangeHeaderValue");function vxt(t,e,r){let n="bytes ";return n+=tW(`${t}`),n+="-",n+=tW(`${e}`),n+="/",n+=tW(`${r}`),n}s(vxt,"buildContentRange");var _se=class extends _Ct{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?wBe.createInflate(this.#e):wBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function bxt(t){return new _se(t)}s(bxt,"createInflate");function Ext(t){let e=null,r=null,n=null,i=QBe("content-type",t);if(i===null)return"failure";for(let o of i){let a=PCt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(Ext,"extractMimeType");function Ixt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=v2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=BCt(e,r),r.position<e.length)continue}else b2(e.charCodeAt(r.position)===44),r.position++;i=DCt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(Ixt,"gettingDecodingSplitting");function QBe(t,e){let r=e.get(t,!0);return r===null?null:Ixt(r)}s(QBe,"getDecodeSplit");var Txt=new TextDecoder;function wxt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),Txt.decode(t))}s(wxt,"utf8DecodeBytes");var Sse=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return _Be()}get origin(){return this.baseUrl?.origin}policyContainer=PBe()},Rse=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new Sse},_xt=new Rse;OBe.exports={isAborted:cxt,isCancelled:uxt,isValidEncodedURL:BBe,createDeferredPromise:lxt,ReadableStreamFrom:FCt,tryUpgradeRequestToAPotentiallyTrustworthyURL:axt,clampAndCoarsenConnectionTimingInfo:JCt,coarsenedSharedCurrentTime:XCt,determineRequestsReferrer:txt,makePolicyContainer:PBe,clonePolicyContainer:ext,appendFetchMetadata:YCt,appendRequestOriginHeader:KCt,TAOCheck:zCt,corsCheck:$Ct,crossOriginResourcePolicyCheck:VCt,createOpaqueTimingInfo:ZCt,setRequestReferrerPolicyOnRedirect:jCt,isValidHTTPToken:SBe,requestBadPort:qCt,requestCurrentURL:MD,responseURL:kBe,responseLocationURL:OCt,isBlobLike:LCt,isURLPotentiallyTrustworthy:FD,isValidReasonPhrase:GCt,sameOrigin:nW,normalizeMethod:dxt,serializeJavascriptValueToJSONString:fxt,iteratorMixin:mxt,createIterator:LBe,isValidHeaderName:HCt,isValidHeaderValue:DBe,isErrorLike:WCt,fullyReadBody:hxt,bytesMatch:rxt,isReadableStreamLike:gxt,readableStreamClose:Axt,isomorphicEncode:tW,urlIsLocal:Cxt,urlHasHttpsScheme:wse,urlIsHttpHttpsScheme:MBe,readAllBytes:FBe,simpleRangeHeaderValue:xxt,buildContentRange:vxt,parseMetadata:NBe,createInflate:bxt,extractMimeType:Ext,getDecodeSplit:QBe,utf8DecodeBytes:wxt,environmentSettingsObject:_xt}});var Rv=G((iKr,UBe)=>{"use strict";f();UBe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Bse=G((sKr,qBe)=>{"use strict";f();var{Blob:Sxt,File:Rxt}=require("node:buffer"),{kState:ny}=Rv(),{webidl:Mg}=Ac(),kse=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[ny]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Mg.brandCheck(this,t),this[ny].blobLike.stream(...e)}arrayBuffer(...e){return Mg.brandCheck(this,t),this[ny].blobLike.arrayBuffer(...e)}slice(...e){return Mg.brandCheck(this,t),this[ny].blobLike.slice(...e)}text(...e){return Mg.brandCheck(this,t),this[ny].blobLike.text(...e)}get size(){return Mg.brandCheck(this,t),this[ny].blobLike.size}get type(){return Mg.brandCheck(this,t),this[ny].blobLike.type}get name(){return Mg.brandCheck(this,t),this[ny].name}get lastModified(){return Mg.brandCheck(this,t),this[ny].lastModified}get[Symbol.toStringTag](){return"File"}};Mg.converters.Blob=Mg.interfaceConverter(Sxt);function kxt(t){return t instanceof Rxt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(kxt,"isFileLike");qBe.exports={FileLike:kse,isFileLike:kxt}});var OD=G((cKr,VBe)=>{"use strict";f();var{isBlobLike:iW,iteratorMixin:Bxt}=R0(),{kState:Mu}=Rv(),{kEnumerableProperty:J5}=yi(),{FileLike:WBe,isFileLike:Dxt}=Bse(),{webidl:ts}=Ac(),{File:jBe}=require("node:buffer"),GBe=require("node:util"),HBe=globalThis.File??jBe,QD=class t{static{s(this,"FormData")}constructor(e){if(ts.util.markAsUncloneable(this),e!==void 0)throw ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Mu]=[]}append(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.append";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!iW(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=iW(r)?ts.converters.Blob(r,i,"value",{strict:!1}):ts.converters.USVString(r,i,"value"),n=arguments.length===3?ts.converters.USVString(n,i,"filename"):void 0;let o=Dse(e,r,n);this[Mu].push(o)}delete(e){ts.brandCheck(this,t);let r="FormData.delete";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu]=this[Mu].filter(n=>n.name!==e)}get(e){ts.brandCheck(this,t);let r="FormData.get";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name");let n=this[Mu].findIndex(i=>i.name===e);return n===-1?null:this[Mu][n].value}getAll(e){ts.brandCheck(this,t);let r="FormData.getAll";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu].filter(n=>n.name===e).map(n=>n.value)}has(e){ts.brandCheck(this,t);let r="FormData.has";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Mu].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.set";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!iW(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=iW(r)?ts.converters.Blob(r,i,"name",{strict:!1}):ts.converters.USVString(r,i,"name"),n=arguments.length===3?ts.converters.USVString(n,i,"name"):void 0;let o=Dse(e,r,n),a=this[Mu].findIndex(l=>l.name===e);a!==-1?this[Mu]=[...this[Mu].slice(0,a),o,...this[Mu].slice(a+1).filter(l=>l.name!==e)]:this[Mu].push(o)}[GBe.inspect.custom](e,r){let n=this[Mu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=GBe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};Bxt("FormData",QD,Mu,"name","value");Object.defineProperties(QD.prototype,{append:J5,delete:J5,get:J5,getAll:J5,has:J5,set:J5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Dse(t,e,r){if(typeof e!="string"){if(Dxt(e)||(e=e instanceof Blob?new HBe([e],"blob",{type:e.type}):new WBe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof jBe?new HBe([e],r,n):new WBe(e,r,n)}}return{name:t,value:e}}s(Dse,"makeEntry");VBe.exports={FormData:QD,makeEntry:Dse}});var XBe=G((fKr,JBe)=>{"use strict";f();var{isUSVString:$Be,bufferToLowerCasedHeaderName:Pxt}=yi(),{utf8DecodeBytes:Nxt}=R0(),{HTTP_TOKEN_CODEPOINTS:Lxt,isomorphicDecode:zBe}=_d(),{isFileLike:Fxt}=Bse(),{makeEntry:Mxt}=OD(),oW=require("node:assert"),{File:Qxt}=require("node:buffer"),Oxt=globalThis.File??Qxt,Uxt=Buffer.from('form-data; name="'),YBe=Buffer.from("; filename"),qxt=Buffer.from("--"),Wxt=Buffer.from(`--\r
`);function Gxt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(Gxt,"isAsciiString");function Hxt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(Hxt,"validateBoundary");function jxt(t,e){oW(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&sW(t,qxt,o)||o.position===t.length-4&&sW(t,Wxt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=Vxt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",Gxt(d)||(d=""),h=new Oxt([m],u,{type:d})):h=Nxt(Buffer.from(m)),oW($Be(c)),oW(typeof h=="string"&&$Be(h)||Fxt(h)),i.push(Mxt(c,h,u))}}s(jxt,"multipartFormDataParser");function Vxt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=X5(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Pse(a,!0,!0,l=>l===9||l===32),!Lxt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,X5(l=>l===32||l===9,t,e),Pxt(a)){case"content-disposition":{if(r=n=null,!sW(t,Uxt,e)||(e.position+=17,r=KBe(t,e),r===null))return"failure";if(sW(t,YBe,e)){let l=e.position+YBe.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,n=KBe(t,e),n===null))return"failure"}break}case"content-type":{let l=X5(c=>c!==10&&c!==13,t,e);l=Pse(l,!1,!0,c=>c===9||c===32),i=zBe(l);break}case"content-transfer-encoding":{let l=X5(c=>c!==10&&c!==13,t,e);l=Pse(l,!1,!0,c=>c===9||c===32),o=zBe(l);break}default:X5(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(Vxt,"parseMultipartFormDataHeaders");function KBe(t,e){oW(t[e.position-1]===34);let r=X5(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(KBe,"parseMultipartFormDataName");function X5(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(X5,"collectASequenceOfBytes");function Pse(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Pse,"removeChars");function sW(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(sW,"bufferStartsWith");JBe.exports={multipartFormDataParser:jxt,validateBoundary:Hxt}});var t4=G((hKr,s8e)=>{"use strict";f();var UD=yi(),{ReadableStreamFrom:$xt,isBlobLike:ZBe,isReadableStreamLike:zxt,readableStreamClose:Yxt,createDeferredPromise:Kxt,fullyReadBody:Jxt,extractMimeType:Xxt,utf8DecodeBytes:r8e}=R0(),{FormData:e8e}=OD(),{kState:e4}=Rv(),{webidl:Zxt}=Ac(),{Blob:evt}=require("node:buffer"),Nse=require("node:assert"),{isErrored:n8e,isDisturbed:tvt}=require("node:stream"),{isArrayBuffer:rvt}=require("node:util/types"),{serializeAMimeType:nvt}=_d(),{multipartFormDataParser:ivt}=XBe(),Lse;try{let t=require("node:crypto");Lse=s(e=>t.randomInt(0,e),"random")}catch{Lse=s(t=>Math.floor(Math.random(t)),"random")}var aW=new TextEncoder;function ovt(){}s(ovt,"noop");var Fse=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Mse;Fse&&(Mse=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!tvt(e)&&!n8e(e)&&e.cancel("Response object has been garbage collected").catch(ovt)}));function i8e(t,e=!1){let r=null;t instanceof ReadableStream?r=t:ZBe(t)?r=t.stream():r=new ReadableStream({async pull(c){let u=typeof i=="string"?aW.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>Yxt(c))},start(){},type:"bytes"}),Nse(zxt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(rvt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(UD.isFormDataLike(t)){let c=`----formdata-undici-0${`${Lse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=aW.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=aW.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=aW.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(ZBe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(UD.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:$xt(t)}if((typeof i=="string"||UD.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let c;r=new ReadableStream({async start(){c=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!n8e(r)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(i8e,"extractBody");function svt(t,e=!1){return t instanceof ReadableStream&&(Nse(!UD.isDisturbed(t),"The body has already been consumed."),Nse(!t.locked,"The stream is locked.")),i8e(t,e)}s(svt,"safelyExtractBody");function avt(t,e){let[r,n]=e.stream.tee();return Fse&&Mse.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(avt,"cloneBody");function lvt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(lvt,"throwIfAborted");function cvt(t){return{blob(){return Z5(this,r=>{let n=t8e(this);return n===null?n="":n&&(n=nvt(n)),new evt([r],{type:n})},t)},arrayBuffer(){return Z5(this,r=>new Uint8Array(r).buffer,t)},text(){return Z5(this,r8e,t)},json(){return Z5(this,dvt,t)},formData(){return Z5(this,r=>{let n=t8e(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=ivt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new e8e;return o[e4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new e8e;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return Z5(this,r=>new Uint8Array(r),t)}}}s(cvt,"bodyMixinMethods");function uvt(t){Object.assign(t.prototype,cvt(t))}s(uvt,"mixinBody");async function Z5(t,e,r){if(Zxt.brandCheck(t,r),o8e(t))throw new TypeError("Body is unusable: Body has already been read");lvt(t[e4]);let n=Kxt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[e4].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await Jxt(t[e4].body,o,i),n.promise)}s(Z5,"consumeBody");function o8e(t){let e=t[e4].body;return e!=null&&(e.stream.locked||UD.isDisturbed(e.stream))}s(o8e,"bodyUnusable");function dvt(t){return JSON.parse(r8e(t))}s(dvt,"parseJSONFromBytes");function t8e(t){let e=t[e4].headersList,r=Xxt(e);return r==="failure"?null:r}s(t8e,"bodyMimeType");s8e.exports={extractBody:i8e,safelyExtractBody:svt,cloneBody:avt,mixinBody:uvt,streamRegistry:Mse,hasFinalizationRegistry:Fse,bodyUnusable:o8e}});var A8e=G((yKr,g8e)=>{"use strict";f();var bn=require("node:assert"),Vn=yi(),{channels:a8e}=W5(),Qse=Ase(),{RequestContentLengthMismatchError:E2,ResponseContentLengthMismatchError:fvt,RequestAbortedError:p8e,HeadersTimeoutError:pvt,HeadersOverflowError:mvt,SocketError:pW,InformationalError:r4,BodyTimeoutError:hvt,HTTPParserError:gvt,ResponseExceededMaxSizeError:Avt}=yo(),{kUrl:m8e,kReset:Sd,kClient:Wse,kParser:da,kBlocking:GD,kRunning:Xc,kPending:yvt,kSize:l8e,kWriting:Bv,kQueue:Qm,kNoRef:qD,kKeepAliveDefaultTimeout:Cvt,kHostHeader:xvt,kPendingIdx:vvt,kRunningIdx:sp,kError:ap,kPipelining:dW,kSocket:n4,kKeepAliveTimeoutValue:mW,kMaxHeadersSize:Ose,kKeepAliveMaxTimeout:bvt,kKeepAliveTimeoutThreshold:Evt,kHeadersTimeout:Ivt,kBodyTimeout:Tvt,kStrictContentLength:Gse,kMaxRequests:c8e,kCounter:wvt,kMaxResponseSize:_vt,kOnError:Svt,kResume:kv,kHTTPContext:h8e}=Os(),Qg=oBe(),Rvt=Buffer.alloc(0),lW=Buffer[Symbol.species],cW=Vn.addListener,kvt=Vn.removeAllListeners,Use;async function Bvt(){let t=process.env.JEST_WORKER_ID?xse():void 0,e;try{e=await WebAssembly.compile(lBe())}catch{e=await WebAssembly.compile(t||xse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{bn(gl.ptr===r);let o=n-Ug+Og.byteOffset;return gl.onStatus(new lW(Og.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(bn(gl.ptr===r),gl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{bn(gl.ptr===r);let o=n-Ug+Og.byteOffset;return gl.onHeaderField(new lW(Og.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{bn(gl.ptr===r);let o=n-Ug+Og.byteOffset;return gl.onHeaderValue(new lW(Og.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(bn(gl.ptr===r),gl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{bn(gl.ptr===r);let o=n-Ug+Og.byteOffset;return gl.onBody(new lW(Og.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(bn(gl.ptr===r),gl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(Bvt,"lazyllhttp");var qse=null,Hse=Bvt();Hse.catch();var gl=null,Og=null,uW=0,Ug=null,Dvt=0,WD=1,i4=2|WD,fW=4|WD,jse=8|Dvt,Vse=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){bn(Number.isFinite(e[Ose])&&e[Ose]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(Qg.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Ose],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[_vt]}setTimeout(e,r){e!==this.timeoutValue||r&WD^this.timeoutType&WD?(this.timeout&&(Qse.clearTimeout(this.timeout),this.timeout=null),e&&(r&WD?this.timeout=Qse.setFastTimeout(u8e,e,new WeakRef(this)):(this.timeout=setTimeout(u8e,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(bn(this.ptr!=null),bn(gl==null),this.llhttp.llhttp_resume(this.ptr),bn(this.timeoutType===fW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Rvt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){bn(this.ptr!=null),bn(gl==null),bn(!this.paused);let{socket:r,llhttp:n}=this;e.length>uW&&(Ug&&n.free(Ug),uW=Math.ceil(e.length/4096)*4096,Ug=n.malloc(uW)),new Uint8Array(n.memory.buffer,Ug,uW).set(e);try{let i;try{Og=e,gl=this,i=n.llhttp_execute(this.ptr,Ug,e.length)}catch(a){throw a}finally{gl=null,Og=null}let o=n.llhttp_get_error_pos(this.ptr)-Ug;if(i===Qg.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Qg.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==Qg.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(n.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,c).toString()+")"}throw new gvt(l,Qg.ERROR[i],e.slice(o))}}catch(i){Vn.destroy(r,i)}}destroy(){bn(this.ptr!=null),bn(gl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Qse.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[Qm][r[sp]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=Vn.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&Vn.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Vn.destroy(this.socket,new mvt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;bn(r),bn(n[n4]===i),bn(!i.destroyed),bn(!this.paused),bn((o.length&1)===0);let l=n[Qm][n[sp]];bn(l),bn(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[da].destroy(),i[da]=null,i[Wse]=null,i[ap]=null,kvt(i),n[n4]=null,n[h8e]=null,n[Qm][n[sp]++]=null,n.emit("disconnect",n[m8e],[n],new r4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Vn.destroy(i,c)}n[kv]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Qm][i[sp]];if(!c)return-1;if(bn(!this.upgrade),bn(this.statusCode<200),e===100)return Vn.destroy(o,new pW("bad response",Vn.getSocketInfo(o))),-1;if(r&&!c.upgrade)return Vn.destroy(o,new pW("bad upgrade",Vn.getSocketInfo(o))),-1;if(bn(this.timeoutType===i4),this.statusCode=e,this.shouldKeepAlive=n||c.method==="HEAD"&&!o[Sd]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[Tvt];this.setTimeout(d,fW)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return bn(i[Xc]===1),this.upgrade=!0,2;if(r)return bn(i[Xc]===1),this.upgrade=!0,2;if(bn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[dW]){let d=this.keepAlive?Vn.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[Evt],i[bvt]);p<=0?o[Sd]=!0:i[mW]=p}else i[mW]=i[Cvt]}else o[Sd]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[GD]&&(o[GD]=!1,i[kv]()),u?Qg.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[Qm][r[sp]];if(bn(a),bn(this.timeoutType===fW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),bn(i>=200),o>-1&&this.bytesRead+e.length>o)return Vn.destroy(n,new Avt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Qg.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(r.destroyed&&(!n||c))return-1;if(i)return;bn(n>=100),bn((this.headers.length&1)===0);let u=e[Qm][e[sp]];if(bn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Vn.destroy(r,new fvt),-1;if(u.onComplete(o),e[Qm][e[sp]++]=null,r[Bv])return bn(e[Xc]===0),Vn.destroy(r,new r4("reset")),Qg.ERROR.PAUSED;if(c){if(r[Sd]&&e[Xc]===0)return Vn.destroy(r,new r4("reset")),Qg.ERROR.PAUSED;e[dW]==null||e[dW]===1?setImmediate(()=>e[kv]()):e[kv]()}else return Vn.destroy(r,new r4("reset")),Qg.ERROR.PAUSED}}};function u8e(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===i4?(!e[Bv]||e.writableNeedDrain||n[Xc]>1)&&(bn(!i,"cannot be paused while waiting for headers"),Vn.destroy(e,new pvt)):r===fW?i||Vn.destroy(e,new hvt):r===jse&&(bn(n[Xc]===0&&n[mW]),Vn.destroy(e,new r4("socket idle timeout")))}s(u8e,"onParserTimeout");async function Pvt(t,e){t[n4]=e,qse||(qse=await Hse,Hse=null),e[qD]=!1,e[Bv]=!1,e[Sd]=!1,e[GD]=!1,e[da]=new Vse(t,e,qse),cW(e,"error",function(n){bn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[da];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[ap]=n,this[Wse][Svt](n)}),cW(e,"readable",function(){let n=this[da];n&&n.readMore()}),cW(e,"end",function(){let n=this[da];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}Vn.destroy(this,new pW("other side closed",Vn.getSocketInfo(this)))}),cW(e,"close",function(){let n=this[Wse],i=this[da];i&&(!this[ap]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[da].destroy(),this[da]=null);let o=this[ap]||new pW("closed",Vn.getSocketInfo(this));if(n[n4]=null,n[h8e]=null,n.destroyed){bn(n[yvt]===0);let a=n[Qm].splice(n[sp]);for(let l=0;l<a.length;l++){let c=a[l];Vn.errorRequest(n,c,o)}}else if(n[Xc]>0&&o.code!=="UND_ERR_INFO"){let a=n[Qm][n[sp]];n[Qm][n[sp]++]=null,Vn.errorRequest(n,a,o)}n[vvt]=n[sp],bn(n[Xc]===0),n.emit("disconnect",n[m8e],[n],o),n[kv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return Fvt(t,...n)},resume(){Nvt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[Bv]||e[Sd]||e[GD]||n&&(t[Xc]>0&&!n.idempotent||t[Xc]>0&&(n.upgrade||n.method==="CONNECT")||t[Xc]>0&&Vn.bodyLength(n.body)!==0&&(Vn.isStream(n.body)||Vn.isAsyncIterable(n.body)||Vn.isFormDataLike(n.body))))}}}s(Pvt,"connectH1");function Nvt(t){let e=t[n4];if(e&&!e.destroyed){if(t[l8e]===0?!e[qD]&&e.unref&&(e.unref(),e[qD]=!0):e[qD]&&e.ref&&(e.ref(),e[qD]=!1),t[l8e]===0)e[da].timeoutType!==jse&&e[da].setTimeout(t[mW],jse);else if(t[Xc]>0&&e[da].statusCode<200&&e[da].timeoutType!==i4){let r=t[Qm][t[sp]],n=r.headersTimeout!=null?r.headersTimeout:t[Ivt];e[da].setTimeout(n,i4)}}}s(Nvt,"resumeH1");function Lvt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Lvt,"shouldSendContentLength");function Fvt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(Vn.isFormDataLike(c)){Use||(Use=t4().extractBody);let[v,b]=Use(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Vn.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Vn.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Lvt(r)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[Gse])return Vn.errorRequest(t,e,new E2),!1;process.emitWarning(new E2)}let h=t[n4],g=s(v=>{e.aborted||e.completed||(Vn.errorRequest(t,e,v||new p8e),Vn.destroy(c),Vn.destroy(h,new r4("aborted")))},"abort");try{e.onConnect(g)}catch(v){Vn.errorRequest(t,e,v)}if(e.aborted)return!1;r==="HEAD"&&(h[Sd]=!0),(o||r==="CONNECT")&&(h[Sd]=!0),l!=null&&(h[Sd]=l),t[c8e]&&h[wvt]++>=t[c8e]&&(h[Sd]=!0),a&&(h[GD]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[xvt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[dW]&&!h[Sd]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return a8e.sendHeaders.hasSubscribers&&a8e.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?d8e(g,null,t,e,h,d,y,p):Vn.isBuffer(c)?d8e(g,c,t,e,h,d,y,p):Vn.isBlobLike(c)?typeof c.stream=="function"?f8e(g,c.stream(),t,e,h,d,y,p):Qvt(g,c,t,e,h,d,y,p):Vn.isStream(c)?Mvt(g,c,t,e,h,d,y,p):Vn.isIterable(c)?f8e(g,c,t,e,h,d,y,p):bn(!1),!0}s(Fvt,"writeH1");function Mvt(t,e,r,n,i,o,a,l){bn(o!==0||r[Xc]===0,"stream body cannot be pipelined");let c=!1,u=new hW({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Vn.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new p8e;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,bn(i.destroyed||i[Bv]&&r[Xc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Vn.destroy(e,g):Vn.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Mvt,"writeStream");function d8e(t,e,r,n,i,o,a,l){try{e?Vn.isBuffer(e)&&(bn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!l&&n.reset!==!1&&(i[Sd]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(bn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[kv]()}catch(c){t(c)}}s(d8e,"writeBuffer");async function Qvt(t,e,r,n,i,o,a,l){bn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new E2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),n.onBodySent(c),n.onRequestSent(),!l&&n.reset!==!1&&(i[Sd]=!0),r[kv]()}catch(c){t(c)}}s(Qvt,"writeBlob");async function f8e(t,e,r,n,i,o,a,l){bn(o!==0||r[Xc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{bn(c===null),i[ap]?h(i[ap]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new hW({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a});try{for await(let m of e){if(i[ap])throw i[ap];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(f8e,"writeIterable");var hW=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,r[Bv]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(r[ap])throw r[ap];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Gse])throw new E2;process.emitWarning(new E2)}r.cork(),a===0&&(!l&&n.reset!==!1&&(r[Sd]=!0),i===null?r.write(`${c}transfer-encoding: chunked\r
`,"latin1"):r.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=r.write(e);return r.uncork(),n.onBodySent(e),d||r[da].timeout&&r[da].timeoutType===i4&&r[da].timeout.refresh&&r[da].timeout.refresh(),d}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[Bv]=!1,e[ap])throw e[ap];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[Gse])throw new E2;process.emitWarning(new E2)}e[da].timeout&&e[da].timeoutType===i4&&e[da].timeout.refresh&&e[da].timeout.refresh(),n[kv]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[Bv]=!1,e&&(bn(n[Xc]<=1,"pipeline should only contain this request"),i(e))}};g8e.exports=Pvt});var T8e=G((vKr,I8e)=>{"use strict";f();var lp=require("node:assert"),{pipeline:Ovt}=require("node:stream"),Fi=yi(),{RequestContentLengthMismatchError:$se,RequestAbortedError:y8e,SocketError:HD,InformationalError:zse}=yo(),{kUrl:gW,kReset:yW,kClient:o4,kRunning:CW,kPending:Uvt,kQueue:Dv,kPendingIdx:Yse,kRunningIdx:Om,kError:qm,kSocket:Vl,kStrictContentLength:qvt,kOnError:Kse,kMaxConcurrentStreams:E8e,kHTTP2Session:Um,kResume:Pv,kSize:Wvt,kHTTPContext:Gvt}=Os(),iy=Symbol("open streams"),C8e,x8e=!1,AW;try{AW=require("node:http2")}catch{AW={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Hvt,HTTP2_HEADER_METHOD:jvt,HTTP2_HEADER_PATH:Vvt,HTTP2_HEADER_SCHEME:$vt,HTTP2_HEADER_CONTENT_LENGTH:zvt,HTTP2_HEADER_EXPECT:Yvt,HTTP2_HEADER_STATUS:Kvt}}=AW;function Jvt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(Jvt,"parseH2Headers");async function Xvt(t,e){t[Vl]=e,x8e||(x8e=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=AW.connect(t[gW],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[E8e]});r[iy]=0,r[o4]=t,r[Vl]=e,Fi.addListener(r,"error",ebt),Fi.addListener(r,"frameError",tbt),Fi.addListener(r,"end",rbt),Fi.addListener(r,"goaway",nbt),Fi.addListener(r,"close",function(){let{[o4]:i}=this,{[Vl]:o}=i,a=this[Vl][qm]||this[qm]||new HD("closed",Fi.getSocketInfo(o));if(i[Um]=null,i.destroyed){lp(i[Uvt]===0);let l=i[Dv].splice(i[Om]);for(let c=0;c<l.length;c++){let u=l[c];Fi.errorRequest(i,u,a)}}}),r.unref(),t[Um]=r,e[Um]=r,Fi.addListener(e,"error",function(i){lp(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[qm]=i,this[o4][Kse](i)}),Fi.addListener(e,"end",function(){Fi.destroy(this,new HD("other side closed",Fi.getSocketInfo(this)))}),Fi.addListener(e,"close",function(){let i=this[qm]||new HD("closed",Fi.getSocketInfo(this));t[Vl]=null,this[Um]!=null&&this[Um].destroy(i),t[Yse]=t[Om],lp(t[CW]===0),t.emit("disconnect",t[gW],[t],i),t[Pv]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return obt(t,...i)},resume(){Zvt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Xvt,"connectH2");function Zvt(t){let e=t[Vl];e?.destroyed===!1&&(t[Wvt]===0&&t[E8e]===0?(e.unref(),t[Um].unref()):(e.ref(),t[Um].ref()))}s(Zvt,"resumeH2");function ebt(t){lp(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Vl][qm]=t,this[o4][Kse](t)}s(ebt,"onHttp2SessionError");function tbt(t,e,r){if(r===0){let n=new zse(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Vl][qm]=n,this[o4][Kse](n)}}s(tbt,"onHttp2FrameError");function rbt(){let t=new HD("other side closed",Fi.getSocketInfo(this[Vl]));this.destroy(t),Fi.destroy(this[Vl],t)}s(rbt,"onHttp2SessionEnd");function nbt(t){let e=this[qm]||new HD(`HTTP/2: "GOAWAY" frame received with code ${t}`,Fi.getSocketInfo(this)),r=this[o4];if(r[Vl]=null,r[Gvt]=null,this[Um]!=null&&(this[Um].destroy(e),this[Um]=null),Fi.destroy(this[Vl],e),r[Om]<r[Dv].length){let n=r[Dv][r[Om]];r[Dv][r[Om]++]=null,Fi.errorRequest(r,n,e),r[Yse]=r[Om]}lp(r[CW]===0),r.emit("disconnect",r[gW],[r],e),r[Pv]()}s(nbt,"onHTTP2GoAway");function ibt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(ibt,"shouldSendContentLength");function obt(t,e){let r=t[Um],{method:n,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Fi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let B=u[k+0],N=u[k+1];if(Array.isArray(N))for(let W=0;W<N.length;W++)p[B]?p[B]+=`,${N[W]}`:p[B]=N[W];else p[B]=N}let m,{hostname:h,port:g}=t[gW];p[Hvt]=o||`${h}${g?`:${g}`:""}`,p[jvt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new y8e,Fi.errorRequest(t,e,k),m!=null&&Fi.destroy(m,k),Fi.destroy(d,k),t[Dv][t[Om]++]=null,t[Pv]())},"abort");try{e.onConnect(y)}catch(k){Fi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[iy],t[Dv][t[Om]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[iy],t[Dv][t[Om]++]=null}),m.once("close",()=>{r[iy]-=1,r[iy]===0&&r.unref()}),!0;p[Vvt]=i,p[$vt]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Fi.bodyLength(d);if(Fi.isFormDataLike(d)){C8e??=t4().extractBody;let[k,B]=C8e(d);p["content-type"]=B,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),ibt(n)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[qvt])return Fi.errorRequest(t,e,new $se),!1;process.emitWarning(new $se)}b!=null&&(lp(d,"no body must not have content length"),p[zvt]=`${b}`),r.ref();let E=n==="GET"||n==="HEAD"||d===null;return l?(p[Yvt]="100-continue",m=r.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=r.request(p,{endStream:E,signal:c}),_()),++r[iy],m.once("response",k=>{let{[Kvt]:B,...N}=k;if(e.onResponseStarted(),e.aborted){let W=new y8e;Fi.errorRequest(t,e,W),Fi.destroy(m,W);return}e.onHeaders(Number(B),Jvt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",W=>{e.onData(W)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[iy]===0&&r.unref(),y(new zse("HTTP/2: stream half-closed (remote)")),t[Dv][t[Om]++]=null,t[Yse]=t[Om],t[Pv]()}),m.once("close",()=>{r[iy]-=1,r[iy]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,B)=>{y(new zse(`HTTP/2: "frameError" received - type ${k}, code ${B}`))}),!0;function _(){!d||b===0?v8e(y,m,null,t,e,t[Vl],b,v):Fi.isBuffer(d)?v8e(y,m,d,t,e,t[Vl],b,v):Fi.isBlobLike(d)?typeof d.stream=="function"?b8e(y,m,d.stream(),t,e,t[Vl],b,v):abt(y,m,d,t,e,t[Vl],b,v):Fi.isStream(d)?sbt(y,t[Vl],v,m,d,t,e,b):Fi.isIterable(d)?b8e(y,m,d,t,e,t[Vl],b,v):lp(!1)}s(_,"writeBodyH2")}s(obt,"writeH2");function v8e(t,e,r,n,i,o,a,l){try{r!=null&&Fi.isBuffer(r)&&(lp(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),l||(o[yW]=!0),i.onRequestSent(),n[Pv]()}catch(c){t(c)}}s(v8e,"writeBuffer");function sbt(t,e,r,n,i,o,a,l){lp(l!==0||o[CW]===0,"stream body cannot be pipelined");let c=Ovt(i,n,d=>{d?(Fi.destroy(c,d),t(d)):(Fi.removeAllListeners(c),a.onRequestSent(),r||(e[yW]=!0),o[Pv]())});Fi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(sbt,"writeStream");async function abt(t,e,r,n,i,o,a,l){lp(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new $se;let c=Buffer.from(await r.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[yW]=!0),n[Pv]()}catch(c){t(c)}}s(abt,"writeBlob");async function b8e(t,e,r,n,i,o,a,l){lp(a!==0||n[CW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{lp(c===null),o[qm]?m(o[qm]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[qm])throw o[qm];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[yW]=!0),n[Pv]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(b8e,"writeIterable");I8e.exports=Xvt});var vW=G((IKr,S8e)=>{"use strict";f();var qg=yi(),{kBodyUsed:jD}=Os(),Xse=require("node:assert"),{InvalidArgumentError:lbt}=yo(),cbt=require("node:events"),ubt=[300,301,302,303,307,308],w8e=Symbol("body"),xW=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[w8e]=e,this[jD]=!1}async*[Symbol.asyncIterator](){Xse(!this[jD],"disturbed"),this[jD]=!0,yield*this[w8e]}},Jse=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new lbt("maxRedirections must be a positive number");qg.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,qg.isStream(this.opts.body)?(qg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Xse(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[jD]=!1,cbt.prototype.on.call(this.opts.body,"data",function(){this[jD]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new xW(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&qg.isIterable(this.opts.body)&&(this.opts.body=new xW(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||qg.isDisturbed(this.opts.body)?null:dbt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:l}=qg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=fbt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function dbt(t,e){if(ubt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&qg.headerNameToString(e[r])==="location")return e[r+1]}s(dbt,"parseLocation");function _8e(t,e,r){if(t.length===4)return qg.headerNameToString(t)==="host";if(e&&qg.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=qg.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(_8e,"shouldRemoveHeader");function fbt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)_8e(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))_8e(i,e,r)||n.push(i,t[i]);else Xse(t==null,"headers must be an object or an array");return n}s(fbt,"cleanRequestHeaders");S8e.exports=Jse});var bW=G((_Kr,R8e)=>{"use strict";f();var pbt=vW();function mbt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new pbt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(mbt,"createRedirectInterceptor");R8e.exports=mbt});var XD=G((kKr,O8e)=>{"use strict";f();var oy=require("node:assert"),L8e=require("node:net"),hbt=require("node:http"),I2=yi(),{channels:s4}=W5(),gbt=V3e(),Abt=V5(),{InvalidArgumentError:Pa,InformationalError:ybt,ClientDestroyedError:Cbt}=yo(),xbt=DD(),{kUrl:Wg,kServerName:Nv,kClient:vbt,kBusy:Zse,kConnect:bbt,kResuming:T2,kRunning:KD,kPending:JD,kSize:YD,kQueue:Wm,kConnected:Ebt,kConnecting:a4,kNeedDrain:Fv,kKeepAliveDefaultTimeout:k8e,kHostHeader:Ibt,kPendingIdx:Gm,kRunningIdx:sy,kError:Tbt,kPipelining:EW,kKeepAliveTimeoutValue:wbt,kMaxHeadersSize:_bt,kKeepAliveMaxTimeout:Sbt,kKeepAliveTimeoutThreshold:Rbt,kHeadersTimeout:kbt,kBodyTimeout:Bbt,kStrictContentLength:Dbt,kConnector:VD,kMaxRedirections:Pbt,kMaxRequests:eae,kCounter:Nbt,kClose:Lbt,kDestroy:Fbt,kDispatch:Mbt,kInterceptors:B8e,kLocalAddress:$D,kMaxResponseSize:Qbt,kOnError:Obt,kHTTPContext:Na,kMaxConcurrentStreams:Ubt,kResume:zD}=Os(),qbt=A8e(),Wbt=T8e(),D8e=!1,Lv=Symbol("kClosedResolve"),P8e=s(()=>{},"noop");function F8e(t){return t[EW]??t[Na]?.defaultPipelining??1}s(F8e,"getPipelining");var tae=class extends Abt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:B,maxRequestsPerClient:N,localAddress:W,maxResponseSize:ee,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae,maxConcurrentStreams:H,allowH2:O}={}){if(super(),d!==void 0)throw new Pa("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Pa("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Pa("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Pa("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Pa("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Pa("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Pa("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Pa("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Pa("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Pa("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Pa("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Pa("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Pa("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Pa("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Pa("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Pa("maxRequestsPerClient must be a positive number");if(W!=null&&(typeof W!="string"||L8e.isIP(W)===0))throw new Pa("localAddress must be valid string IP address");if(ee!=null&&(!Number.isInteger(ee)||ee<-1))throw new Pa("maxResponseSize must be a positive number");if(ae!=null&&(!Number.isInteger(ae)||ae<-1))throw new Pa("autoSelectFamilyAttemptTimeout must be a positive number");if(O!=null&&typeof O!="boolean")throw new Pa("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Pa("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=xbt({...b,maxCachedSessions:_,allowH2:O,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[B8e]=r.Client,D8e||(D8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[B8e]=[Gbt({maxRedirections:k})],this[Wg]=I2.parseOrigin(e),this[VD]=B,this[EW]=v??1,this[_bt]=n||hbt.maxHeaderSize,this[k8e]=p??4e3,this[Sbt]=h??6e5,this[Rbt]=g??2e3,this[wbt]=this[k8e],this[Nv]=null,this[$D]=W??null,this[T2]=0,this[Fv]=0,this[Ibt]=`host: ${this[Wg].hostname}${this[Wg].port?`:${this[Wg].port}`:""}\r
`,this[Bbt]=c??3e5,this[kbt]=i??3e5,this[Dbt]=E??!0,this[Pbt]=k,this[eae]=N,this[Lv]=null,this[Qbt]=ee>-1?ee:-1,this[Ubt]=H??100,this[Na]=null,this[Wm]=[],this[sy]=0,this[Gm]=0,this[zD]=le=>rae(this,le),this[Obt]=le=>M8e(this,le)}get pipelining(){return this[EW]}set pipelining(e){this[EW]=e,this[zD](!0)}get[JD](){return this[Wm].length-this[Gm]}get[KD](){return this[Gm]-this[sy]}get[YD](){return this[Wm].length-this[sy]}get[Ebt](){return!!this[Na]&&!this[a4]&&!this[Na].destroyed}get[Zse](){return!!(this[Na]?.busy(null)||this[YD]>=(F8e(this)||1)||this[JD]>0)}[bbt](e){Q8e(this),this.once("connect",e)}[Mbt](e,r){let n=e.origin||this[Wg].origin,i=new gbt(n,e,r);return this[Wm].push(i),this[T2]||(I2.bodyLength(i.body)==null&&I2.isIterable(i.body)?(this[T2]=1,queueMicrotask(()=>rae(this))):this[zD](!0)),this[T2]&&this[Fv]!==2&&this[Zse]&&(this[Fv]=2),this[Fv]<2}async[Lbt](){return new Promise(e=>{this[YD]?this[Lv]=e:e(null)})}async[Fbt](e){return new Promise(r=>{let n=this[Wm].splice(this[Gm]);for(let o=0;o<n.length;o++){let a=n[o];I2.errorRequest(this,a,e)}let i=s(()=>{this[Lv]&&(this[Lv](),this[Lv]=null),r(null)},"callback");this[Na]?(this[Na].destroy(e,i),this[Na]=null):queueMicrotask(i),this[zD]()})}},Gbt=bW();function M8e(t,e){if(t[KD]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){oy(t[Gm]===t[sy]);let r=t[Wm].splice(t[sy]);for(let n=0;n<r.length;n++){let i=r[n];I2.errorRequest(t,i,e)}oy(t[YD]===0)}}s(M8e,"onError");async function Q8e(t){oy(!t[a4]),oy(!t[Na]);let{host:e,hostname:r,protocol:n,port:i}=t[Wg];if(r[0]==="["){let o=r.indexOf("]");oy(o!==-1);let a=r.substring(1,o);oy(L8e.isIP(a)),r=a}t[a4]=!0,s4.beforeConnect.hasSubscribers&&s4.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Na]?.version,servername:t[Nv],localAddress:t[$D]},connector:t[VD]});try{let o=await new Promise((a,l)=>{t[VD]({host:e,hostname:r,protocol:n,port:i,servername:t[Nv],localAddress:t[$D]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){I2.destroy(o.on("error",P8e),new Cbt);return}oy(o);try{t[Na]=o.alpnProtocol==="h2"?await Wbt(t,o):await qbt(t,o)}catch(a){throw o.destroy().on("error",P8e),a}t[a4]=!1,o[Nbt]=0,o[eae]=t[eae],o[vbt]=t,o[Tbt]=null,s4.connected.hasSubscribers&&s4.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Na]?.version,servername:t[Nv],localAddress:t[$D]},connector:t[VD],socket:o}),t.emit("connect",t[Wg],[t])}catch(o){if(t.destroyed)return;if(t[a4]=!1,s4.connectError.hasSubscribers&&s4.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Na]?.version,servername:t[Nv],localAddress:t[$D]},connector:t[VD],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(oy(t[KD]===0);t[JD]>0&&t[Wm][t[Gm]].servername===t[Nv];){let a=t[Wm][t[Gm]++];I2.errorRequest(t,a,o)}else M8e(t,o);t.emit("connectionError",t[Wg],[t],o)}t[zD]()}s(Q8e,"connect");function N8e(t){t[Fv]=0,t.emit("drain",t[Wg],[t])}s(N8e,"emitDrain");function rae(t,e){t[T2]!==2&&(t[T2]=2,Hbt(t,e),t[T2]=0,t[sy]>256&&(t[Wm].splice(0,t[sy]),t[Gm]-=t[sy],t[sy]=0))}s(rae,"resume");function Hbt(t,e){for(;;){if(t.destroyed){oy(t[JD]===0);return}if(t[Lv]&&!t[YD]){t[Lv](),t[Lv]=null;return}if(t[Na]&&t[Na].resume(),t[Zse])t[Fv]=2;else if(t[Fv]===2){e?(t[Fv]=1,queueMicrotask(()=>N8e(t))):N8e(t);continue}if(t[JD]===0||t[KD]>=(F8e(t)||1))return;let r=t[Wm][t[Gm]];if(t[Wg].protocol==="https:"&&t[Nv]!==r.servername){if(t[KD]>0)return;t[Nv]=r.servername,t[Na]?.destroy(new ybt("servername changed"),()=>{t[Na]=null,rae(t)})}if(t[a4])return;if(!t[Na]){Q8e(t);return}if(t[Na].destroyed||t[Na].busy(r))return;!r.aborted&&t[Na].write(r)?t[Gm]++:t[Wm].splice(t[Gm],1)}}s(Hbt,"_resume");O8e.exports=tae});var nae=G((NKr,U8e)=>{"use strict";f();var IW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};U8e.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new IW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new IW),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var W8e=G((MKr,q8e)=>{f();var{kFree:jbt,kConnected:Vbt,kPending:$bt,kQueued:zbt,kRunning:Ybt,kSize:Kbt}=Os(),w2=Symbol("pool"),iae=class{static{s(this,"PoolStats")}constructor(e){this[w2]=e}get connected(){return this[w2][Vbt]}get free(){return this[w2][jbt]}get pending(){return this[w2][$bt]}get queued(){return this[w2][zbt]}get running(){return this[w2][Ybt]}get size(){return this[w2][Kbt]}};q8e.exports=iae});var uae=G((UKr,X8e)=>{"use strict";f();var Jbt=V5(),Xbt=nae(),{kConnected:oae,kSize:G8e,kRunning:H8e,kPending:j8e,kQueued:ZD,kBusy:Zbt,kFree:eEt,kUrl:tEt,kClose:rEt,kDestroy:nEt,kDispatch:iEt}=Os(),oEt=W8e(),Rd=Symbol("clients"),Qu=Symbol("needDrain"),eP=Symbol("queue"),sae=Symbol("closed resolve"),aae=Symbol("onDrain"),V8e=Symbol("onConnect"),$8e=Symbol("onDisconnect"),z8e=Symbol("onConnectionError"),lae=Symbol("get dispatcher"),K8e=Symbol("add client"),J8e=Symbol("remove client"),Y8e=Symbol("stats"),cae=class extends Jbt{static{s(this,"PoolBase")}constructor(){super(),this[eP]=new Xbt,this[Rd]=[],this[ZD]=0;let e=this;this[aae]=s(function(n,i){let o=e[eP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[ZD]--,a=!this.dispatch(l.opts,l.handler)}this[Qu]=a,!this[Qu]&&e[Qu]&&(e[Qu]=!1,e.emit("drain",n,[e,...i])),e[sae]&&o.isEmpty()&&Promise.all(e[Rd].map(l=>l.close())).then(e[sae])},"onDrain"),this[V8e]=(r,n)=>{e.emit("connect",r,[e,...n])},this[$8e]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[z8e]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[Y8e]=new oEt(this)}get[Zbt](){return this[Qu]}get[oae](){return this[Rd].filter(e=>e[oae]).length}get[eEt](){return this[Rd].filter(e=>e[oae]&&!e[Qu]).length}get[j8e](){let e=this[ZD];for(let{[j8e]:r}of this[Rd])e+=r;return e}get[H8e](){let e=0;for(let{[H8e]:r}of this[Rd])e+=r;return e}get[G8e](){let e=this[ZD];for(let{[G8e]:r}of this[Rd])e+=r;return e}get stats(){return this[Y8e]}async[rEt](){this[eP].isEmpty()?await Promise.all(this[Rd].map(e=>e.close())):await new Promise(e=>{this[sae]=e})}async[nEt](e){for(;;){let r=this[eP].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Rd].map(r=>r.destroy(e)))}[iEt](e,r){let n=this[lae]();return n?n.dispatch(e,r)||(n[Qu]=!0,this[Qu]=!this[lae]()):(this[Qu]=!0,this[eP].push({opts:e,handler:r}),this[ZD]++),!this[Qu]}[K8e](e){return e.on("drain",this[aae]).on("connect",this[V8e]).on("disconnect",this[$8e]).on("connectionError",this[z8e]),this[Rd].push(e),this[Qu]&&queueMicrotask(()=>{this[Qu]&&this[aae](e[tEt],[this,e])}),this}[J8e](e){e.close(()=>{let r=this[Rd].indexOf(e);r!==-1&&this[Rd].splice(r,1)}),this[Qu]=this[Rd].some(r=>!r[Qu]&&r.closed!==!0&&r.destroyed!==!0)}};X8e.exports={PoolBase:cae,kClients:Rd,kNeedDrain:Qu,kAddClient:K8e,kRemoveClient:J8e,kGetDispatcher:lae}});var l4=G((GKr,rDe)=>{"use strict";f();var{PoolBase:sEt,kClients:TW,kNeedDrain:aEt,kAddClient:lEt,kGetDispatcher:cEt}=uae(),uEt=XD(),{InvalidArgumentError:dae}=yo(),Z8e=yi(),{kUrl:eDe,kInterceptors:dEt}=Os(),fEt=DD(),fae=Symbol("options"),pae=Symbol("connections"),tDe=Symbol("factory");function pEt(t,e){return new uEt(t,e)}s(pEt,"defaultFactory");var mae=class extends sEt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=pEt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new dae("invalid connections");if(typeof n!="function")throw new dae("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new dae("connect must be a function or an object");typeof i!="function"&&(i=fEt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[dEt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[pae]=r||null,this[eDe]=Z8e.parseOrigin(e),this[fae]={...Z8e.deepClone(m),connect:i,allowH2:p},this[fae].interceptors=m.interceptors?{...m.interceptors}:void 0,this[tDe]=n,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[TW].indexOf(v);b!==-1&&this[TW].splice(b,1)}})}[cEt](){for(let e of this[TW])if(!e[aEt])return e;if(!this[pae]||this[TW].length<this[pae]){let e=this[tDe](this[eDe],this[fae]);return this[lEt](e),e}}};rDe.exports=mae});var aDe=G((VKr,sDe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:mEt,InvalidArgumentError:hEt}=yo(),{PoolBase:gEt,kClients:Zc,kNeedDrain:tP,kAddClient:AEt,kRemoveClient:yEt,kGetDispatcher:CEt}=uae(),xEt=l4(),{kUrl:hae,kInterceptors:vEt}=Os(),{parseOrigin:nDe}=yi(),iDe=Symbol("factory"),wW=Symbol("options"),oDe=Symbol("kGreatestCommonDivisor"),_2=Symbol("kCurrentWeight"),S2=Symbol("kIndex"),cp=Symbol("kWeight"),_W=Symbol("kMaxWeightPerServer"),SW=Symbol("kErrorPenalty");function bEt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(bEt,"getGreatestCommonDivisor");function EEt(t,e){return new xEt(t,e)}s(EEt,"defaultFactory");var gae=class extends gEt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=EEt,...n}={}){if(super(),this[wW]=n,this[S2]=-1,this[_2]=0,this[_W]=this[wW].maxWeightPerServer||100,this[SW]=this[wW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new hEt("factory must be a function.");this[vEt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[iDe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=nDe(e).origin;if(this[Zc].find(i=>i[hae].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[iDe](r,Object.assign({},this[wW]));this[AEt](n),n.on("connect",()=>{n[cp]=Math.min(this[_W],n[cp]+this[SW])}),n.on("connectionError",()=>{n[cp]=Math.max(1,n[cp]-this[SW]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[cp]=Math.max(1,n[cp]-this[SW]),this._updateBalancedPoolStats())});for(let i of this[Zc])i[cp]=this[_W];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Zc].length;r++)e=bEt(this[Zc][r][cp],e);this[oDe]=e}removeUpstream(e){let r=nDe(e).origin,n=this[Zc].find(i=>i[hae].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[yEt](n),this}get upstreams(){return this[Zc].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[hae].origin)}[CEt](){if(this[Zc].length===0)throw new mEt;if(!this[Zc].find(o=>!o[tP]&&o.closed!==!0&&o.destroyed!==!0)||this[Zc].map(o=>o[tP]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Zc].findIndex(o=>!o[tP]);for(;n++<this[Zc].length;){this[S2]=(this[S2]+1)%this[Zc].length;let o=this[Zc][this[S2]];if(o[cp]>this[Zc][i][cp]&&!o[tP]&&(i=this[S2]),this[S2]===0&&(this[_2]=this[_2]-this[oDe],this[_2]<=0&&(this[_2]=this[_W])),o[cp]>=this[_2]&&!o[tP])return o}return this[_2]=this[Zc][i][cp],this[S2]=i,this[Zc][i]}};sDe.exports=gae});var c4=G((YKr,mDe)=>{"use strict";f();var{InvalidArgumentError:RW}=yo(),{kClients:Mv,kRunning:lDe,kClose:IEt,kDestroy:TEt,kDispatch:wEt,kInterceptors:_Et}=Os(),SEt=V5(),REt=l4(),kEt=XD(),BEt=yi(),DEt=bW(),cDe=Symbol("onConnect"),uDe=Symbol("onDisconnect"),dDe=Symbol("onConnectionError"),PEt=Symbol("maxRedirections"),fDe=Symbol("onDrain"),pDe=Symbol("factory"),Aae=Symbol("options");function NEt(t,e){return e&&e.connections===1?new kEt(t,e):new REt(t,e)}s(NEt,"defaultFactory");var yae=class extends SEt{static{s(this,"Agent")}constructor({factory:e=NEt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new RW("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new RW("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new RW("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[_Et]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[DEt({maxRedirections:r})],this[Aae]={...BEt.deepClone(i),connect:n},this[Aae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[PEt]=r,this[pDe]=e,this[Mv]=new Map,this[fDe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[cDe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[uDe]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[dDe]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[lDe](){let e=0;for(let r of this[Mv].values())e+=r[lDe];return e}[wEt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new RW("opts.origin must be a non-empty string or URL.");let i=this[Mv].get(n);return i||(i=this[pDe](e.origin,this[Aae]).on("drain",this[fDe]).on("connect",this[cDe]).on("disconnect",this[uDe]).on("connectionError",this[dDe]),this[Mv].set(n,i)),i.dispatch(e,r)}async[IEt](){let e=[];for(let r of this[Mv].values())e.push(r.close());this[Mv].clear(),await Promise.all(e)}async[TEt](e){let r=[];for(let n of this[Mv].values())r.push(n.destroy(e));this[Mv].clear(),await Promise.all(r)}};mDe.exports=yae});var vae=G((XKr,yDe)=>{"use strict";f();var{kProxy:LEt,kClose:FEt,kDestroy:MEt,kInterceptors:QEt}=Os(),{URL:rP}=require("node:url"),OEt=c4(),UEt=l4(),qEt=V5(),{InvalidArgumentError:DW,RequestAbortedError:WEt,SecureProxyConnectionError:GEt}=yo(),hDe=DD(),kW=Symbol("proxy agent"),BW=Symbol("proxy client"),nP=Symbol("proxy headers"),Cae=Symbol("request tls settings"),gDe=Symbol("proxy tls settings"),ADe=Symbol("connect endpoint function");function HEt(t){return t==="https:"?443:80}s(HEt,"defaultProtocolPort");function jEt(t,e){return new UEt(t,e)}s(jEt,"defaultFactory");var VEt=s(()=>{},"noop"),xae=class extends qEt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof rP)&&!e.uri)throw new DW("Proxy uri is mandatory");let{clientFactory:r=jEt}=e;if(typeof r!="function")throw new DW("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=n;if(this[LEt]={uri:i,protocol:l},this[QEt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[Cae]=e.requestTls,this[gDe]=e.proxyTls,this[nP]=e.headers||{},e.auth&&e.token)throw new DW("opts.auth cannot be used in combination with opts.token");e.auth?this[nP]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[nP]["proxy-authorization"]=e.token:c&&u&&(this[nP]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=hDe({...e.proxyTls});this[ADe]=hDe({...e.requestTls}),this[BW]=r(n,{connect:p}),this[kW]=new OEt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${HEt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[BW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[nP],host:m.host},servername:this[gDe]?.servername||d});if(v!==200&&(y.on("error",VEt).destroy(),h(new WEt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[Cae]?b=this[Cae].servername:b=m.servername,this[ADe]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new GEt(y)):h(y)}},"connect")})}dispatch(e,r){let n=$Et(e.headers);if(zEt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new rP(e.origin);n.host=i}return this[kW].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new rP(e):e instanceof rP?e:new rP(e.uri)}async[FEt](){await this[kW].close(),await this[BW].close()}async[MEt](){await this[kW].destroy(),await this[BW].destroy()}};function $Et(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s($Et,"buildHeaders");function zEt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new DW("Proxy-Authorization should be sent in ProxyAgent constructor")}s(zEt,"throwIfProxyAuthIsSent");yDe.exports=xae});var IDe=G((tJr,EDe)=>{"use strict";f();var YEt=V5(),{kClose:KEt,kDestroy:JEt,kClosed:CDe,kDestroyed:xDe,kDispatch:XEt,kNoProxyAgent:iP,kHttpProxyAgent:Qv,kHttpsProxyAgent:R2}=Os(),vDe=vae(),ZEt=c4(),eIt={"http:":80,"https:":443},bDe=!1,bae=class extends YEt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,bDe||(bDe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[iP]=new ZEt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Qv]=new vDe({...o,uri:a}):this[Qv]=this[iP];let l=n??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[R2]=new vDe({...o,uri:l}):this[R2]=this[Qv],this.#o()}[XEt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[KEt](){await this[iP].close(),this[Qv][CDe]||await this[Qv].close(),this[R2][CDe]||await this[R2].close()}async[JEt](e){await this[iP].destroy(e),this[Qv][xDe]||await this[Qv].destroy(e),this[R2][xDe]||await this[R2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||eIt[r]||0,this.#r(n,i)?r==="https:"?this[R2]:this[Qv]:this[iP]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};EDe.exports=bae});var PW=G((iJr,SDe)=>{"use strict";f();var u4=require("node:assert"),{kRetryHandlerDefaultRetry:TDe}=Os(),{RequestRetryError:oP}=yo(),{isDisturbed:wDe,parseHeaders:tIt,parseRangeHeader:_De,wrapRequestBody:rIt}=yi();function nIt(t){let e=Date.now();return new Date(t).getTime()-e}s(nIt,"calculateRetryAfterHeader");var Eae=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:rIt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[TDe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[TDe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=n,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?nIt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=tIt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new oP("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new oP("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=_De(o["content-range"]);if(!l)return this.abort(new oP("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new oP("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return u4(this.start===c,"content-range mismatch"),u4(this.end==null||this.end===d,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let l=_De(o["content-range"]);if(l==null)return this.handler.onHeaders(e,r,n,i);let{start:c,size:u,end:d=u-1}=l;u4(c!=null&&Number.isFinite(c),"content-range mismatch"),u4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return u4(Number.isFinite(this.start)),u4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new oP("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||wDe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||wDe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};SDe.exports=Eae});var kDe=G((aJr,RDe)=>{"use strict";f();var iIt=kD(),oIt=PW(),Iae=class extends iIt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new oIt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};RDe.exports=Iae});var kae=G((uJr,ODe)=>{"use strict";f();var LDe=require("node:assert"),{Readable:sIt}=require("node:stream"),{RequestAbortedError:FDe,NotSupportedError:aIt,InvalidArgumentError:lIt,AbortError:Tae}=yo(),MDe=yi(),{ReadableStreamFrom:cIt}=yi(),k0=Symbol("kConsume"),sP=Symbol("kReading"),Ov=Symbol("kBody"),BDe=Symbol("kAbort"),QDe=Symbol("kContentType"),DDe=Symbol("kContentLength"),uIt=s(()=>{},"noop"),wae=class extends sIt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[BDe]=r,this[k0]=null,this[Ov]=null,this[QDe]=n,this[DDe]=i,this[sP]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new FDe),e&&this[BDe](),super.destroy(e)}_destroy(e,r){this[sP]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[sP]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[sP]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[k0]&&e!==null?(Sae(this[k0],e),this[sP]?super.push(e):!0):super.push(e)}async text(){return aP(this,"text")}async json(){return aP(this,"json")}async blob(){return aP(this,"blob")}async bytes(){return aP(this,"bytes")}async arrayBuffer(){return aP(this,"arrayBuffer")}async formData(){throw new aIt}get bodyUsed(){return MDe.isDisturbed(this)}get body(){return this[Ov]||(this[Ov]=cIt(this),this[k0]&&(this[Ov].getReader(),LDe(this[Ov].locked))),this[Ov]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new lIt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[DDe]>r&&this.destroy(new Tae);let a=s(()=>{this.destroy(n.reason??new Tae)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new Tae):i(null)}).on("error",uIt).on("data",function(l){r-=l.length,r<=0&&this.destroy()}).resume()})}};function dIt(t){return t[Ov]&&t[Ov].locked===!0||t[k0]}s(dIt,"isLocked");function fIt(t){return MDe.isDisturbed(t)||dIt(t)}s(fIt,"isUnusable");async function aP(t,e){return LDe(!t[k0]),new Promise((r,n)=>{if(fIt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[k0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){Rae(this[k0],i)}).on("close",function(){this[k0].body!==null&&Rae(this[k0],new FDe)}),pIt(t[k0])})})}s(aP,"consume");function pIt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)Sae(t,e.buffer[i])}else for(let r of e.buffer)Sae(t,r);for(e.endEmitted?NDe(this[k0]):t.stream.on("end",function(){NDe(this[k0])}),t.stream.resume();t.stream.read()!=null;);}s(pIt,"consumeStart");function _ae(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(_ae,"chunksDecode");function PDe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(PDe,"chunksConcat");function NDe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(_ae(r,o)):e==="json"?n(JSON.parse(_ae(r,o))):e==="arrayBuffer"?n(PDe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[QDe]})):e==="bytes"&&n(PDe(r,o)),Rae(t)}catch(a){i.destroy(a)}}s(NDe,"consumeEnd");function Sae(t,e){t.length+=e.length,t.body.push(e)}s(Sae,"consumePush");function Rae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(Rae,"consumeFinish");ODe.exports={Readable:wae,chunksDecode:_ae}});var Bae=G((pJr,HDe)=>{f();var mIt=require("node:assert"),{ResponseStatusCodeError:UDe}=yo(),{chunksDecode:qDe}=kae(),hIt=128*1024;async function gIt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){mIt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>hIt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!l){queueMicrotask(()=>t(new UDe(c,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{WDe(r)?d=JSON.parse(qDe(a,l)):GDe(r)&&(d=qDe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new UDe(c,n,o,d)))}s(gIt,"getResolveErrorBodyCallback");var WDe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),GDe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");HDe.exports={getResolveErrorBodyCallback:gIt,isContentTypeApplicationJson:WDe,isContentTypeText:GDe}});var $De=G((gJr,Dae)=>{"use strict";f();var AIt=require("node:assert"),{Readable:yIt}=kae(),{InvalidArgumentError:d4,RequestAbortedError:jDe}=yo(),B0=yi(),{getResolveErrorBodyCallback:CIt}=Bae(),{AsyncResource:xIt}=require("node:async_hooks"),NW=class extends xIt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new d4("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof r!="function")throw new d4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new d4("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new d4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new d4("invalid method");if(l&&typeof l!="function")throw new d4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw B0.isStream(a)&&B0.destroy(a.on("error",B0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=n,this.reason=null,this.removeAbortListener=null,B0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new jDe:this.removeAbortListener=B0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new jDe,this.res?B0.destroy(this.res.on("error",B0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}AIt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?B0.parseRawHeaders(r):B0.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?B0.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new yIt({resume:n,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(CIt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){B0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{B0.destroy(r,e)})),i&&(this.body=null,B0.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function VDe(t,e){if(e===void 0)return new Promise((r,n)=>{VDe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new NW(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(VDe,"request");Dae.exports=VDe;Dae.exports.RequestHandler=NW});var lP=G((CJr,KDe)=>{f();var{addAbortListener:vIt}=yi(),{RequestAbortedError:bIt}=yo(),f4=Symbol("kListener"),Gg=Symbol("kSignal");function zDe(t){t.abort?t.abort(t[Gg]?.reason):t.reason=t[Gg]?.reason??new bIt,YDe(t)}s(zDe,"abort");function EIt(t,e){if(t.reason=null,t[Gg]=null,t[f4]=null,!!e){if(e.aborted){zDe(t);return}t[Gg]=e,t[f4]=()=>{zDe(t)},vIt(t[Gg],t[f4])}}s(EIt,"addSignal");function YDe(t){t[Gg]&&("removeEventListener"in t[Gg]?t[Gg].removeEventListener("abort",t[f4]):t[Gg].removeListener("abort",t[f4]),t[Gg]=null,t[f4]=null)}s(YDe,"removeSignal");KDe.exports={addSignal:EIt,removeSignal:YDe}});var ePe=G((bJr,ZDe)=>{"use strict";f();var IIt=require("node:assert"),{finished:TIt,PassThrough:wIt}=require("node:stream"),{InvalidArgumentError:p4,InvalidReturnValueError:_It}=yo(),Hm=yi(),{getResolveErrorBodyCallback:SIt}=Bae(),{AsyncResource:RIt}=require("node:async_hooks"),{addSignal:kIt,removeSignal:JDe}=lP(),Pae=class extends RIt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new p4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof n!="function")throw new p4("invalid callback");if(typeof r!="function")throw new p4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new p4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new p4("invalid method");if(c&&typeof c!="function")throw new p4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Hm.isStream(l)&&Hm.destroy(l.on("error",Hm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Hm.isStream(l)&&l.on("error",p=>{this.onError(p)}),kIt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}IIt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Hm.parseRawHeaders(r):Hm.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Hm.parseHeaders(r):d)["content-type"];p=new wIt,this.callback=null,this.runInAsyncScope(SIt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new _It("expected Writable");TIt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Hm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;JDe(this),r&&(this.trailers=Hm.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;JDe(this),this.factory=null,r?(this.res=null,Hm.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,Hm.destroy(o,e))}};function XDe(t,e,r){if(r===void 0)return new Promise((n,i)=>{XDe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Pae(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(XDe,"stream");ZDe.exports=XDe});var iPe=G((TJr,nPe)=>{"use strict";f();var{Readable:rPe,Duplex:BIt,PassThrough:DIt}=require("node:stream"),{InvalidArgumentError:cP,InvalidReturnValueError:PIt,RequestAbortedError:Nae}=yo(),up=yi(),{AsyncResource:NIt}=require("node:async_hooks"),{addSignal:LIt,removeSignal:FIt}=lP(),tPe=require("node:assert"),m4=Symbol("resume"),Lae=class extends rPe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[m4]=null}_read(){let{[m4]:e}=this;e&&(this[m4]=null,e())}_destroy(e,r){this._read(),r(e)}},Fae=class extends rPe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[m4]=e}_read(){this[m4]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new Nae),r(e)}},Mae=class extends NIt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new cP("invalid opts");if(typeof r!="function")throw new cP("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new cP("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new cP("invalid method");if(a&&typeof a!="function")throw new cP("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new Lae().on("error",up.nop),this.ret=new BIt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[m4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new Nae),g&&c&&g(),up.destroy(d,c),up.destroy(p,c),up.destroy(m,c),FIt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,LIt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}tPe(!i,"pipeline cannot be retried"),tPe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?up.parseRawHeaders(r):up.parseHeaders(r);this.onInfo({statusCode:e,headers:c})}return}this.res=new Fae(n);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?up.parseRawHeaders(r):up.parseHeaders(r);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",up.nop),c}if(!l||typeof l.on!="function")throw new PIt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;up.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||up.destroy(c,new Nae)}),this.body=l}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,up.destroy(r,e)}};function MIt(t,e){try{let r=new Mae(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new DIt().destroy(r)}}s(MIt,"pipeline");nPe.exports=MIt});var uPe=G((SJr,cPe)=>{"use strict";f();var{InvalidArgumentError:Qae,SocketError:QIt}=yo(),{AsyncResource:OIt}=require("node:async_hooks"),oPe=yi(),{addSignal:UIt,removeSignal:sPe}=lP(),aPe=require("node:assert"),Oae=class extends OIt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Qae("invalid opts");if(typeof r!="function")throw new Qae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Qae("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,UIt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}aPe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new QIt("bad upgrade",null)}onUpgrade(e,r,n){aPe(e===101);let{callback:i,opaque:o,context:a}=this;sPe(this),this.callback=null;let l=this.responseHeaders==="raw"?oPe.parseRawHeaders(r):oPe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;sPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function lPe(t,e){if(e===void 0)return new Promise((r,n)=>{lPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Oae(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(lPe,"upgrade");cPe.exports=lPe});var hPe=G((BJr,mPe)=>{"use strict";f();var qIt=require("node:assert"),{AsyncResource:WIt}=require("node:async_hooks"),{InvalidArgumentError:Uae,SocketError:GIt}=yo(),dPe=yi(),{addSignal:HIt,removeSignal:fPe}=lP(),qae=class extends WIt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Uae("invalid opts");if(typeof r!="function")throw new Uae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Uae("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,HIt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}qIt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new GIt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;fPe(this),this.callback=null;let l=r;l!=null&&(l=this.responseHeaders==="raw"?dPe.parseRawHeaders(r):dPe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;fPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function pPe(t,e){if(e===void 0)return new Promise((r,n)=>{pPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new qae(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(pPe,"connect");mPe.exports=pPe});var gPe=G((NJr,h4)=>{"use strict";f();h4.exports.request=$De();h4.exports.stream=ePe();h4.exports.pipeline=iPe();h4.exports.upgrade=uPe();h4.exports.connect=hPe()});var Gae=G((FJr,APe)=>{"use strict";f();var{UndiciError:jIt}=yo(),Wae=class t extends jIt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};APe.exports={MockNotMatchedError:Wae}});var g4=G((OJr,yPe)=>{"use strict";f();yPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var uP=G((qJr,RPe)=>{"use strict";f();var{MockNotMatchedError:k2}=Gae(),{kDispatches:LW,kMockAgent:VIt,kOriginalDispatch:$It,kOrigin:zIt,kGetNetConnect:YIt}=g4(),{buildURL:KIt}=yi(),{STATUS_CODES:JIt}=require("node:http"),{types:{isPromise:XIt}}=require("node:util");function ay(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ay,"matchValue");function xPe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(xPe,"lowerCaseEntries");function vPe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):xPe(t)[e.toLocaleLowerCase()]}s(vPe,"getHeaderByName");function Vae(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Vae,"buildHeadersFromArray");function bPe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Vae(e)),t.headers(e?xPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=vPe(e,r);if(!ay(n,i))return!1}return!0}s(bPe,"matchHeaders");function CPe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(CPe,"safeUrl");function ZIt(t,{path:e,method:r,body:n,headers:i}){let o=ay(t.path,e),a=ay(t.method,r),l=typeof t.body<"u"?ay(t.body,n):!0,c=bPe(t,i);return o&&a&&l&&c}s(ZIt,"matchKey");function EPe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(EPe,"getResponseData");function IPe(t,e){let r=e.query?KIt(e.path,e.query):e.path,n=typeof r=="string"?CPe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ay(CPe(o),n));if(i.length===0)throw new k2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>ay(o,e.method)),i.length===0)throw new k2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ay(o,e.body):!0),i.length===0)throw new k2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>bPe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new k2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(IPe,"getMockDispatch");function e2t(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(e2t,"addMockDispatch");function Hae(t,e){let r=t.findIndex(n=>n.consumed?ZIt(n,e):!1);r!==-1&&t.splice(r,1)}s(Hae,"deleteMockDispatch");function TPe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(TPe,"buildKey");function jae(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)r.push(a,Buffer.from(`${o[l]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(jae,"generateKeyValues");function wPe(t){return JIt[t]||"unknown"}s(wPe,"getStatusText");async function t2t(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(t2t,"getResponse");function _Pe(t,e){let r=TPe(t),n=IPe(this[LW],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!d&&p>=m,n.pending=p<m,c!==null)return Hae(this[LW],r),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[LW])},u):h(this[LW]);function h(y,v=o){let b=Array.isArray(t.headers)?Vae(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(XIt(E)){E.then(N=>h(y,N));return}let _=EPe(E),k=jae(a),B=jae(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,wPe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(B),Hae(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(_Pe,"mockDispatch");function r2t(){let t=this[VIt],e=this[zIt],r=this[$It];return s(function(i,o){if(t.isMockActive)try{_Pe.call(this,i,o)}catch(a){if(a instanceof k2){let l=t[YIt]();if(l===!1)throw new k2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(SPe(l,e))r.call(this,i,o);else throw new k2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(r2t,"buildMockDispatch");function SPe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>ay(n,r.host)))}s(SPe,"checkNetConnect");function n2t(t){if(t){let{agent:e,...r}=t;return r}}s(n2t,"buildMockOptions");RPe.exports={getResponseData:EPe,getMockDispatch:IPe,addMockDispatch:e2t,deleteMockDispatch:Hae,buildKey:TPe,generateKeyValues:jae,matchValue:ay,getResponse:t2t,getStatusText:wPe,mockDispatch:_Pe,buildMockDispatch:r2t,checkNetConnect:SPe,buildMockOptions:n2t,getHeaderByName:vPe,buildHeadersFromArray:Vae}});var Zae=G((HJr,Xae)=>{"use strict";f();var{getResponseData:i2t,buildKey:o2t,addMockDispatch:$ae}=uP(),{kDispatches:FW,kDispatchKey:MW,kDefaultHeaders:zae,kDefaultTrailers:Yae,kContentLength:Kae,kMockDispatch:QW}=g4(),{InvalidArgumentError:Hg}=yo(),{buildURL:s2t}=yi(),A4=class{static{s(this,"MockScope")}constructor(e){this[QW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Hg("waitInMs must be a valid integer > 0");return this[QW].delay=e,this}persist(){return this[QW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Hg("repeatTimes must be a valid integer > 0");return this[QW].times=e,this}},Jae=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new Hg("opts must be an object");if(typeof e.path>"u")throw new Hg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=s2t(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[MW]=o2t(e),this[FW]=r,this[zae]={},this[Yae]={},this[Kae]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=i2t(r),o=this[Kae]?{"content-length":i.length}:{},a={...this[zae],...o,...n.headers},l={...this[Yae],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Hg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Hg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new Hg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=$ae(this[FW],this[MW],o);return new A4(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=$ae(this[FW],this[MW],n);return new A4(i)}replyWithError(e){if(typeof e>"u")throw new Hg("error must be defined");let r=$ae(this[FW],this[MW],{error:e});return new A4(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new Hg("headers must be defined");return this[zae]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Hg("trailers must be defined");return this[Yae]=e,this}replyContentLength(){return this[Kae]=!0,this}};Xae.exports.MockInterceptor=Jae;Xae.exports.MockScope=A4});var rle=G(($Jr,FPe)=>{"use strict";f();var{promisify:a2t}=require("node:util"),l2t=XD(),{buildMockDispatch:c2t}=uP(),{kDispatches:kPe,kMockAgent:BPe,kClose:DPe,kOriginalClose:PPe,kOrigin:NPe,kOriginalDispatch:u2t,kConnected:ele}=g4(),{MockInterceptor:d2t}=Zae(),LPe=Os(),{InvalidArgumentError:f2t}=yo(),tle=class extends l2t{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new f2t("Argument opts.agent must implement Agent");this[BPe]=r.agent,this[NPe]=e,this[kPe]=[],this[ele]=1,this[u2t]=this.dispatch,this[PPe]=this.close.bind(this),this.dispatch=c2t.call(this),this.close=this[DPe]}get[LPe.kConnected](){return this[ele]}intercept(e){return new d2t(e,this[kPe])}async[DPe](){await a2t(this[PPe])(),this[ele]=0,this[BPe][LPe.kClients].delete(this[NPe])}};FPe.exports=tle});var ole=G((KJr,GPe)=>{"use strict";f();var{promisify:p2t}=require("node:util"),m2t=l4(),{buildMockDispatch:h2t}=uP(),{kDispatches:MPe,kMockAgent:QPe,kClose:OPe,kOriginalClose:UPe,kOrigin:qPe,kOriginalDispatch:g2t,kConnected:nle}=g4(),{MockInterceptor:A2t}=Zae(),WPe=Os(),{InvalidArgumentError:y2t}=yo(),ile=class extends m2t{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new y2t("Argument opts.agent must implement Agent");this[QPe]=r.agent,this[qPe]=e,this[MPe]=[],this[nle]=1,this[g2t]=this.dispatch,this[UPe]=this.close.bind(this),this.dispatch=h2t.call(this),this.close=this[OPe]}get[WPe.kConnected](){return this[nle]}intercept(e){return new A2t(e,this[MPe])}async[OPe](){await p2t(this[UPe])(),this[nle]=0,this[QPe][WPe.kClients].delete(this[qPe])}};GPe.exports=ile});var jPe=G((eXr,HPe)=>{"use strict";f();var C2t={pronoun:"it",is:"is",was:"was",this:"this"},x2t={pronoun:"they",is:"are",was:"were",this:"these"};HPe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?C2t:x2t,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var $Pe=G((iXr,VPe)=>{"use strict";f();var{Transform:v2t}=require("node:stream"),{Console:b2t}=require("node:console"),E2t=process.versions.icu?"\u2705":"Y ",I2t=process.versions.icu?"\u274C":"N ";VPe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new v2t({transform(r,n,i){i(null,r)}}),this.logger=new b2t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?E2t:I2t,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(r),this.transform.read().toString()}}});var JPe=G((aXr,KPe)=>{"use strict";f();var{kClients:B2}=Os(),T2t=c4(),{kAgent:sle,kMockAgentSet:OW,kMockAgentGet:zPe,kDispatches:ale,kIsMockActive:UW,kNetConnect:D2,kGetNetConnect:w2t,kOptions:qW,kFactory:WW}=g4(),_2t=rle(),S2t=ole(),{matchValue:R2t,buildMockOptions:k2t}=uP(),{InvalidArgumentError:YPe,UndiciError:B2t}=yo(),D2t=kD(),P2t=jPe(),N2t=$Pe(),lle=class extends D2t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[D2]=!0,this[UW]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new YPe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new T2t(e);this[sle]=r,this[B2]=r[B2],this[qW]=k2t(e)}get(e){let r=this[zPe](e);return r||(r=this[WW](e),this[OW](e,r)),r}dispatch(e,r){return this.get(e.origin),this[sle].dispatch(e,r)}async close(){await this[sle].close(),this[B2].clear()}deactivate(){this[UW]=!1}activate(){this[UW]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[D2])?this[D2].push(e):this[D2]=[e];else if(typeof e>"u")this[D2]=!0;else throw new YPe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[D2]=!1}get isMockActive(){return this[UW]}[OW](e,r){this[B2].set(e,r)}[WW](e){let r=Object.assign({agent:this},this[qW]);return this[qW]&&this[qW].connections===1?new _2t(e,r):new S2t(e,r)}[zPe](e){let r=this[B2].get(e);if(r)return r;if(typeof e!="string"){let n=this[WW]("http://localhost:9999");return this[OW](e,n),n}for(let[n,i]of Array.from(this[B2]))if(i&&typeof n!="string"&&R2t(n,e)){let o=this[WW](e);return this[OW](e,o),o[ale]=i[ale],o}}[w2t](){return this[D2]}pendingInterceptors(){let e=this[B2];return Array.from(e.entries()).flatMap(([r,n])=>n[ale].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new N2t}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new P2t("interceptor","interceptors").pluralize(r.length);throw new B2t(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};KPe.exports=lle});var GW=G((uXr,t9e)=>{"use strict";f();var XPe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:L2t}=yo(),F2t=c4();e9e()===void 0&&ZPe(new F2t);function ZPe(t){if(!t||typeof t.dispatch!="function")throw new L2t("Argument agent must implement Agent");Object.defineProperty(globalThis,XPe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(ZPe,"setGlobalDispatcher");function e9e(){return globalThis[XPe]}s(e9e,"getGlobalDispatcher");t9e.exports={setGlobalDispatcher:ZPe,getGlobalDispatcher:e9e}});var HW=G((mXr,r9e)=>{"use strict";f();r9e.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var i9e=G((AXr,n9e)=>{"use strict";f();var M2t=vW();n9e.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return r(i,o);let c=new M2t(r,a,i,o);return r(l,c)},"redirectInterceptor")}});var s9e=G((xXr,o9e)=>{"use strict";f();var Q2t=PW();o9e.exports=t=>e=>s(function(n,i){return e(n,new Q2t({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var l9e=G((EXr,a9e)=>{"use strict";f();var O2t=yi(),{InvalidArgumentError:U2t,RequestAbortedError:q2t}=yo(),W2t=HW(),cle=class extends W2t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new U2t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=O2t.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new q2t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function G2t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new cle({maxSize:o},i);return e(n,a)},"Intercept")}s(G2t,"createDumpInterceptor");a9e.exports=G2t});var d9e=G((wXr,u9e)=>{"use strict";f();var{isIP:H2t}=require("node:net"),{lookup:j2t}=require("node:dns"),V2t=HW(),{InvalidArgumentError:y4,InformationalError:$2t}=yo(),c9e=Math.pow(2,31)-1,ule=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){n(a??new $2t("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#n(e,r,n){j2t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,l;if(this.dualStack?(n==null&&(a==null||a===c9e?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?l=o[n]:l=o[n===4?6:4]):l=o[n],l==null||l.ips.length===0)return i;l.offset==null||l.offset===c9e?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new dle(this,e,r)}},dle=class extends V2t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};u9e.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new y4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new y4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new y4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new y4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new y4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new y4("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new ule(n);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return H2t(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var P2=G((RXr,y9e)=>{"use strict";f();var{kConstruct:z2t}=Os(),{kEnumerableProperty:C4}=yi(),{iteratorMixin:Y2t,isValidHeaderName:dP,isValidHeaderValue:p9e}=R0(),{webidl:Zi}=Ac(),fle=require("node:assert"),jW=require("node:util"),tl=Symbol("headers map"),D0=Symbol("headers map sorted");function f9e(t){return t===10||t===13||t===9||t===32}s(f9e,"isHTTPWhiteSpaceCharCode");function m9e(t){let e=0,r=t.length;for(;r>e&&f9e(t.charCodeAt(r-1));)--r;for(;r>e&&f9e(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(m9e,"headerValueNormalize");function h9e(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Zi.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});ple(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)ple(t,r[n],e[r[n]])}else throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(h9e,"fill");function ple(t,e,r){if(r=m9e(r),dP(e)){if(!p9e(r))throw Zi.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(A9e(t)==="immutable")throw new TypeError("immutable");return mle(t).append(e,r,!1)}s(ple,"appendHeader");function g9e(t,e){return t[0]<e[0]?-1:1}s(g9e,"compareHeaderName");var VW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[tl]=new Map(e[tl]),this[D0]=e[D0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[tl]=new Map(e),this[D0]=null)}contains(e,r){return this[tl].has(r?e:e.toLowerCase())}clear(){this[tl].clear(),this[D0]=null,this.cookies=null}append(e,r,n){this[D0]=null;let i=n?e:e.toLowerCase(),o=this[tl].get(i);if(o){let a=i==="cookie"?"; ":", ";this[tl].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[tl].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[D0]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[tl].set(i,{name:e,value:r})}delete(e,r){this[D0]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[tl].delete(e)}get(e,r){return this[tl].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[tl])yield[e,r]}get entries(){let e={};if(this[tl].size!==0)for(let{name:r,value:n}of this[tl].values())e[r]=n;return e}rawValues(){return this[tl].values()}get entriesList(){let e=[];if(this[tl].size!==0)for(let{0:r,1:{name:n,value:i}}of this[tl])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[tl].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[tl][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],fle(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=n.next().value,d=r[o]=[p[0],p[1].value],fle(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),r[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)r[a]=r[--a];r[c]=d}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[tl])r[n++]=[i,o],fle(o!==null);return r.sort(g9e)}}},jm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Zi.util.markAsUncloneable(this),e!==z2t&&(this.#t=new VW,this.#e="none",e!==void 0&&(e=Zi.converters.HeadersInit(e,"Headers contructor","init"),h9e(this,e)))}append(e,r){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Zi.converters.ByteString(e,n,"name"),r=Zi.converters.ByteString(r,n,"value"),ple(this,e,r)}delete(e){if(Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.delete"),e=Zi.converters.ByteString(e,"Headers.delete","name"),!dP(e))throw Zi.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Zi.converters.ByteString(e,r,"name"),!dP(e))throw Zi.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Zi.converters.ByteString(e,r,"name"),!dP(e))throw Zi.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Zi.converters.ByteString(e,n,"name"),r=Zi.converters.ByteString(r,n,"value"),r=m9e(r),dP(e)){if(!p9e(r))throw Zi.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Zi.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[D0](){if(this.#t[D0])return this.#t[D0];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[D0]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let l=0;l<n.length;++l)e.push([o,n[l]]);else e.push([o,a])}return this.#t[D0]=e}[jW.inspect.custom](e,r){return r.depth??=e,`Headers ${jW.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:A9e,setHeadersGuard:K2t,getHeadersList:mle,setHeadersList:J2t}=jm;Reflect.deleteProperty(jm,"getHeadersGuard");Reflect.deleteProperty(jm,"setHeadersGuard");Reflect.deleteProperty(jm,"getHeadersList");Reflect.deleteProperty(jm,"setHeadersList");Y2t("Headers",jm,D0,0,1);Object.defineProperties(jm.prototype,{append:C4,delete:C4,get:C4,has:C4,set:C4,getSetCookie:C4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[jW.inspect.custom]:{enumerable:!1}});Zi.converters.HeadersInit=function(t,e,r){if(Zi.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!jW.types.isProxy(t)&&n===jm.prototype.entries)try{return mle(t).entriesList}catch{}return typeof n=="function"?Zi.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Zi.converters["record<ByteString, ByteString>"](t,e,r)}throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};y9e.exports={fill:h9e,compareHeaderName:g9e,Headers:jm,HeadersList:VW,getHeadersGuard:A9e,setHeadersGuard:K2t,setHeadersList:J2t,getHeadersList:mle}});var pP=G((DXr,S9e)=>{"use strict";f();var{Headers:I9e,HeadersList:C9e,fill:X2t,getHeadersGuard:Z2t,setHeadersGuard:T9e,setHeadersList:w9e}=P2(),{extractBody:x9e,cloneBody:eTt,mixinBody:tTt,hasFinalizationRegistry:rTt,streamRegistry:nTt,bodyUnusable:iTt}=t4(),hle=yi(),v9e=require("node:util"),{kEnumerableProperty:P0}=hle,{isValidReasonPhrase:oTt,isCancelled:sTt,isAborted:aTt,isBlobLike:lTt,serializeJavascriptValueToJSONString:cTt,isErrorLike:uTt,isomorphicEncode:dTt,environmentSettingsObject:fTt}=R0(),{redirectStatusSet:pTt,nullBodyStatus:mTt}=PD(),{kState:fa,kHeaders:ly}=Rv(),{webidl:si}=Ac(),{FormData:hTt}=OD(),{URLSerializer:b9e}=_d(),{kConstruct:zW}=Os(),gle=require("node:assert"),{types:gTt}=require("node:util"),ATt=new TextEncoder("utf-8"),N2=class t{static{s(this,"Response")}static error(){return fP(YW(),"immutable")}static json(e,r={}){si.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=si.converters.ResponseInit(r));let n=ATt.encode(cTt(e)),i=x9e(n),o=fP(x4({}),"response");return E9e(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){si.argumentLengthCheck(arguments,1,"Response.redirect"),e=si.converters.USVString(e),r=si.converters["unsigned short"](r);let n;try{n=new URL(e,fTt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!pTt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=fP(x4({}),"immutable");i[fa].status=r;let o=dTt(b9e(n));return i[fa].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(si.util.markAsUncloneable(this),e===zW)return;e!==null&&(e=si.converters.BodyInit(e)),r=si.converters.ResponseInit(r),this[fa]=x4({}),this[ly]=new I9e(zW),T9e(this[ly],"response"),w9e(this[ly],this[fa].headersList);let n=null;if(e!=null){let[i,o]=x9e(e);n={body:i,type:o}}E9e(this,r,n)}get type(){return si.brandCheck(this,t),this[fa].type}get url(){si.brandCheck(this,t);let e=this[fa].urlList,r=e[e.length-1]??null;return r===null?"":b9e(r,!0)}get redirected(){return si.brandCheck(this,t),this[fa].urlList.length>1}get status(){return si.brandCheck(this,t),this[fa].status}get ok(){return si.brandCheck(this,t),this[fa].status>=200&&this[fa].status<=299}get statusText(){return si.brandCheck(this,t),this[fa].statusText}get headers(){return si.brandCheck(this,t),this[ly]}get body(){return si.brandCheck(this,t),this[fa].body?this[fa].body.stream:null}get bodyUsed(){return si.brandCheck(this,t),!!this[fa].body&&hle.isDisturbed(this[fa].body.stream)}clone(){if(si.brandCheck(this,t),iTt(this))throw si.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=Ale(this[fa]);return fP(e,Z2t(this[ly]))}[v9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${v9e.formatWithOptions(r,n)}`}};tTt(N2);Object.defineProperties(N2.prototype,{type:P0,url:P0,status:P0,ok:P0,redirected:P0,statusText:P0,headers:P0,clone:P0,body:P0,bodyUsed:P0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(N2,{json:P0,redirect:P0,error:P0});function Ale(t){if(t.internalResponse)return _9e(Ale(t.internalResponse),t.type);let e=x4({...t,body:null});return t.body!=null&&(e.body=eTt(e,t.body)),e}s(Ale,"cloneResponse");function x4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new C9e(t?.headersList):new C9e,urlList:t?.urlList?[...t.urlList]:[]}}s(x4,"makeResponse");function YW(t){let e=uTt(t);return x4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(YW,"makeNetworkError");function yTt(t){return t.type==="error"&&t.status===0}s(yTt,"isNetworkError");function $W(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return gle(!(n in e)),r[n]=i,!0}})}s($W,"makeFilteredResponse");function _9e(t,e){if(e==="basic")return $W(t,{type:"basic",headersList:t.headersList});if(e==="cors")return $W(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return $W(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return $W(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});gle(!1)}s(_9e,"filterResponse");function CTt(t,e=null){return gle(sTt(t)),aTt(t)?YW(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):YW(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(CTt,"makeAppropriateNetworkError");function E9e(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!oTt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[fa].status=e.status),"statusText"in e&&e.statusText!=null&&(t[fa].statusText=e.statusText),"headers"in e&&e.headers!=null&&X2t(t[ly],e.headers),r){if(mTt.includes(t.status))throw si.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[fa].body=r.body,r.type!=null&&!t[fa].headersList.contains("content-type",!0)&&t[fa].headersList.append("content-type",r.type,!0)}}s(E9e,"initializeResponse");function fP(t,e){let r=new N2(zW);return r[fa]=t,r[ly]=new I9e(zW),w9e(r[ly],t.headersList),T9e(r[ly],e),rTt&&t.body?.stream&&nTt.register(r,new WeakRef(t.body.stream)),r}s(fP,"fromInnerResponse");si.converters.ReadableStream=si.interfaceConverter(ReadableStream);si.converters.FormData=si.interfaceConverter(hTt);si.converters.URLSearchParams=si.interfaceConverter(URLSearchParams);si.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?si.converters.USVString(t,e,r):lTt(t)?si.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||gTt.isArrayBuffer(t)?si.converters.BufferSource(t,e,r):hle.isFormDataLike(t)?si.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?si.converters.URLSearchParams(t,e,r):si.converters.DOMString(t,e,r)};si.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?si.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:si.converters.XMLHttpRequestBodyInit(t,e,r)};si.converters.ResponseInit=si.dictionaryConverter([{key:"status",converter:si.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:si.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:si.converters.HeadersInit}]);S9e.exports={isNetworkError:yTt,makeNetworkError:YW,makeResponse:x4,makeAppropriateNetworkError:CTt,filterResponse:_9e,Response:N2,cloneResponse:Ale,fromInnerResponse:fP}});var D9e=G((LXr,B9e)=>{"use strict";f();var{kConnected:R9e,kSize:k9e}=Os(),yle=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[R9e]===0&&this.value[k9e]===0?void 0:this.value}},Cle=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[R9e]===0&&e[k9e]===0&&this.finalizer(r)})}unregister(e){}};B9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:yle,FinalizationRegistry:Cle}):{WeakRef,FinalizationRegistry}}});var v4=G((QXr,$9e)=>{"use strict";f();var{extractBody:xTt,mixinBody:vTt,cloneBody:bTt,bodyUnusable:P9e}=t4(),{Headers:W9e,fill:ETt,HeadersList:ZW,setHeadersGuard:vle,getHeadersGuard:ITt,setHeadersList:G9e,getHeadersList:N9e}=P2(),{FinalizationRegistry:TTt}=D9e()(),JW=yi(),L9e=require("node:util"),{isValidHTTPToken:wTt,sameOrigin:F9e,environmentSettingsObject:KW}=R0(),{forbiddenMethodsSet:_Tt,corsSafeListedMethodsSet:STt,referrerPolicy:RTt,requestRedirect:kTt,requestMode:BTt,requestCredentials:DTt,requestCache:PTt,requestDuplex:NTt}=PD(),{kEnumerableProperty:rl,normalizedMethodRecordsBase:LTt,normalizedMethodRecords:FTt}=JW,{kHeaders:N0,kSignal:XW,kState:vs,kDispatcher:xle}=Rv(),{webidl:En}=Ac(),{URLSerializer:MTt}=_d(),{kConstruct:eG}=Os(),QTt=require("node:assert"),{getMaxListeners:M9e,setMaxListeners:Q9e,getEventListeners:OTt,defaultMaxListeners:O9e}=require("node:events"),UTt=Symbol("abortController"),H9e=new TTt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),tG=new WeakMap;function U9e(t){return e;function e(){let r=t.deref();if(r!==void 0){H9e.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=tG.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}tG.delete(r.signal)}}}}s(U9e,"buildAbort");var q9e=!1,Uv=class t{static{s(this,"Request")}constructor(e,r={}){if(En.util.markAsUncloneable(this),e===eG)return;let n="Request constructor";En.argumentLengthCheck(arguments,1,n),e=En.converters.RequestInfo(e,n,"input"),r=En.converters.RequestInit(r,n,"init");let i=null,o=null,a=KW.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[xle]=r.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=rG({urlList:[b]}),o="cors"}else this[xle]=r.dispatcher||e[xle],QTt(e instanceof t),i=e[vs],l=e[XW];let c=KW.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&F9e(i.window,c)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=rG({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:KW.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(r).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let b=r.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!F9e(E,KW.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw En.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let b=r.method,E=FTt[b];if(E!==void 0)i.method=E;else{if(!wTt(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(_Tt.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=LTt[_]??b,i.method=b}!q9e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),q9e=!0)}r.signal!==void 0&&(l=r.signal),this[vs]=i;let m=new AbortController;if(this[XW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[UTt]=m;let b=new WeakRef(m),E=U9e(b);try{(typeof M9e=="function"&&M9e(l)===O9e||OTt(l,"abort").length>=O9e)&&Q9e(1500,l)}catch{}JW.addAbortListener(l,E),H9e.register(m,{signal:l,abort:E},E)}}if(this[N0]=new W9e(eG),G9e(this[N0],i.headersList),vle(this[N0],"request"),p==="no-cors"){if(!STt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);vle(this[N0],"request-no-cors")}if(d){let b=N9e(this[N0]),E=r.headers!==void 0?r.headers:new ZW(b);if(b.clear(),E instanceof ZW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else ETt(this[N0],E)}let h=e instanceof t?e[vs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[b,E]=xTt(r.body,i.keepalive);g=b,E&&!N9e(this[N0]).contains("content-type",!0)&&this[N0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(P9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[vs].body=v}get method(){return En.brandCheck(this,t),this[vs].method}get url(){return En.brandCheck(this,t),MTt(this[vs].url)}get headers(){return En.brandCheck(this,t),this[N0]}get destination(){return En.brandCheck(this,t),this[vs].destination}get referrer(){return En.brandCheck(this,t),this[vs].referrer==="no-referrer"?"":this[vs].referrer==="client"?"about:client":this[vs].referrer.toString()}get referrerPolicy(){return En.brandCheck(this,t),this[vs].referrerPolicy}get mode(){return En.brandCheck(this,t),this[vs].mode}get credentials(){return this[vs].credentials}get cache(){return En.brandCheck(this,t),this[vs].cache}get redirect(){return En.brandCheck(this,t),this[vs].redirect}get integrity(){return En.brandCheck(this,t),this[vs].integrity}get keepalive(){return En.brandCheck(this,t),this[vs].keepalive}get isReloadNavigation(){return En.brandCheck(this,t),this[vs].reloadNavigation}get isHistoryNavigation(){return En.brandCheck(this,t),this[vs].historyNavigation}get signal(){return En.brandCheck(this,t),this[XW]}get body(){return En.brandCheck(this,t),this[vs].body?this[vs].body.stream:null}get bodyUsed(){return En.brandCheck(this,t),!!this[vs].body&&JW.isDisturbed(this[vs].body.stream)}get duplex(){return En.brandCheck(this,t),"half"}clone(){if(En.brandCheck(this,t),P9e(this))throw new TypeError("unusable");let e=j9e(this[vs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=tG.get(this.signal);n===void 0&&(n=new Set,tG.set(this.signal,n));let i=new WeakRef(r);n.add(i),JW.addAbortListener(r.signal,U9e(i))}return V9e(e,r.signal,ITt(this[N0]))}[L9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${L9e.formatWithOptions(r,n)}`}};vTt(Uv);function rG(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new ZW(t.headersList):new ZW}}s(rG,"makeRequest");function j9e(t){let e=rG({...t,body:null});return t.body!=null&&(e.body=bTt(e,t.body)),e}s(j9e,"cloneRequest");function V9e(t,e,r){let n=new Uv(eG);return n[vs]=t,n[XW]=e,n[N0]=new W9e(eG),G9e(n[N0],t.headersList),vle(n[N0],r),n}s(V9e,"fromInnerRequest");Object.defineProperties(Uv.prototype,{method:rl,url:rl,headers:rl,redirect:rl,clone:rl,signal:rl,duplex:rl,destination:rl,body:rl,bodyUsed:rl,isHistoryNavigation:rl,isReloadNavigation:rl,keepalive:rl,integrity:rl,cache:rl,credentials:rl,attribute:rl,referrerPolicy:rl,referrer:rl,mode:rl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});En.converters.Request=En.interfaceConverter(Uv);En.converters.RequestInfo=function(t,e,r){return typeof t=="string"?En.converters.USVString(t,e,r):t instanceof Uv?En.converters.Request(t,e,r):En.converters.USVString(t,e,r)};En.converters.AbortSignal=En.interfaceConverter(AbortSignal);En.converters.RequestInit=En.dictionaryConverter([{key:"method",converter:En.converters.ByteString},{key:"headers",converter:En.converters.HeadersInit},{key:"body",converter:En.nullableConverter(En.converters.BodyInit)},{key:"referrer",converter:En.converters.USVString},{key:"referrerPolicy",converter:En.converters.DOMString,allowedValues:RTt},{key:"mode",converter:En.converters.DOMString,allowedValues:BTt},{key:"credentials",converter:En.converters.DOMString,allowedValues:DTt},{key:"cache",converter:En.converters.DOMString,allowedValues:PTt},{key:"redirect",converter:En.converters.DOMString,allowedValues:kTt},{key:"integrity",converter:En.converters.DOMString},{key:"keepalive",converter:En.converters.boolean},{key:"signal",converter:En.nullableConverter(t=>En.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:En.converters.any},{key:"duplex",converter:En.converters.DOMString,allowedValues:NTt},{key:"dispatcher",converter:En.converters.any}]);$9e.exports={Request:Uv,makeRequest:rG,fromInnerRequest:V9e,cloneRequest:j9e}});var hP=G((qXr,l6e)=>{"use strict";f();var{makeNetworkError:No,makeAppropriateNetworkError:nG,filterResponse:ble,makeResponse:iG,fromInnerResponse:qTt}=pP(),{HeadersList:z9e}=P2(),{Request:WTt,cloneRequest:GTt}=v4(),qv=require("node:zlib"),{bytesMatch:HTt,makePolicyContainer:jTt,clonePolicyContainer:VTt,requestBadPort:$Tt,TAOCheck:zTt,appendRequestOriginHeader:YTt,responseLocationURL:KTt,requestCurrentURL:jg,setRequestReferrerPolicyOnRedirect:JTt,tryUpgradeRequestToAPotentiallyTrustworthyURL:XTt,createOpaqueTimingInfo:_le,appendFetchMetadata:ZTt,corsCheck:ewt,crossOriginResourcePolicyCheck:twt,determineRequestsReferrer:rwt,coarsenedSharedCurrentTime:mP,createDeferredPromise:nwt,isBlobLike:iwt,sameOrigin:wle,isCancelled:L2,isAborted:Y9e,isErrorLike:owt,fullyReadBody:swt,readableStreamClose:awt,isomorphicEncode:oG,urlIsLocal:lwt,urlIsHttpHttpsScheme:Sle,urlHasHttpsScheme:cwt,clampAndCoarsenConnectionTimingInfo:uwt,simpleRangeHeaderValue:dwt,buildContentRange:fwt,createInflate:pwt,extractMimeType:mwt}=R0(),{kState:Z9e,kDispatcher:hwt}=Rv(),F2=require("node:assert"),{safelyExtractBody:Rle,extractBody:K9e}=t4(),{redirectStatusSet:e6e,nullBodyStatus:t6e,safeMethodsSet:gwt,requestBodyHeader:Awt,subresourceSet:ywt}=PD(),Cwt=require("node:events"),{Readable:xwt,pipeline:vwt,finished:bwt}=require("node:stream"),{addAbortListener:Ewt,isErrored:Iwt,isReadable:sG,bufferToLowerCasedHeaderName:J9e}=yi(),{dataURLProcessor:Twt,serializeAMimeType:wwt,minimizeSupportedMimeType:_wt}=_d(),{getGlobalDispatcher:Swt}=GW(),{webidl:Rwt}=Ac(),{STATUS_CODES:kwt}=require("node:http"),Bwt=["GET","HEAD"],Dwt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",Ele,aG=class extends Cwt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Pwt(t){r6e(t,"fetch")}s(Pwt,"handleFetchDone");function Nwt(t,e=void 0){Rwt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=nwt(),n;try{n=new WTt(t,e)}catch(d){return r.reject(d),r.promise}let i=n[Z9e];if(n.signal.aborted)return Ile(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return Ewt(n.signal,()=>{l=!0,F2(c!=null),c.abort(n.signal.reason);let d=a?.deref();Ile(r,i,d,n.signal.reason)}),c=i6e({request:i,processResponseEndOfBody:Pwt,processResponse:s(d=>{if(!l){if(d.aborted){Ile(r,i,a,c.serializedAbortReason);return}if(d.type==="error"){r.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(qTt(d,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[hwt]}),r.promise}s(Nwt,"fetch");function r6e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;Sle(r)&&n!==null&&(t.timingAllowPassed||(n=_le({startTime:n.startTime}),i=""),n.endTime=mP(),t.timingInfo=n,n6e(n,r.href,e,globalThis,i))}s(r6e,"finalizeAndReportTiming");var n6e=performance.markResourceTiming;function Ile(t,e,r,n){if(t&&t.reject(n),e.body!=null&&sG(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[Z9e];i.body!=null&&sG(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(Ile,"abortFetch");function i6e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=Swt()}){F2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=mP(u),p=_le({startTime:d}),m={controller:new aG(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return F2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=VTt(t.client.policyContainer):t.policyContainer=jTt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,ywt.has(t.destination),o6e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(i6e,"fetching");async function o6e(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!lwt(jg(r))&&(n=No("local URLs only")),XTt(r),$Tt(r)==="blocked"&&(n=No("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=rwt(r)),n===null&&(n=await(async()=>{let o=jg(r);return wle(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await X9e(t)):r.mode==="same-origin"?No('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?No('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await X9e(t)):Sle(jg(r))?(r.responseTainting="cors",await s6e(t)):No("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=ble(n,"basic"):r.responseTainting==="cors"?n=ble(n,"cors"):r.responseTainting==="opaque"?n=ble(n,"opaque"):F2(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=No()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||t6e.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(l=>Tle(t,No(l)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(l=>{if(!HTt(l,r.integrity)){o("integrity mismatch");return}n.body=Rle(l)[0],Tle(t,n)},"processBody");await swt(n.body,a,o)}else Tle(t,n)}s(o6e,"mainFetch");function X9e(t){if(L2(t)&&t.request.redirectCount===0)return Promise.resolve(nG(t));let{request:e}=t,{protocol:r}=jg(e);switch(r){case"about:":return Promise.resolve(No("about scheme is not supported"));case"blob:":{Ele||(Ele=require("node:buffer").resolveObjectURL);let n=jg(e);if(n.search.length!==0)return Promise.resolve(No("NetworkError when attempting to fetch resource."));let i=Ele(n.toString());if(e.method!=="GET"||!iwt(i))return Promise.resolve(No("invalid method"));let o=iG(),a=i.size,l=oG(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=dwt(u,!0);if(d==="failure")return Promise.resolve(No("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(No("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=K9e(h);o.body=g[0];let y=oG(`${h.size}`),v=fwt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=K9e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let n=jg(e),i=Twt(n);if(i==="failure")return Promise.resolve(No("failed to fetch the data URL"));let o=wwt(i.mimeType);return Promise.resolve(iG({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:Rle(i.body)[0]}))}case"file:":return Promise.resolve(No("not implemented... yet..."));case"http:":case"https:":return s6e(t).catch(n=>No(n));default:return Promise.resolve(No("unknown scheme"))}}s(X9e,"schemeFetch");function Lwt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Lwt,"finalizeResponse");function Tle(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(r=_le(r),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=mwt(e.headersList);d!=="failure"&&(c.contentType=_wt(d))}t.request.initiatorType!=null&&n6e(r,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():bwt(i.body.stream,()=>{n()})}s(Tle,"fetchFinale");async function s6e(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await a6e(t),e.responseTainting==="cors"&&ewt(e,r)==="failure")return No("cors failure");zTt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&twt(e.origin,e.client,e.destination,n)==="blocked"?No("blocked"):(e6e.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=No("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await Fwt(t,r):F2(!1)),r.timingInfo=i,r)}s(s6e,"httpFetch");function Fwt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=KTt(n,jg(r).hash),i==null)return e}catch(a){return Promise.resolve(No(a))}if(!Sle(i))return Promise.resolve(No("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(No("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!wle(r,i))return Promise.resolve(No('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(No('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(No());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!Bwt.includes(r.method)){r.method="GET",r.body=null;for(let a of Awt)r.headersList.delete(a)}wle(jg(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(F2(r.body.source!=null),r.body=Rle(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=mP(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),JTt(r,n),o6e(t,!0)}s(Fwt,"httpRedirectFetch");async function a6e(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,l=null,c=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=GTt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=oG(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",oG(o.referrer.href),!0),YTt(o),ZTt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Dwt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(cwt(jg(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return No("only if cached");let m=await Mwt(i,u,r);!gwt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?No():L2(t)?nG(t):No("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(L2(t))return nG(t);t.controller.connection.destroy(),a=await a6e(t,e,!0)}return a}s(a6e,"httpNetworkOrCacheFetch");async function Mwt(t,e=!1,r=!1){F2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let l=r?"yes":"no";n.mode;let c=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(b){L2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{L2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{L2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of n.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=iG({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=iG({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),nG(t,g)):No(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{L2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(Y9e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){awt(t.controller.controller),Lwt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),Iwt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){Y9e(t)?(i.aborted=!0,sG(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):sG(p)&&t.controller.controller.error(new TypeError("terminated",{cause:owt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=jg(n),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=uwt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=mP(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=mP(t.crossOriginIsolatedCapability)},onHeaders(_,k,B,N){if(_<200)return;let W=[],ee="",me=new z9e;for(let ie=0;ie<k.length;ie+=2)me.append(J9e(k[ie]),k[ie+1].toString("latin1"),!0);let ae=me.get("content-encoding",!0);ae&&(W=ae.toLowerCase().split(",").map(ie=>ie.trim())),ee=me.get("location",!0),this.body=new xwt({read:B});let H=[],O=ee&&n.redirect==="follow"&&e6e.has(_);if(W.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!t6e.includes(_)&&!O)for(let ie=W.length-1;ie>=0;--ie){let j=W[ie];if(j==="x-gzip"||j==="gzip")H.push(qv.createGunzip({flush:qv.constants.Z_SYNC_FLUSH,finishFlush:qv.constants.Z_SYNC_FLUSH}));else if(j==="deflate")H.push(pwt({flush:qv.constants.Z_SYNC_FLUSH,finishFlush:qv.constants.Z_SYNC_FLUSH}));else if(j==="br")H.push(qv.createBrotliDecompress({flush:qv.constants.BROTLI_OPERATION_FLUSH,finishFlush:qv.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let le=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?vwt(this.body,...H,ie=>{ie&&this.onError(ie)}).on("error",le):this.body.on("error",le)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,B){if(_!==101)return;let N=new z9e;for(let W=0;W<k.length;W+=2)N.append(J9e(k[W]),k[W+1].toString("latin1"),!0);return b({status:_,statusText:kwt[_],headersList:N,socket:B}),!0}}))}s(h,"dispatch")}s(Mwt,"httpNetworkFetch");l6e.exports={fetch:Nwt,Fetch:aG,fetching:i6e,finalizeAndReportTiming:r6e}});var kle=G((HXr,c6e)=>{"use strict";f();c6e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var d6e=G((VXr,u6e)=>{"use strict";f();var{webidl:L0}=Ac(),lG=Symbol("ProgressEvent state"),Ble=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=L0.converters.DOMString(e,"ProgressEvent constructor","type"),r=L0.converters.ProgressEventInit(r??{}),super(e,r),this[lG]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return L0.brandCheck(this,t),this[lG].lengthComputable}get loaded(){return L0.brandCheck(this,t),this[lG].loaded}get total(){return L0.brandCheck(this,t),this[lG].total}};L0.converters.ProgressEventInit=L0.dictionaryConverter([{key:"lengthComputable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);u6e.exports={ProgressEvent:Ble}});var p6e=G((YXr,f6e)=>{"use strict";f();function Qwt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Qwt,"getEncoding");f6e.exports={getEncoding:Qwt}});var v6e=G((XXr,x6e)=>{"use strict";f();var{kState:b4,kError:Dle,kResult:m6e,kAborted:gP,kLastProgressEventFired:Ple}=kle(),{ProgressEvent:Owt}=d6e(),{getEncoding:h6e}=p6e(),{serializeAMimeType:Uwt,parseMIMEType:g6e}=_d(),{types:qwt}=require("node:util"),{StringDecoder:A6e}=require("string_decoder"),{btoa:y6e}=require("node:buffer"),Wwt={enumerable:!0,writable:!1,configurable:!1};function Gwt(t,e,r,n){if(t[b4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[b4]="loading",t[m6e]=null,t[Dle]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[gP];)try{let{done:u,value:d}=await l;if(c&&!t[gP]&&queueMicrotask(()=>{Wv("loadstart",t)}),c=!1,!u&&qwt.isUint8Array(d))a.push(d),(t[Ple]===void 0||Date.now()-t[Ple]>=50)&&!t[gP]&&(t[Ple]=Date.now(),queueMicrotask(()=>{Wv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[b4]="done";try{let p=Hwt(a,r,e.type,n);if(t[gP])return;t[m6e]=p,Wv("load",t)}catch(p){t[Dle]=p,Wv("error",t)}t[b4]!=="loading"&&Wv("loadend",t)});break}}catch(u){if(t[gP])return;queueMicrotask(()=>{t[b4]="done",t[Dle]=u,Wv("error",t),t[b4]!=="loading"&&Wv("loadend",t)});break}})()}s(Gwt,"readOperation");function Wv(t,e){let r=new Owt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(Wv,"fireAProgressEvent");function Hwt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=g6e(r||"application/octet-stream");o!=="failure"&&(i+=Uwt(o)),i+=";base64,";let a=new A6e("latin1");for(let l of t)i+=y6e(a.write(l));return i+=y6e(a.end()),i}case"Text":{let i="failure";if(n&&(i=h6e(n)),i==="failure"&&r){let o=g6e(r);o!=="failure"&&(i=h6e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),jwt(t,i)}case"ArrayBuffer":return C6e(t).buffer;case"BinaryString":{let i="",o=new A6e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(Hwt,"packageData");function jwt(t,e){let r=C6e(t),n=Vwt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(jwt,"decode");function Vwt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(Vwt,"BOMSniffing");function C6e(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(C6e,"combineByteSequences");x6e.exports={staticPropertyDescriptors:Wwt,readOperation:Gwt,fireAProgressEvent:Wv}});var T6e=G((tZr,I6e)=>{"use strict";f();var{staticPropertyDescriptors:E4,readOperation:cG,fireAProgressEvent:b6e}=v6e(),{kState:M2,kError:E6e,kResult:uG,kEvents:Co,kAborted:$wt}=kle(),{webidl:Fo}=Ac(),{kEnumerableProperty:kd}=yi(),Vm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[M2]="empty",this[uG]=null,this[E6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Fo.converters.Blob(e,{strict:!1}),cG(this,e,"ArrayBuffer")}readAsBinaryString(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Fo.converters.Blob(e,{strict:!1}),cG(this,e,"BinaryString")}readAsText(e,r=void 0){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Fo.converters.Blob(e,{strict:!1}),r!==void 0&&(r=Fo.converters.DOMString(r,"FileReader.readAsText","encoding")),cG(this,e,"Text",r)}readAsDataURL(e){Fo.brandCheck(this,t),Fo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Fo.converters.Blob(e,{strict:!1}),cG(this,e,"DataURL")}abort(){if(this[M2]==="empty"||this[M2]==="done"){this[uG]=null;return}this[M2]==="loading"&&(this[M2]="done",this[uG]=null),this[$wt]=!0,b6e("abort",this),this[M2]!=="loading"&&b6e("loadend",this)}get readyState(){switch(Fo.brandCheck(this,t),this[M2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Fo.brandCheck(this,t),this[uG]}get error(){return Fo.brandCheck(this,t),this[E6e]}get onloadend(){return Fo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Fo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Fo.brandCheck(this,t),this[Co].error}set onerror(e){Fo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Fo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Fo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Fo.brandCheck(this,t),this[Co].progress}set onprogress(e){Fo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Fo.brandCheck(this,t),this[Co].load}set onload(e){Fo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Fo.brandCheck(this,t),this[Co].abort}set onabort(e){Fo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};Vm.EMPTY=Vm.prototype.EMPTY=0;Vm.LOADING=Vm.prototype.LOADING=1;Vm.DONE=Vm.prototype.DONE=2;Object.defineProperties(Vm.prototype,{EMPTY:E4,LOADING:E4,DONE:E4,readAsArrayBuffer:kd,readAsBinaryString:kd,readAsText:kd,readAsDataURL:kd,abort:kd,readyState:kd,result:kd,error:kd,onloadstart:kd,onprogress:kd,onload:kd,onabort:kd,onerror:kd,onloadend:kd,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Vm,{EMPTY:E4,LOADING:E4,DONE:E4});I6e.exports={FileReader:Vm}});var dG=G((iZr,w6e)=>{"use strict";f();w6e.exports={kConstruct:Os().kConstruct}});var R6e=G((sZr,S6e)=>{"use strict";f();var zwt=require("node:assert"),{URLSerializer:_6e}=_d(),{isValidHeaderName:Ywt}=R0();function Kwt(t,e,r=!1){let n=_6e(t,r),i=_6e(e,r);return n===i}s(Kwt,"urlEquals");function Jwt(t){zwt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),Ywt(r)&&e.push(r);return e}s(Jwt,"getFieldValues");S6e.exports={urlEquals:Kwt,getFieldValues:Jwt}});var D6e=G((cZr,B6e)=>{"use strict";f();var{kConstruct:Xwt}=dG(),{urlEquals:Zwt,getFieldValues:Nle}=R6e(),{kEnumerableProperty:Q2,isDisturbed:e_t}=yi(),{webidl:Xr}=Ac(),{Response:t_t,cloneResponse:r_t,fromInnerResponse:n_t}=pP(),{Request:cy,fromInnerRequest:i_t}=v4(),{kState:$m}=Rv(),{fetching:o_t}=hP(),{urlIsHttpHttpsScheme:fG,createDeferredPromise:I4,readAllBytes:s_t}=R0(),Lle=require("node:assert"),pG=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==Xwt&&Xr.illegalConstructor(),Xr.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){Xr.brandCheck(this,t);let n="Cache.match";Xr.argumentLengthCheck(arguments,1,n),e=Xr.converters.RequestInfo(e,n,"request"),r=Xr.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){Xr.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=Xr.converters.RequestInfo(e,n,"request")),r=Xr.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){Xr.brandCheck(this,t);let r="Cache.add";Xr.argumentLengthCheck(arguments,1,r),e=Xr.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){Xr.brandCheck(this,t);let r="Cache.addAll";Xr.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw Xr.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Xr.converters.RequestInfo(m),typeof m=="string")continue;let h=m[$m];if(!fG(h.url)||h.method!=="GET")throw Xr.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new cy(m)[$m];if(!fG(h.url))throw Xr.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=I4();o.push(o_t({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Xr.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=Nle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Xr.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let l=await Promise.all(n),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=I4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,r){Xr.brandCheck(this,t);let n="Cache.put";Xr.argumentLengthCheck(arguments,2,n),e=Xr.converters.RequestInfo(e,n,"request"),r=Xr.converters.Response(r,n,"response");let i=null;if(e instanceof cy?i=e[$m]:i=new cy(e)[$m],!fG(i.url)||i.method!=="GET")throw Xr.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[$m];if(o.status===206)throw Xr.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=Nle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Xr.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(e_t(o.body.stream)||o.body.stream.locked))throw Xr.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=r_t(o),l=I4();if(o.body!=null){let g=o.body.stream.getReader();s_t(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=I4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){Xr.brandCheck(this,t);let n="Cache.delete";Xr.argumentLengthCheck(arguments,1,n),e=Xr.converters.RequestInfo(e,n,"request"),r=Xr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return!1}else Lle(typeof e=="string"),i=new cy(e)[$m];let o=[],a={type:"delete",request:i,options:r};o.push(a);let l=I4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,r={}){Xr.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=Xr.converters.RequestInfo(e,n,"request")),r=Xr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[$m]);let o=I4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,r);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=i_t(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=r.indexOf(c);Lle(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!fG(c.url))throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Xr.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=r.indexOf(u);Lle(d!==-1),r.splice(d,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[l,c]=a;this.#n(e,l,c,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!Zwt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let l=Nle(n.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=r.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[$m]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,r);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=n_t(l,"immutable");if(a.push(c.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(pG.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:Q2,matchAll:Q2,add:Q2,addAll:Q2,put:Q2,delete:Q2,keys:Q2});var k6e=[{key:"ignoreSearch",converter:Xr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Xr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Xr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Xr.converters.CacheQueryOptions=Xr.dictionaryConverter(k6e);Xr.converters.MultiCacheQueryOptions=Xr.dictionaryConverter([...k6e,{key:"cacheName",converter:Xr.converters.DOMString}]);Xr.converters.Response=Xr.interfaceConverter(t_t);Xr.converters["sequence<RequestInfo>"]=Xr.sequenceConverter(Xr.converters.RequestInfo);B6e.exports={Cache:pG}});var N6e=G((fZr,P6e)=>{"use strict";f();var{kConstruct:AP}=dG(),{Cache:mG}=D6e(),{webidl:eu}=Ac(),{kEnumerableProperty:yP}=yi(),hG=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==AP&&eu.illegalConstructor(),eu.util.markAsUncloneable(this)}async match(e,r={}){if(eu.brandCheck(this,t),eu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=eu.converters.RequestInfo(e),r=eu.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new mG(AP,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new mG(AP,n).match(e,r);if(o!==void 0)return o}}async has(e){eu.brandCheck(this,t);let r="CacheStorage.has";return eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){eu.brandCheck(this,t);let r="CacheStorage.open";if(eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new mG(AP,i)}let n=[];return this.#e.set(e,n),new mG(AP,n)}async delete(e){eu.brandCheck(this,t);let r="CacheStorage.delete";return eu.argumentLengthCheck(arguments,1,r),e=eu.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return eu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(hG.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:yP,has:yP,open:yP,delete:yP,keys:yP});P6e.exports={CacheStorage:hG}});var F6e=G((hZr,L6e)=>{"use strict";f();L6e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var Fle=G((AZr,q6e)=>{"use strict";f();function a_t(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(a_t,"isCTLExcludingHtab");function M6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(M6e,"validateCookieName");function Q6e(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(Q6e,"validateCookieValue");function O6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(O6e,"validateCookiePath");function l_t(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(l_t,"validateCookieDomain");var c_t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u_t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gG=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function U6e(t){return typeof t=="number"&&(t=new Date(t)),`${c_t[t.getUTCDay()]}, ${gG[t.getUTCDate()]} ${u_t[t.getUTCMonth()]} ${t.getUTCFullYear()} ${gG[t.getUTCHours()]}:${gG[t.getUTCMinutes()]}:${gG[t.getUTCSeconds()]} GMT`}s(U6e,"toIMFDate");function d_t(t){if(t<0)throw new Error("Invalid cookie max-age")}s(d_t,"validateCookieMaxAge");function f_t(t){if(t.name.length===0)return null;M6e(t.name),Q6e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(d_t(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(l_t(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(O6e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${U6e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(f_t,"stringify");q6e.exports={isCTLExcludingHtab:a_t,validateCookieName:M6e,validateCookiePath:O6e,validateCookieValue:Q6e,toIMFDate:U6e,stringify:f_t}});var G6e=G((xZr,W6e)=>{"use strict";f();var{maxNameValuePairSize:p_t,maxAttributeValueSize:m_t}=F6e(),{isCTLExcludingHtab:h_t}=Fle(),{collectASequenceOfCodePointsFast:AG}=_d(),g_t=require("node:assert");function A_t(t){if(h_t(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=AG(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=AG("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>p_t?null:{name:n,value:i,...T4(r)}}s(A_t,"parseSetCookie");function T4(t,e={}){if(t.length===0)return e;g_t(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=AG(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=AG("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>m_t)return T4(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return T4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return T4(t,e)}s(T4,"parseUnparsedAttributes");W6e.exports={parseSetCookie:A_t,parseUnparsedAttributes:T4}});var V6e=G((EZr,j6e)=>{"use strict";f();var{parseSetCookie:y_t}=G6e(),{stringify:C_t}=Fle(),{webidl:Mi}=Ac(),{Headers:yG}=P2();function x_t(t){Mi.argumentLengthCheck(arguments,1,"getCookies"),Mi.brandCheck(t,yG,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(x_t,"getCookies");function v_t(t,e,r){Mi.brandCheck(t,yG,{strict:!1});let n="deleteCookie";Mi.argumentLengthCheck(arguments,2,n),e=Mi.converters.DOMString(e,n,"name"),r=Mi.converters.DeleteCookieAttributes(r),H6e(t,{name:e,value:"",expires:new Date(0),...r})}s(v_t,"deleteCookie");function b_t(t){Mi.argumentLengthCheck(arguments,1,"getSetCookies"),Mi.brandCheck(t,yG,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>y_t(r)):[]}s(b_t,"getSetCookies");function H6e(t,e){Mi.argumentLengthCheck(arguments,2,"setCookie"),Mi.brandCheck(t,yG,{strict:!1}),e=Mi.converters.Cookie(e);let r=C_t(e);r&&t.append("Set-Cookie",r)}s(H6e,"setCookie");Mi.converters.DeleteCookieAttributes=Mi.dictionaryConverter([{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Mi.converters.Cookie=Mi.dictionaryConverter([{converter:Mi.converters.DOMString,key:"name"},{converter:Mi.converters.DOMString,key:"value"},{converter:Mi.nullableConverter(t=>typeof t=="number"?Mi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Mi.sequenceConverter(Mi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);j6e.exports={getCookies:x_t,deleteCookie:v_t,getSetCookies:b_t,setCookie:H6e}});var _4=G((wZr,z6e)=>{"use strict";f();var{webidl:jr}=Ac(),{kEnumerableProperty:Bd}=yi(),{kConstruct:$6e}=Os(),{MessagePort:E_t}=require("node:worker_threads"),w4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===$6e){super(arguments[1],arguments[2]),jr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";jr.argumentLengthCheck(arguments,1,n),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,jr.util.markAsUncloneable(this)}get data(){return jr.brandCheck(this,t),this.#e.data}get origin(){return jr.brandCheck(this,t),this.#e.origin}get lastEventId(){return jr.brandCheck(this,t),this.#e.lastEventId}get source(){return jr.brandCheck(this,t),this.#e.source}get ports(){return jr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",l=null,c=[]){return jr.brandCheck(this,t),jr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,r){let n=new t($6e,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:I_t}=w4;delete w4.createFastMessageEvent;var CG=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";jr.argumentLengthCheck(arguments,1,n),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.CloseEventInit(r),super(e,r),this.#e=r,jr.util.markAsUncloneable(this)}get wasClean(){return jr.brandCheck(this,t),this.#e.wasClean}get code(){return jr.brandCheck(this,t),this.#e.code}get reason(){return jr.brandCheck(this,t),this.#e.reason}},xG=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";jr.argumentLengthCheck(arguments,1,n),super(e,r),jr.util.markAsUncloneable(this),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return jr.brandCheck(this,t),this.#e.message}get filename(){return jr.brandCheck(this,t),this.#e.filename}get lineno(){return jr.brandCheck(this,t),this.#e.lineno}get colno(){return jr.brandCheck(this,t),this.#e.colno}get error(){return jr.brandCheck(this,t),this.#e.error}};Object.defineProperties(w4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Bd,origin:Bd,lastEventId:Bd,source:Bd,ports:Bd,initMessageEvent:Bd});Object.defineProperties(CG.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Bd,code:Bd,wasClean:Bd});Object.defineProperties(xG.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Bd,filename:Bd,lineno:Bd,colno:Bd,error:Bd});jr.converters.MessagePort=jr.interfaceConverter(E_t);jr.converters["sequence<MessagePort>"]=jr.sequenceConverter(jr.converters.MessagePort);var Mle=[{key:"bubbles",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];jr.converters.MessageEventInit=jr.dictionaryConverter([...Mle,{key:"data",converter:jr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:jr.nullableConverter(jr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:jr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);jr.converters.CloseEventInit=jr.dictionaryConverter([...Mle,{key:"wasClean",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:jr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);jr.converters.ErrorEventInit=jr.dictionaryConverter([...Mle,{key:"message",converter:jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:jr.converters.any}]);z6e.exports={MessageEvent:w4,CloseEvent:CG,ErrorEvent:xG,createFastMessageEvent:I_t}});var O2=G((RZr,Y6e)=>{"use strict";f();var T_t="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",w_t={enumerable:!0,writable:!1,configurable:!1},__t={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},S_t={NOT_SENT:0,PROCESSING:1,SENT:2},R_t={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},k_t=2**16-1,B_t={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},D_t=Buffer.allocUnsafe(0),P_t={string:1,typedArray:2,arrayBuffer:3,blob:4};Y6e.exports={uid:T_t,sentCloseFrameState:S_t,staticPropertyDescriptors:w_t,states:__t,opcodes:R_t,maxUnsigned16Bit:k_t,parserStates:B_t,emptyBuffer:D_t,sendHints:P_t}});var CP=G((BZr,K6e)=>{"use strict";f();K6e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var bP=G((PZr,oNe)=>{"use strict";f();var{kReadyState:xP,kController:N_t,kResponse:L_t,kBinaryType:F_t,kWebSocketURL:M_t}=CP(),{states:vP,opcodes:Gv}=O2(),{ErrorEvent:Q_t,createFastMessageEvent:O_t}=_4(),{isUtf8:U_t}=require("node:buffer"),{collectASequenceOfCodePointsFast:q_t,removeHTTPWhitespace:J6e}=_d();function W_t(t){return t[xP]===vP.CONNECTING}s(W_t,"isConnecting");function G_t(t){return t[xP]===vP.OPEN}s(G_t,"isEstablished");function H_t(t){return t[xP]===vP.CLOSING}s(H_t,"isClosing");function j_t(t){return t[xP]===vP.CLOSED}s(j_t,"isClosed");function Qle(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(Qle,"fireEvent");function V_t(t,e,r){if(t[xP]!==vP.OPEN)return;let n;if(e===Gv.TEXT)try{n=iNe(r)}catch{Z6e(t,"Received invalid UTF-8 in text frame.");return}else e===Gv.BINARY&&(t[F_t]==="blob"?n=new Blob([r]):n=$_t(r));Qle("message",t,O_t,{origin:t[M_t].origin,data:n})}s(V_t,"websocketMessageReceived");function $_t(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s($_t,"toArrayBuffer");function z_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(z_t,"isValidSubprotocol");function Y_t(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(Y_t,"isValidStatusCode");function Z6e(t,e){let{[N_t]:r,[L_t]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&Qle("error",t,(i,o)=>new Q_t(i,o),{error:new Error(e),message:e})}s(Z6e,"failWebsocketConnection");function eNe(t){return t===Gv.CLOSE||t===Gv.PING||t===Gv.PONG}s(eNe,"isControlFrame");function tNe(t){return t===Gv.CONTINUATION}s(tNe,"isContinuationFrame");function rNe(t){return t===Gv.TEXT||t===Gv.BINARY}s(rNe,"isTextBinaryFrame");function K_t(t){return rNe(t)||tNe(t)||eNe(t)}s(K_t,"isValidOpcode");function J_t(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=q_t(";",t,e),[i,o=""]=n.split("=");r.set(J6e(i,!0,!1),J6e(o,!1,!0)),e.position++}return r}s(J_t,"parseExtensions");function X_t(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(X_t,"isValidClientWindowBits");var nNe=typeof process.versions.icu=="string",X6e=nNe?new TextDecoder("utf-8",{fatal:!0}):void 0,iNe=nNe?X6e.decode.bind(X6e):function(t){if(U_t(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};oNe.exports={isConnecting:W_t,isEstablished:G_t,isClosing:H_t,isClosed:j_t,fireEvent:Qle,isValidSubprotocol:z_t,isValidStatusCode:Y_t,failWebsocketConnection:Z6e,websocketMessageReceived:V_t,utf8Decode:iNe,isControlFrame:eNe,isContinuationFrame:tNe,isTextBinaryFrame:rNe,isValidOpcode:K_t,parseExtensions:J_t,isValidClientWindowBits:X_t}});var bG=G((FZr,sNe)=>{"use strict";f();var{maxUnsigned16Bit:Z_t}=O2(),vG=16386,Ole,EP=null,S4=vG;try{Ole=require("node:crypto")}catch{Ole={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function eSt(){return S4===vG&&(S4=0,Ole.randomFillSync(EP??=Buffer.allocUnsafe(vG),0,vG)),[EP[S4++],EP[S4++],EP[S4++],EP[S4++]]}s(eSt,"generateMask");var Ule=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=eSt(),i=r?.byteLength??0,o=i,a=6;i>Z_t?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=n[0],l[a-3]=n[1],l[a-2]=n[2],l[a-1]=n[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=r[c]^n[c&3];return l}};sNe.exports={WebsocketFrameSend:Ule}});var Wle=G((OZr,pNe)=>{"use strict";f();var{uid:tSt,states:IP,sentCloseFrameState:EG,emptyBuffer:rSt,opcodes:nSt}=O2(),{kReadyState:TP,kSentClose:IG,kByteParser:lNe,kReceivedClose:aNe,kResponse:cNe}=CP(),{fireEvent:iSt,failWebsocketConnection:Hv,isClosing:oSt,isClosed:sSt,isEstablished:aSt,parseExtensions:lSt}=bP(),{channels:R4}=W5(),{CloseEvent:cSt}=_4(),{makeRequest:uSt}=v4(),{fetching:dSt}=hP(),{Headers:fSt,getHeadersList:pSt}=P2(),{getDecodeSplit:mSt}=R0(),{WebsocketFrameSend:hSt}=bG(),qle;try{qle=require("node:crypto")}catch{}function gSt(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=uSt({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=pSt(new fSt(o.headers));l.headersList=p}let c=qle.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),dSt({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Hv(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Hv(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Hv(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Hv(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=qle.createHash("sha1").update(c+tSt).digest("base64");if(m!==h){Hv(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=lSt(g),!y.has("permessage-deflate"))){Hv(n,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!mSt("sec-websocket-protocol",l.headersList).includes(v)){Hv(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",uNe),p.socket.on("close",dNe),p.socket.on("error",fNe),R4.open.hasSubscribers&&R4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(gSt,"establishWebSocketConnection");function ASt(t,e,r,n){if(!(oSt(t)||sSt(t)))if(!aSt(t))Hv(t,"Connection was closed before it was established."),t[TP]=IP.CLOSING;else if(t[IG]===EG.NOT_SENT){t[IG]=EG.PROCESSING;let i=new hSt;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=rSt,t[cNe].socket.write(i.createFrame(nSt.CLOSE)),t[IG]=EG.SENT,t[TP]=IP.CLOSING}else t[TP]=IP.CLOSING}s(ASt,"closeWebSocketConnection");function uNe(t){this.ws[lNe].write(t)||this.pause()}s(uNe,"onSocketData");function dNe(){let{ws:t}=this,{[cNe]:e}=t;e.socket.off("data",uNe),e.socket.off("close",dNe),e.socket.off("error",fNe);let r=t[IG]===EG.SENT&&t[aNe],n=1005,i="",o=t[lNe].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[aNe]||(n=1006),t[TP]=IP.CLOSED,iSt("close",t,(a,l)=>new cSt(a,l),{wasClean:r,code:n,reason:i}),R4.close.hasSubscribers&&R4.close.publish({websocket:t,code:n,reason:i})}s(dNe,"onSocketClose");function fNe(t){let{ws:e}=this;e[TP]=IP.CLOSING,R4.socketError.hasSubscribers&&R4.socketError.publish(t),this.destroy()}s(fNe,"onSocketError");pNe.exports={establishWebSocketConnection:gSt,closeWebSocketConnection:ASt}});var hNe=G((WZr,mNe)=>{"use strict";f();var{createInflateRaw:ySt,Z_DEFAULT_WINDOWBITS:CSt}=require("node:zlib"),{isValidClientWindowBits:xSt}=bP(),vSt=Buffer.from([0,0,255,255]),TG=Symbol("kBuffer"),wG=Symbol("kLength"),Gle=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=CSt;if(this.#t.serverMaxWindowBits){if(!xSt(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=ySt({windowBits:i}),this.#e[TG]=[],this.#e[wG]=0,this.#e.on("data",o=>{this.#e[TG].push(o),this.#e[wG]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(vSt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[TG],this.#e[wG]);this.#e[TG].length=0,this.#e[wG]=0,n(null,i)})}};mNe.exports={PerMessageDeflate:Gle}});var wNe=G((jZr,TNe)=>{"use strict";f();var{Writable:bSt}=require("node:stream"),ESt=require("node:assert"),{parserStates:Dd,opcodes:k4,states:ISt,emptyBuffer:gNe,sentCloseFrameState:ANe}=O2(),{kReadyState:TSt,kSentClose:yNe,kResponse:CNe,kReceivedClose:xNe}=CP(),{channels:_G}=W5(),{isValidStatusCode:wSt,isValidOpcode:_St,failWebsocketConnection:dp,websocketMessageReceived:vNe,utf8Decode:SSt,isControlFrame:bNe,isTextBinaryFrame:Hle,isContinuationFrame:RSt}=bP(),{WebsocketFrameSend:ENe}=bG(),{closeWebSocketConnection:INe}=Wle(),{PerMessageDeflate:kSt}=hNe(),jle=class extends bSt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=Dd.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new kSt(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===Dd.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==k4.CONTINUATION,l=r[1]&127,c=r[0]&64,u=r[0]&32,d=r[0]&16;if(!_St(i))return dp(this.ws,"Invalid opcode received"),e();if(o)return dp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){dp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){dp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Hle(i)){dp(this.ws,"Invalid frame type was fragmented.");return}if(Hle(i)&&this.#o.length>0){dp(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){dp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&bNe(i)){dp(this.ws,"Control frame either too large or fragmented");return}if(RSt(i)&&this.#o.length===0&&!this.#r.compressed){dp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#r.payloadLength=l,this.#n=Dd.READ_DATA):l===126?this.#n=Dd.PAYLOADLENGTH_16:l===127&&(this.#n=Dd.PAYLOADLENGTH_64),Hle(i)&&(this.#r.binaryType=i,this.#r.compressed=c!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===Dd.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Dd.READ_DATA}else if(this.#n===Dd.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){dp(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=Dd.READ_DATA}else if(this.#n===Dd.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(bNe(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Dd.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){INe(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=Dd.INFO,this.#i=!0,this.run(e);return}vNe(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=Dd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);vNe(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=Dd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return gNe;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){ESt(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!wSt(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=SSt(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===k4.CLOSE){if(n===1)return dp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return INe(this.ws,i,o,o.length),dp(this.ws,o),!1}if(this.ws[yNe]!==ANe.SENT){let i=gNe;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new ENe(i);this.ws[CNe].socket.write(o.createFrame(k4.CLOSE),a=>{a||(this.ws[yNe]=ANe.SENT)})}return this.ws[TSt]=ISt.CLOSING,this.ws[xNe]=!0,!1}else if(r===k4.PING){if(!this.ws[xNe]){let i=new ENe(e);this.ws[CNe].socket.write(i.createFrame(k4.PONG)),_G.ping.hasSubscribers&&_G.ping.publish({payload:e})}}else r===k4.PONG&&_G.pong.hasSubscribers&&_G.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};TNe.exports={ByteParser:jle}});var BNe=G((zZr,kNe)=>{"use strict";f();var{WebsocketFrameSend:BSt}=bG(),{opcodes:_Ne,sendHints:B4}=O2(),DSt=nae(),SNe=Buffer[Symbol.species],Vle=class{static{s(this,"SendQueue")}#e=new DSt;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==B4.blob){let o=RNe(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=RNe(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function RNe(t,e){return new BSt(PSt(t,e)).createFrame(e===B4.string?_Ne.TEXT:_Ne.BINARY)}s(RNe,"createFrame");function PSt(t,e){switch(e){case B4.string:return Buffer.from(t);case B4.arrayBuffer:case B4.blob:return new SNe(t);case B4.typedArray:return new SNe(t.buffer,t.byteOffset,t.byteLength)}}s(PSt,"toBuffer");kNe.exports={SendQueue:Vle}});var UNe=G((JZr,ONe)=>{"use strict";f();var{webidl:qn}=Ac(),{URLSerializer:NSt}=_d(),{environmentSettingsObject:DNe}=R0(),{staticPropertyDescriptors:jv,states:wP,sentCloseFrameState:LSt,sendHints:SG}=O2(),{kWebSocketURL:PNe,kReadyState:$le,kController:FSt,kBinaryType:RG,kResponse:NNe,kSentClose:MSt,kByteParser:QSt}=CP(),{isConnecting:OSt,isEstablished:USt,isClosing:qSt,isValidSubprotocol:WSt,fireEvent:LNe}=bP(),{establishWebSocketConnection:GSt,closeWebSocketConnection:FNe}=Wle(),{ByteParser:HSt}=wNe(),{kEnumerableProperty:fp,isBlobLike:MNe}=yi(),{getGlobalDispatcher:jSt}=GW(),{types:QNe}=require("node:util"),{ErrorEvent:VSt,CloseEvent:$St}=_4(),{SendQueue:zSt}=BNe(),F0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),qn.util.markAsUncloneable(this);let n="WebSocket constructor";qn.argumentLengthCheck(arguments,1,n);let i=qn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=qn.converters.USVString(e,n,"url"),r=i.protocols;let o=DNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(c=>WSt(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[PNe]=new URL(a.href);let l=DNe.settingsObject;this[FSt]=GSt(a,r,l,this,(c,u)=>this.#o(c,u),i),this[$le]=t.CONNECTING,this[MSt]=LSt.NOT_SENT,this[RG]="blob"}close(e=void 0,r=void 0){qn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=qn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=qn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");FNe(this,e,r,i)}send(e){qn.brandCheck(this,t);let r="WebSocket.send";if(qn.argumentLengthCheck(arguments,1,r),e=qn.converters.WebSocketSendData(e,r,"data"),OSt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!USt(this)||qSt(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},SG.string)}else QNe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},SG.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},SG.typedArray)):MNe(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},SG.blob))}get readyState(){return qn.brandCheck(this,t),this[$le]}get bufferedAmount(){return qn.brandCheck(this,t),this.#t}get url(){return qn.brandCheck(this,t),NSt(this[PNe])}get extensions(){return qn.brandCheck(this,t),this.#n}get protocol(){return qn.brandCheck(this,t),this.#i}get onopen(){return qn.brandCheck(this,t),this.#e.open}set onopen(e){qn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return qn.brandCheck(this,t),this.#e.error}set onerror(e){qn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return qn.brandCheck(this,t),this.#e.close}set onclose(e){qn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return qn.brandCheck(this,t),this.#e.message}set onmessage(e){qn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return qn.brandCheck(this,t),this[RG]}set binaryType(e){qn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[RG]="blob":this[RG]=e}#o(e,r){this[NNe]=e;let n=new HSt(this,r);n.on("drain",YSt),n.on("error",KSt.bind(this)),e.socket.ws=this,this[QSt]=n,this.#r=new zSt(e.socket),this[$le]=wP.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),LNe("open",this)}};F0.CONNECTING=F0.prototype.CONNECTING=wP.CONNECTING;F0.OPEN=F0.prototype.OPEN=wP.OPEN;F0.CLOSING=F0.prototype.CLOSING=wP.CLOSING;F0.CLOSED=F0.prototype.CLOSED=wP.CLOSED;Object.defineProperties(F0.prototype,{CONNECTING:jv,OPEN:jv,CLOSING:jv,CLOSED:jv,url:fp,readyState:fp,bufferedAmount:fp,onopen:fp,onerror:fp,onclose:fp,close:fp,onmessage:fp,binaryType:fp,send:fp,extensions:fp,protocol:fp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(F0,{CONNECTING:jv,OPEN:jv,CLOSING:jv,CLOSED:jv});qn.converters["sequence<DOMString>"]=qn.sequenceConverter(qn.converters.DOMString);qn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return qn.util.Type(t)==="Object"&&Symbol.iterator in t?qn.converters["sequence<DOMString>"](t):qn.converters.DOMString(t,e,r)};qn.converters.WebSocketInit=qn.dictionaryConverter([{key:"protocols",converter:qn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:qn.converters.any,defaultValue:s(()=>jSt(),"defaultValue")},{key:"headers",converter:qn.nullableConverter(qn.converters.HeadersInit)}]);qn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return qn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?qn.converters.WebSocketInit(t):{protocols:qn.converters["DOMString or sequence<DOMString>"](t)}};qn.converters.WebSocketSendData=function(t){if(qn.util.Type(t)==="Object"){if(MNe(t))return qn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||QNe.isArrayBuffer(t))return qn.converters.BufferSource(t)}return qn.converters.USVString(t)};function YSt(){this.ws[NNe].socket.resume()}s(YSt,"onParserDrain");function KSt(t){let e,r;t instanceof $St?(e=t.reason,r=t.code):e=t.message,LNe("error",this,()=>new VSt("error",{error:t,message:e})),FNe(this,r)}s(KSt,"onParserError");ONe.exports={WebSocket:F0}});var zle=G((een,qNe)=>{"use strict";f();function JSt(t){return t.indexOf("\0")===-1}s(JSt,"isValidLastEventId");function XSt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(XSt,"isASCIINumber");function ZSt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(ZSt,"delay");qNe.exports={isValidLastEventId:JSt,isASCIINumber:XSt,delay:ZSt}});var jNe=G((nen,HNe)=>{"use strict";f();var{Transform:e5t}=require("node:stream"),{isASCIINumber:WNe,isValidLastEventId:GNe}=zle(),uy=[239,187,191],Yle=10,kG=13,t5t=58,r5t=32,Kle=class extends e5t{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===uy[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===Yle){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===Yle||this.buffer[this.pos]===kG){this.buffer[this.pos]===kG&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===Yle||this.buffer[this.pos]===kG){this.buffer[this.pos]===kG&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(t5t);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===r5t&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":WNe(o)&&(r[i]=o);break;case"id":GNe(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&WNe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&GNe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};HNe.exports={EventSourceStream:Kle}});var ZNe=G((sen,XNe)=>{"use strict";f();var{pipeline:n5t}=require("node:stream"),{fetching:i5t}=hP(),{makeRequest:o5t}=v4(),{webidl:dy}=Ac(),{EventSourceStream:s5t}=jNe(),{parseMIMEType:a5t}=_d(),{createFastMessageEvent:l5t}=_4(),{isNetworkError:VNe}=pP(),{delay:c5t}=zle(),{kEnumerableProperty:U2}=yi(),{environmentSettingsObject:$Ne}=R0(),zNe=!1,YNe=3e3,_P=0,KNe=1,SP=2,u5t="anonymous",d5t="use-credentials",D4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=_P;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),dy.util.markAsUncloneable(this);let n="EventSource constructor";dy.argumentLengthCheck(arguments,1,n),zNe||(zNe=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=dy.converters.USVString(e,n,"url"),r=dy.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:YNe};let i=$Ne,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=u5t;r.withCredentials&&(a=d5t,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=$Ne.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#r=o5t(l),this.#l()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#n===SP)return;this.#n=_P;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{VNe(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(VNe(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=n.headersList.get("content-type",!0),o=i!==null?a5t(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=KNe,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let l=new s5t({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(l5t(c.type,c.options))},"push")});n5t(n.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=i5t(e)}async#c(){this.#n!==SP&&(this.#n=_P,this.dispatchEvent(new Event("error")),await c5t(this.#a.reconnectionTime),this.#n===_P&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){dy.brandCheck(this,t),this.#n!==SP&&(this.#n=SP,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},JNe={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:_P,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:KNe,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:SP,writable:!1}};Object.defineProperties(D4,JNe);Object.defineProperties(D4.prototype,JNe);Object.defineProperties(D4.prototype,{close:U2,onerror:U2,onmessage:U2,onopen:U2,readyState:U2,url:U2,withCredentials:U2});dy.converters.EventSourceInitDict=dy.dictionaryConverter([{key:"withCredentials",converter:dy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:dy.converters.any}]);XNe.exports={EventSource:D4,defaultReconnectionTime:YNe}});var n7e=G((cen,Bn)=>{"use strict";f();var f5t=XD(),e7e=kD(),p5t=l4(),m5t=aDe(),h5t=c4(),g5t=vae(),A5t=IDe(),y5t=kDe(),t7e=yo(),DG=yi(),{InvalidArgumentError:BG}=t7e,P4=gPe(),C5t=DD(),x5t=rle(),v5t=JPe(),b5t=ole(),E5t=Gae(),I5t=PW(),{getGlobalDispatcher:r7e,setGlobalDispatcher:T5t}=GW(),w5t=HW(),_5t=vW(),S5t=bW();Object.assign(e7e.prototype,P4);Bn.exports.Dispatcher=e7e;Bn.exports.Client=f5t;Bn.exports.Pool=p5t;Bn.exports.BalancedPool=m5t;Bn.exports.Agent=h5t;Bn.exports.ProxyAgent=g5t;Bn.exports.EnvHttpProxyAgent=A5t;Bn.exports.RetryAgent=y5t;Bn.exports.RetryHandler=I5t;Bn.exports.DecoratorHandler=w5t;Bn.exports.RedirectHandler=_5t;Bn.exports.createRedirectInterceptor=S5t;Bn.exports.interceptors={redirect:i9e(),retry:s9e(),dump:l9e(),dns:d9e()};Bn.exports.buildConnector=C5t;Bn.exports.errors=t7e;Bn.exports.util={parseHeaders:DG.parseHeaders,headerNameToString:DG.headerNameToString};function RP(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new BG("invalid url");if(r!=null&&typeof r!="object")throw new BG("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new BG("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(DG.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=DG.parseURL(e);let{agent:i,dispatcher:o=r7e()}=r;if(i)throw new BG("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(RP,"makeDispatcher");Bn.exports.setGlobalDispatcher=T5t;Bn.exports.getGlobalDispatcher=r7e;var R5t=hP().fetch;Bn.exports.fetch=s(async function(e,r=void 0){try{return await R5t(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Bn.exports.Headers=P2().Headers;Bn.exports.Response=pP().Response;Bn.exports.Request=v4().Request;Bn.exports.FormData=OD().FormData;Bn.exports.File=globalThis.File??require("node:buffer").File;Bn.exports.FileReader=T6e().FileReader;var{setGlobalOrigin:k5t,getGlobalOrigin:B5t}=bse();Bn.exports.setGlobalOrigin=k5t;Bn.exports.getGlobalOrigin=B5t;var{CacheStorage:D5t}=N6e(),{kConstruct:P5t}=dG();Bn.exports.caches=new D5t(P5t);var{deleteCookie:N5t,getCookies:L5t,getSetCookies:F5t,setCookie:M5t}=V6e();Bn.exports.deleteCookie=N5t;Bn.exports.getCookies=L5t;Bn.exports.getSetCookies=F5t;Bn.exports.setCookie=M5t;var{parseMIMEType:Q5t,serializeAMimeType:O5t}=_d();Bn.exports.parseMIMEType=Q5t;Bn.exports.serializeAMimeType=O5t;var{CloseEvent:U5t,ErrorEvent:q5t,MessageEvent:W5t}=_4();Bn.exports.WebSocket=UNe().WebSocket;Bn.exports.CloseEvent=U5t;Bn.exports.ErrorEvent=q5t;Bn.exports.MessageEvent=W5t;Bn.exports.request=RP(P4.request);Bn.exports.stream=RP(P4.stream);Bn.exports.pipeline=RP(P4.pipeline);Bn.exports.connect=RP(P4.connect);Bn.exports.upgrade=RP(P4.upgrade);Bn.exports.MockClient=x5t;Bn.exports.MockPool=b5t;Bn.exports.MockAgent=v5t;Bn.exports.mockErrors=E5t;var{EventSource:G5t}=ZNe();Bn.exports.EventSource=G5t});var di=G((fen,i7e)=>{f();i7e.exports={options:{usePureJavaScript:!1}}});var a7e=G((men,s7e)=>{f();var Jle={};s7e.exports=Jle;var o7e={};Jle.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=H5t(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};Jle.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=o7e[e];if(!r){r=o7e[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function H5t(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,l=t.at(r);a<o.length;++a)l+=o[a]<<8,o[a]=l%n,l=l/n|0;for(;l>0;)o.push(l%n),l=l/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}s(H5t,"_encodeWithByteBuffer")});var uo=G((Aen,d7e)=>{f();var l7e=di(),c7e=a7e(),Be=d7e.exports=l7e.util=l7e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function kP(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(kP,"_checkBitsParam");Be.ByteBuffer=Xle;function Xle(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Xle||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Xle,"ByteStringBuffer");Be.ByteStringBuffer=Xle;var j5t=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>j5t&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){kP(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){kP(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function V5t(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Be.isArrayBuffer(t),n=Be.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(V5t,"DataBuffer");Be.DataBuffer=V5t;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Be.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){kP(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return kP(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){kP(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Be.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,l=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(n+=o,o="",l=0),o+=String.fromCharCode(i),++l;return n+=o,n};Be.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Vv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$v=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],u7e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),r+=Vv.charAt(i>>2),r+=Vv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Vv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Vv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=$v[t.charCodeAt(a++)-43],n=$v[t.charCodeAt(a++)-43],i=$v[t.charCodeAt(a++)-43],o=$v[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:c7e.encode,decode:c7e.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Be.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],r+=Vv.charAt(i>>2),r+=Vv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Vv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Vv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,l,c=0,u=r;c<t.length;)i=$v[t.charCodeAt(c++)-43],o=$v[t.charCodeAt(c++)-43],a=$v[t.charCodeAt(c++)-43],l=$v[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,l!==64&&(n[u++]=(a&3)<<6|l));return e?u-r:n.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,u7e,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,u7e,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,r){t=Be.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-r:n};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,r){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Be.inflate=function(t,e,r){var n=t.inflate(Be.encode64(e)).rval;return n===null?null:Be.decode64(n)};var Zle=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Be.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),ece=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Be.decode64(r))),r},"_getStorageObject"),$5t=s(function(t,e,r,n){var i=ece(t,e);i===null&&(i={}),i[r]=n,Zle(t,e,i)},"_setItem"),z5t=s(function(t,e,r){var n=ece(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),Y5t=s(function(t,e,r){var n=ece(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Zle(t,e,n)}},"_removeItem"),K5t=s(function(t,e){Zle(t,e,null)},"_clearItems"),PG=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Be.setItem=function(t,e,r,n,i){PG($5t,arguments,i)};Be.getItem=function(t,e,r,n){return PG(z5t,arguments,n)};Be.removeItem=function(t,e,r,n){PG(Y5t,arguments,n)};Be.clearItems=function(t,e,r){PG(K5t,arguments,r)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,l=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],l=e.length;!a||l!==a.end+1?r.push({start:l,end:l}):(a.end=l,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),n(a,l-1,c)})}s(n,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var NG=G((xen,f7e)=>{f();var $l=di();uo();f7e.exports=$l.cipher=$l.cipher||{};$l.cipher.algorithms=$l.cipher.algorithms||{};$l.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=$l.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new $l.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};$l.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=$l.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new $l.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};$l.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),$l.cipher.algorithms[t]=e};$l.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in $l.cipher.algorithms?$l.cipher.algorithms[t]:null};var tce=$l.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};tce.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=$l.util.createBuffer(),this.output=t.output||$l.util.createBuffer(),this.mode.start(e)};tce.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};tce.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var nce=G((ben,p7e)=>{f();var zl=di();uo();zl.cipher=zl.cipher||{};var wi=p7e.exports=zl.cipher.modes=zl.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};wi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};wi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=LG(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=zl.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=LG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=zl.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=LG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=zl.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=LG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}FG(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=zl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=zl.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=zl.util.createBuffer(t.additionalData):r=zl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=zl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(rce(n*8)))}this._inBlock=this._j0.slice(0),FG(this._inBlock),this._partialBytes=0,r=zl.util.createBuffer(r),this._aDataLength=rce(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),FG(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),FG(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=zl.util.createBuffer();var n=this._aDataLength.concat(rce(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};wi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};wi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/n|0,u=(n-1-a%n)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function LG(t,e){if(typeof t=="string"&&(t=zl.util.createBuffer(t)),zl.util.isArray(t)&&t.length>4){var r=t;t=zl.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!zl.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(LG,"transformIV");function FG(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(FG,"inc32");function rce(t){return[t/4294967296|0,t&4294967295]}s(rce,"from64To32")});var zv=G((Ten,A7e)=>{f();var rs=di();NG();nce();uo();A7e.exports=rs.aes=rs.aes||{};rs.aes.startEncrypting=function(t,e,r,n){var i=MG({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};rs.aes.createEncryptionCipher=function(t,e){return MG({key:t,output:null,decrypt:!1,mode:e})};rs.aes.startDecrypting=function(t,e,r,n){var i=MG({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};rs.aes.createDecryptionCipher=function(t,e){return MG({key:t,output:null,decrypt:!0,mode:e})};rs.aes.Algorithm=function(t,e){sce||h7e();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return oce(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return oce(r._w,n,i,!0)},"decrypt")}}),r._init=!1};rs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=rs.util.createBuffer(e);else if(rs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=rs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!rs.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!rs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=g7e(e,t.decrypt&&!a),this._init=!0}};rs.aes._expandKey=function(t,e){return sce||h7e(),g7e(t,e)};rs.aes._updateBlock=oce;L4("AES-ECB",rs.cipher.modes.ecb);L4("AES-CBC",rs.cipher.modes.cbc);L4("AES-CFB",rs.cipher.modes.cfb);L4("AES-OFB",rs.cipher.modes.ofb);L4("AES-CTR",rs.cipher.modes.ctr);L4("AES-GCM",rs.cipher.modes.gcm);function L4(t,e){var r=s(function(){return new rs.aes.Algorithm(t,e)},"factory");rs.cipher.registerAlgorithm(t,r)}s(L4,"registerAlgorithm");var sce=!1,N4=4,Ou,ice,m7e,q2,zm;function h7e(){sce=!0,m7e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Ou=new Array(256),ice=new Array(256),q2=new Array(4),zm=new Array(4);for(var e=0;e<4;++e)q2[e]=new Array(256),zm[e]=new Array(256);for(var r=0,n=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,Ou[r]=l,ice[l]=r,c=t[l],i=t[r],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)q2[p][r]=u,zm[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(h7e,"initialize");function g7e(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,l=N4*a,c=o;c<l;++c)n=r[c-1],c%o===0?(n=Ou[n>>>16&255]<<24^Ou[n>>>8&255]<<16^Ou[n&255]<<8^Ou[n>>>24]^m7e[i]<<24,i++):o>6&&c%o===4&&(n=Ou[n>>>24]<<24^Ou[n>>>16&255]<<16^Ou[n>>>8&255]<<8^Ou[n&255]),r[c]=r[c-o]^n;if(e){var u,d=zm[0],p=zm[1],m=zm[2],h=zm[3],g=r.slice(0);l=r.length;for(var c=0,y=l-N4;c<l;c+=N4,y-=N4)if(c===0||c===l-N4)g[c]=r[y],g[c+1]=r[y+3],g[c+2]=r[y+2],g[c+3]=r[y+1];else for(var v=0;v<N4;++v)u=r[y+v],g[c+(3&-v)]=d[Ou[u>>>24]]^p[Ou[u>>>16&255]]^m[Ou[u>>>8&255]]^h[Ou[u&255]];r=g}return r}s(g7e,"_expandKey");function oce(t,e,r,n){var i=t.length/4-1,o,a,l,c,u;n?(o=zm[0],a=zm[1],l=zm[2],c=zm[3],u=ice):(o=q2[0],a=q2[1],l=q2[2],c=q2[3],u=Ou);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;r[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],r[n?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(oce,"_updateBlock");function MG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=rs.cipher.createDecipher(r,t.key):n=rs.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof rs.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(MG,"_createCipher")});var Yv=G((Sen,y7e)=>{f();var BP=di();BP.pki=BP.pki||{};var ace=y7e.exports=BP.pki.oids=BP.oids=BP.oids||{};function wt(t,e){ace[t]=e,ace[e]=t}s(wt,"_IN");function Io(t,e){ace[t]=e}s(Io,"_I_");wt("1.2.840.113549.1.1.1","rsaEncryption");wt("1.2.840.113549.1.1.4","md5WithRSAEncryption");wt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");wt("1.2.840.113549.1.1.7","RSAES-OAEP");wt("1.2.840.113549.1.1.8","mgf1");wt("1.2.840.113549.1.1.9","pSpecified");wt("1.2.840.113549.1.1.10","RSASSA-PSS");wt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");wt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");wt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");wt("1.3.101.112","EdDSA25519");wt("1.2.840.10040.4.3","dsa-with-sha1");wt("1.3.14.3.2.7","desCBC");wt("1.3.14.3.2.26","sha1");wt("1.3.14.3.2.29","sha1WithRSASignature");wt("2.16.840.1.101.3.4.2.1","sha256");wt("2.16.840.1.101.3.4.2.2","sha384");wt("2.16.840.1.101.3.4.2.3","sha512");wt("2.16.840.1.101.3.4.2.4","sha224");wt("2.16.840.1.101.3.4.2.5","sha512-224");wt("2.16.840.1.101.3.4.2.6","sha512-256");wt("1.2.840.113549.2.2","md2");wt("1.2.840.113549.2.5","md5");wt("1.2.840.113549.1.7.1","data");wt("1.2.840.113549.1.7.2","signedData");wt("1.2.840.113549.1.7.3","envelopedData");wt("1.2.840.113549.1.7.4","signedAndEnvelopedData");wt("1.2.840.113549.1.7.5","digestedData");wt("1.2.840.113549.1.7.6","encryptedData");wt("1.2.840.113549.1.9.1","emailAddress");wt("1.2.840.113549.1.9.2","unstructuredName");wt("1.2.840.113549.1.9.3","contentType");wt("1.2.840.113549.1.9.4","messageDigest");wt("1.2.840.113549.1.9.5","signingTime");wt("1.2.840.113549.1.9.6","counterSignature");wt("1.2.840.113549.1.9.7","challengePassword");wt("1.2.840.113549.1.9.8","unstructuredAddress");wt("1.2.840.113549.1.9.14","extensionRequest");wt("1.2.840.113549.1.9.20","friendlyName");wt("1.2.840.113549.1.9.21","localKeyId");wt("1.2.840.113549.1.9.22.1","x509Certificate");wt("1.2.840.113549.1.12.10.1.1","keyBag");wt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");wt("1.2.840.113549.1.12.10.1.3","certBag");wt("1.2.840.113549.1.12.10.1.4","crlBag");wt("1.2.840.113549.1.12.10.1.5","secretBag");wt("1.2.840.113549.1.12.10.1.6","safeContentsBag");wt("1.2.840.113549.1.5.13","pkcs5PBES2");wt("1.2.840.113549.1.5.12","pkcs5PBKDF2");wt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");wt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");wt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");wt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");wt("1.2.840.113549.2.7","hmacWithSHA1");wt("1.2.840.113549.2.8","hmacWithSHA224");wt("1.2.840.113549.2.9","hmacWithSHA256");wt("1.2.840.113549.2.10","hmacWithSHA384");wt("1.2.840.113549.2.11","hmacWithSHA512");wt("1.2.840.113549.3.7","des-EDE3-CBC");wt("2.16.840.1.101.3.4.1.2","aes128-CBC");wt("2.16.840.1.101.3.4.1.22","aes192-CBC");wt("2.16.840.1.101.3.4.1.42","aes256-CBC");wt("2.5.4.3","commonName");wt("2.5.4.4","surname");wt("2.5.4.5","serialNumber");wt("2.5.4.6","countryName");wt("2.5.4.7","localityName");wt("2.5.4.8","stateOrProvinceName");wt("2.5.4.9","streetAddress");wt("2.5.4.10","organizationName");wt("2.5.4.11","organizationalUnitName");wt("2.5.4.12","title");wt("2.5.4.13","description");wt("2.5.4.15","businessCategory");wt("2.5.4.17","postalCode");wt("2.5.4.42","givenName");wt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");wt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");wt("2.16.840.1.113730.1.1","nsCertType");wt("2.16.840.1.113730.1.13","nsComment");Io("2.5.29.1","authorityKeyIdentifier");Io("2.5.29.2","keyAttributes");Io("2.5.29.3","certificatePolicies");Io("2.5.29.4","keyUsageRestriction");Io("2.5.29.5","policyMapping");Io("2.5.29.6","subtreesConstraint");Io("2.5.29.7","subjectAltName");Io("2.5.29.8","issuerAltName");Io("2.5.29.9","subjectDirectoryAttributes");Io("2.5.29.10","basicConstraints");Io("2.5.29.11","nameConstraints");Io("2.5.29.12","policyConstraints");Io("2.5.29.13","basicConstraints");wt("2.5.29.14","subjectKeyIdentifier");wt("2.5.29.15","keyUsage");Io("2.5.29.16","privateKeyUsagePeriod");wt("2.5.29.17","subjectAltName");wt("2.5.29.18","issuerAltName");wt("2.5.29.19","basicConstraints");Io("2.5.29.20","cRLNumber");Io("2.5.29.21","cRLReason");Io("2.5.29.22","expirationDate");Io("2.5.29.23","instructionCode");Io("2.5.29.24","invalidityDate");Io("2.5.29.25","cRLDistributionPoints");Io("2.5.29.26","issuingDistributionPoint");Io("2.5.29.27","deltaCRLIndicator");Io("2.5.29.28","issuingDistributionPoint");Io("2.5.29.29","certificateIssuer");Io("2.5.29.30","nameConstraints");wt("2.5.29.31","cRLDistributionPoints");wt("2.5.29.32","certificatePolicies");Io("2.5.29.33","policyMappings");Io("2.5.29.34","policyConstraints");wt("2.5.29.35","authorityKeyIdentifier");Io("2.5.29.36","policyConstraints");wt("2.5.29.37","extKeyUsage");Io("2.5.29.46","freshestCRL");Io("2.5.29.54","inhibitAnyPolicy");wt("1.3.6.1.4.1.11129.2.4.2","timestampList");wt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");wt("1.3.6.1.5.5.7.3.1","serverAuth");wt("1.3.6.1.5.5.7.3.2","clientAuth");wt("1.3.6.1.5.5.7.3.3","codeSigning");wt("1.3.6.1.5.5.7.3.4","emailProtection");wt("1.3.6.1.5.5.7.3.8","timeStamping")});var Ym=G((Ben,x7e)=>{f();var bs=di();uo();Yv();var nr=x7e.exports=bs.asn1=bs.asn1||{};nr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};nr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};nr.create=function(t,e,r,n,i){if(bs.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var l={tagClass:t,type:e,constructed:r,composed:r||bs.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=nr.copy(l)),l};nr.copy=function(t,e){var r;if(bs.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(nr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:nr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};nr.equals=function(t,e,r){if(bs.util.isArray(t)){if(!bs.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!nr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&nr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};nr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function DP(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(DP,"_checkBufferLength");var J5t=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;DP(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");nr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=bs.util.createBuffer(t));var r=t.length(),n=QG(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function QG(t,e,r,n){var i;DP(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=J5t(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(DP(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(QG(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(QG(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&n.decodeBitStrings&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===nr.Type.BITSTRING&&(DP(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=QG(t,e,r+1,v),E=i-t.length();e-=E,l==nr.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===nr.Class.UNIVERSAL||_===nr.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===nr.Type.BMPSTRING)for(d="";c>0;c-=2)DP(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return nr.create(a,l,m,d,k)}s(QG,"_fromDer");nr.toDer=function(t){var e=bs.util.createBuffer(),r=t.tagClass|t.type,n=bs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=nr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(nr.toDer(t.value[o]))}else if(t.type===nr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===nr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(n),e};nr.oidToDer=function(t){var e=t.split("."),r=bs.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,l=2;l<e.length;++l){n=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};nr.derToOid=function(t){var e;typeof t=="string"&&(t=bs.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};nr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};nr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,l,c)),e};nr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.integerToDer=function(t){var e=bs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};nr.derToInteger=function(t){typeof t=="string"&&(t=bs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};nr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&bs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=nr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var C7e=/[^\\u0000-\\u00ff]/;nr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case nr.Class.UNIVERSAL:n+="Universal:";break;case nr.Class.APPLICATION:n+="Application:";break;case nr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case nr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===nr.Class.UNIVERSAL)switch(n+=t.type,t.type){case nr.Type.NONE:n+=" (None)";break;case nr.Type.BOOLEAN:n+=" (Boolean)";break;case nr.Type.INTEGER:n+=" (Integer)";break;case nr.Type.BITSTRING:n+=" (Bit string)";break;case nr.Type.OCTETSTRING:n+=" (Octet string)";break;case nr.Type.NULL:n+=" (Null)";break;case nr.Type.OID:n+=" (Object Identifier)";break;case nr.Type.ODESC:n+=" (Object Descriptor)";break;case nr.Type.EXTERNAL:n+=" (External or Instance of)";break;case nr.Type.REAL:n+=" (Real)";break;case nr.Type.ENUMERATED:n+=" (Enumerated)";break;case nr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case nr.Type.UTF8:n+=" (UTF8)";break;case nr.Type.ROID:n+=" (Relative Object Identifier)";break;case nr.Type.SEQUENCE:n+=" (Sequence)";break;case nr.Type.SET:n+=" (Set)";break;case nr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case nr.Type.IA5String:n+=" (IA5String (ASCII))";break;case nr.Type.UTCTIME:n+=" (UTC time)";break;case nr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case nr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=nr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(l+=","));n+=i+"Sub values: "+a+l}else{if(n+=i+"Value: ",t.type===nr.Type.OID){var c=nr.derToOid(t.value);n+=c,bs.pki&&bs.pki.oids&&c in bs.pki.oids&&(n+=" ("+bs.pki.oids[c]+") ")}if(t.type===nr.Type.INTEGER)try{n+=nr.derToInteger(t.value)}catch{n+="0x"+bs.util.bytesToHex(t.value)}else if(t.type===nr.Type.BITSTRING){if(t.value.length>1?n+="0x"+bs.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===nr.Type.OCTETSTRING)C7e.test(t.value)||(n+="("+t.value+") "),n+="0x"+bs.util.bytesToHex(t.value);else if(t.type===nr.Type.UTF8)try{n+=bs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+bs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===nr.Type.PRINTABLESTRING||t.type===nr.Type.IA5String?n+=t.value:C7e.test(t.value)?n+="0x"+bs.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Vg=G((Nen,v7e)=>{f();var OG=di();v7e.exports=OG.md=OG.md||{};OG.md.algorithms=OG.md.algorithms||{}});var F4=G((Fen,b7e)=>{f();var fy=di();Vg();uo();var X5t=b7e.exports=fy.hmac=fy.hmac||{};X5t.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in fy.md.algorithms)e=fy.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=fy.util.createBuffer(a);else if(fy.util.isArray(a)){var l=a;a=fy.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=fy.util.createBuffer(),n=fy.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);r.putByte(54^l),n.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var qG=G((Qen,w7e)=>{f();var $g=di();Vg();uo();var I7e=w7e.exports=$g.md5=$g.md5||{};$g.md.md5=$g.md.algorithms.md5=I7e;I7e.create=function(){T7e||Z5t();var t=null,e=$g.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=$g.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=$g.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),E7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=$g.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(lce.substr(0,n.blockLength-a));for(var l,c=0,u=n.fullMessageLength.length-1;u>=0;--u)l=n.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};E7e(d,r,i);var p=$g.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},n};var lce=null,UG=null,PP=null,M4=null,T7e=!1;function Z5t(){lce="\x80",lce+=$g.util.fillString("\0",64),UG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],PP=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],M4=new Array(64);for(var t=0;t<64;++t)M4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);T7e=!0}s(Z5t,"_init");function E7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),c=l^o&(a^l),n=i+c+M4[d]+e[d],u=PP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<32;++d)c=a^l&(o^a),n=i+c+M4[d]+e[UG[d]],u=PP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<48;++d)c=o^a^l,n=i+c+M4[d]+e[UG[d]],u=PP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<64;++d)c=a^(o|~l),n=i+c+M4[d]+e[UG[d]],u=PP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(E7e,"_update")});var W2=G((qen,S7e)=>{f();var GG=di();uo();var _7e=S7e.exports=GG.pem=GG.pem||{};_7e.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=WG(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=WG(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=WG(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=WG(t.headers[i]);return t.procType&&(r+=`\r
`),r+=GG.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};_7e.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:GG.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(e4t(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function WG(t){for(var e=t.name+": ",r=[],n=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(WG,"foldHeader");function e4t(t){return t.replace(/^\s+/,"")}s(e4t,"ltrim")});var NP=G((Hen,k7e)=>{f();var Us=di();NG();nce();uo();k7e.exports=Us.des=Us.des||{};Us.des.startEncrypting=function(t,e,r,n){var i=HG({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Us.des.createEncryptionCipher=function(t,e){return HG({key:t,output:null,decrypt:!1,mode:e})};Us.des.startDecrypting=function(t,e,r,n){var i=HG({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Us.des.createDecryptionCipher=function(t,e){return HG({key:t,output:null,decrypt:!0,mode:e})};Us.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return R7e(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return R7e(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Us.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Us.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=c4t(e),this._init=!0}};zg("DES-ECB",Us.cipher.modes.ecb);zg("DES-CBC",Us.cipher.modes.cbc);zg("DES-CFB",Us.cipher.modes.cfb);zg("DES-OFB",Us.cipher.modes.ofb);zg("DES-CTR",Us.cipher.modes.ctr);zg("3DES-ECB",Us.cipher.modes.ecb);zg("3DES-CBC",Us.cipher.modes.cbc);zg("3DES-CFB",Us.cipher.modes.cfb);zg("3DES-OFB",Us.cipher.modes.ofb);zg("3DES-CTR",Us.cipher.modes.ctr);function zg(t,e){var r=s(function(){return new Us.des.Algorithm(t,e)},"factory");Us.cipher.registerAlgorithm(t,r)}s(zg,"registerAlgorithm");var t4t=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],r4t=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],n4t=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],i4t=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],o4t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],s4t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],a4t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],l4t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function c4t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var B=t.getInt32(),N=t.getInt32();_=(B>>>4^N)&252645135,N^=_,B^=_<<4,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>2^N)&858993459,N^=_,B^=_<<2,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=(N>>>8^B)&16711935,B^=_,N^=_<<8,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=B<<8|N>>>20&240,B=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var W=0;W<b.length;++W){b[W]?(B=B<<2|B>>>26,N=N<<2|N>>>26):(B=B<<1|B>>>27,N=N<<1|N>>>27),B&=-15,N&=-15;var ee=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|l[B>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^ee)&65535,v[E++]=ee^_,v[E++]=me^_<<16}}return v}s(c4t,"_createKeys");function R7e(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(r4t[h>>>24&63]|i4t[h>>>16&63]|s4t[h>>>8&63]|l4t[h&63]|t4t[g>>>24&63]|n4t[g>>>16&63]|o4t[g>>>8&63]|a4t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,r[0]=l,r[1]=c}s(R7e,"_updateBlock");function HG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Us.cipher.createDecipher(r,t.key):n=Us.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof Us.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(HG,"_createCipher")});var jG=G(($en,B7e)=>{f();var Uu=di();F4();Vg();uo();var u4t=Uu.pkcs5=Uu.pkcs5||{},py;Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&(py=require("crypto"));B7e.exports=Uu.pbkdf2=u4t.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&py.pbkdf2&&(i===null||typeof i!="object")&&(py.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?py.pbkdf2Sync.length===4?py.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2Sync.length===4?py.pbkdf2Sync(t,e,r,n).toString("binary"):py.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Uu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Uu.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(n/a),u=n-(c-1)*a,d=Uu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=r;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=r)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h,++v,Uu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var uce=G((Ken,F7e)=>{f();var Yg=di();Vg();uo();var P7e=F7e.exports=Yg.sha256=Yg.sha256||{};Yg.md.sha256=Yg.md.algorithms.sha256=P7e;P7e.create=function(){N7e||d4t();var t=null,e=Yg.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Yg.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Yg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),D7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Yg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(cce.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};D7e(p,r,i);var m=Yg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var cce=null,N7e=!1,L7e=null;function d4t(){cce="\x80",cce+=Yg.util.fillString("\0",64),L7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],N7e=!0}s(d4t,"_init");function D7e(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=r.length();E>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),n=b+a+l+L7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+n>>>0,h=m,m=p,p=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(D7e,"_update")});var dce=G((Zen,M7e)=>{f();var Kg=di();uo();var VG=null;Kg.util.isNodejs&&!Kg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(VG=require("crypto"));var f4t=M7e.exports=Kg.prng=Kg.prng||{};f4t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=Kg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Kg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),Kg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=Kg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=Kg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=Kg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),VG?(e.seedFile=function(u,d){VG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return VG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var pp=G((rtn,fce)=>{f();var Yl=di();zv();uce();dce();uo();(function(){if(Yl.random&&Yl.random.getBytes){fce.exports=Yl.random;return}(function(t){var e={},r=new Array(4),n=Yl.util.createBuffer();e.formatKey=function(p){var m=Yl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Yl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Yl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Yl.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Yl.md.sha256;function i(){var p=Yl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=Yl.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),Yl.options.usePureJavaScript||!Yl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Yl.random)Yl.random=o;else for(var d in o)Yl.random[d]=o[d];Yl.random.createInstance=i,fce.exports=Yl.random})(typeof jQuery<"u"?jQuery:null)})()});var mce=G((otn,U7e)=>{f();var Pd=di();uo();var pce=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Q7e=[1,2,3,5],p4t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),m4t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");U7e.exports=Pd.rc2=Pd.rc2||{};Pd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Pd.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(pce[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-o,pce[r.at(128-o)&a]),l=127-o;l>=0;l--)r.setAt(l,pce[r.at(l+1)^r.at(l+o)]);return r};var O7e=s(function(t,e,r){var n=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=Pd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=p4t(g[u],Q7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=m4t(g[u],Q7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(r?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=r?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Pd.util.createBuffer(g)),n=!1,i=Pd.util.createBuffer(),o=y||new Pd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");Pd.rc2.startEncrypting=function(t,e,r){var n=Pd.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Pd.rc2.createEncryptionCipher=function(t,e){return O7e(t,e,!0)};Pd.rc2.startDecrypting=function(t,e,r){var n=Pd.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Pd.rc2.createDecryptionCipher=function(t,e){return O7e(t,e,!1)}});var FP=G((ltn,z7e)=>{f();var hce=di();z7e.exports=hce.jsbn=hce.jsbn||{};var my,h4t=0xdeadbeefcafe,q7e=(h4t&16777215)==15715070;function xt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(xt,"BigInteger");hce.jsbn.BigInteger=xt;function fo(){return new xt(null)}s(fo,"nbi");function g4t(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(g4t,"am1");function A4t(t,e,r,n,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),r.data[n++]=c&1073741823}return i}s(A4t,"am2");function W7e(t,e,r,n,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+r.data[n]+i,i=(c>>28)+(d>>14)+l*u,r.data[n++]=c&268435455}return i}s(W7e,"am3");typeof navigator>"u"?(xt.prototype.am=W7e,my=28):q7e&&navigator.appName=="Microsoft Internet Explorer"?(xt.prototype.am=A4t,my=30):q7e&&navigator.appName!="Netscape"?(xt.prototype.am=g4t,my=26):(xt.prototype.am=W7e,my=28);xt.prototype.DB=my;xt.prototype.DM=(1<<my)-1;xt.prototype.DV=1<<my;var gce=52;xt.prototype.FV=Math.pow(2,gce);xt.prototype.F1=gce-my;xt.prototype.F2=2*my-gce;var y4t="0123456789abcdefghijklmnopqrstuvwxyz",$G=new Array,Q4,mp;Q4=48;for(mp=0;mp<=9;++mp)$G[Q4++]=mp;Q4=97;for(mp=10;mp<36;++mp)$G[Q4++]=mp;Q4=65;for(mp=10;mp<36;++mp)$G[Q4++]=mp;function G7e(t){return y4t.charAt(t)}s(G7e,"int2char");function H7e(t,e){var r=$G[t.charCodeAt(e)];return r??-1}s(H7e,"intAt");function C4t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(C4t,"bnpCopyTo");function x4t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(x4t,"bnpFromInt");function Kv(t){var e=fo();return e.fromInt(t),e}s(Kv,"nbv");function v4t(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:H7e(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&xt.ZERO.subTo(this,this)}s(v4t,"bnpFromString");function b4t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(b4t,"bnpClamp");function E4t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(n=this.data[a]>>l)>0&&(i=!0,o=G7e(n));a>=0;)l<e?(n=(this.data[a]&(1<<l)-1)<<e-l,n|=this.data[--a]>>(l+=this.DB-e)):(n=this.data[a]>>(l-=e)&r,l<=0&&(l+=this.DB,--a)),n>0&&(i=!0),i&&(o+=G7e(n));return i?o:"0"}s(E4t,"bnToString");function I4t(){var t=fo();return xt.ZERO.subTo(this,t),t}s(I4t,"bnNegate");function T4t(){return this.s<0?this.negate():this}s(T4t,"bnAbs");function w4t(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(w4t,"bnCompareTo");function zG(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(zG,"nbits");function _4t(){return this.t<=0?0:this.DB*(this.t-1)+zG(this.data[this.t-1]^this.s&this.DM)}s(_4t,"bnBitLength");function S4t(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(S4t,"bnpDLShiftTo");function R4t(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(R4t,"bnpDRShiftTo");function k4t(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>n|a,a=(this.data[l]&i)<<r;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(k4t,"bnpLShiftTo");function B4t(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(B4t,"bnpRShiftTo");function D4t(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(D4t,"bnpSubTo");function P4t(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&xt.ZERO.subTo(e,e)}s(P4t,"bnpMultiplyTo");function N4t(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(N4t,"bnpSquareTo");function L4t(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=fo());var o=fo(),a=this.s,l=t.s,c=this.DB-zG(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,v=y-u,b=e??fo();for(o.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),xt.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=r.data[--y]==d?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,E,r,v,0,u))<E)for(o.dlShiftTo(v,b),r.subTo(b,r);r.data[y]<--E;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),a!=l&&xt.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&xt.ZERO.subTo(r,r)}}}s(L4t,"bnpDivRemTo");function F4t(t){var e=fo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(xt.ZERO)>0&&t.subTo(e,e),e}s(F4t,"bnMod");function G2(t){this.m=t}s(G2,"Classic");function M4t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(M4t,"cConvert");function Q4t(t){return t}s(Q4t,"cRevert");function O4t(t){t.divRemTo(this.m,null,t)}s(O4t,"cReduce");function U4t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(U4t,"cMulTo");function q4t(t,e){t.squareTo(e),this.reduce(e)}s(q4t,"cSqrTo");G2.prototype.convert=M4t;G2.prototype.revert=Q4t;G2.prototype.reduce=O4t;G2.prototype.mulTo=U4t;G2.prototype.sqrTo=q4t;function W4t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(W4t,"bnpInvDigit");function H2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(H2,"Montgomery");function G4t(t){var e=fo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(xt.ZERO)>0&&this.m.subTo(e,e),e}s(G4t,"montConvert");function H4t(t){var e=fo();return t.copyTo(e),this.reduce(e),e}s(H4t,"montRevert");function j4t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(j4t,"montReduce");function V4t(t,e){t.squareTo(e),this.reduce(e)}s(V4t,"montSqrTo");function $4t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s($4t,"montMulTo");H2.prototype.convert=G4t;H2.prototype.revert=H4t;H2.prototype.reduce=j4t;H2.prototype.mulTo=$4t;H2.prototype.sqrTo=V4t;function z4t(){return(this.t>0?this.data[0]&1:this.s)==0}s(z4t,"bnpIsEven");function Y4t(t,e){if(t>4294967295||t<1)return xt.ONE;var r=fo(),n=fo(),i=e.convert(this),o=zG(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(Y4t,"bnpExp");function K4t(t,e){var r;return t<256||e.isEven()?r=new G2(e):r=new H2(e),this.exp(t,r)}s(K4t,"bnModPowInt");xt.prototype.copyTo=C4t;xt.prototype.fromInt=x4t;xt.prototype.fromString=v4t;xt.prototype.clamp=b4t;xt.prototype.dlShiftTo=S4t;xt.prototype.drShiftTo=R4t;xt.prototype.lShiftTo=k4t;xt.prototype.rShiftTo=B4t;xt.prototype.subTo=D4t;xt.prototype.multiplyTo=P4t;xt.prototype.squareTo=N4t;xt.prototype.divRemTo=L4t;xt.prototype.invDigit=W4t;xt.prototype.isEven=z4t;xt.prototype.exp=Y4t;xt.prototype.toString=E4t;xt.prototype.negate=I4t;xt.prototype.abs=T4t;xt.prototype.compareTo=w4t;xt.prototype.bitLength=_4t;xt.prototype.mod=F4t;xt.prototype.modPowInt=K4t;xt.ZERO=Kv(0);xt.ONE=Kv(1);function J4t(){var t=fo();return this.copyTo(t),t}s(J4t,"bnClone");function X4t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(X4t,"bnIntValue");function Z4t(){return this.t==0?this.s:this.data[0]<<24>>24}s(Z4t,"bnByteValue");function eRt(){return this.t==0?this.s:this.data[0]<<16>>16}s(eRt,"bnShortValue");function tRt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(tRt,"bnpChunkSize");function rRt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(rRt,"bnSigNum");function nRt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Kv(r),i=fo(),o=fo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(nRt,"bnpToRadix");function iRt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=H7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&xt.ZERO.subTo(this,this)}s(iRt,"bnpFromRadix");function oRt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(xt.ONE.shiftLeft(t-1),Ace,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(xt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(oRt,"bnpFromNumber");function sRt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(sRt,"bnToByteArray");function aRt(t){return this.compareTo(t)==0}s(aRt,"bnEquals");function lRt(t){return this.compareTo(t)<0?this:t}s(lRt,"bnMin");function cRt(t){return this.compareTo(t)>0?this:t}s(cRt,"bnMax");function uRt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(uRt,"bnpBitwiseTo");function dRt(t,e){return t&e}s(dRt,"op_and");function fRt(t){var e=fo();return this.bitwiseTo(t,dRt,e),e}s(fRt,"bnAnd");function Ace(t,e){return t|e}s(Ace,"op_or");function pRt(t){var e=fo();return this.bitwiseTo(t,Ace,e),e}s(pRt,"bnOr");function j7e(t,e){return t^e}s(j7e,"op_xor");function mRt(t){var e=fo();return this.bitwiseTo(t,j7e,e),e}s(mRt,"bnXor");function V7e(t,e){return t&~e}s(V7e,"op_andnot");function hRt(t){var e=fo();return this.bitwiseTo(t,V7e,e),e}s(hRt,"bnAndNot");function gRt(){for(var t=fo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(gRt,"bnNot");function ARt(t){var e=fo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(ARt,"bnShiftLeft");function yRt(t){var e=fo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(yRt,"bnShiftRight");function CRt(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(CRt,"lbit");function xRt(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+CRt(this.data[t]);return this.s<0?this.t*this.DB:-1}s(xRt,"bnGetLowestSetBit");function vRt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(vRt,"cbit");function bRt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=vRt(this.data[r]^e);return t}s(bRt,"bnBitCount");function ERt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(ERt,"bnTestBit");function IRt(t,e){var r=xt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(IRt,"bnpChangeBit");function TRt(t){return this.changeBit(t,Ace)}s(TRt,"bnSetBit");function wRt(t){return this.changeBit(t,V7e)}s(wRt,"bnClearBit");function _Rt(t){return this.changeBit(t,j7e)}s(_Rt,"bnFlipBit");function SRt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(SRt,"bnpAddTo");function RRt(t){var e=fo();return this.addTo(t,e),e}s(RRt,"bnAdd");function kRt(t){var e=fo();return this.subTo(t,e),e}s(kRt,"bnSubtract");function BRt(t){var e=fo();return this.multiplyTo(t,e),e}s(BRt,"bnMultiply");function DRt(t){var e=fo();return this.divRemTo(t,e,null),e}s(DRt,"bnDivide");function PRt(t){var e=fo();return this.divRemTo(t,null,e),e}s(PRt,"bnRemainder");function NRt(t){var e=fo(),r=fo();return this.divRemTo(t,e,r),new Array(e,r)}s(NRt,"bnDivideAndRemainder");function LRt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(LRt,"bnpDMultiply");function FRt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(FRt,"bnpDAddOffset");function LP(){}s(LP,"NullExp");function $7e(t){return t}s($7e,"nNop");function MRt(t,e,r){t.multiplyTo(e,r)}s(MRt,"nMulTo");function QRt(t,e){t.squareTo(e)}s(QRt,"nSqrTo");LP.prototype.convert=$7e;LP.prototype.revert=$7e;LP.prototype.mulTo=MRt;LP.prototype.sqrTo=QRt;function ORt(t){return this.exp(t,new LP)}s(ORt,"bnPow");function URt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(URt,"bnpMultiplyLowerTo");function qRt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(qRt,"bnpMultiplyUpperTo");function O4(t){this.r2=fo(),this.q3=fo(),xt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(O4,"Barrett");function WRt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fo();return t.copyTo(e),this.reduce(e),e}s(WRt,"barrettConvert");function GRt(t){return t}s(GRt,"barrettRevert");function HRt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(HRt,"barrettReduce");function jRt(t,e){t.squareTo(e),this.reduce(e)}s(jRt,"barrettSqrTo");function VRt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(VRt,"barrettMulTo");O4.prototype.convert=WRt;O4.prototype.revert=GRt;O4.prototype.reduce=HRt;O4.prototype.mulTo=VRt;O4.prototype.sqrTo=jRt;function $Rt(t,e){var r=t.bitLength(),n,i=Kv(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new G2(e):e.isEven()?o=new O4(e):o=new H2(e);var a=new Array,l=3,c=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var d=fo();for(o.sqrTo(a[1],d);l<=u;)a[l]=fo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=fo(),y;for(r=zG(t.data[p])-1;p>=0;){for(r>=c?m=t.data[p]>>r-c&u:(m=(t.data[p]&(1<<r+1)-1)<<c-r,p>0&&(m|=t.data[p-1]>>this.DB+r-c)),l=n;(m&1)==0;)m>>=1,--l;if((r-=l)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s($Rt,"bnModPow");function zRt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(zRt,"bnGCD");function YRt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(YRt,"bnpModInt");function KRt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return xt.ZERO;for(var r=t.clone(),n=this.clone(),i=Kv(1),o=Kv(0),a=Kv(0),l=Kv(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(l,o)):(n.subTo(r,n),e&&a.subTo(i,a),l.subTo(o,l))}if(n.compareTo(xt.ONE)!=0)return xt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(KRt,"bnModInverse");var Km=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],JRt=(1<<26)/Km[Km.length-1];function XRt(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Km[Km.length-1]){for(e=0;e<Km.length;++e)if(r.data[0]==Km[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Km.length;){for(var n=Km[e],i=e+1;i<Km.length&&n<JRt;)n*=Km[i++];for(n=r.modInt(n);e<i;)if(n%Km[e++]==0)return!1}return r.millerRabin(t)}s(XRt,"bnIsProbablePrime");function ZRt(t){var e=this.subtract(xt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=ekt(),o,a=0;a<t;++a){do o=new xt(this.bitLength(),i);while(o.compareTo(xt.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(n,this);if(l.compareTo(xt.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(xt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(ZRt,"bnpMillerRabin");function ekt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(ekt,"bnGetPrng");xt.prototype.chunkSize=tRt;xt.prototype.toRadix=nRt;xt.prototype.fromRadix=iRt;xt.prototype.fromNumber=oRt;xt.prototype.bitwiseTo=uRt;xt.prototype.changeBit=IRt;xt.prototype.addTo=SRt;xt.prototype.dMultiply=LRt;xt.prototype.dAddOffset=FRt;xt.prototype.multiplyLowerTo=URt;xt.prototype.multiplyUpperTo=qRt;xt.prototype.modInt=YRt;xt.prototype.millerRabin=ZRt;xt.prototype.clone=J4t;xt.prototype.intValue=X4t;xt.prototype.byteValue=Z4t;xt.prototype.shortValue=eRt;xt.prototype.signum=rRt;xt.prototype.toByteArray=sRt;xt.prototype.equals=aRt;xt.prototype.min=lRt;xt.prototype.max=cRt;xt.prototype.and=fRt;xt.prototype.or=pRt;xt.prototype.xor=mRt;xt.prototype.andNot=hRt;xt.prototype.not=gRt;xt.prototype.shiftLeft=ARt;xt.prototype.shiftRight=yRt;xt.prototype.getLowestSetBit=xRt;xt.prototype.bitCount=bRt;xt.prototype.testBit=ERt;xt.prototype.setBit=TRt;xt.prototype.clearBit=wRt;xt.prototype.flipBit=_Rt;xt.prototype.add=RRt;xt.prototype.subtract=kRt;xt.prototype.multiply=BRt;xt.prototype.divide=DRt;xt.prototype.remainder=PRt;xt.prototype.divideAndRemainder=NRt;xt.prototype.modPow=$Rt;xt.prototype.modInverse=KRt;xt.prototype.pow=ORt;xt.prototype.gcd=zRt;xt.prototype.isProbablePrime=XRt});var U4=G((dtn,X7e)=>{f();var Jg=di();Vg();uo();var K7e=X7e.exports=Jg.sha1=Jg.sha1||{};Jg.md.sha1=Jg.md.algorithms.sha1=K7e;K7e.create=function(){J7e||tkt();var t=null,e=Jg.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Jg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Jg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Y7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Jg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(yce.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Y7e(p,r,i);var m=Jg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var yce=null,J7e=!1;function tkt(){yce="\x80",yce+=Jg.util.fillString("\0",64),J7e=!0}s(tkt,"_init");function Y7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o&a|l&(o^a),n=(i<<5|i>>>27)+u+c+2400959708+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+3395469782+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(Y7e,"_update")});var Cce=G((mtn,eLe)=>{f();var Xg=di();uo();pp();U4();var Z7e=eLe.exports=Xg.pkcs1=Xg.pkcs1||{};Z7e.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=Xg.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=Xg.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=YG(i,l-o.digestLength-1,a),v=Xg.util.xorBytes(g,y,g.length),b=YG(v,o.digestLength,a),E=Xg.util.xorBytes(i,b,i.length);return"\0"+E+v};Z7e.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=Xg.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=YG(d,i.digestLength,o),m=Xg.util.xorBytes(u,p,u.length),h=YG(m,a-i.digestLength-1,o),g=Xg.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var B=g.charCodeAt(k),N=B&1^1,W=E?65534:0;v|=B&W,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function YG(t,e,r){r||(r=Xg.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(YG,"rsa_mgf1")});var vce=G((Atn,xce)=>{f();var Jv=di();uo();FP();pp();(function(){if(Jv.prime){xce.exports=Jv.prime;return}var t=xce.exports=Jv.prime=Jv.prime||{},e=Jv.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||Jv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(r[g++%8],0)}while(v<0||+new Date-E<v);Jv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return Jv.util.estimateCores(function(B,N){B&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var B=[],N=0;N<v;++N)B[N]=new Worker(_);for(var W=v,N=0;N<v;++N)B[N].addEventListener("message",me);var ee=!1;function me(ae){if(!ee){--W;var H=ae.data;if(H.found){for(var O=0;O<B.length;++O)B[O].terminate();return ee=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var le=y.toString(16);ae.target.postMessage({hex:le,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var MP=G((xtn,aLe)=>{f();var Zr=di();Ym();FP();Yv();Cce();vce();pp();uo();typeof eo>"u"&&(eo=Zr.jsbn.BigInteger);var eo,bce=Zr.util.isNodejs?require("crypto"):null,qe=Zr.asn1,hp=Zr.util;Zr.pki=Zr.pki||{};aLe.exports=Zr.pki.rsa=Zr.rsa=Zr.rsa||{};var Zn=Zr.pki,rkt=[6,4,2,4,2,4,6,2],nkt={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},ikt={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},okt={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},skt=Zr.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},akt={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},lkt=s(function(t){var e;if(t.algorithm in Zn.oids)e=Zn.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,n)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),oLe=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(eo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(eo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new eo(Zr.util.bytesToHex(Zr.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(eo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");Zn.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=sLe(t,e,r)):(i=Zr.util.createBuffer(),i.putBytes(t));for(var a=new eo(i.toHex(),16),l=oLe(a,e,n),c=l.toString(16),u=Zr.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zr.util.hexToBytes(c)),u.getBytes()};Zn.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new eo(Zr.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=oLe(a,e,r),c=l.toString(16),u=Zr.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zr.util.hexToBytes(c)),n!==!1?KG(u.getBytes(),e,r):u.getBytes()};Zn.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Zr.random,i={nextBytes:s(function(l){for(var c=n.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new eo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Zn.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new eo(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new eo(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(eo.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(ukt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(rkt[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(eo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Zn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zn.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Zn.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Zr.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(tLe("generateKeyPair"))return bce.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return n(l);n(null,{privateKey:Zn.privateKeyFromPem(u),publicKey:Zn.publicKeyFromPem(c)})});if(rLe("generateKey")&&rLe("exportKey"))return hp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:iLe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return hp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var c=Zn.privateKeyFromAsn1(qe.fromDer(Zr.util.createBuffer(l)));n(null,{privateKey:c,publicKey:Zn.setRsaPublicKey(c.n,c.e)})}});if(nLe("generateKey")&&nLe("exportKey")){var i=hp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:iLe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=hp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Zn.privateKeyFromAsn1(qe.fromDer(Zr.util.createBuffer(p)));n(null,{privateKey:m,publicKey:Zn.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(tLe("generateKeyPairSync")){var o=bce.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Zn.privateKeyFromPem(o.privateKey),publicKey:Zn.publicKeyFromPem(o.publicKey)}}}var a=Zn.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Zn.rsa.stepKeyPairGenerationState(a,0),a.keys;ckt(a,r,n)};Zn.setRsaPublicKey=Zn.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return sLe(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return Zr.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return Zn.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=KG(u,r,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,akt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===Zr.oids.md2||g===Zr.oids.md5||g===Zr.oids.sha1||g===Zr.oids.sha224||g===Zr.oids.sha256||g===Zr.oids.sha384||g===Zr.oids.sha512||g===Zr.oids["sha512-224"]||g===Zr.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===Zr.oids.md2||g===Zr.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=KG(u,r,!0),c===u},"verify")});var l=Zn.rsa.decrypt(i,r,!0,!1);return o.verify(n,l,r.n.bitLength())},r};Zn.setRsaPrivateKey=Zn.rsa.setPrivateKey=function(t,e,r,n,i,o,a,l){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Zn.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:KG};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return Zr.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:lkt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Zn.rsa.encrypt(m,c,p)},c};Zn.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Zn.privateKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,nkt,e,r)&&(t=qe.fromDer(Zr.util.createBuffer(e.privateKey))),e={},r=[],!qe.validate(t,ikt,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,l,c,u,d,p;return i=Zr.util.createBuffer(e.privateKeyModulus).toHex(),o=Zr.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Zr.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Zr.util.createBuffer(e.privateKeyPrime1).toHex(),c=Zr.util.createBuffer(e.privateKeyPrime2).toHex(),u=Zr.util.createBuffer(e.privateKeyExponent1).toHex(),d=Zr.util.createBuffer(e.privateKeyExponent2).toHex(),p=Zr.util.createBuffer(e.privateKeyCoefficient).toHex(),Zn.setRsaPrivateKey(new eo(i,16),new eo(o,16),new eo(a,16),new eo(l,16),new eo(c,16),new eo(u,16),new eo(d,16),new eo(p,16))};Zn.privateKeyToAsn1=Zn.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.qInv))])};Zn.publicKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,skt,e,r)){var n=qe.derToOid(e.publicKeyOid);if(n!==Zn.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!qe.validate(t,okt,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=Zr.util.createBuffer(e.publicKeyModulus).toHex(),a=Zr.util.createBuffer(e.publicKeyExponent).toHex();return Zn.setRsaPublicKey(new eo(o,16),new eo(a,16))};Zn.publicKeyToAsn1=Zn.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Zn.publicKeyToRSAPublicKey(t)])])};Zn.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Zg(t.e))])};function sLe(t,e,r){var n=Zr.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var c=0;c<a;++c)n.putByte(l)}else for(;a>0;){for(var u=0,d=Zr.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:n.putByte(l);a=u}return n.putByte(0),n.putBytes(t),n}s(sLe,"_encodePkcs1_v1_5");function KG(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=Zr.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(KG,"_decodePkcs1_v1_5");function ckt(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return r(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){Zr.prime.generateProbablePrime(l,n,c)}s(o,"getPrime");function a(l,c){if(l)return r(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.p=null,i();return}if(t.q.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(eo.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Zn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zn.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(ckt,"_generateKeyPair");function Zg(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Zr.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(Zg,"_bnToBytes");function ukt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(ukt,"_getMillerRabinTests");function tLe(t){return Zr.util.isNodejs&&typeof bce[t]=="function"}s(tLe,"_detectNodeCrypto");function rLe(t){return typeof hp.globalScope<"u"&&typeof hp.globalScope.crypto=="object"&&typeof hp.globalScope.crypto.subtle=="object"&&typeof hp.globalScope.crypto.subtle[t]=="function"}s(rLe,"_detectSubtleCrypto");function nLe(t){return typeof hp.globalScope<"u"&&typeof hp.globalScope.msCrypto=="object"&&typeof hp.globalScope.msCrypto.subtle=="object"&&typeof hp.globalScope.msCrypto.subtle[t]=="function"}s(nLe,"_detectSubtleMsCrypto");function iLe(t){for(var e=Zr.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(iLe,"_intToUint8Array")});var Ece=G((Etn,fLe)=>{f();var ur=di();zv();Ym();NP();Vg();Yv();jG();W2();pp();mce();MP();uo();typeof lLe>"u"&&(lLe=ur.jsbn.BigInteger);var lLe,at=ur.asn1,ai=ur.pki=ur.pki||{};fLe.exports=ai.pbe=ur.pbe=ur.pbe||{};var j2=ai.oids,dkt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},fkt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};ai.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=ur.random.getBytesSync(r.saltSize),i=r.count,o=at.integerToDer(i),a,l,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,d,p;switch(r.algorithm){case"aes128":a=16,u=16,d=j2["aes128-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=j2["aes192-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=j2["aes256-CBC"],p=ur.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=j2.desCBC,p=ur.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=dLe(h),y=ur.pkcs5.pbkdf2(e,n,i,a,g),v=ur.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=mkt(n,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){a=24;var _=new ur.util.ByteBuffer(n),y=ai.pbe.generatePkcs12Key(e,_,1,i,a),v=ai.pbe.generatePkcs12Key(e,_,2,i,a),b=ur.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,n),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};ai.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!at.validate(t,dkt,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(n.encryptionOid),l=ai.pbe.getCipher(a,n.encryptionParams,e),c=ur.util.createBuffer(n.encryptedData);return l.update(c),l.finish()&&(r=at.fromDer(l.output)),r};ai.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return ur.pem.encode(r,{maxline:e})};ai.encryptedPrivateKeyFromPem=function(t){var e=ur.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};ai.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=ai.wrapRsaPrivateKey(ai.privateKeyToAsn1(t));return n=ai.encryptPrivateKeyInfo(n,e,r),ai.encryptedPrivateKeyToPem(n)}var i,o,a,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=ur.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(ai.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ur.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return ur.pem.encode(p)};ai.decryptRsaPrivateKey=function(t,e){var r=null,n=ur.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=ur.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=ur.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=ur.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=ur.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=ur.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return ur.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return ur.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return ur.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=ur.util.hexToBytes(n.dekInfo.parameters),c=ur.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(ur.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ai.decryptPrivateKeyInfo(at.fromDer(r),e):r=at.fromDer(r),r!==null&&(r=ai.privateKeyFromAsn1(r)),r};ai.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in ur.md))throw new Error('"sha1" hash algorithm unavailable.');o=ur.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new ur.util.ByteBuffer,p=new ur.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new ur.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),v=new ur.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new ur.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),B=1;B<=k;B++){var N=new ur.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var W=0;W<n;W++)o.start(),o.update(N.getBytes()),N=o.digest();var ee=new ur.util.ByteBuffer;for(l=0;l<u;l++)ee.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),ae=new ur.util.ByteBuffer;for(a=0;a<me;a++){var H=new ur.util.ByteBuffer(_.getBytes(u)),O=511;for(l=ee.length()-1;l>=0;l--)O=O>>8,O+=ee.at(l)+H.at(l),H.setAt(l,O&255);ae.putBuffer(H)}_=ae,d.putBuffer(N)}return d.truncate(d.length()-i),d};ai.pbe.getCipher=function(t,e,r){switch(t){case ai.oids.pkcs5PBES2:return ai.pbe.getCipherForPBES2(t,e,r);case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:return ai.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ai.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!at.validate(e,fkt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(n.kdfOid),t!==ai.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(n.encOid),t!==ai.oids["aes128-CBC"]&&t!==ai.oids["aes192-CBC"]&&t!==ai.oids["aes256-CBC"]&&t!==ai.oids["des-EDE3-CBC"]&&t!==ai.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,l=ur.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(ai.oids[t]){case"aes128-CBC":c=16,u=ur.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=ur.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=ur.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=ur.des.createDecryptionCipher;break;case"desCBC":c=8,u=ur.des.createDecryptionCipher;break}var d=uLe(n.prfOid),p=ur.pkcs5.pbkdf2(r,a,l,c,d),m=n.encIv,h=u(p);return h.start(m),h};ai.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!at.validate(e,pkt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=ur.util.createBuffer(n.salt),l=ur.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=ur.des.startDecrypting;break;case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=ur.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=uLe(n.prfOid),m=ai.pbe.generatePkcs12Key(r,a,1,l,c,p);p.start();var h=ai.pbe.generatePkcs12Key(r,a,2,l,u,p);return d(m,h)};ai.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in ur.md))throw new Error('"md5" hash algorithm unavailable.');n=ur.md.md5.create()}e===null&&(e="");for(var i=[cLe(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(cLe(n,i[a-1]+t+e));return i.join("").substr(0,r)};function cLe(t,e){return t.start().update(e).digest().getBytes()}s(cLe,"hash");function uLe(t){var e;if(!t)e="hmacWithSHA1";else if(e=ai.oids[at.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return dLe(e)}s(uLe,"prfOidToMessageDigest");function dLe(t){var e=ur.md;switch(t){case"hmacWithSHA224":e=ur.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(dLe,"prfAlgorithmToMessageDigest");function mkt(t,e,r,n){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,ur.util.hexToBytes(r.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(ai.oids[n]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(mkt,"createPbkdf2Params")});var Ice=G((wtn,hLe)=>{f();var q4=di();Ym();uo();var or=q4.asn1,W4=hLe.exports=q4.pkcs7asn1=q4.pkcs7asn1||{};q4.pkcs7=q4.pkcs7||{};q4.pkcs7.asn1=W4;var pLe={name:"ContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};W4.contentInfoValidator=pLe;var mLe={name:"EncryptedContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};W4.envelopedDataValidator={name:"EnvelopedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(mLe)};W4.encryptedDataValidator={name:"EncryptedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"}].concat(mLe)};var hkt={name:"SignerInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};W4.signedDataValidator={name:"SignedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},pLe,{name:"SignedData.Certificates",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,capture:"signerInfos",optional:!0,value:[hkt]}]};W4.recipientInfoValidator={name:"RecipientInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Tce=G((Stn,gLe)=>{f();var V2=di();uo();V2.mgf=V2.mgf||{};var gkt=gLe.exports=V2.mgf.mgf1=V2.mgf1=V2.mgf1||{};gkt.create=function(t){var e={generate:s(function(r,n){for(var i=new V2.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var l=new V2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var yLe=G((Btn,ALe)=>{f();var JG=di();Tce();ALe.exports=JG.mgf=JG.mgf||{};JG.mgf.mgf1=JG.mgf1});var XG=G((Ptn,CLe)=>{f();var $2=di();pp();uo();var Akt=CLe.exports=$2.pss=$2.pss||{};Akt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=$2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||$2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new $2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new $2.util.ByteBuffer;b.fillWithByte(0,m-o-n-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-n-1,k=r.generate(v,_),B="";for(d=0;d<_;d++)B+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~N)+B.substr(1),B+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),v=u.substr(g,n),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=r.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=_.substr(-o),N=new $2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(B),e.start(),e.update(N.getBytes());var W=e.digest().getBytes();return v===W},l}});var tH=G((Ltn,ILe)=>{f();var en=di();zv();Ym();NP();Vg();yLe();Yv();W2();XG();MP();uo();var V=en.asn1,Wt=ILe.exports=en.pki=en.pki||{},to=Wt.oids,pa={};pa.CN=to.commonName;pa.commonName="CN";pa.C=to.countryName;pa.countryName="C";pa.L=to.localityName;pa.localityName="L";pa.ST=to.stateOrProvinceName;pa.stateOrProvinceName="ST";pa.O=to.organizationName;pa.organizationName="O";pa.OU=to.organizationalUnitName;pa.organizationalUnitName="OU";pa.E=to.emailAddress;pa.emailAddress="E";var vLe=en.pki.rsa.publicKeyValidator,ykt={name:"Certificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},vLe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Ckt={name:"rsapss",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},xkt={name:"CertificationRequestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},vLe,{name:"CertificationRequestInfo.attributes",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:V.Class.UNIVERSAL,type:V.Type.SET,constructed:!0}]}]}]},vkt={name:"CertificationRequest",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[xkt,{name:"CertificationRequest.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var l=0;l<n.value.length;++l)o={},i=n.value[l],o.type=V.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in to&&(o.name=to[o.type],o.name in pa&&(o.shortName=pa[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Wt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=V.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in to&&(l.name=to[l.type],l.name in pa&&(l.shortName=pa[l.name])),l.type===to.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Xv(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(Xv,"_getAttribute");var ZG=s(function(t,e,r){var n={};if(t!==to["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:to.sha1},mgf:{algorithmOid:to.mgf1,hash:{algorithmOid:to.sha1}},saltLength:20});var i={},o=[];if(!V.validate(e,Ckt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=V.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=V.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=V.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),eH=s(function(t){switch(to[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return en.md.sha1.create();case"md5WithRSAEncryption":return en.md.md5.create();case"sha256WithRSAEncryption":return en.md.sha256.create();case"sha384WithRSAEncryption":return en.md.sha384.create();case"sha512WithRSAEncryption":return en.md.sha512.create();case"RSASSA-PSS":return en.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),bLe=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case to.sha1WithRSAEncryption:case to.sha1WithRSASignature:break;case to["RSASSA-PSS"]:var n,i;if(n=to[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||en.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=to[e.signatureParameters.mgf.algorithmOid],i===void 0||en.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=en.mgf[i].create(en.md[n].create()),n=to[e.signatureParameters.hash.algorithmOid],n===void 0||en.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=en.pss.create(en.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Wt.certificateFromPem=function(t,e,r){var n=en.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=V.fromDer(n.body,r);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:V.toDer(Wt.certificateToAsn1(t)).getBytes()};return en.pem.encode(r,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=en.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return Wt.publicKeyFromAsn1(n)};Wt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:V.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return en.pem.encode(r,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return en.pem.encode(r,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||en.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=V.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,r){var n=en.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=V.fromDer(n.body,r);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:V.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return en.pem.encode(r,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Xv(t.issuer,e)},t.issuer.addField=function(e){gp([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Xv(t.subject,e)},t.subject.addField=function(e){gp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){gp(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){gp(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)ELe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||en.md.sha1.create();var n=to[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Wt.getTBSCertificate(t);var o=V.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=eH({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=V.toDer(l);a.update(c.getBytes())}return a!==null&&(r=bLe({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,l=0;r&&l<n.attributes.length;++l)o=n.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=to.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return en.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var r={},n=[];if(!V.validate(t,ykt,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=V.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=en.util.createBuffer(r.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=en.asn1.derToOid(r.certSignatureOid),a.signatureParameters=ZG(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=en.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=ZG(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(V.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(V.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,e){a.md=eH({signatureOid:a.signatureOid,type:"certificate"});var u=V.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=en.md.sha1.create(),p=V.toDer(r.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Xv(a.issuer,g)},a.issuer.addField=function(g){gp([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=en.md.sha1.create(),h=V.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Xv(a.subject,g)},a.subject.addField=function(g){gp([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(n.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=V.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===V.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in to){if(e.name=to[e.id],e.name==="keyUsage"){var r=V.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=V.fromDer(e.value);r.value.length>0&&r.value[0].type===V.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===V.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=V.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=V.fromDer(e.value),a=0;a<r.value.length;++a){var l=V.derToOid(r.value[a].value);l in to?e[to[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=V.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=V.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=en.util.bytesToIP(c.value);break;case 8:d.oid=V.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=V.fromDer(e.value);e.subjectKeyIdentifier=en.util.bytesToHex(r.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!V.validate(t,vkt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=V.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=en.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=ZG(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=en.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=ZG(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=eH({signatureOid:a.signatureOid,type:"certification request"});var l=V.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=en.md.sha1.create();return a.subject.getField=function(u){return Xv(a.subject,u)},a.subject.addField=function(u){gp([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return Xv(a,u)},a.addAttribute=function(u){gp([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Xv(t.subject,e)},t.subject.addField=function(e){gp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Xv(t,e)},t.addAttribute=function(e){gp([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){gp(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){gp(e),t.attributes=e},t.sign=function(e,r){t.md=r||en.md.sha1.create();var n=to[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=V.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=eH({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=V.toDer(n);r.update(i.getBytes())}return r!==null&&(e=bLe({certificate:t,md:r,signature:t.signature})),e},t};function G4(t){for(var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,l=V.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===V.Type.UTF8&&(a=en.util.encodeUtf8(a))),n=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(r.type).getBytes()),V.create(V.Class.UNIVERSAL,l,!1,a)])]),e.value.push(n)}return e}s(G4,"_dnToAsn1");function gp(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in pa&&(e.name=Wt.oids[pa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in pa&&(e.shortName=pa[e.name]),e.type===to.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=V.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(ELe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(gp,"_fillMissingFields");function ELe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in to?l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(to[c]).getBytes())):c.indexOf(".")!==-1&&l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=en.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));t.value.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=V.create(V.Class.UNIVERSAL,V.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[V.create(V.Class.CONTEXT_SPECIFIC,4,!0,[G4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=en.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),v=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=en.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));v.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(ELe,"_fillMissingExtensionFields");function wce(t,e){switch(t){case to["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(e.saltLength).getBytes())])),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,r);default:return V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")}}s(wce,"_signatureParametersToAsn1");function bkt(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=V.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===V.Type.UTF8&&(o=en.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(i.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(bkt,"_CRIAttributesToAsn1");var Ekt=new Date("1950-01-01T00:00:00Z"),Ikt=new Date("2050-01-01T00:00:00Z");function xLe(t){return t>=Ekt&&t<Ikt?V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(t)):V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(t))}s(xLe,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=xLe(t.validity.notBefore),r=xLe(t.validity.notAfter),n=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes())]),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,en.util.hexToBytes(t.serialNumber)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.siginfo.algorithmOid).getBytes()),wce(t.siginfo.algorithmOid,t.siginfo.parameters)]),G4(t.issuer),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,r]),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),n};Wt.getCertificationRequestInfo=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey),bkt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return G4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),wce(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,3,!0,[]),r=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Wt.certificateExtensionToAsn1(t[n]));return e};Wt.certificateExtensionToAsn1=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.id).getBytes())),t.critical&&e.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=V.toDer(r).getBytes()),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,r)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),wce(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=r(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=en.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];en.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=en.pki.certificateFromPem(a));var l=r(a.subject);if(!l)return!1;en.util.isArray(l)||(l=[l]);for(var c=V.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=V.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!en.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=en.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var c=r(a.subject);if(!en.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=V.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=V.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var l=en.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(G4(a),l),a.hash=l.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;en.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,l,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!en.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var Sce=G((Qtn,wLe)=>{f();var ns=di();Ym();F4();Yv();Ice();Ece();pp();MP();U4();uo();tH();var Ie=ns.asn1,_i=ns.pki,OP=wLe.exports=ns.pkcs12=ns.pkcs12||{},TLe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Tkt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},TLe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},wkt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},_kt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},Skt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function QP(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}s(QP,"_getBagsByAttribute");OP.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,Tkt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=ns.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=QP(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=QP(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=QP(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return QP(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return QP(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var l=n.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=_ce(l),n.mac){var c=null,u=0,d=Ie.derToOid(n.macAlgorithm);switch(d){case _i.oids.sha1:c=ns.md.sha1.create(),u=20;break;case _i.oids.sha256:c=ns.md.sha256.create(),u=32;break;case _i.oids.sha384:c=ns.md.sha384.create(),u=48;break;case _i.oids.sha512:c=ns.md.sha512.create(),u=64;break;case _i.oids.md5:c=ns.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new ns.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(ns.util.bytesToHex(n.macIterations),16):1,h=OP.generateKey(r,p,3,m,u,c),g=ns.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Rkt(a,l.value,e,r),a};function _ce(t){if(t.composed||t.constructed){for(var e=ns.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(_ce,"_decodePkcs7Data");function Rkt(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,TLe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=_ce(p).value;break;case _i.oids.encryptedData:d=kkt(p,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=Bkt(d,r,n),t.safeContents.push(u)}}s(Rkt,"_decodeAuthenticatedSafe");function kkt(t,e){var r={},n=[];if(!Ie.validate(t,ns.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=_i.pbe.getCipher(o,r.encParameter,e),l=_ce(r.encryptedContentAsn1),c=ns.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(kkt,"_decryptSafeContents");function Bkt(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,wkt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:Dkt(a.bagAttributes)};n.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=Skt,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return n}s(Bkt,"_decodeSafeContents");function Dkt(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],_kt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<n.values.length;++l)e[_i.oids[a]].push(n.values[l].value)}}return e}s(Dkt,"_decodeBagAttributes");OP.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=ns.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=ns.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=ns.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=ns.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(ns.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));r===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),B=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(B)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),W;if(n.useMac){var l=ns.md.sha1.create(),ee=new ns.util.ByteBuffer(ns.random.getBytes(n.saltSize)),me=n.count,t=OP.generateKey(r,ee,3,me,20),ae=ns.hmac.create();ae.start(l,t),ae.update(Ie.toDer(N).getBytes());var H=ae.getMac();W=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,ee.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),W])};OP.generateKey=ns.pbe.generatePkcs12Key});var kce=G((qtn,_Le)=>{f();var Zv=di();Ym();Yv();Ece();W2();jG();Sce();XG();MP();uo();tH();var Rce=Zv.asn1,H4=_Le.exports=Zv.pki=Zv.pki||{};H4.pemToDer=function(t){var e=Zv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Zv.util.createBuffer(e.body)};H4.privateKeyFromPem=function(t){var e=Zv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Rce.fromDer(e.body);return H4.privateKeyFromAsn1(n)};H4.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Rce.toDer(H4.privateKeyToAsn1(t)).getBytes()};return Zv.pem.encode(r,{maxline:e})};H4.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Rce.toDer(t).getBytes()};return Zv.pem.encode(r,{maxline:e})}});var Fce=G((Gtn,LLe)=>{f();var vt=di();Ym();F4();qG();W2();kce();pp();U4();uo();var oH=s(function(t,e,r,n){var i=vt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=vt.util.createBuffer(),d=vt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);d.start("MD5",l);var h=vt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",c);var y=vt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),y.putBuffer(d.digest());return i.putBytes(vt.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),Pkt=s(function(t,e,r){var n=vt.hmac.create();n.start("SHA1",t);var i=vt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Nkt=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Lkt=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),M0=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return vt.util.createBuffer(t.getBytes(r))},"readVector"),Ap=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var r in z.CipherSuites){var n=z.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};z.handleUnexpected=function(t,e){var r=!t.open&&t.entity===z.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===z.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:vt.util.createBuffer(o.getBytes(32)),session_id:M0(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=M0(o,2),n.compression_methods=M0(o,1)),a=r-(a-o.length()),a>0){for(var l=M0(o,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:M0(l,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=M0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(M0(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(n.cipher_suite);else for(var m=vt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:vt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return n};z.createSecurityParameters=function(t,e){var r=t.entity===z.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=kLe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Mkt,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=vt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=n.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Nce,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Hkt:Pce,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:M0(n,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=M0(i.certificate_list,3),a=vt.asn1.fromDer(o),o=vt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?SLe:Pce:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?SLe:Pce)),t.process()};z.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=Qkt,t.process()};z.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:M0(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=vt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=vt.random.getBytes(48)}t.expect=Nce,t.session.clientCertificate!==null&&(t.expect=jkt),t.process()};z.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:M0(n,1),certificate_authorities:M0(n,2)};t.session.certificateRequest=i,t.expect=Okt,t.process()};z.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:M0(n,2).getBytes()},a=vt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=Nce,t.process()};z.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!vt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=Wkt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=kLe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=t.entity===z.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?Ukt:Vkt,t.process()};z.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=vt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=oH;if(n=d(c.master_secret,l,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?qkt:$kt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:n}),t.process()};z.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=vt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in iH[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:vt.md.md5.create(),sha1:vt.md.sha1.create()}),n!==z.HandshakeType.hello_request&&n!==z.HandshakeType.certificate_verify&&n!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),iH[t.entity][t.expect][n](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(n===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,vt.util.createBuffer(o))}t.process()};var Fkt=0,Mkt=1,SLe=2,Qkt=3,Okt=4,kLe=5,Ukt=6,qkt=7,Wkt=8,Gkt=0,Hkt=1,Pce=2,jkt=3,Nce=4,Vkt=5,$kt=6,$=z.handleUnexpected,BLe=z.handleChangeCipherSpec,yc=z.handleAlert,qu=z.handleHandshake,DLe=z.handleApplicationData,Cc=z.handleHeartbeat,Lce=[];Lce[z.ConnectionEnd.client]=[[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[BLe,yc,$,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,DLe,Cc],[$,yc,qu,$,Cc]];Lce[z.ConnectionEnd.server]=[[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,$,Cc],[BLe,yc,$,$,Cc],[$,yc,qu,$,Cc],[$,yc,qu,DLe,Cc],[$,yc,qu,$,Cc]];var eb=z.handleHelloRequest,zkt=z.handleServerHello,PLe=z.handleCertificate,RLe=z.handleServerKeyExchange,Bce=z.handleCertificateRequest,rH=z.handleServerHelloDone,NLe=z.handleFinished,iH=[];iH[z.ConnectionEnd.client]=[[$,$,zkt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,PLe,RLe,Bce,rH,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,RLe,Bce,rH,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,$,Bce,rH,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,$,$,rH,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,NLe],[eb,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[eb,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Ykt=z.handleClientHello,Kkt=z.handleClientKeyExchange,Jkt=z.handleCertificateVerify;iH[z.ConnectionEnd.server]=[[$,Ykt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,PLe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Kkt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Jkt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,NLe],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var r=oH,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:n.read.compressFunction=Lkt,n.write.compressFunction=Nkt;break;default:throw new Error("Unsupported compression algorithm.")}}return n};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=vt.util.createBuffer();return r.putInt32(e),r.putBytes(vt.random.getBytes(28)),r};z.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};z.createAlert=function(t,e){var r=vt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:r})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=vt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=vt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=vt.util.createBuffer();if(t.virtualHost){var c=vt.util.createBuffer();c.putByte(0),c.putByte(0);var u=vt.util.createBuffer();u.putByte(0),Ap(u,2,vt.util.createBuffer(t.virtualHost));var d=vt.util.createBuffer();Ap(d,2,u),Ap(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=vt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),Ap(g,1,vt.util.createBuffer(m)),Ap(g,2,e),Ap(g,1,o),p>0&&Ap(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=vt.util.createBuffer();return n.putByte(z.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Ap(n,1,vt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=vt.util.createBuffer();if(r!==null)try{vt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var l=vt.pem.decode(r[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=vt.util.createBuffer(l.body);o===null&&(o=vt.asn1.fromDer(u.bytes(),!1));var d=vt.util.createBuffer();Ap(d,3,u),i.putBuffer(d)}r=vt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=vt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),Ap(m,3,i),m};z.createClientKeyExchange=function(t){var e=vt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(vt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=vt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,r=vt.util.createBuffer();return e>0&&(r.putByte(z.HandshakeType.server_key_exchange),r.putInt24(e)),r};z.getClientSignature=function(t,e){var r=vt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=vt.pki.privateKeyFromPem(a)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};z.createCertificateVerify=function(t,e){var r=e.length+2,n=vt.util.createBuffer();return n.putByte(z.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};z.createCertificateRequest=function(t){var e=vt.util.createBuffer();e.putByte(1);var r=vt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=vt.pki.distinguishedNameToAsn1(i.subject),a=vt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var l=1+e.length()+2+r.length(),c=vt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),Ap(c,1,e),Ap(c,2,r),c};z.createServerHelloDone=function(t){var e=vt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=vt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=vt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===z.ConnectionEnd.client,n=t.session.sp,i=12,o=oH,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var l=vt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=vt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(vt.random.getBytes(o)),n};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=z.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)n.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&n.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Dce=s(function(t){switch(t){case!0:return!0;case vt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case vt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case vt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case vt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case vt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case vt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Xkt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return vt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return vt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return vt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return vt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return vt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return vt.pki.certificateError.unknown_ca;default:return vt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,l){var c=Dce(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!vt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=Xkt(u))}return u},vt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||vt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:Dce(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:Dce(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=vt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var l in r.order)if(r.order[l]===a){r.order.splice(l,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=vt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};z.createConnection=function(t){var e=null;t.caStore?vt.util.isArray(t.caStore)?e=vt.pki.createCaStore(t.caStore):e=t.caStore:e=vt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in z.CipherSuites)r.push(z.CipherSuites[n])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:vt.util.createBuffer(),tlsData:vt.util.createBuffer(),data:vt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?Fkt:Gkt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=Lce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:vt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:vt.md.md5.create(),sha1:vt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:vt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof vt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};LLe.exports=vt.tls=vt.tls||{};for(nH in z)typeof z[nH]!="function"&&(vt.tls[nH]=z[nH]);var nH;vt.tls.prf_tls1=oH;vt.tls.hmac_sha1=Pkt;vt.tls.createSessionCache=z.createSessionCache;vt.tls.createConnection=z.createConnection});var QLe=G((Vtn,MLe)=>{f();var tb=di();zv();Fce();var yp=MLe.exports=tb.tls;yp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=yp.BulkCipherAlgorithm.aes,t.cipher_type=yp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=yp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:FLe};yp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=yp.BulkCipherAlgorithm.aes,t.cipher_type=yp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=yp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:FLe};function FLe(t,e,r){var n=e.entity===tb.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:tb.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:tb.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=r3t,t.write.cipherFunction=Zkt,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=yp.hmac_sha1}s(FLe,"initConnectionState");function Zkt(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===yp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=tb.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=yp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(e3t)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(Zkt,"encrypt_aes_cbc_sha1");function e3t(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(e3t,"encrypt_aes_cbc_sha1_padding");function t3t(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(t3t,"decrypt_aes_cbc_sha1_padding");function r3t(t,e){var r=!1,n;t.version.minor===yp.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(t3t);var o=e.macLength,a=tb.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=tb.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=n3t(e.macKey,a,c)&&r,r}s(r3t,"decrypt_aes_cbc_sha1");function n3t(t,e,r){var n=tb.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(n3t,"compareMacs")});var Oce=G((Ytn,WLe)=>{f();var Es=di();Vg();uo();var UP=WLe.exports=Es.sha512=Es.sha512||{};Es.md.sha512=Es.md.algorithms.sha512=UP;var ULe=Es.sha384=Es.sha512.sha384=Es.sha512.sha384||{};ULe.create=function(){return UP.create("SHA-384")};Es.md.sha384=Es.md.algorithms.sha384=ULe;Es.sha512.sha256=Es.sha512.sha256||{create:s(function(){return UP.create("SHA-512/256")},"create")};Es.md["sha512/256"]=Es.md.algorithms["sha512/256"]=Es.sha512.sha256;Es.sha512.sha224=Es.sha512.sha224||{create:s(function(){return UP.create("SHA-512/224")},"create")};Es.md["sha512/224"]=Es.md.algorithms["sha512/224"]=Es.sha512.sha224;UP.create=function(t){if(qLe||i3t(),typeof t>"u"&&(t="SHA-512"),!(t in z2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=z2[t],r=null,n=Es.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);n=Es.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=Es.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),OLe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var c=Es.util.createBuffer();c.putBytes(n.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Mce.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);OLe(y,i,c);var v=Es.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Mce=null,qLe=!1,Qce=null,z2=null;function i3t(){Mce="\x80",Mce+=Es.util.fillString("\0",128),Qce=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],z2={},z2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],z2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],z2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],z2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],qLe=!0}s(i3t,"_init");function OLe(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,B,N,W,ee,me,ae,H,O,le,ie,j,q,Y,te,pe,re,fe,he=r.length();he>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)te=e[j-2],q=te[0],Y=te[1],n=((q>>>19|Y<<13)^(Y>>>29|q<<3)^q>>>6)>>>0,i=((q<<13|Y>>>19)^(Y<<3|q>>>29)^(q<<26|Y>>>6))>>>0,re=e[j-15],q=re[0],Y=re[1],o=((q>>>1|Y<<31)^(q>>>8|Y<<24)^q>>>7)>>>0,a=((q<<31|Y>>>1)^(q<<24|Y>>>8)^(q<<25|Y>>>7))>>>0,pe=e[j-7],fe=e[j-16],Y=i+pe[1]+a+fe[1],e[j][0]=n+pe[0]+o+fe[0]+(Y/4294967296>>>0)>>>0,e[j][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],B=t[3][0],N=t[3][1],W=t[4][0],ee=t[4][1],me=t[5][0],ae=t[5][1],H=t[6][0],O=t[6][1],le=t[7][0],ie=t[7][1],j=0;j<80;++j)u=((W>>>14|ee<<18)^(W>>>18|ee<<14)^(ee>>>9|W<<23))>>>0,d=((W<<18|ee>>>14)^(W<<14|ee>>>18)^(ee<<23|W>>>9))>>>0,p=(H^W&(me^H))>>>0,m=(O^ee&(ae^O))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+Qce[j][1]+e[j][1],n=le+u+p+Qce[j][0]+e[j][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,le=H,ie=O,H=me,O=ae,me=W,ae=ee,Y=N+i,W=B+n+(Y/4294967296>>>0)>>>0,ee=Y>>>0,B=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=n+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+B+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+ee,t[4][0]=t[4][0]+W+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+ae,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+O,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+le+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,he-=128}}s(OLe,"_update")});var GLe=G(Uce=>{f();var o3t=di();Ym();var Kl=o3t.asn1;Uce.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Uce.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Kl.Class.UNIVERSAL,type:Kl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var rFe=G((ern,tFe)=>{f();var xc=di();FP();pp();Oce();uo();var YLe=GLe(),s3t=YLe.publicKeyValidator,a3t=YLe.privateKeyValidator;typeof HLe>"u"&&(HLe=xc.jsbn.BigInteger);var HLe,Gce=xc.util.ByteBuffer,Nd=typeof Buffer>"u"?Uint8Array:Buffer;xc.pki=xc.pki||{};tFe.exports=xc.pki.ed25519=xc.ed25519=xc.ed25519||{};var Si=xc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=xc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=hy({message:e,encoding:"binary"});for(var r=new Nd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Nd(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return d3t(r,n),{publicKey:r,privateKey:n}};Si.privateKeyFromAsn1=function(t){var e={},r=[],n=xc.asn1.validate(t,a3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=xc.asn1.derToOid(e.privateKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=hy({message:xc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},r=[],n=xc.asn1.validate(t,s3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=xc.asn1.derToOid(e.publicKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return hy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=hy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Nd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Si.sign=function(t){t=t||{};var e=hy(t),r=hy({message:t.privateKey,encoding:"binary"});if(r.length===Si.constants.SEED_BYTE_LENGTH){var n=Si.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Nd(Si.constants.SIGN_BYTE_LENGTH+e.length);f3t(i,e,e.length,r);for(var o=new Nd(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=hy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=hy({message:t.signature,encoding:"binary"});if(r.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var n=hy({message:t.publicKey,encoding:"binary"});if(n.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Nd(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new Nd(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return p3t(o,i,i.length,n)>=0};function hy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Nd)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new Gce(e,r)}else if(!(e instanceof Gce))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Nd(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(hy,"messageToNativeBuffer");var Hce=In(),sH=In([1]),l3t=In([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c3t=In([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),jLe=In([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),VLe=In([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),qce=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),u3t=In([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function qP(t,e){var r=xc.md.sha512.create(),n=new Gce(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Nd(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(qP,"sha512");function d3t(t,e){var r=[In(),In(),In(),In()],n,i=qP(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,zce(r,i),$ce(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(d3t,"crypto_sign_keypair");function f3t(t,e,r,n){var i,o,a=new Float64Array(64),l=[In(),In(),In(),In()],c=qP(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=qP(t.subarray(32),r+32);for(jce(d),zce(l,d),$ce(t,l),i=32;i<64;++i)t[i]=n[i];var p=qP(t,r+64);for(jce(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return KLe(t.subarray(32),a),u}s(f3t,"crypto_sign");function p3t(t,e,r,n){var i,o,a=new Nd(32),l=[In(),In(),In(),In()],c=[In(),In(),In(),In()];if(o=-1,r<64||m3t(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=qP(t,r);if(jce(u),ZLe(l,c,u),zce(c,e.subarray(32)),Vce(l,c),$ce(a,l),r-=64,JLe(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(p3t,"crypto_sign_open");function KLe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*qce[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*qce[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*qce[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(KLe,"modL");function jce(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;KLe(t,e)}s(jce,"reduce");function Vce(t,e){var r=In(),n=In(),i=In(),o=In(),a=In(),l=In(),c=In(),u=In(),d=In();V4(r,t[1],t[0]),V4(d,e[1],e[0]),$o(r,r,d),j4(n,t[0],t[1]),j4(d,e[0],e[1]),$o(n,n,d),$o(i,t[3],e[3]),$o(i,i,c3t),$o(o,t[2],e[2]),j4(o,o,o),V4(a,n,r),V4(l,o,i),j4(c,o,i),j4(u,n,r),$o(t[0],a,l),$o(t[1],u,c),$o(t[2],c,l),$o(t[3],a,u)}s(Vce,"add");function $Le(t,e,r){for(var n=0;n<4;++n)eFe(t[n],e[n],r)}s($Le,"cswap");function $ce(t,e){var r=In(),n=In(),i=In();y3t(i,e[2]),$o(r,e[0],i),$o(n,e[1],i),aH(t,n),t[31]^=XLe(r)<<7}s($ce,"pack");function aH(t,e){var r,n,i,o=In(),a=In();for(r=0;r<16;++r)a[r]=e[r];for(Wce(a),Wce(a),Wce(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,eFe(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(aH,"pack25519");function m3t(t,e){var r=In(),n=In(),i=In(),o=In(),a=In(),l=In(),c=In();return rb(t[2],sH),h3t(t[1],e),Y2(i,t[1]),$o(o,i,l3t),V4(i,i,t[2]),j4(o,t[2],o),Y2(a,o),Y2(l,a),$o(c,l,a),$o(r,c,i),$o(r,r,o),g3t(r,r),$o(r,r,i),$o(r,r,o),$o(r,r,o),$o(t[0],r,o),Y2(n,t[0]),$o(n,n,o),zLe(n,i)&&$o(t[0],t[0],u3t),Y2(n,t[0]),$o(n,n,o),zLe(n,i)?-1:(XLe(t[0])===e[31]>>7&&V4(t[0],Hce,t[0]),$o(t[3],t[0],t[1]),0)}s(m3t,"unpackneg");function h3t(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(h3t,"unpack25519");function g3t(t,e){var r=In(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Y2(r,r),n!==1&&$o(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(g3t,"pow2523");function zLe(t,e){var r=new Nd(32),n=new Nd(32);return aH(r,t),aH(n,e),JLe(r,0,n,0)}s(zLe,"neq25519");function JLe(t,e,r,n){return A3t(t,e,r,n,32)}s(JLe,"crypto_verify_32");function A3t(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(A3t,"vn");function XLe(t){var e=new Nd(32);return aH(e,t),e[0]&1}s(XLe,"par25519");function ZLe(t,e,r){var n,i;for(rb(t[0],Hce),rb(t[1],sH),rb(t[2],sH),rb(t[3],Hce),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,$Le(t,e,n),Vce(e,t),Vce(t,t),$Le(t,e,n)}s(ZLe,"scalarmult");function zce(t,e){var r=[In(),In(),In(),In()];rb(r[0],jLe),rb(r[1],VLe),rb(r[2],sH),$o(r[3],jLe,VLe),ZLe(t,r,e)}s(zce,"scalarbase");function rb(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(rb,"set25519");function y3t(t,e){var r=In(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Y2(r,r),n!==2&&n!==4&&$o(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(y3t,"inv25519");function Wce(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Wce,"car25519");function eFe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(eFe,"sel25519");function In(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(In,"gf");function j4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(j4,"A");function V4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(V4,"Z");function Y2(t,e){$o(t,e,e)}s(Y2,"S");function $o(t,e,r){var n,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,B=0,N=0,W=0,ee=0,me=0,ae=0,H=0,O=0,le=0,ie=0,j=0,q=0,Y=0,te=0,pe=0,re=r[0],fe=r[1],he=r[2],Ne=r[3],Re=r[4],Je=r[5],Me=r[6],pt=r[7],Tt=r[8],Ct=r[9],bt=r[10],ce=r[11],Oe=r[12],ye=r[13],tt=r[14],X=r[15];n=e[0],o+=n*re,a+=n*fe,l+=n*he,c+=n*Ne,u+=n*Re,d+=n*Je,p+=n*Me,m+=n*pt,h+=n*Tt,g+=n*Ct,y+=n*bt,v+=n*ce,b+=n*Oe,E+=n*ye,_+=n*tt,k+=n*X,n=e[1],a+=n*re,l+=n*fe,c+=n*he,u+=n*Ne,d+=n*Re,p+=n*Je,m+=n*Me,h+=n*pt,g+=n*Tt,y+=n*Ct,v+=n*bt,b+=n*ce,E+=n*Oe,_+=n*ye,k+=n*tt,B+=n*X,n=e[2],l+=n*re,c+=n*fe,u+=n*he,d+=n*Ne,p+=n*Re,m+=n*Je,h+=n*Me,g+=n*pt,y+=n*Tt,v+=n*Ct,b+=n*bt,E+=n*ce,_+=n*Oe,k+=n*ye,B+=n*tt,N+=n*X,n=e[3],c+=n*re,u+=n*fe,d+=n*he,p+=n*Ne,m+=n*Re,h+=n*Je,g+=n*Me,y+=n*pt,v+=n*Tt,b+=n*Ct,E+=n*bt,_+=n*ce,k+=n*Oe,B+=n*ye,N+=n*tt,W+=n*X,n=e[4],u+=n*re,d+=n*fe,p+=n*he,m+=n*Ne,h+=n*Re,g+=n*Je,y+=n*Me,v+=n*pt,b+=n*Tt,E+=n*Ct,_+=n*bt,k+=n*ce,B+=n*Oe,N+=n*ye,W+=n*tt,ee+=n*X,n=e[5],d+=n*re,p+=n*fe,m+=n*he,h+=n*Ne,g+=n*Re,y+=n*Je,v+=n*Me,b+=n*pt,E+=n*Tt,_+=n*Ct,k+=n*bt,B+=n*ce,N+=n*Oe,W+=n*ye,ee+=n*tt,me+=n*X,n=e[6],p+=n*re,m+=n*fe,h+=n*he,g+=n*Ne,y+=n*Re,v+=n*Je,b+=n*Me,E+=n*pt,_+=n*Tt,k+=n*Ct,B+=n*bt,N+=n*ce,W+=n*Oe,ee+=n*ye,me+=n*tt,ae+=n*X,n=e[7],m+=n*re,h+=n*fe,g+=n*he,y+=n*Ne,v+=n*Re,b+=n*Je,E+=n*Me,_+=n*pt,k+=n*Tt,B+=n*Ct,N+=n*bt,W+=n*ce,ee+=n*Oe,me+=n*ye,ae+=n*tt,H+=n*X,n=e[8],h+=n*re,g+=n*fe,y+=n*he,v+=n*Ne,b+=n*Re,E+=n*Je,_+=n*Me,k+=n*pt,B+=n*Tt,N+=n*Ct,W+=n*bt,ee+=n*ce,me+=n*Oe,ae+=n*ye,H+=n*tt,O+=n*X,n=e[9],g+=n*re,y+=n*fe,v+=n*he,b+=n*Ne,E+=n*Re,_+=n*Je,k+=n*Me,B+=n*pt,N+=n*Tt,W+=n*Ct,ee+=n*bt,me+=n*ce,ae+=n*Oe,H+=n*ye,O+=n*tt,le+=n*X,n=e[10],y+=n*re,v+=n*fe,b+=n*he,E+=n*Ne,_+=n*Re,k+=n*Je,B+=n*Me,N+=n*pt,W+=n*Tt,ee+=n*Ct,me+=n*bt,ae+=n*ce,H+=n*Oe,O+=n*ye,le+=n*tt,ie+=n*X,n=e[11],v+=n*re,b+=n*fe,E+=n*he,_+=n*Ne,k+=n*Re,B+=n*Je,N+=n*Me,W+=n*pt,ee+=n*Tt,me+=n*Ct,ae+=n*bt,H+=n*ce,O+=n*Oe,le+=n*ye,ie+=n*tt,j+=n*X,n=e[12],b+=n*re,E+=n*fe,_+=n*he,k+=n*Ne,B+=n*Re,N+=n*Je,W+=n*Me,ee+=n*pt,me+=n*Tt,ae+=n*Ct,H+=n*bt,O+=n*ce,le+=n*Oe,ie+=n*ye,j+=n*tt,q+=n*X,n=e[13],E+=n*re,_+=n*fe,k+=n*he,B+=n*Ne,N+=n*Re,W+=n*Je,ee+=n*Me,me+=n*pt,ae+=n*Tt,H+=n*Ct,O+=n*bt,le+=n*ce,ie+=n*Oe,j+=n*ye,q+=n*tt,Y+=n*X,n=e[14],_+=n*re,k+=n*fe,B+=n*he,N+=n*Ne,W+=n*Re,ee+=n*Je,me+=n*Me,ae+=n*pt,H+=n*Tt,O+=n*Ct,le+=n*bt,ie+=n*ce,j+=n*Oe,q+=n*ye,Y+=n*tt,te+=n*X,n=e[15],k+=n*re,B+=n*fe,N+=n*he,W+=n*Ne,ee+=n*Re,me+=n*Je,ae+=n*Me,H+=n*pt,O+=n*Tt,le+=n*Ct,ie+=n*bt,j+=n*ce,q+=n*Oe,Y+=n*ye,te+=n*tt,pe+=n*X,o+=38*B,a+=38*N,l+=38*W,c+=38*ee,u+=38*me,d+=38*ae,p+=38*H,m+=38*O,h+=38*le,g+=38*ie,y+=38*j,v+=38*q,b+=38*Y,E+=38*te,_+=38*pe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s($o,"M")});var sFe=G((nrn,oFe)=>{f();var Q0=di();uo();pp();FP();oFe.exports=Q0.kem=Q0.kem||{};var nFe=Q0.jsbn.BigInteger;Q0.kem.rsa={};Q0.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Q0.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new nFe(Q0.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(l.compareTo(nFe.ONE)<=0);l=Q0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=Q0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},n.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},n};Q0.kem.kdf1=function(t,e){iFe(this,t,0,e||t.digestLength)};Q0.kem.kdf2=function(t,e){iFe(this,t,1,e||t.digestLength)};function iFe(t,e,r,n){t.generate=function(i,o){for(var a=new Q0.util.ByteBuffer,l=Math.ceil(o/n)+r,c=new Q0.util.ByteBuffer,u=r;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(iFe,"_createKDF")});var uFe=G((srn,cFe)=>{f();var Qi=di();uo();cFe.exports=Qi.log=Qi.log||{};Qi.log.levels=["none","error","warning","info","debug","verbose","max"];var lH={},Jce=[],GP=null;Qi.log.LEVEL_LOCKED=2;Qi.log.NO_LEVEL_CHECK=4;Qi.log.INTERPOLATE=8;for(eA=0;eA<Qi.log.levels.length;++eA)Yce=Qi.log.levels[eA],lH[Yce]={index:eA,name:Yce.toUpperCase()};var Yce,eA;Qi.log.logMessage=function(t){for(var e=lH[t.level].index,r=0;r<Jce.length;++r){var n=Jce[r];if(n.flags&Qi.log.NO_LEVEL_CHECK)n.f(t);else{var i=lH[n.level].index;e<=i&&n.f(n,t)}}};Qi.log.prepareStandard=function(t){"standard"in t||(t.standard=lH[t.level].name+" ["+t.category+"] "+t.message)};Qi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Qi.util.format.apply(this,e)}};Qi.log.prepareStandardFull=function(t){"standardFull"in t||(Qi.log.prepareStandard(t),t.standardFull=t.standard)};for(Kce=["error","warning","info","debug","verbose"],eA=0;eA<Kce.length;++eA)(function(e){Qi.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};Qi.log.logMessage(o)}})(Kce[eA]);var Kce,eA;Qi.log.makeLogger=function(t){var e={flags:0,f:t};return Qi.log.setLevel(e,"none"),e};Qi.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Qi.log.LEVEL_LOCKED))for(var n=0;n<Qi.log.levels.length;++n){var i=Qi.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Qi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Qi.log.LEVEL_LOCKED:t.flags&=~Qi.log.LEVEL_LOCKED};Qi.log.addLogger=function(t){Jce.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(aFe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},HP=s(function(t,e){Qi.log.prepareStandard(e);var r=aFe[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),$4=Qi.log.makeLogger(HP)):(HP=s(function(e,r){Qi.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),$4=Qi.log.makeLogger(HP)),Qi.log.setLevel($4,"debug"),Qi.log.addLogger($4),GP=$4):console={log:s(function(){},"log")};var $4,aFe,HP;GP!==null&&typeof window<"u"&&window.location&&(WP=new URL(window.location.href).searchParams,WP.has("console.level")&&Qi.log.setLevel(GP,WP.get("console.level").slice(-1)[0]),WP.has("console.lock")&&(lFe=WP.get("console.lock").slice(-1)[0],lFe=="true"&&Qi.log.lock(GP)));var WP,lFe;Qi.log.consoleLogger=GP});var fFe=G((crn,dFe)=>{f();dFe.exports=Vg();qG();U4();uce();Oce()});var hFe=G((drn,mFe)=>{f();var Kt=di();zv();Ym();NP();Yv();W2();Ice();pp();uo();tH();var Se=Kt.asn1,Wu=mFe.exports=Kt.pkcs7=Kt.pkcs7||{};Wu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Se.fromDer(e.body);return Wu.messageFromAsn1(n)};Wu.messageToPem=function(t,e){var r={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(r,{maxline:e})};Wu.messageFromAsn1=function(t){var e={},r=[];if(!Se.validate(t,Wu.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Se.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Wu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Wu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Wu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Wu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Zce(t,n,Wu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=n.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Kt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var l in n)n[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(Xce(h)),d.authenticatedAttributesAsn1.value.push(Xce(h))}a=Se.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=I3t(t.signers)}s(r,"addSignerInfos")};Wu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Zce(t,e,Wu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),pFe(t)},"decrypt")},t};Wu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Zce(t,e,Wu.asn1.envelopedDataValidator);t.recipients=v3t(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,b3t(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,T3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,l=0;l<r.length;++l)if(o[l].type!==r[l].type||o[l].value!==r[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}pFe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Kt.pki.oids["aes128-CBC"]:n=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:n=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:n=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function C3t(t){var e={},r=[];if(!Se.validate(t,Wu.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(C3t,"_recipientFromAsn1");function x3t(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(x3t,"_recipientToAsn1");function v3t(t){for(var e=[],r=0;r<t.length;++r)e.push(C3t(t[r]));return e}s(v3t,"_recipientsFromAsn1");function b3t(t){for(var e=[],r=0;r<t.length;++r)e.push(x3t(t[r]));return e}s(b3t,"_recipientsToAsn1");function E3t(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Xce(i))}e.value.push(r)}return e}s(E3t,"_signerToAsn1");function I3t(t){for(var e=[],r=0;r<t.length;++r)e.push(E3t(t[r]));return e}s(I3t,"_signersToAsn1");function Xce(t){var e;if(t.type===Kt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(Xce,"_attributeToAsn1");function T3t(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(T3t,"_encryptedContentToAsn1");function Zce(t,e,r){var n={},i=[];if(!Se.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(n.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Kt.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[c].value}else l=n.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(n.encAlgorithm),parameter:Kt.util.createBuffer(n.encParameter.value),content:Kt.util.createBuffer(l)}}if(n.content){var l="";if(Kt.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[c].value}else l=n.content;t.content=Kt.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Zce,"_fromAsn1");function pFe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(pFe,"_decryptContent")});var AFe=G((mrn,gFe)=>{f();var nl=di();zv();F4();qG();U4();uo();var uH=gFe.exports=nl.ssh=nl.ssh||{};uH.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=nl.util.createBuffer();z4(a,n),tA(a,t.e),tA(a,t.n);var l=nl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=nl.util.createBuffer();tA(u,t.d),tA(u,t.p),tA(u,t.q),tA(u,t.qInv);var d;if(!e)d=nl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=cH(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=nl.util.createBuffer();h.putBuffer(cH("\0\0\0\0",e)),h.putBuffer(cH("\0\0\0",e));var g=nl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(nl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=nl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=cH("putty-private-key-file-mac-key",e),b=nl.util.createBuffer();z4(b,n),z4(b,i),z4(b,r),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=nl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};uH.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=nl.util.createBuffer();return z4(n,r),tA(n,t.e),tA(n,t.n),r+" "+nl.util.encode64(n.bytes())+" "+e};uH.privateKeyToOpenSSH=function(t,e){return e?nl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):nl.pki.privateKeyToPem(t)};uH.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||nl.md.md5.create(),n="ssh-rsa",i=nl.util.createBuffer();z4(i,n),tA(i,t.e),tA(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function tA(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=nl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(tA,"_addBigIntegerToBuffer");function z4(t,e){t.putInt32(e.length),t.putString(e)}s(z4,"_addStringToBuffer");function cH(){for(var t=nl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(cH,"_sha1")});var CFe=G((Arn,yFe)=>{f();yFe.exports=di();zv();QLe();Ym();NG();NP();rFe();F4();sFe();uFe();fFe();Tce();jG();W2();Cce();Sce();hFe();kce();vce();dce();XG();pp();mce();AFe();Fce();uo()});var bFe=G(K2=>{"use strict";f();Object.defineProperty(K2,"__esModule",{value:!0});K2.convert=K2.Format=void 0;var jP=CFe(),nb;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(nb=K2.Format||(K2.Format={}));function xFe(t){var e=jP.pki.pemToDer(t),r=jP.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(xFe,"myASN");function w3t(t){var e=xFe(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(w3t,"txtFormat");function vFe(t,e){switch(e){case nb.der:return jP.pki.pemToDer(t);case nb.pem:return t;case nb.txt:return w3t(t);case nb.asn1:return xFe(t);case nb.fingerprint:var r=jP.md.sha1.create(),n=vFe(t,nb.der);return r.update(n.getBytes()),r.digest().toHex();case nb.x509:return jP.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(vFe,"convert");K2.convert=vFe});var SFe=G(Ld=>{"use strict";f();var ib=Ld&&Ld.__assign||function(){return ib=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ib.apply(this,arguments)},dH=Ld&&Ld.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.convert=Ld.Format=Ld.addToGlobalAgent=Ld.get=void 0;var eue=require("https"),_3t=require("tls"),EFe=require("child_process"),IFe=n7e(),gy=bFe();Object.defineProperty(Ld,"Format",{enumerable:!0,get:s(function(){return gy.Format},"get")});Object.defineProperty(Ld,"convert",{enumerable:!0,get:s(function(){return gy.convert},"get")});var TFe=process.platform==="darwin",wFe=eue.globalAgent,pH={keychain:"all",unique:!0,excludeBundled:!0,format:gy.Format.pem};function _Fe(t){if(t===void 0&&(t=pH),!TFe)return[];t=ib(ib({},pH),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,EFe.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=dH(dH([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,EFe.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=dH(dH([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var l=n.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}),c=t.excludeBundled?_3t.rootCertificates.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}):[];n=n.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return n.map(function(u){return(0,gy.convert)(u,t.format)})}s(_Fe,"get");Ld.get=_Fe;var fH=wFe.options.ca,S3t=s(function(t){if(t===void 0&&(t=pH),!!TFe){var e;Array.isArray(fH)?e=Array.from(fH):e=typeof fH<"u"?[fH]:[],_Fe(ib(ib(ib({},pH),t),{format:gy.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),wFe.options.ca=e,eue.Agent=function(r){return function(n){var i=typeof n<"u"?ib({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(eue.Agent),(0,IFe.setGlobalDispatcher)(new IFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Ld.addToGlobalAgent=S3t});var RFe=G((Trn,tue)=>{f();function R3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(R3t,"all");process.platform!=="win32"?tue.exports.all=()=>[]:tue.exports.all=R3t});var QFe=G((Drn,MFe)=>{"use strict";f();function FFe(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(FFe,"validateParameter");function B3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(B3t,"hasOwnProperty");function D3t(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=r[a];B3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),FFe(c,e,o)?n.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,n)});t.apply(this,n)}}s(D3t,"defineOperation");MFe.exports={defineOperation:D3t,validateParameter:FFe}});var uue=G((Lrn,qFe)=>{"use strict";f();var J4=wre()("kerberos"),K4=J4.KerberosClient,OFe=J4.KerberosServer,ob=QFe().defineOperation,P3t=1,N3t=2,L3t=4,F3t=8,M3t=16,Q3t=32,O3t=64,U3t=128,q3t=256,UFe=0,W3t=9,G3t=6;K4.prototype.step=ob(K4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);K4.prototype.wrap=ob(K4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);K4.prototype.unwrap=ob(K4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);OFe.prototype.step=ob(OFe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var H3t=ob(J4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),j3t=ob(J4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),V3t=ob(J4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:UFe}},{name:"callback",type:"function",required:!1}]),$3t=ob(J4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);qFe.exports={initializeClient:V3t,initializeServer:$3t,principalDetails:j3t,checkPassword:H3t,GSS_C_DELEG_FLAG:P3t,GSS_C_MUTUAL_FLAG:N3t,GSS_C_REPLAY_FLAG:L3t,GSS_C_SEQUENCE_FLAG:F3t,GSS_C_CONF_FLAG:M3t,GSS_C_INTEG_FLAG:Q3t,GSS_C_ANON_FLAG:O3t,GSS_C_PROT_READY_FLAG:U3t,GSS_C_TRANS_FLAG:q3t,GSS_C_NO_OID:UFe,GSS_MECH_OID_KRB5:W3t,GSS_MECH_OID_SPNEGO:G3t}});var WFe=G((Mrn,z3t)=>{z3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var HFe=G((Qrn,GFe)=>{"use strict";f();var Y3t=require("dns"),K3t=uue(),due=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=J3t(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,l,c){if(!a)return c();Y3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let l={};r!=null&&Object.assign(l,{user:e,password:r});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;K3t.initializeClient(c,l,(u,d)=>{if(u)return n(u,null);i.client=d,n(null,d)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function J3t(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=X3t(t),r(null,i)})}}s(J3t,"firstTransition");function X3t(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=Z3t(t),r(null,i||"")})}}s(X3t,"secondTransition");function Z3t(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=eBt(t),r(null,a)})})}}s(Z3t,"thirdTransition");function eBt(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(eBt,"fourthTransition");GFe.exports={MongoAuthProcess:due}});var VFe=G((qrn,VP)=>{"use strict";f();var jFe=uue();VP.exports=jFe;VP.exports.Kerberos=jFe;VP.exports.version=WFe().version;VP.exports.processes={MongoAuthProcess:HFe().MongoAuthProcess}});var CMe=G(_ue=>{"use strict";f();Object.defineProperty(_ue,"__esModule",{value:!0});_ue.assertNever=DBt;function DBt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(DBt,"assertNever")});var r9=G(vy=>{"use strict";f();Object.defineProperty(vy,"__esModule",{value:!0});vy.ChatCompletionContentPartOpaque=vy.ChatCompletionContentPartKind=vy.ChatRole=void 0;var PBt=CMe(),DH;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(DH||(vy.ChatRole=DH={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,PBt.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(DH||(vy.ChatRole=DH={}));var xMe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(xMe||(vy.ChatCompletionContentPartKind=xMe={}));var vMe;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(vMe||(vy.ChatCompletionContentPartOpaque=vMe={}))});var Sue=G(aA=>{"use strict";f();Object.defineProperty(aA,"__esModule",{value:!0});aA.BaseTokensPerName=aA.BaseTokensPerMessage=aA.BaseTokensPerCompletion=aA.ChatRole=void 0;var bMe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(bMe||(aA.ChatRole=bMe={}));aA.BaseTokensPerCompletion=3;aA.BaseTokensPerMessage=3;aA.BaseTokensPerName=1});var IMe=G(NH=>{"use strict";f();Object.defineProperty(NH,"__esModule",{value:!0});NH.toOpenAiChatMessage=EMe;NH.toOpenAIChatMessages=FBt;var by=r9(),PH=Sue(),NBt=db();function Rue(t){return t.filter(e=>e.type===by.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Rue,"onlyStringContent");function LBt(t){let e=t.map(r=>{if(r.type===by.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===by.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===by.ChatCompletionContentPartKind.Opaque&&by.ChatCompletionContentPartOpaque.usableIn(r,NBt.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(LBt,"stringAndImageContent");function EMe(t){switch(t.role){case by.ChatRole.System:return{role:PH.ChatRole.System,content:Rue(t.content),name:t.name};case by.ChatRole.User:return{role:PH.ChatRole.User,content:LBt(t.content),name:t.name};case by.ChatRole.Assistant:return{role:PH.ChatRole.Assistant,content:Rue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case by.ChatRole.Tool:return{role:PH.ChatRole.Tool,content:Rue(t.content),tool_call_id:t.toolCallId};default:return}}s(EMe,"toOpenAiChatMessage");function FBt(t){return t.map(EMe).filter(e=>!!e)}s(FBt,"toOpenAIChatMessages")});var wMe=G(MH=>{"use strict";f();Object.defineProperty(MH,"__esModule",{value:!0});MH.toVsCodeChatMessage=TMe;MH.toVsCodeChatMessages=MBt;var FH=r9();function LH(t){return t.filter(e=>e.type===FH.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(LH,"onlyStringContent");var fb;function TMe(t){switch(fb??=require("vscode"),t.role){case FH.ChatRole.Assistant:let e=fb.LanguageModelChatMessage.Assistant(LH(t.content),t.name);return t.toolCalls&&(e.content=[new fb.LanguageModelTextPart(LH(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new fb.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case FH.ChatRole.User:return fb.LanguageModelChatMessage.User(LH(t.content),t.name);case FH.ChatRole.Tool:{let r=fb.LanguageModelChatMessage.User("");return r.content=[new fb.LanguageModelToolResultPart(t.toolCallId,[new fb.LanguageModelTextPart(LH(t.content))])],r}default:return}}s(TMe,"toVsCodeChatMessage");function MBt(t){return t.map(TMe).filter(e=>!!e)}s(MBt,"toVsCodeChatMessages")});var db=G(Xm=>{"use strict";f();Object.defineProperty(Xm,"__esModule",{value:!0});Xm.OutputMode=Xm.Raw=Xm.OpenAI=void 0;Xm.toMode=kue;Xm.toVSCode=QBt;Xm.toOpenAI=OBt;var _Me=IMe(),SMe=wMe();Xm.OpenAI=Sue();Xm.Raw=r9();var Z2;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(Z2||(Xm.OutputMode=Z2={}));function kue(t,e){switch(t){case Z2.Raw:return e;case Z2.VSCode:return e instanceof Array?(0,SMe.toVsCodeChatMessages)(e):(0,SMe.toVsCodeChatMessage)(e);case Z2.OpenAI:return e instanceof Array?(0,_Me.toOpenAIChatMessages)(e):(0,_Me.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(kue,"toMode");function QBt(t){return kue(Z2.VSCode,t)}s(QBt,"toVSCode");function OBt(t){return kue(Z2.OpenAI,t)}s(OBt,"toOpenAI")});var Bue=G(n9=>{"use strict";f();Object.defineProperty(n9,"__esModule",{value:!0});n9.jsonRetainedProps=void 0;n9.forEachNode=RMe;n9.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function RMe(t,e){if(e(t),t.type===1)for(let r of t.children)RMe(r,e)}s(RMe,"forEachNode")});var kMe=G(Due=>{"use strict";f();Object.defineProperty(Due,"__esModule",{value:!0});Due.once=UBt;function UBt(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(UBt,"once")});var Fue=G(ru=>{"use strict";f();Object.defineProperty(ru,"__esModule",{value:!0});ru.BudgetExceededError=ru.MaterializedChatMessageImage=ru.MaterializedChatMessageBreakpoint=ru.MaterializedChatMessageOpaque=ru.MaterializedChatMessage=ru.MaterializedChatMessageTextChunk=ru.GenericMaterializedContainer=void 0;var nR=kMe(),G0=db(),Ey=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,l){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=mb(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return OMe(e,this.children,r)}allMetadata(){return QMe(this)}findById(e){return Lue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)qBt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof eh&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof eh||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Nue(this,e),e}};ru.GenericMaterializedContainer=Ey;var i9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,nR.once)(async e=>await e.tokenLength({type:G0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};ru.MaterializedChatMessageTextChunk=i9;var eh=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,l,c,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=OMe(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Nue(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Lue(e,this)}_tokenCount=(0,nR.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,G0.toMode)(e.mode,r))});_upperBound=(0,nR.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,nR.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===G0.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===G0.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,G0.toMode)(e.mode,r))});_text=(0,nR.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of FMe(this)){if(r instanceof eT||r instanceof pb){e.push(r);continue}if(r instanceof Zm){e.at(-1)instanceof Zm?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:G0.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof eT)return{type:G0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:UMe(r.src),detail:r.detail}};if(r instanceof pb)return r.value;if(r instanceof Zm)return r.part;throw new Error("Unexpected element type")});if(this.role===G0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===G0.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===G0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===G0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};ru.MaterializedChatMessage=eh;var pb=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&G0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};ru.MaterializedChatMessageOpaque=pb;var Zm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};ru.MaterializedChatMessageBreakpoint=Zm;var eT=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,l){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,nR.once)(async e=>e.tokenLength({type:G0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:UMe(this.src),detail:this.detail}}));isEmpty=!1};ru.MaterializedChatMessageImage=eT;function mb(t){return t instanceof Ey||t instanceof eh}s(mb,"isContainerType");function LMe(t){return t instanceof i9||t instanceof eT||t instanceof pb||t instanceof Zm}s(LMe,"isContentType");function qBt(t){if(!mb(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(qBt,"assertContainerOrChatMessage");function*FMe(t,e=!1){for(let r of t.children)r instanceof i9?(yield{content:r,isTextSibling:e},e=!0):r instanceof eT||r instanceof pb||r instanceof Zm?yield{content:r,isTextSibling:!1}:r instanceof pb?yield{content:r,isTextSibling:!0}:(r&&(yield*FMe(r,e)),e=!1)}s(FMe,"contentChunks");function WBt(t,e){let r;function n(i,o){if(LMe(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");o9(r.node,e)}s(WBt,"removeLowestPriorityLegacy");var BMe=new WeakMap;function MMe(t){let e=BMe.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Zm?r=!0:t instanceof eh?r=t.children.some(n=>n instanceof Zm):t instanceof Ey&&(r=t.children.some(MMe)),BMe.set(t,r),r}s(MMe,"hasCachePoint");function GBt(t){if(t instanceof eh)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof eh)return!1;return!0}s(GBt,"shouldLookForCachePointInNode");function Nue(t,e){let r;if(t instanceof Ey&&t.has(1)){WBt(t,e);return}let n=GBt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(n&&MMe(c)&&(r=void 0,c instanceof Zm))){if(c instanceof Ey&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!r||c.priority<r.value.priority)r={chain:a,index:l,value:c};else if(c.priority===r.value.priority){r.lowestNested??=DMe(r.value);let u=DMe(c);u<r.lowestNested&&(r={chain:a,index:l,value:c,lowestNested:u})}}}if(!r)throw new QH(t);LMe(r.value)||r.value instanceof Ey&&r.value.has(2)||mb(r.value)&&!r.value.children.length?o9(r.value,e):Nue(r.value,e)}s(Nue,"removeLowestPriorityChild");var QH=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof eh?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};ru.BudgetExceededError=QH;function DMe(t){if(!mb(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(DMe,"getLowestPriorityAmongChildren");function*QMe(t){yield*t.metadata;for(let e of t.children)mb(e)?yield*QMe(e):yield*e.metadata}s(QMe,"allMetadata");function OMe(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(mb(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(OMe,"replaceNode");function*PMe(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,mb(r)&&e.push(...r.children)}}s(PMe,"forEachNode");function HBt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(HBt,"getRoot");function NMe(t){return t instanceof Ey&&t.keepWithId!==void 0}s(NMe,"isKeepWith");var Pue=new Set;function jBt(t,e){let r=new Set;for(let n of PMe(t))NMe(n)&&!Pue.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Pue.add(n);try{let n=HBt(t);for(let i of PMe(n))NMe(i)&&r.has(i.keepWithId)?o9(i,e):i instanceof eh&&i.toolCalls&&(i.toolCalls=VBt(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&o9(i,e))}finally{for(let n of r)Pue.delete(n)}}s(jBt,"removeOtherKeepWiths");function Lue(t,e){if(e.id===t)return e;for(let r of e.children)if(mb(r)){let n=Lue(t,r);if(n)return n}}s(Lue,"findNodeById");function o9(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),jBt(t,e),r.isEmpty?o9(r,e):r.onChunksChange())}s(o9,"removeNode");function UMe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(UMe,"getEncodedBase64");function VBt(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(VBt,"filterIfDifferent")});var WMe=G(()=>{"use strict";f();function $Bt(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s($Bt,"_vscpp");function qMe(){throw new Error("This should not be invoked!")}s(qMe,"_vscppf");qMe.isFragment=!0;globalThis.vscpp=$Bt;globalThis.vscppf=qMe});var Que=G(OH=>{"use strict";f();Object.defineProperty(OH,"__esModule",{value:!0});OH.PromptElement=void 0;WMe();var Mue=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};OH.PromptElement=Mue});var zue=G(Oi=>{"use strict";f();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.LogicalWrapper=Oi.IfEmpty=Oi.AbstractKeepWith=Oi.TokenLimit=Oi.Expandable=Oi.Chunk=Oi.LegacyPrioritization=Oi.ToolResult=Oi.PrioritizedList=Oi.Image=Oi.TextChunk=Oi.ToolMessage=Oi.AssistantMessage=Oi.UserMessage=Oi.SystemMessage=Oi.BaseChatMessage=void 0;Oi.isChatMessagePromptElement=zBt;Oi.useKeepWith=XBt;var a9=th(),xp=Que();function zBt(t){return t instanceof UH||t instanceof qH||t instanceof WH}s(zBt,"isChatMessagePromptElement");var tT=class extends xp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.BaseChatMessage=tT;var UH=class extends tT{static{s(this,"SystemMessage")}constructor(e){e.role=a9.Raw.ChatRole.System,super(e)}};Oi.SystemMessage=UH;var qH=class extends tT{static{s(this,"UserMessage")}constructor(e){e.role=a9.Raw.ChatRole.User,super(e)}};Oi.UserMessage=qH;var WH=class extends tT{static{s(this,"AssistantMessage")}constructor(e){e.role=a9.Raw.ChatRole.Assistant,super(e)}};Oi.AssistantMessage=WH;var YBt=/\s+/g,Oue=class extends tT{static{s(this,"ToolMessage")}constructor(e){e.role=a9.Raw.ChatRole.Tool,super(e)}};Oi.ToolMessage=Oue;var GH=class extends xp.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?YBt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await KBt(e,i,o,n);return vscpp(vscppf,null,a,l)}render(e){return e}};Oi.TextChunk=GH;async function KBt(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let l=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:a9.Raw.ChatCompletionContentPartKind.Text,text:l},n)>t.tokenBudget)return i;i=l,o=a}return i}s(KBt,"getTextContentBelowBudget");var Uue=class extends xp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Image=Uue;var que=class extends xp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(GH,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Oi.PrioritizedList=que;var Wue=class extends xp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Oi.ToolResult=Wue;var Gue=class extends xp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LegacyPrioritization=Gue;var Hue=class extends xp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Chunk=Hue;var jue=class extends xp.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};Oi.Expandable=jue;var Vue=class extends xp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.TokenLimit=Vue;var HH=class extends xp.PromptElement{static{s(this,"AbstractKeepWith")}};Oi.AbstractKeepWith=HH;var JBt=0;function XBt(){let t=JBt++;return class extends HH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(XBt,"useKeepWith");var $ue=class extends xp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(s9,null,this.props.alt),vscpp(s9,{flexGrow:1},this.props.children))}};Oi.IfEmpty=$ue;var s9=class extends xp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LogicalWrapper=s9});var HMe=G(l9=>{"use strict";f();Object.defineProperty(l9,"__esModule",{value:!0});l9.localize=ZBt;l9.localize2=e8t;l9.getConfiguredDefaultLocale=t8t;function GMe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(GMe,"_format");function ZBt(t,e,...r){return GMe(e,r)}s(ZBt,"localize");function e8t(t,e,...r){let n=GMe(e,r);return{original:n,value:n}}s(e8t,"localize2");function t8t(t){}s(t8t,"getConfiguredDefaultLocale")});var Xue=G(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=n8t;Qt.isLittleEndian=i8t;Qt.isBigSurOrNewer=o8t;var jMe=HMe();Qt.LANGUAGE_DEFAULT="en";var d9=!1,f9=!1,u9=!1,YMe=!1,KMe=!1,Kue=!1,JMe=!1,Jue=!1,XMe=!1,ZMe=!1,c9,jH=Qt.LANGUAGE_DEFAULT,Yue=Qt.LANGUAGE_DEFAULT,eQe,Iy,Ty=globalThis,H0;typeof Ty.vscode<"u"&&typeof Ty.vscode.process<"u"?H0=Ty.vscode.process:typeof process<"u"&&(H0=process);var tQe=typeof H0?.versions?.electron=="string",r8t=tQe&&H0?.type==="renderer";if(typeof H0=="object"){d9=H0.platform==="win32",f9=H0.platform==="darwin",u9=H0.platform==="linux",YMe=u9&&!!H0.env.SNAP&&!!H0.env.SNAP_REVISION,JMe=tQe,XMe=!!H0.env.CI||!!H0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,c9=Qt.LANGUAGE_DEFAULT,jH=Qt.LANGUAGE_DEFAULT;let t=H0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];c9=e.locale,Yue=e.osLocale,jH=r||Qt.LANGUAGE_DEFAULT,eQe=e._translationsConfigFile}catch{}KMe=!0}else typeof navigator=="object"&&!r8t?(Iy=navigator.userAgent,d9=Iy.indexOf("Windows")>=0,f9=Iy.indexOf("Macintosh")>=0,Jue=(Iy.indexOf("Macintosh")>=0||Iy.indexOf("iPad")>=0||Iy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,u9=Iy.indexOf("Linux")>=0,ZMe=Iy?.indexOf("Mobi")>=0,Kue=!0,c9=jMe.getConfiguredDefaultLocale(jMe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,jH=c9,Yue=navigator.language):console.error("Unable to resolve platform.");function n8t(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(n8t,"PlatformToString");var VH=0;f9?VH=1:d9?VH=3:u9&&(VH=2);Qt.isWindows=d9;Qt.isMacintosh=f9;Qt.isLinux=u9;Qt.isLinuxSnap=YMe;Qt.isNative=KMe;Qt.isElectron=JMe;Qt.isWeb=Kue;Qt.isWebWorker=Kue&&typeof Ty.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?Ty.origin:void 0;Qt.isIOS=Jue;Qt.isMobile=ZMe;Qt.isCI=XMe;Qt.platform=VH;Qt.userAgent=Iy;Qt.language=jH;var VMe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function r(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Qt.language==="en"}s(n,"isDefault"),t.isDefault=n})(VMe||(Qt.Language=VMe={}));Qt.locale=c9;Qt.platformLocale=Yue;Qt.translationsConfigFile=eQe;Qt.setTimeout0IsFaster=typeof Ty.postMessage=="function"&&!Ty.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];Ty.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Ty.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Qt.OS=f9||Jue?2:d9?1:3;var $Me=!0,zMe=!1;function i8t(){if(!zMe){zMe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,$Me=new Uint16Array(t.buffer)[0]===513}return $Me}s(i8t,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function o8t(t){return parseFloat(t)>=20}s(o8t,"isBigSurOrNewer")});var nQe=G(lA=>{"use strict";f();Object.defineProperty(lA,"__esModule",{value:!0});lA.arch=lA.platform=lA.env=lA.cwd=void 0;var rQe=Xue(),rT,Zue=globalThis.vscode;if(typeof Zue<"u"&&typeof Zue.process<"u"){let t=Zue.process;rT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?rT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:rT={get platform(){return rQe.isWindows?"win32":rQe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};lA.cwd=rT.cwd;lA.env=rT.env;lA.platform=rT.platform;lA.arch=rT.arch});var oQe=G(ar=>{"use strict";f();Object.defineProperty(ar,"__esModule",{value:!0});ar.delimiter=ar.sep=ar.toNamespacedPath=ar.parse=ar.format=ar.extname=ar.basename=ar.dirname=ar.relative=ar.resolve=ar.join=ar.isAbsolute=ar.normalize=ar.posix=ar.win32=void 0;var iR=nQe(),s8t=65,a8t=97,l8t=90,c8t=122,Ab=46,Jl=47,Fd=92,hb=58,u8t=63,$H=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function d8t(t,e){if(t===null||typeof t!="object")throw new $H(e,"Object",t)}s(d8t,"validateObject");function ma(t,e){if(typeof t!="string")throw new $H(e,"string",t)}s(ma,"validateString");var Md=iR.platform==="win32";function li(t){return t===Jl||t===Fd}s(li,"isPathSeparator");function ede(t){return t===Jl}s(ede,"isPosixPathSeparator");function gb(t){return t>=s8t&&t<=l8t||t>=a8t&&t<=c8t}s(gb,"isWindowsDeviceRoot");function zH(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Jl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Ab||i.charCodeAt(i.length-2)!==Ab){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===Ab&&l!==-1?++l:l=-1}return i}s(zH,"normalizeString");function iQe(t,e){d8t(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(iQe,"_format");ar.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ma(o,"path"),o.length===0)continue}else e.length===0?o=iR.cwd():(o=iR.env[`=${e}`]||iR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Fd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)li(d)&&(l=1,u=!0);else if(li(d))if(u=!0,li(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!li(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&li(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!li(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else gb(d)&&o.charCodeAt(1)===hb&&(c=o.slice(0,2),l=2,a>2&&li(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=zH(r,!n,"\\",li),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ma(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return ede(o)?"\\":t;if(li(o))if(i=!0,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else gb(o)&&t.charCodeAt(1)===hb&&(n=t.slice(0,2),r=2,e>2&&li(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?zH(t.slice(r),!i,"\\",li):"";return a.length===0&&!i&&(a="."),a.length>0&&li(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ma(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return li(r)||e>2&&gb(r)&&t.charCodeAt(1)===hb&&li(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ma(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&li(r.charCodeAt(0))){++i;let o=r.length;o>1&&li(r.charCodeAt(1))&&(++i,o>2&&(li(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&li(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ar.win32.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e)return"";let r=ar.win32.resolve(t),n=ar.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Fd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Fd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Fd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Fd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Fd&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Fd)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Fd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Fd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Fd&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ar.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Fd){if(e.charCodeAt(1)===Fd){let r=e.charCodeAt(2);if(r!==u8t&&r!==Ab)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(gb(e.charCodeAt(0))&&e.charCodeAt(1)===hb&&e.charCodeAt(2)===Fd)return`\\\\?\\${e}`;return t},dirname(t){ma(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return li(i)?t:".";if(li(i)){if(r=n=1,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else gb(i)&&t.charCodeAt(1)===hb&&(r=e>2&&li(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(li(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&gb(t.charCodeAt(0))&&t.charCodeAt(1)===hb&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(li(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(li(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ma(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===hb&&gb(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(li(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===Ab?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:iQe.bind(null,"\\"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return li(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(li(i)){if(n=1,li(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!li(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&li(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!li(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(gb(i)&&t.charCodeAt(1)===hb){if(r<=2)return e.root=e.dir=t,e;if(n=2,li(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),li(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===Ab?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var f8t=(()=>{if(Md){let t=/\\/g;return()=>{let e=iR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>iR.cwd()})();ar.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:f8t();ma(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Jl)}return e=zH(e,!r,"/",ede),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Jl,r=t.charCodeAt(t.length-1)===Jl;return t=zH(t,!e,"/",ede),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ma(t,"path"),t.length>0&&t.charCodeAt(0)===Jl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ma(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ar.posix.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e||(t=ar.posix.resolve(t),e=ar.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Jl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Jl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Jl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Jl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Jl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Jl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Jl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Jl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ma(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Jl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===Ab?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:iQe.bind(null,"/"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Jl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Jl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===Ab?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ar.posix.win32=ar.win32.win32=ar.win32;ar.posix.posix=ar.win32.posix=ar.posix;ar.normalize=Md?ar.win32.normalize:ar.posix.normalize;ar.isAbsolute=Md?ar.win32.isAbsolute:ar.posix.isAbsolute;ar.join=Md?ar.win32.join:ar.posix.join;ar.resolve=Md?ar.win32.resolve:ar.posix.resolve;ar.relative=Md?ar.win32.relative:ar.posix.relative;ar.dirname=Md?ar.win32.dirname:ar.posix.dirname;ar.basename=Md?ar.win32.basename:ar.posix.basename;ar.extname=Md?ar.win32.extname:ar.posix.extname;ar.format=Md?ar.win32.format:ar.posix.format;ar.parse=Md?ar.win32.parse:ar.posix.parse;ar.toNamespacedPath=Md?ar.win32.toNamespacedPath:ar.posix.toNamespacedPath;ar.sep=Md?ar.win32.sep:ar.posix.sep;ar.delimiter=Md?ar.win32.delimiter:ar.posix.delimiter});var fQe=G(oR=>{"use strict";f();Object.defineProperty(oR,"__esModule",{value:!0});oR.URI=void 0;oR.isUriComponents=x8t;oR.uriToFsPath=XH;var sQe=oQe(),KH=Xue(),p8t=/^\w[\w\d+.-]*$/,m8t=/^\//,h8t=/^\/\//;function g8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!p8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!m8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(h8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(g8t,"_validateUri");function A8t(t,e){return!t&&!e?"file":t}s(A8t,"_schemeFix");function y8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(y8t,"_referenceResolution");var zo="",rh="/",C8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,JH=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||zo,this.authority=e.authority||zo,this.path=e.path||zo,this.query=e.query||zo,this.fragment=e.fragment||zo):(this.scheme=A8t(e,a),this.authority=r||zo,this.path=y8t(this.scheme,n||zo),this.query=i||zo,this.fragment=o||zo,g8t(this,a))}get fsPath(){return XH(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=zo),n===void 0?n=this.authority:n===null&&(n=zo),i===void 0?i=this.path:i===null&&(i=zo),o===void 0?o=this.query:o===null&&(o=zo),a===void 0?a=this.fragment:a===null&&(a=zo),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new yb(r,n,i,o,a)}static parse(e,r=!1){let n=C8t.exec(e);return n?new yb(n[2]||zo,YH(n[4]||zo),YH(n[5]||zo),YH(n[7]||zo),YH(n[9]||zo),r):new yb(zo,zo,zo,zo,zo)}static file(e){let r=zo;if(KH.isWindows&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let n=e.indexOf(rh,2);n===-1?(r=e.substring(2),e=rh):(r=e.substring(2,n),e=e.substring(n)||rh)}return new yb("file",r,e,zo,zo)}static from(e,r){return new yb(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return KH.isWindows&&e.scheme==="file"?n=t.file(sQe.win32.join(XH(e,!0),...r)).path:n=sQe.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return tde(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new yb(e);return r._formatted=e.external??null,r._fsPath=e._sep===cQe?e.fsPath??null:null,r}}else return e}};oR.URI=JH;function x8t(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(x8t,"isUriComponents");var cQe=KH.isWindows?1:void 0,yb=class extends JH{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=XH(this,!1)),this._fsPath}toString(e=!1){return e?tde(this,!0):(this._formatted||(this._formatted=tde(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=cQe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},uQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function aQe(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=uQe[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(aQe,"encodeURIComponentFast");function v8t(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=uQe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(v8t,"encodeURIComponentMinimal");function XH(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,KH.isWindows&&(r=r.replace(/\//g,"\\")),r}s(XH,"uriToFsPath");function tde(t,e){let r=e?v8t:aQe,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=rh,n+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:aQe(c,!1,!1)),n}s(tde,"_asFormatted");function dQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+dQe(t.substr(3)):t}}s(dQe,"decodeURIComponentGraceful");var lQe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function YH(t){return t.match(lQe)?t.replace(lQe,e=>dQe(e)):t}s(YH,"percentDecode")});var ide=G(Cb=>{"use strict";f();Object.defineProperty(Cb,"__esModule",{value:!0});Cb.PromptReference=Cb.ChatResponseReferencePartStatusKind=Cb.PromptMetadata=void 0;var p9=fQe(),rde=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Cb.PromptMetadata=rde;var pQe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(pQe||(Cb.ChatResponseReferencePartStatusKind=pQe={}));var nde=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?p9.URI.from(n):{uri:p9.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?p9.URI.from(e.iconPath):"light"in e.iconPath?{light:p9.URI.from(e.iconPath.light),dark:p9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Cb.PromptReference=nde});var pde=G(aR=>{"use strict";f();Object.defineProperty(aR,"__esModule",{value:!0});aR.PromptRenderer=aR.MetadataMap=void 0;var b8t=Bue(),m9=Fue(),sR=db(),Fa=zue(),fde=ide(),mQe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(mQe||(aR.MetadataMap=mQe={}));var sde=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new ej(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[c,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=yQe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Fa.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:sR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await gQe(v,()=>b.prepare?.(g[E],n,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await gQe(v,()=>b.render(v.node.getState(),_,n,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let B=await this._processPromptRenderPiece(new nT(_.tokenBudget,this._endpoint),b,E,k,n,i);E instanceof Fa.Expandable&&this._growables.push({initialConsume:B,elem:b.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let l=AQe(i),c=new nT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await E8t(this._tokenizer,r,n,l);return c.consume(u),await this._handlePromptChildren(r,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new nT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,sR.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new nT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],l=await n.tokenCount(this._tokenizer),c=[...n.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof cA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(tj),p=i.map(m=>{if(!(m instanceof cA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(tj);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=n.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Fa.Expandable))throw new Error("unreachable: expected growable");let l=new ej(null,0,o.elem.id),c=new nT(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:sR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Fa.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let l of r){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},ZH(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new cA(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new cA(c));else this._handleIntrinsic(e,l.name,l.props,ZH(l.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};aR.PromptRenderer=sde;async function E8t(t,e,r,n){let i=0;if((0,Fa.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,sR.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:sR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(E8t,"computeTokensConsumedByLiterals");function AQe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new cde(String(t))):I8t(t)?ZH(t.children,e):T8t(t)?ZH(t,e):typeof t.ctor=="string"?e.push(new ade(t.ctor,t.props,t.children)):e.push(new lde(t.ctor,t.props,t.children)),e)}s(AQe,"flattenAndReduce");function ZH(t,e=[]){for(let r of t)AQe(r,e);return e}s(ZH,"flattenAndReduceArr");var ade=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},lde=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},cde=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},nT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},ej=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new cA(fde.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return h9.fromJSON(i,a,o);default:}}).filter(tj),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Fa.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Fa.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Fa.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Fa.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Fa.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Fa.Chunk&&(this._objFlags|=2),this._obj instanceof Fa.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new h9(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new h9(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(tj),props:{},references:this._metadata.filter(r=>r instanceof cA).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=ode(this._obj.props,b8t.jsonRetainedProps)),this._obj instanceof Fa.BaseChatMessage)e.ctor=1,Object.assign(e.props,ode(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Fa.Image)return{...e,ctor:3,props:{...e.props,...ode(this._obj.props,["src","detail"])}};this._obj instanceof Fa.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Fa.Image)return new m9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Fa.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new m9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Fa.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Fa.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new m9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Fa.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Fa.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new ude({type:sR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},ude=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new m9.MaterializedChatMessageBreakpoint(e,this.part)}},h9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new cA(fde.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new m9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof cA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function I8t(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(I8t,"isFragmentCtor");function tj(t){return t!==void 0}s(tj,"isDefined");var dde=class extends fde.PromptMetadata{static{s(this,"InternalMetadata")}},cA=class extends dde{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function T8t(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(T8t,"isIterable");function ode(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(ode,"pickProps");function yQe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(yQe,"atPath");var hQe=new WeakSet;async function gQe(t,e){try{return await e()}catch(r){throw r instanceof Error&&!hQe.has(r)&&r.constructor.name!=="CancellationError"&&(hQe.add(r),r.message+=` (at tsx element ${yQe(t.path)})`),r}}s(gQe,"annotateError")});var CQe=G(rj=>{"use strict";f();Object.defineProperty(rj,"__esModule",{value:!0});rj.VSCodeTokenizer=void 0;var mde=db(),hde=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=mde.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==mde.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===mde.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};rj.VSCodeTokenizer=hde});var xQe=G(lR=>{"use strict";f();Object.defineProperty(lR,"__esModule",{value:!0});lR.tracerCss=lR.tracerSrc=void 0;lR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';lR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var TQe=G(ij=>{"use strict";f();Object.defineProperty(ij,"__esModule",{value:!0});ij.HTMLTracer=void 0;var vQe=xQe(),iT=Fue(),w8t=db(),gde=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return Ade.create({epochs:this.epochs,traceData:EQe(this.traceData)})}serveRouter(e){return new nj({baseAddress:e,epochs:this.epochs,traceData:EQe(this.traceData)})}};ij.HTMLTracer=gde;var nj=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${vQe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await bQe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${vQe.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await bQe(i.tokenizer,a),c=JSON.stringify(l);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(c)),n.end(c)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},Ade=class t extends nj{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function bQe(t,e){return{container:await IQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(bQe,"serializeRenderData");async function IQe(t,e,r){let n={metadata:e.metadata.map(S8t),priority:e.priority};if(e instanceof iT.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof iT.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof iT.MaterializedChatMessageOpaque||e instanceof iT.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>IQe(t,o,r||e instanceof iT.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof iT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof iT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:w8t.Raw.ChatRole.display(e.role),text:o}}}_8t(e)}s(IQe,"serializeMaterialized");function _8t(t){throw new Error("unreachable")}s(_8t,"assertNever");function S8t(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(S8t,"serializeMetadata");var EQe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var _Qe=G(wQe=>{"use strict";f();Object.defineProperty(wQe,"__esModule",{value:!0})});var RQe=G(SQe=>{"use strict";f();Object.defineProperty(SQe,"__esModule",{value:!0})});var BQe=G(kQe=>{"use strict";f();Object.defineProperty(kQe,"__esModule",{value:!0})});var th=G(Is=>{"use strict";f();var R8t=Is&&Is.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oT=Is&&Is.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&R8t(e,t,r)};Object.defineProperty(Is,"__esModule",{value:!0});Is.contentType=Is.PromptRenderer=Is.MetadataMap=Is.PromptElement=Is.JSONTree=void 0;Is.renderPrompt=D8t;Is.renderElementJSON=P8t;var yde=db(),DQe=pde(),k8t=CQe();oT(TQe(),Is);Is.JSONTree=Bue();oT(db(),Is);oT(zue(),Is);oT(ide(),Is);oT(_Qe(),Is);oT(RQe(),Is);oT(BQe(),Is);var B8t=Que();Object.defineProperty(Is,"PromptElement",{enumerable:!0,get:s(function(){return B8t.PromptElement},"get")});var PQe=pde();Object.defineProperty(Is,"MetadataMap",{enumerable:!0,get:s(function(){return PQe.MetadataMap},"get")});Object.defineProperty(Is,"PromptRenderer",{enumerable:!0,get:s(function(){return PQe.PromptRenderer},"get")});async function D8t(t,e,r,n,i,o,a=yde.OutputMode.VSCode){let l="countTokens"in n?new k8t.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,c=new DQe.PromptRenderer(r,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(D8t,"renderPrompt");Is.contentType="application/vnd.codechat.prompt+json.1";function P8t(t,e,r,n){return new DQe.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:yde.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===yde.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(P8t,"renderElementJSON")});var V9=G((r2n,xUe)=>{f();var pPt="2.0.0",mPt=Number.MAX_SAFE_INTEGER||9007199254740991,hPt=16,gPt=250,APt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];xUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:hPt,MAX_SAFE_BUILD_LENGTH:gPt,MAX_SAFE_INTEGER:mPt,RELEASE_TYPES:APt,SEMVER_SPEC_VERSION:pPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var $9=G((i2n,vUe)=>{f();var yPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};vUe.exports=yPt});var FR=G((xA,bUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:P0e,MAX_SAFE_BUILD_LENGTH:CPt,MAX_LENGTH:xPt}=V9(),vPt=$9();xA=bUe.exports={};var bPt=xA.re=[],EPt=xA.safeRe=[],hr=xA.src=[],IPt=xA.safeSrc=[],gr=xA.t={},TPt=0,N0e="[a-zA-Z0-9-]",wPt=[["\\s",1],["\\d",xPt],[N0e,CPt]],_Pt=s(t=>{for(let[e,r]of wPt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),ei=s((t,e,r)=>{let n=_Pt(e),i=TPt++;vPt(t,i,e),gr[t]=i,hr[i]=e,IPt[i]=n,bPt[i]=new RegExp(e,r?"g":void 0),EPt[i]=new RegExp(n,r?"g":void 0)},"createToken");ei("NUMERICIDENTIFIER","0|[1-9]\\d*");ei("NUMERICIDENTIFIERLOOSE","\\d+");ei("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${N0e}*`);ei("MAINVERSION",`(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})`);ei("MAINVERSIONLOOSE",`(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})`);ei("PRERELEASEIDENTIFIER",`(?:${hr[gr.NUMERICIDENTIFIER]}|${hr[gr.NONNUMERICIDENTIFIER]})`);ei("PRERELEASEIDENTIFIERLOOSE",`(?:${hr[gr.NUMERICIDENTIFIERLOOSE]}|${hr[gr.NONNUMERICIDENTIFIER]})`);ei("PRERELEASE",`(?:-(${hr[gr.PRERELEASEIDENTIFIER]}(?:\\.${hr[gr.PRERELEASEIDENTIFIER]})*))`);ei("PRERELEASELOOSE",`(?:-?(${hr[gr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${hr[gr.PRERELEASEIDENTIFIERLOOSE]})*))`);ei("BUILDIDENTIFIER",`${N0e}+`);ei("BUILD",`(?:\\+(${hr[gr.BUILDIDENTIFIER]}(?:\\.${hr[gr.BUILDIDENTIFIER]})*))`);ei("FULLPLAIN",`v?${hr[gr.MAINVERSION]}${hr[gr.PRERELEASE]}?${hr[gr.BUILD]}?`);ei("FULL",`^${hr[gr.FULLPLAIN]}$`);ei("LOOSEPLAIN",`[v=\\s]*${hr[gr.MAINVERSIONLOOSE]}${hr[gr.PRERELEASELOOSE]}?${hr[gr.BUILD]}?`);ei("LOOSE",`^${hr[gr.LOOSEPLAIN]}$`);ei("GTLT","((?:<|>)?=?)");ei("XRANGEIDENTIFIERLOOSE",`${hr[gr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ei("XRANGEIDENTIFIER",`${hr[gr.NUMERICIDENTIFIER]}|x|X|\\*`);ei("XRANGEPLAIN",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:${hr[gr.PRERELEASE]})?${hr[gr.BUILD]}?)?)?`);ei("XRANGEPLAINLOOSE",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:${hr[gr.PRERELEASELOOSE]})?${hr[gr.BUILD]}?)?)?`);ei("XRANGE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAIN]}$`);ei("XRANGELOOSE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAINLOOSE]}$`);ei("COERCEPLAIN",`(^|[^\\d])(\\d{1,${P0e}})(?:\\.(\\d{1,${P0e}}))?(?:\\.(\\d{1,${P0e}}))?`);ei("COERCE",`${hr[gr.COERCEPLAIN]}(?:$|[^\\d])`);ei("COERCEFULL",hr[gr.COERCEPLAIN]+`(?:${hr[gr.PRERELEASE]})?(?:${hr[gr.BUILD]})?(?:$|[^\\d])`);ei("COERCERTL",hr[gr.COERCE],!0);ei("COERCERTLFULL",hr[gr.COERCEFULL],!0);ei("LONETILDE","(?:~>?)");ei("TILDETRIM",`(\\s*)${hr[gr.LONETILDE]}\\s+`,!0);xA.tildeTrimReplace="$1~";ei("TILDE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAIN]}$`);ei("TILDELOOSE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAINLOOSE]}$`);ei("LONECARET","(?:\\^)");ei("CARETTRIM",`(\\s*)${hr[gr.LONECARET]}\\s+`,!0);xA.caretTrimReplace="$1^";ei("CARET",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAIN]}$`);ei("CARETLOOSE",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAINLOOSE]}$`);ei("COMPARATORLOOSE",`^${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]})$|^$`);ei("COMPARATOR",`^${hr[gr.GTLT]}\\s*(${hr[gr.FULLPLAIN]})$|^$`);ei("COMPARATORTRIM",`(\\s*)${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]}|${hr[gr.XRANGEPLAIN]})`,!0);xA.comparatorTrimReplace="$1$2$3";ei("HYPHENRANGE",`^\\s*(${hr[gr.XRANGEPLAIN]})\\s+-\\s+(${hr[gr.XRANGEPLAIN]})\\s*$`);ei("HYPHENRANGELOOSE",`^\\s*(${hr[gr.XRANGEPLAINLOOSE]})\\s+-\\s+(${hr[gr.XRANGEPLAINLOOSE]})\\s*$`);ei("STAR","(<|>)?=?\\s*\\*");ei("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ei("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var EV=G((l2n,EUe)=>{f();var SPt=Object.freeze({loose:!0}),RPt=Object.freeze({}),kPt=s(t=>t?typeof t!="object"?SPt:t:RPt,"parseOptions");EUe.exports=kPt});var L0e=G((d2n,wUe)=>{f();var IUe=/^[0-9]+$/,TUe=s((t,e)=>{let r=IUe.test(t),n=IUe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),BPt=s((t,e)=>TUe(e,t),"rcompareIdentifiers");wUe.exports={compareIdentifiers:TUe,rcompareIdentifiers:BPt}});var su=G((m2n,kUe)=>{f();var IV=$9(),{MAX_LENGTH:_Ue,MAX_SAFE_INTEGER:TV}=V9(),{safeRe:SUe,safeSrc:RUe,t:wV}=FR(),DPt=EV(),{compareIdentifiers:MR}=L0e(),F0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=DPt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>_Ue)throw new TypeError(`version is longer than ${_Ue} characters`);IV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?SUe[wV.LOOSE]:SUe[wV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>TV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>TV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>TV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<TV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(IV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),MR(this.major,e.major)||MR(this.minor,e.minor)||MR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(IV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return MR(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(IV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return MR(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?RUe[wV.PRERELEASELOOSE]:RUe[wV.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),MR(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};kUe.exports=F0e});var ET=G((A2n,DUe)=>{f();var BUe=su(),PPt=s((t,e,r=!1)=>{if(t instanceof BUe)return t;try{return new BUe(t,e)}catch(n){if(!r)return null;throw n}},"parse");DUe.exports=PPt});var NUe=G((x2n,PUe)=>{f();var NPt=ET(),LPt=s((t,e)=>{let r=NPt(t,e);return r?r.version:null},"valid");PUe.exports=LPt});var FUe=G((E2n,LUe)=>{f();var FPt=ET(),MPt=s((t,e)=>{let r=FPt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");LUe.exports=MPt});var OUe=G((w2n,QUe)=>{f();var MUe=su(),QPt=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new MUe(t instanceof MUe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");QUe.exports=QPt});var WUe=G((R2n,qUe)=>{f();var UUe=ET(),OPt=s((t,e)=>{let r=UUe(t,null,!0),n=UUe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,l=o?n:r,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"},"diff");qUe.exports=OPt});var HUe=G((D2n,GUe)=>{f();var UPt=su(),qPt=s((t,e)=>new UPt(t,e).major,"major");GUe.exports=qPt});var VUe=G((L2n,jUe)=>{f();var WPt=su(),GPt=s((t,e)=>new WPt(t,e).minor,"minor");jUe.exports=GPt});var zUe=G((Q2n,$Ue)=>{f();var HPt=su(),jPt=s((t,e)=>new HPt(t,e).patch,"patch");$Ue.exports=jPt});var KUe=G((q2n,YUe)=>{f();var VPt=ET(),$Pt=s((t,e)=>{let r=VPt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");YUe.exports=$Pt});var Ep=G((H2n,XUe)=>{f();var JUe=su(),zPt=s((t,e,r)=>new JUe(t,r).compare(new JUe(e,r)),"compare");XUe.exports=zPt});var eqe=G(($2n,ZUe)=>{f();var YPt=Ep(),KPt=s((t,e,r)=>YPt(e,t,r),"rcompare");ZUe.exports=KPt});var rqe=G((K2n,tqe)=>{f();var JPt=Ep(),XPt=s((t,e)=>JPt(t,e,!0),"compareLoose");tqe.exports=XPt});var _V=G((Z2n,iqe)=>{f();var nqe=su(),ZPt=s((t,e,r)=>{let n=new nqe(t,r),i=new nqe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");iqe.exports=ZPt});var sqe=G((rTn,oqe)=>{f();var e9t=_V(),t9t=s((t,e)=>t.sort((r,n)=>e9t(r,n,e)),"sort");oqe.exports=t9t});var lqe=G((oTn,aqe)=>{f();var r9t=_V(),n9t=s((t,e)=>t.sort((r,n)=>r9t(n,r,e)),"rsort");aqe.exports=n9t});var z9=G((lTn,cqe)=>{f();var i9t=Ep(),o9t=s((t,e,r)=>i9t(t,e,r)>0,"gt");cqe.exports=o9t});var SV=G((dTn,uqe)=>{f();var s9t=Ep(),a9t=s((t,e,r)=>s9t(t,e,r)<0,"lt");uqe.exports=a9t});var M0e=G((mTn,dqe)=>{f();var l9t=Ep(),c9t=s((t,e,r)=>l9t(t,e,r)===0,"eq");dqe.exports=c9t});var Q0e=G((ATn,fqe)=>{f();var u9t=Ep(),d9t=s((t,e,r)=>u9t(t,e,r)!==0,"neq");fqe.exports=d9t});var RV=G((xTn,pqe)=>{f();var f9t=Ep(),p9t=s((t,e,r)=>f9t(t,e,r)>=0,"gte");pqe.exports=p9t});var kV=G((ETn,mqe)=>{f();var m9t=Ep(),h9t=s((t,e,r)=>m9t(t,e,r)<=0,"lte");mqe.exports=h9t});var O0e=G((wTn,hqe)=>{f();var g9t=M0e(),A9t=Q0e(),y9t=z9(),C9t=RV(),x9t=SV(),v9t=kV(),b9t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return g9t(t,r,n);case"!=":return A9t(t,r,n);case">":return y9t(t,r,n);case">=":return C9t(t,r,n);case"<":return x9t(t,r,n);case"<=":return v9t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");hqe.exports=b9t});var Aqe=G((RTn,gqe)=>{f();var E9t=su(),I9t=ET(),{safeRe:BV,t:DV}=FR(),T9t=s((t,e)=>{if(t instanceof E9t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?BV[DV.COERCEFULL]:BV[DV.COERCE]);else{let c=e.includePrerelease?BV[DV.COERCERTLFULL]:BV[DV.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",l=e.includePrerelease&&r[6]?`+${r[6]}`:"";return I9t(`${n}.${i}.${o}${a}${l}`,e)},"coerce");gqe.exports=T9t});var Cqe=G((DTn,yqe)=>{f();var U0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};yqe.exports=U0e});var Ip=G((LTn,Eqe)=>{f();var w9t=/\s+/g,q0e=class t{static{s(this,"Range")}constructor(e,r){if(r=S9t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof W0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(w9t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!vqe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&L9t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&P9t)|(this.options.loose&&N9t))+":"+e,i=xqe.get(n);if(i)return i;let o=this.options.loose,a=o?Ud[Gu.HYPHENRANGELOOSE]:Ud[Gu.HYPHENRANGE];e=e.replace(a,j9t(this.options.includePrerelease)),Ts("hyphen replace",e),e=e.replace(Ud[Gu.COMPARATORTRIM],k9t),Ts("comparator trim",e),e=e.replace(Ud[Gu.TILDETRIM],B9t),Ts("tilde trim",e),e=e.replace(Ud[Gu.CARETTRIM],D9t),Ts("caret trim",e);let l=e.split(" ").map(p=>F9t(p,this.options)).join(" ").split(/\s+/).map(p=>H9t(p,this.options));o&&(l=l.filter(p=>(Ts("loose invalid filter",p,this.options),!!p.match(Ud[Gu.COMPARATORLOOSE])))),Ts("range list",l);let c=new Map,u=l.map(p=>new W0e(p,this.options));for(let p of u){if(vqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return xqe.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>bqe(n,r)&&e.set.some(i=>bqe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new R9t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(V9t(this.set[r],e,this.options))return!0;return!1}};Eqe.exports=q0e;var _9t=Cqe(),xqe=new _9t,S9t=EV(),W0e=Y9(),Ts=$9(),R9t=su(),{safeRe:Ud,t:Gu,comparatorTrimReplace:k9t,tildeTrimReplace:B9t,caretTrimReplace:D9t}=FR(),{FLAG_INCLUDE_PRERELEASE:P9t,FLAG_LOOSE:N9t}=V9(),vqe=s(t=>t.value==="<0.0.0-0","isNullSet"),L9t=s(t=>t.value==="","isAny"),bqe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),F9t=s((t,e)=>(Ts("comp",t,e),t=O9t(t,e),Ts("caret",t),t=M9t(t,e),Ts("tildes",t),t=q9t(t,e),Ts("xrange",t),t=G9t(t,e),Ts("stars",t),t),"parseComparator"),Hu=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),M9t=s((t,e)=>t.trim().split(/\s+/).map(r=>Q9t(r,e)).join(" "),"replaceTildes"),Q9t=s((t,e)=>{let r=e.loose?Ud[Gu.TILDELOOSE]:Ud[Gu.TILDE];return t.replace(r,(n,i,o,a,l)=>{Ts("tilde",t,n,i,o,a,l);let c;return Hu(i)?c="":Hu(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Hu(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Ts("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ts("tilde return",c),c})},"replaceTilde"),O9t=s((t,e)=>t.trim().split(/\s+/).map(r=>U9t(r,e)).join(" "),"replaceCarets"),U9t=s((t,e)=>{Ts("caret",t,e);let r=e.loose?Ud[Gu.CARETLOOSE]:Ud[Gu.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,l,c)=>{Ts("caret",t,i,o,a,l,c);let u;return Hu(o)?u="":Hu(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Hu(l)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:c?(Ts("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Ts("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${n} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Ts("caret return",u),u})},"replaceCaret"),q9t=s((t,e)=>(Ts("replaceXRanges",t,e),t.split(/\s+/).map(r=>W9t(r,e)).join(" ")),"replaceXRanges"),W9t=s((t,e)=>{t=t.trim();let r=e.loose?Ud[Gu.XRANGELOOSE]:Ud[Gu.XRANGE];return t.replace(r,(n,i,o,a,l,c)=>{Ts("xRange",t,n,i,o,a,l,c);let u=Hu(o),d=u||Hu(a),p=d||Hu(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+o}.${a}.${l}${c}`):d?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Ts("xRange return",n),n})},"replaceXRange"),G9t=s((t,e)=>(Ts("replaceStars",t,e),t.trim().replace(Ud[Gu.STAR],"")),"replaceStars"),H9t=s((t,e)=>(Ts("replaceGTE0",t,e),t.trim().replace(Ud[e.includePrerelease?Gu.GTE0PRE:Gu.GTE0],"")),"replaceGTE0"),j9t=s(t=>(e,r,n,i,o,a,l,c,u,d,p,m)=>(Hu(n)?r="":Hu(i)?r=`>=${n}.0.0${t?"-0":""}`:Hu(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Hu(u)?c="":Hu(d)?c=`<${+u+1}.0.0-0`:Hu(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),"hyphenReplace"),V9t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ts(t[n].semver),t[n].semver!==W0e.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var Y9=G((QTn,Rqe)=>{f();var K9=Symbol("SemVer ANY"),j0e=class t{static{s(this,"Comparator")}static get ANY(){return K9}constructor(e,r){if(r=Iqe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),H0e("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===K9?this.value="":this.value=this.operator+this.semver.version,H0e("comp",this)}parse(e){let r=this.options.loose?Tqe[wqe.COMPARATORLOOSE]:Tqe[wqe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new _qe(n[2],this.options.loose):this.semver=K9}toString(){return this.value}test(e){if(H0e("Comparator.test",e,this.options.loose),this.semver===K9||e===K9)return!0;if(typeof e=="string")try{e=new _qe(e,this.options)}catch{return!1}return G0e(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Sqe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Sqe(this.value,r).test(e.semver):(r=Iqe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||G0e(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||G0e(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Rqe.exports=j0e;var Iqe=EV(),{safeRe:Tqe,t:wqe}=FR(),G0e=O0e(),H0e=$9(),_qe=su(),Sqe=Ip()});var J9=G((qTn,kqe)=>{f();var $9t=Ip(),z9t=s((t,e,r)=>{try{e=new $9t(e,r)}catch{return!1}return e.test(t)},"satisfies");kqe.exports=z9t});var Dqe=G((HTn,Bqe)=>{f();var Y9t=Ip(),K9t=s((t,e)=>new Y9t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");Bqe.exports=K9t});var Nqe=G(($Tn,Pqe)=>{f();var J9t=su(),X9t=Ip(),Z9t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new X9t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new J9t(n,r))}),n},"maxSatisfying");Pqe.exports=Z9t});var Fqe=G((KTn,Lqe)=>{f();var e6t=su(),t6t=Ip(),r6t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new t6t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new e6t(n,r))}),n},"minSatisfying");Lqe.exports=r6t});var Oqe=G((ZTn,Qqe)=>{f();var V0e=su(),n6t=Ip(),Mqe=z9(),i6t=s((t,e)=>{t=new n6t(t,e);let r=new V0e("0.0.0");if(t.test(r)||(r=new V0e("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let l=new V0e(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||Mqe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||Mqe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");Qqe.exports=i6t});var qqe=G((rwn,Uqe)=>{f();var o6t=Ip(),s6t=s((t,e)=>{try{return new o6t(t,e).range||"*"}catch{return null}},"validRange");Uqe.exports=s6t});var PV=G((own,jqe)=>{f();var a6t=su(),Hqe=Y9(),{ANY:l6t}=Hqe,c6t=Ip(),u6t=J9(),Wqe=z9(),Gqe=SV(),d6t=kV(),f6t=RV(),p6t=s((t,e,r,n)=>{t=new a6t(t,n),e=new c6t(e,n);let i,o,a,l,c;switch(r){case">":i=Wqe,o=d6t,a=Gqe,l=">",c=">=";break;case"<":i=Gqe,o=f6t,a=Wqe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u6t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===l6t&&(h=new Hqe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");jqe.exports=p6t});var $qe=G((lwn,Vqe)=>{f();var m6t=PV(),h6t=s((t,e,r)=>m6t(t,e,">",r),"gtr");Vqe.exports=h6t});var Yqe=G((dwn,zqe)=>{f();var g6t=PV(),A6t=s((t,e,r)=>g6t(t,e,"<",r),"ltr");zqe.exports=A6t});var Xqe=G((mwn,Jqe)=>{f();var Kqe=Ip(),y6t=s((t,e,r)=>(t=new Kqe(t,r),e=new Kqe(e,r),t.intersects(e,r)),"intersects");Jqe.exports=y6t});var eWe=G((Awn,Zqe)=>{f();var C6t=J9(),x6t=Ep();Zqe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((d,p)=>x6t(d,p,r));for(let d of a)C6t(d,e,r)?(o=d,i||(i=d)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let l=[];for(let[d,p]of n)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var sWe=G((Cwn,oWe)=>{f();var tWe=Ip(),z0e=Y9(),{ANY:$0e}=z0e,X9=J9(),Y0e=Ep(),v6t=s((t,e,r={})=>{if(t===e)return!0;t=new tWe(t,r),e=new tWe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=E6t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),b6t=[new z0e(">=0.0.0-0")],rWe=[new z0e(">=0.0.0")],E6t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===$0e){if(e.length===1&&e[0].semver===$0e)return!0;r.includePrerelease?t=b6t:t=rWe}if(e.length===1&&e[0].semver===$0e){if(r.includePrerelease)return!0;e=rWe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=nWe(i,h,r):h.operator==="<"||h.operator==="<="?o=iWe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=Y0e(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!X9(h,String(i),r)||o&&!X9(h,String(o),r))return null;for(let g of e)if(!X9(h,String(g),r))return!1;return!0}let l,c,u,d,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=nWe(i,h,r),l===h&&l!==i)return!1}else if(i.operator===">="&&!X9(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=iWe(o,h,r),c===h&&c!==o)return!1}else if(o.operator==="<="&&!X9(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),nWe=s((t,e,r)=>{if(!t)return e;let n=Y0e(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),iWe=s((t,e,r)=>{if(!t)return e;let n=Y0e(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");oWe.exports=v6t});var J0e=G((bwn,cWe)=>{f();var K0e=FR(),aWe=V9(),I6t=su(),lWe=L0e(),T6t=ET(),w6t=NUe(),_6t=FUe(),S6t=OUe(),R6t=WUe(),k6t=HUe(),B6t=VUe(),D6t=zUe(),P6t=KUe(),N6t=Ep(),L6t=eqe(),F6t=rqe(),M6t=_V(),Q6t=sqe(),O6t=lqe(),U6t=z9(),q6t=SV(),W6t=M0e(),G6t=Q0e(),H6t=RV(),j6t=kV(),V6t=O0e(),$6t=Aqe(),z6t=Y9(),Y6t=Ip(),K6t=J9(),J6t=Dqe(),X6t=Nqe(),Z6t=Fqe(),eNt=Oqe(),tNt=qqe(),rNt=PV(),nNt=$qe(),iNt=Yqe(),oNt=Xqe(),sNt=eWe(),aNt=sWe();cWe.exports={parse:T6t,valid:w6t,clean:_6t,inc:S6t,diff:R6t,major:k6t,minor:B6t,patch:D6t,prerelease:P6t,compare:N6t,rcompare:L6t,compareLoose:F6t,compareBuild:M6t,sort:Q6t,rsort:O6t,gt:U6t,lt:q6t,eq:W6t,neq:G6t,gte:H6t,lte:j6t,cmp:V6t,coerce:$6t,Comparator:z6t,Range:Y6t,satisfies:K6t,toComparators:J6t,maxSatisfying:X6t,minSatisfying:Z6t,minVersion:eNt,validRange:tNt,outside:rNt,gtr:nNt,ltr:iNt,intersects:oNt,simplifyRange:sNt,subset:aNt,SemVer:I6t,re:K0e.re,src:K0e.src,tokens:K0e.t,SEMVER_SPEC_VERSION:aWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:aWe.RELEASE_TYPES,compareIdentifiers:lWe.compareIdentifiers,rcompareIdentifiers:lWe.rcompareIdentifiers}});var J0=G(t6=>{"use strict";f();Object.defineProperty(t6,"__esModule",{value:!0});t6.dedent=void 0;function BWe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(l){return l.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+n[c+1]}),a}s(BWe,"dedent");t6.dedent=BWe;t6.default=BWe});var OWe=G(dfe=>{"use strict";f();Object.defineProperty(dfe,"__esModule",{value:!0});dfe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var jWe=G(pfe=>{"use strict";f();Object.defineProperty(pfe,"__esModule",{value:!0});var UWe=require("worker_threads"),SNt=require("v8"),RNt=require("os"),qWe=OWe(),WV="ready",WWe="spawning",kNt="busy",GV="off",GWe=RNt.cpus().length,HWe=process.version.replace("v","").split("."),BNt=parseInt(HWe[0]),DNt=parseInt(HWe[1]),ffe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=GWe,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new UWe.Worker(qWe.workerFile,{eval:!0});e.status=WWe,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=WV,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=GV,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===GV).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===WV){e=this.workers[c];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=kNt;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:l}=r;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=SNt.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),n.once("error",m=>{e.status=GV,l(m),this.tick()}),n.postMessage(p)}catch(c){this.free(n),l(c)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=WV,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:GWe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new UWe.Worker(qWe.workerFile,{eval:!0});this.workers.push({status:WWe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=WV,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=GV,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(BNt>=12&&DNt>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};pfe.default=new ffe});var HV=G(IT=>{"use strict";f();var PNt=IT&&IT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(IT,"__esModule",{value:!0});var r6=PNt(jWe()),NNt=`job needs a function.
Try with:
> job(() => {...}, config)`,LNt=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function FNt(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(NNt));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(LNt));r6.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(FNt,"job");IT.job=FNt;IT.stop=r6.default.teardown.bind(r6.default);IT.start=r6.default.setup.bind(r6.default)});var lGe=G(TT=>{"use strict";f();var wA=TT&&TT.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Efe=TT&&TT.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Oy,Lb;Object.defineProperty(TT,"__esModule",{value:!0});var Ife=class{static{s(this,"AwaitLock")}constructor(){Oy.set(this,!1),Lb.set(this,new Set)}get acquired(){return wA(this,Oy,"f")}acquireAsync({timeout:e}={}){if(!wA(this,Oy,"f"))return Efe(this,Oy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{wA(this,Lb,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),wA(this,Lb,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{wA(this,Lb,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return wA(this,Oy,"f")?!1:(Efe(this,Oy,!0,"f"),!0)}release(){if(!wA(this,Oy,"f"))throw new Error("Cannot release an unacquired lock");if(wA(this,Lb,"f").size>0){let[e]=wA(this,Lb,"f");wA(this,Lb,"f").delete(e),e()}else Efe(this,Oy,!1,"f")}};TT.default=Ife;Oy=new WeakMap,Lb=new WeakMap});var AVe=G((uYn,gVe)=>{f();var lk=1e3,ck=lk*60,uk=ck*60,NT=uk*24,cUt=NT*7,uUt=NT*365.25;gVe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return dUt(t);if(r==="number"&&isFinite(t))return e.long?pUt(t):fUt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function dUt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*uUt;case"weeks":case"week":case"w":return r*cUt;case"days":case"day":case"d":return r*NT;case"hours":case"hour":case"hrs":case"hr":case"h":return r*uk;case"minutes":case"minute":case"mins":case"min":case"m":return r*ck;case"seconds":case"second":case"secs":case"sec":case"s":return r*lk;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(dUt,"parse");function fUt(t){var e=Math.abs(t);return e>=NT?Math.round(t/NT)+"d":e>=uk?Math.round(t/uk)+"h":e>=ck?Math.round(t/ck)+"m":e>=lk?Math.round(t/lk)+"s":t+"ms"}s(fUt,"fmtShort");function pUt(t){var e=Math.abs(t);return e>=NT?Iz(t,e,NT,"day"):e>=uk?Iz(t,e,uk,"hour"):e>=ck?Iz(t,e,ck,"minute"):e>=lk?Iz(t,e,lk,"second"):t+" ms"}s(pUt,"fmtLong");function Iz(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(Iz,"plural")});var tme=G((pYn,yVe)=>{f();function mUt(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=a,r.humanize=AVe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";k++;let ee=r.formatters[W];if(typeof ee=="function"){let me=v[k];N=ee.call(b,me),v.splice(k,1),k--}return N}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(n,"extend");function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...r.names.map(l),...r.skips.map(l).map(p=>"-"+p)].join(",");return r.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(d))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(mUt,"setup");yVe.exports=mUt});var CVe=G((Z0,Tz)=>{f();Z0.formatArgs=gUt;Z0.save=AUt;Z0.load=yUt;Z0.useColors=hUt;Z0.storage=CUt();Z0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Z0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hUt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(hUt,"useColors");function gUt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Tz.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(gUt,"formatArgs");Z0.log=console.debug||console.log||(()=>{});function AUt(t){try{t?Z0.storage.setItem("debug",t):Z0.storage.removeItem("debug")}catch{}}s(AUt,"save");function yUt(){let t;try{t=Z0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(yUt,"load");function CUt(){try{return localStorage}catch{}}s(CUt,"localstorage");Tz.exports=tme()(Z0);var{formatters:xUt}=Tz.exports;xUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var vVe=G((yYn,xVe)=>{"use strict";f();xVe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var IVe=G((xYn,EVe)=>{"use strict";f();var vUt=require("os"),bVe=require("tty"),kp=vVe(),{env:tc}=process,Gb;kp("no-color")||kp("no-colors")||kp("color=false")||kp("color=never")?Gb=0:(kp("color")||kp("colors")||kp("color=true")||kp("color=always"))&&(Gb=1);"FORCE_COLOR"in tc&&(tc.FORCE_COLOR==="true"?Gb=1:tc.FORCE_COLOR==="false"?Gb=0:Gb=tc.FORCE_COLOR.length===0?1:Math.min(parseInt(tc.FORCE_COLOR,10),3));function rme(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(rme,"translateLevel");function nme(t,e){if(Gb===0)return 0;if(kp("color=16m")||kp("color=full")||kp("color=truecolor"))return 3;if(kp("color=256"))return 2;if(t&&!e&&Gb===void 0)return 0;let r=Gb||0;if(tc.TERM==="dumb")return r;if(process.platform==="win32"){let n=vUt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in tc)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in tc)||tc.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in tc)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tc.TEAMCITY_VERSION)?1:0;if(tc.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in tc){let n=parseInt((tc.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(tc.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(tc.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(tc.TERM)||"COLORTERM"in tc?1:r}s(nme,"supportsColor");function bUt(t){let e=nme(t,t&&t.isTTY);return rme(e)}s(bUt,"getSupportLevel");EVe.exports={supportsColor:bUt,stdout:rme(nme(!0,bVe.isatty(1))),stderr:rme(nme(!0,bVe.isatty(2)))}});var wVe=G((Sc,_z)=>{f();var EUt=require("tty"),wz=require("util");Sc.init=kUt;Sc.log=_Ut;Sc.formatArgs=TUt;Sc.save=SUt;Sc.load=RUt;Sc.useColors=IUt;Sc.destroy=wz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Sc.colors=[6,2,3,4,5,1];try{let t=IVe();t&&(t.stderr||t).level>=2&&(Sc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Sc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function IUt(){return"colors"in Sc.inspectOpts?!!Sc.inspectOpts.colors:EUt.isatty(process.stderr.fd)}s(IUt,"useColors");function TUt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+_z.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=wUt()+e+" "+t[0]}s(TUt,"formatArgs");function wUt(){return Sc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(wUt,"getDate");function _Ut(...t){return process.stderr.write(wz.format(...t)+`
`)}s(_Ut,"log");function SUt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(SUt,"save");function RUt(){return process.env.DEBUG}s(RUt,"load");function kUt(t){t.inspectOpts={};let e=Object.keys(Sc.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Sc.inspectOpts[e[r]]}s(kUt,"init");_z.exports=tme()(Sc);var{formatters:TVe}=_z.exports;TVe.o=function(t){return this.inspectOpts.colors=this.useColors,wz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};TVe.O=function(t){return this.inspectOpts.colors=this.useColors,wz.inspect(t,this.inspectOpts)}});var LT=G((TYn,ime)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ime.exports=CVe():ime.exports=wVe()});var ume=G((RYn,kVe)=>{f();var k6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,BUt=typeof AbortController=="function",Sz=BUt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new _Ve}abort(){this.signal.dispatchEvent("abort")}},DUt=typeof AbortSignal=="function",PUt=typeof Sz.AbortSignal=="function",_Ve=DUt?AbortSignal:PUt?Sz.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},lme=new Set,ome=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;Rz(r)&&cme(r,`${t} option`,`options.${e}`,fk)},"deprecatedOption"),sme=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(Rz(r)){let{prototype:n}=fk,{get:i}=Object.getOwnPropertyDescriptor(n,t);cme(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),NUt=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(Rz(r)){let{prototype:n}=fk,{get:i}=Object.getOwnPropertyDescriptor(n,t);cme(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),SVe=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Rz=s(t=>!lme.has(t),"shouldWarn"),cme=s((t,e,r,n)=>{lme.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;SVe(i,"DeprecationWarning",t,n)},"warn"),FT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),RVe=s(t=>FT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?dk:null:null,"getUintArray"),dk=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},ame=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=RVe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},fk=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:B}=e instanceof t?{}:e;if(r!==0&&!FT(r))throw new TypeError("max option must be a nonnegative integer");let N=r?RVe(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new ame(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!FT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!B,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=FT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!FT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let W="LRU_CACHE_UNBOUNDED";Rz(W)&&(lme.add(W),SVe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",W,t))}B&&ome("stale","allowStale"),k&&ome("maxAge","ttl"),_&&ome("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new dk(this.max),this.starts=new dk(this.max),this.setItemTTL=(n,i,o=k6.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?k6.now():0};let e=0,r=s(()=>{let n=k6.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new dk(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!FT(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!FT(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return sme("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let l=k6.now()-this.starts[r];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=k6.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];r!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new Sz,l={signal:a.signal,options:n,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,l.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return r&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):l?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return sme("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return sme("reset","clear"),this.clear}get length(){return NUt("length","size"),this.size}static get AbortController(){return Sz}static get AbortSignal(){return _Ve}};kVe.exports=fk});var pme=G((DYn,BVe)=>{"use strict";f();var B6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},dme=class extends B6{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},fme=class extends B6{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};BVe.exports={FetchBaseError:B6,FetchError:dme,AbortError:fme}});var $y=G((LYn,PVe)=>{"use strict";f();var{constants:{MAX_LENGTH:LUt}}=require("buffer"),{pipeline:kz,PassThrough:FUt}=require("stream"),{promisify:MUt}=require("util"),{createGunzip:QUt,createInflate:OUt,createBrotliDecompress:UUt,constants:{Z_SYNC_FLUSH:DVe}}=require("zlib"),qUt=LT()("helix-fetch:utils"),WUt=MUt(kz),GUt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),HUt=s((t,e,r,n)=>{if(!GUt(t,e))return r;let i=s(o=>{o&&(qUt(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return kz(r,QUt({flush:DVe,finishFlush:DVe}),i);case"deflate":case"x-deflate":return kz(r,OUt(),i);case"br":return kz(r,UUt(),i);default:return r}},"decodeStream"),jUt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Bz=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?VUt(t,e):$Ut(t,e);default:return 0}},"calcSize"),VUt=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Bz(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),$Ut=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Bz(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Bz(t[i],e)}),r},"calcObjectSize"),zUt=s(t=>Bz(t,new WeakSet),"sizeof"),YUt=s(async t=>{let e=new FUt,r=0,n=[];return e.on("data",i=>{if(r+i.length>LUt)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await WUt(t,e),Buffer.concat(n,r)},"streamToBuffer");PVe.exports={decodeStream:HUt,isPlainObject:jUt,sizeof:zUt,streamToBuffer:YUt}});var Pz=G((QYn,MVe)=>{"use strict";f();var{PassThrough:NVe,Readable:zy}=require("stream"),{types:{isAnyArrayBuffer:FVe}}=require("util"),{FetchError:KUt,FetchBaseError:JUt}=pme(),{streamToBuffer:XUt}=$y(),ZUt=Buffer.alloc(0),Bp=Symbol("Body internals"),eqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),LVe=s(async t=>{if(t[Bp].disturbed)throw new TypeError("Already read");if(t[Bp].error)throw new TypeError(`Stream had error: ${t[Bp].error.message}`);t[Bp].disturbed=!0;let{stream:e}=t[Bp];return e===null?ZUt:XUt(e)},"consume"),Dz=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=zy.from(e.toString()):e instanceof zy?r=e:Buffer.isBuffer(e)?r=zy.from(e):FVe(e)?r=zy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=zy.from(e):r=zy.from(String(e)),this[Bp]={stream:r,disturbed:!1,error:null},e instanceof zy&&r.on("error",n=>{let i=n instanceof JUt?n:new KUt(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Bp].error=i})}get body(){return this[Bp].stream}get bodyUsed(){return this[Bp].disturbed}async buffer(){return LVe(this)}async arrayBuffer(){return eqt(await this.buffer())}async text(){return(await LVe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(Dz.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var tqt=s(t=>{if(t[Bp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Bp],r=e;if(e instanceof zy){r=new NVe;let n=new NVe;e.pipe(r),e.pipe(n),t[Bp].stream=n}return r},"cloneStream"),rqt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||FVe(t)||t instanceof zy?null:"text/plain; charset=utf-8","guessContentType");MVe.exports={Body:Dz,cloneStream:tqt,guessContentType:rqt}});var pk=G((qYn,qVe)=>{"use strict";f();var{validateHeaderName:QVe,validateHeaderValue:OVe}=require("http"),{isPlainObject:nqt}=$y(),Yy=Symbol("Headers internals"),D6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof QVe=="function")QVe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),UVe=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof OVe=="function")OVe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),Nz=class t{static{s(this,"Headers")}constructor(e={}){if(this[Yy]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(nqt(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Yy].map.set(D6(e),UVe(r,e))}has(e){return this[Yy].map.has(D6(e))}get(e){let r=this[Yy].map.get(D6(e));return r===void 0?null:r}append(e,r){let n=D6(e),i=UVe(r,e),o=this[Yy].map.get(n);this[Yy].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Yy].map.delete(D6(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Yy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Yy].map)}};Object.defineProperties(Nz.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));qVe.exports={Headers:Nz}});var mme=G((HYn,WVe)=>{"use strict";f();var{EventEmitter:iqt}=require("events"),mh=Symbol("AbortSignal internals"),mk=class{static{s(this,"AbortSignal")}constructor(){this[mh]={eventEmitter:new iqt,onabort:null,aborted:!1}}get aborted(){return this[mh].aborted}get onabort(){return this[mh].onabort}set onabort(e){this[mh].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[mh].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[mh].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[mh][n]=="function"&&this[n](r),this[mh].eventEmitter.emit(e,r)}fire(){this[mh].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(mk.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Fz=class extends mk{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[mh].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[mh].timerId)}};Object.defineProperties(Fz.prototype,{clear:{enumerable:!0}});var Lz=Symbol("AbortController internals"),Mz=class{static{s(this,"AbortController")}constructor(){this[Lz]={signal:new mk}}get signal(){return this[Lz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Lz].signal.aborted||this[Lz].signal.fire()}};Object.defineProperties(Mz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});WVe.exports={AbortController:Mz,AbortSignal:mk,TimeoutSignal:Fz}});var P6=G(($Yn,jVe)=>{"use strict";f();var{randomBytes:oqt}=require("crypto"),{Readable:sqt}=require("stream"),gme=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),aqt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),GVe=s(t=>`--${t}--\r
\r
`,"getFooter"),HVe=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,gme(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*lqt(t,e){for(let[r,n]of t)yield HVe(e,r,n),gme(n)?yield*n.stream():yield n,yield`\r
`;yield GVe(e)}s(lqt,"formDataIterator");var cqt=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(HVe(e,n,i)),r+=gme(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(GVe(e)),r},"getFormDataLength"),hme=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=oqt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=cqt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return sqt.from(lqt(this.fd,this.boundary))}};jVe.exports={isFormData:aqt,FormDataSerializer:hme}});var $Ve=G((KYn,VVe)=>{"use strict";f();var{AbortSignal:uqt}=mme(),{Body:dqt,cloneStream:fqt,guessContentType:pqt}=Pz(),{Headers:mqt}=pk(),{isPlainObject:hqt}=$y(),{isFormData:gqt,FormDataSerializer:Aqt}=P6(),yqt=20,Hb=Symbol("Request internals"),Qz=class t extends dqt{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?fqt(n):null),l=new mqt(r.headers||n&&n.headers||{});if(gqt(a)&&!l.has("content-type")){let p=new Aqt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(hqt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=pqt(a);p&&l.set("content-type",p)}super(a);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof uqt))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Hb]={init:{...r},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=yqt:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Hb].method}get url(){return this[Hb].parsedURL.toString()}get headers(){return this[Hb].headers}get redirect(){return this[Hb].redirect}get cache(){return this[Hb].cache}get signal(){return this[Hb].signal}clone(){return new t(this)}get init(){return this[Hb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Qz.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});VVe.exports={Request:Qz}});var Ame=G((ZYn,zVe)=>{"use strict";f();var{Body:Cqt,cloneStream:xqt,guessContentType:vqt}=Pz(),{Headers:bqt}=pk(),{isPlainObject:Eqt}=$y(),{isFormData:Iqt,FormDataSerializer:Tqt}=P6(),hh=Symbol("Response internals"),Oz=class t extends Cqt{static{s(this,"Response")}constructor(e=null,r={}){let n=new bqt(r.headers),i=e;if(Iqt(i)&&!n.has("content-type")){let o=new Tqt(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Eqt(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=vqt(i);o&&n.set("content-type",o)}super(i),this[hh]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[hh].url||""}get status(){return this[hh].status}get statusText(){return this[hh].statusText}get ok(){return this[hh].status>=200&&this[hh].status<300}get redirected(){return this[hh].counter>0}get headers(){return this[hh].headers}get httpVersion(){return this[hh].httpVersion}get decoded(){return this[hh].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(xqt(this),{...this[hh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Oz.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});zVe.exports={Response:Oz}});var KVe=G((nKn,YVe)=>{"use strict";f();var wqt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),_qt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Sqt=new Set([500,502,503,504]),Rqt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},kqt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function MT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(MT,"toNumberOrZero");function Bqt(t){return t?Sqt.has(t.status):!0}s(Bqt,"isErrorResponse");function yme(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(yme,"parseCacheControl");function Dqt(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(Dqt,"formatCacheControl");YVe.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=yme(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=yme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Dqt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&_qt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||wqt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=yme(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Rqt[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return MT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return MT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return MT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+MT(this._rescc["stale-if-error"]),n=e+MT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+MT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+MT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Bqt(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!kqt[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var e$e=G((sKn,ZVe)=>{"use strict";f();var Pqt=KVe(),{Headers:Nqt}=pk(),JVe=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),XVe=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Cme=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Pqt(JVe(e),XVe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(JVe(e))}responseHeaders(e){return new Nqt(this.policy.responseHeaders(XVe(e)))}timeToLive(){return this.policy.timeToLive()}};ZVe.exports=Cme});var n$e=G((cKn,r$e)=>{"use strict";f();var{Readable:Lqt}=require("stream"),{Headers:t$e}=pk(),{Response:Fqt}=Ame(),jb=Symbol("CacheableResponse internals"),Mqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),xme=class t extends Fqt{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new t$e(r.headers);this[jb]={headers:n,bufferedBody:e}}get headers(){return this[jb].headers}set headers(e){if(e instanceof t$e)this[jb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Lqt.from(this[jb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[jb].bufferedBody}async arrayBuffer(){return Mqt(this[jb].bufferedBody)}async text(){return this[jb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[jb].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},Qqt=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new xme(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");r$e.exports={cacheableResponse:Qqt}});var Uz=G((fKn,i$e)=>{"use strict";f();var vme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};i$e.exports={RequestAbortedError:vme}});var c$e=G((hKn,l$e)=>{"use strict";f();var s$e=require("http"),a$e=require("https"),{Readable:Oqt}=require("stream"),Ky=LT()("helix-fetch:h1"),{RequestAbortedError:o$e}=Uz(),{decodeStream:Uqt}=$y(),qqt=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new a$e.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new s$e.Agent(n),r.httpAgent):void 0},"getAgent"),Wqt=s(t=>{t.h1={}},"setupContext"),Gqt=s(async({h1:t})=>{t.httpAgent&&(Ky("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Ky("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Hqt=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?Uqt(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),jqt=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?a$e:s$e,i=qqt(t,e.protocol),o={...r,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{Ky(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{Ky(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{Ky(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new o$e),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new o$e);return}p.addEventListener("abort",m)}d=n(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(Hqt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(Ky(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof Oqt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");l$e.exports={request:jqt,setupContext:Wqt,resetContext:Gqt}});var p$e=G((yKn,f$e)=>{"use strict";f();var{connect:Vqt,constants:$qt}=require("http2"),{Readable:zqt}=require("stream"),_s=LT()("helix-fetch:h2"),{RequestAbortedError:u$e}=Uz(),{decodeStream:Yqt}=$y(),{NGHTTP2_CANCEL:N6}=$qt,Kqt=5*60*1e3,Jqt=5e3,Xqt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Zqt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),_s(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),d$e=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?Yqt(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),eWt=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=Jqt}}}=t,u=i[":path"],d=`${e}${u}`;_s(`received PUSH_PROMISE: ${d}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{n.close(N6)},"rejectPush")),n.on("push",(p,m)=>{_s(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(c,()=>{_s(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(N6)}),l&&l(d,i,d$e(p,n,r))}),n.on("aborted",()=>{_s(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{_s(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{_s(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),tWt=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=Kqt,pushPromiseHandler:p,pushHandler:m}=c,h={...r},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let B=u[n];if(!B||B.closed||B.destroyed){let ae=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:ae};v&&!v.inUse&&(H.createConnection=()=>(_s(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),B=Vqt(n,{...H,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{_s(`closing session ${n} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{_s(`session ${n} established`),_s(`caching session ${n}`),u[n]=B}),B.on("localSettings",le=>{_s(`session ${n} localSettings: ${JSON.stringify(le)}`)}),B.on("remoteSettings",le=>{_s(`session ${n} remoteSettings: ${JSON.stringify(le)}`)}),B.once("close",()=>{_s(`session ${n} closed`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.once("error",le=>{_s(`session ${n} encountered error: ${le}`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(le,ie,j)=>{_s(`session ${n} encountered frameError: type: ${le}, code: ${ie}, id: ${j}`)}),B.once("goaway",(le,ie,j)=>{_s(`session ${n} received GOAWAY frame: errorCode: ${le}, lastStreamID: ${ie}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(le,ie,j)=>{eWt(t,n,E,le,ie,j)})}else v&&v.id!==B.socket.id&&!v.inUse&&(_s(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());_s(`${g} ${e.host}${l}`);let N,{signal:W}=h,ee=s(()=>{W.removeEventListener("abort",ee),k(new u$e),N&&N.close(N6)},"onAbortSignal");if(W){if(W.aborted){k(new u$e);return}W.addEventListener("abort",ee)}let me=s(ae=>{_s(`session ${n} encountered error during ${h.method} ${e.href}: ${ae}`),k(ae)},"onSessionError");B.once("error",me),N=B.request({":method":g,":path":l,...y}),N.once("response",ae=>{B.off("error",me),W&&W.removeEventListener("abort",ee),_(d$e(ae,N,h.decode,k))}),N.once("error",ae=>{B.off("error",me),W&&W.removeEventListener("abort",ee),N.rstCode!==N6&&(_s(`${h.method} ${e.href} failed with: ${ae.message}`),N.close(N6),k(ae))}),N.once("frameError",(ae,H,O)=>{B.off("error",me),_s(`encountered frameError during ${h.method} ${e.href}: type: ${ae}, code: ${H}, id: ${O}`)}),N.on("push",(ae,H)=>{_s(`received 'push' event: headers: ${JSON.stringify(ae)}, flags: ${H}`)}),b instanceof zqt?b.pipe(N):(b&&N.write(b),N.end())})},"request");f$e.exports={request:tWt,setupContext:Xqt,resetContext:Zqt}});var h$e=G((vKn,m$e)=>{"use strict";f();var{EventEmitter:rWt}=require("events"),nWt=s(()=>{let t={},e=new rWt;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");m$e.exports=nWt});var g$e=G((IKn,iWt)=>{iWt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var v$e=G((TKn,x$e)=>{"use strict";f();var{Readable:oWt}=require("stream"),sWt=require("tls"),{types:{isAnyArrayBuffer:aWt}}=require("util"),lWt=ume(),bme=LT()("helix-fetch:core"),{RequestAbortedError:qz}=Uz(),Eme=c$e(),Wz=p$e(),cWt=h$e(),{isPlainObject:uWt}=$y(),{isFormData:dWt,FormDataSerializer:fWt}=P6(),{version:pWt}=g$e(),Ime="h2",Tme="h2c",wme="http/1.0",QT="http/1.1",mWt=100,hWt=60*60*1e3,gWt=[Ime,QT,wme],AWt=`helix-fetch/${pWt}`,yWt={method:"GET",compress:!0,decode:!0},A$e=0,y$e=cWt(),C$e=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new qz;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new qz);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof qz||(bme(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),n(u))},"onError");o=sWt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),A$e+=1,o.id=A$e,o.secureConnecting=!1,bme(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),"connectTLS"),CWt=s(async(t,e)=>{let r=await y$e.acquire(t.origin);try{return r||(r=await C$e(t,e)),r}finally{y$e.release(t.origin,r)}},"connect"),xWt=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=QT,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Tme,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await CWt(e,u);return i=d.alpnProtocol,i||(i=QT),t.alpnCache.set(n,i),{protocol:i,socket:d}},"determineProtocol"),vWt=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),bWt=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=l,u.servername=a.host;let d=await C$e(e,u);return{protocol:d.alpnProtocol||QT,socket:d}}return{protocol:l.alpnProtocol||QT,socket:l}},"getProtocolAndSocketFromFactory"),EWt=s(async(t,e,r)=>{let n=new URL(e),i={...yWt,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=vWt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(dWt(i.body)){let u=new fWt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":uWt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):aWt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof oWt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await bWt(t.socketFactory,n,i,t.alpnProtocols):await xWt(t,n,a);switch(bme(`${n.host} -> ${l}`),l){case Ime:try{return await Wz.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Tme:return Wz.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case wme:case QT:return Eme.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),IWt=s(async t=>(t.alpnCache.clear(),Promise.all([Eme.resetContext(t),Wz.resetContext(t)])),"resetContext"),TWt=s(t=>{let{options:{alpnProtocols:e=gWt,alpnCacheTTL:r=hWt,alpnCacheSize:n=mWt,userAgent:i=AWt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new lWt({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Eme.setupContext(t),Wz.setupContext(t)},"setupContext");x$e.exports={request:EWt,setupContext:TWt,resetContext:IWt,RequestAbortedError:qz,ALPN_HTTP2:Ime,ALPN_HTTP2C:Tme,ALPN_HTTP1_1:QT,ALPN_HTTP1_0:wme}});var E$e=G((SKn,b$e)=>{"use strict";f();var wWt=LT()("helix-fetch:core"),{request:_Wt,setupContext:SWt,resetContext:RWt,RequestAbortedError:kWt,ALPN_HTTP2:BWt,ALPN_HTTP2C:DWt,ALPN_HTTP1_1:PWt,ALPN_HTTP1_0:NWt}=v$e(),_me=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},SWt(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:kWt,ALPN_HTTP2:BWt,ALPN_HTTP2C:DWt,ALPN_HTTP1_1:PWt,ALPN_HTTP1_0:NWt}}async request(e,r){return _Wt(this,e,r)}setCA(e){this.options.ca=e}async reset(){return wWt("resetting context"),RWt(this)}};b$e.exports=new _me().api()});var S$e=G((BKn,_$e)=>{"use strict";f();var{EventEmitter:LWt}=require("events"),{Readable:L6}=require("stream"),Sme=LT()("helix-fetch"),FWt=ume(),{Body:MWt}=Pz(),{Headers:Dme}=pk(),{Request:OT}=$Ve(),{Response:kme}=Ame(),{FetchBaseError:QWt,FetchError:F6,AbortError:Gz}=pme(),{AbortController:OWt,AbortSignal:UWt,TimeoutSignal:qWt}=mme(),WWt=e$e(),{cacheableResponse:GWt}=n$e(),{sizeof:HWt}=$y(),{isFormData:jWt}=P6(),{context:VWt,RequestAbortedError:$Wt}=E$e(),I$e=["GET","HEAD"],zWt=500,YWt=100*1024*1024,Rme="push",T$e=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof OT&&typeof r>"u"?e:new OT(e,r),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let B=new Gz("The operation was aborted.");throw i.init.body instanceof L6&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof L6)&&!jWt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(B){throw m instanceof L6&&m.destroy(B),B instanceof TypeError?B:B instanceof $Wt?new Gz("The operation was aborted."):new F6(B.message,"system",B)}let g=s(()=>{l.removeEventListener("abort",g);let B=new Gz("The operation was aborted.");i.init.body instanceof L6&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:B}=E,N=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new F6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new F6(`maximum redirect reached at: ${i.url}`,"max-redirect");let W={headers:new Dme(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof L6)throw l&&l.removeEventListener("abort",g),new F6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length")),l&&l.removeEventListener("abort",g),T$e(t,new OT(N,W))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new kme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),w$e=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!I$e.includes(e.method))return r;let n=new WWt(e,r,{shared:!1});if(n.storable()){let i=await GWt(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),KWt=s(async(t,e,r)=>{let n=new OT(e,r);if(t.options.maxCacheSize!==0&&I$e.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:l}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){l.headers=new Dme(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await T$e(t,n);return n.cache!=="no-store"?w$e(t,n,o):o},"cachingFetch"),JWt=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),XWt=s(t=>new qWt(t),"timeoutSignal"),Bme=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:YWt,i=zWt;n===0&&(n=1,i=1);let o=s(({response:l},c)=>HWt(l),"sizeCalculation");this.cache=new FWt({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new LWt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new kme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=VWt(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:MWt,Headers:Dme,Request:OT,Response:kme,AbortController:OWt,AbortSignal:UWt,FetchBaseError:QWt,FetchError:F6,AbortError:Gz,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:JWt,timeoutSignal:XWt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return KWt(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Rme,e)}offPush(e){return this.eventEmitter.off(Rme,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Sme(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new OT(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Sme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Sme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await w$e(this,new OT(e,{headers:r}),n);this.eventEmitter.emit(Rme,e,i)}};_$e.exports=new Bme().api()});var k$e=G((NKn,R$e)=>{"use strict";f();R$e.exports=S$e()});var bYe=G((_ui,vYe)=>{f();vYe.exports=xYe;xYe.sync=aVt;var yYe=require("fs");function sVt(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(sVt,"checkPathExt");function CYe(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:sVt(e,r)}s(CYe,"checkStat");function xYe(t,e,r){yYe.stat(t,function(n,i){r(n,n?!1:CYe(i,t,e))})}s(xYe,"isexe");function aVt(t,e){return CYe(yYe.statSync(t),t,e)}s(aVt,"sync")});var _Ye=G((kui,wYe)=>{f();wYe.exports=IYe;IYe.sync=lVt;var EYe=require("fs");function IYe(t,e,r){EYe.stat(t,function(n,i){r(n,n?!1:TYe(i,e))})}s(IYe,"isexe");function lVt(t,e){return TYe(EYe.statSync(t),e)}s(lVt,"sync");function TYe(t,e){return t.isFile()&&cVt(t,e)}s(TYe,"checkStat");function cVt(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=r&u||r&c&&i===a||r&l&&n===o||r&d&&o===0;return p}s(cVt,"checkMode")});var RYe=G((Nui,SYe)=>{f();var Pui=require("fs"),$Y;process.platform==="win32"||global.TESTING_WINDOWS?$Y=bYe():$Y=_Ye();SYe.exports=Bhe;Bhe.sync=uVt;function Bhe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){Bhe(t,e||{},function(o,a){o?i(o):n(a)})})}$Y(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(Bhe,"isexe");function uVt(t,e){try{return $Y.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(uVt,"sync")});var FYe=G((Mui,LYe)=>{f();var Pk=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",kYe=require("path"),dVt=Pk?";":":",BYe=RYe(),DYe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),PYe=s((t,e)=>{let r=e.colon||dVt,n=t.match(/\//)||Pk&&t.match(/\\/)?[""]:[...Pk?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Pk?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Pk?i.split(r):[""];return Pk&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),NYe=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=PYe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===n.length)return e.all&&a.length?d(a):p(DYe(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=kYe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];BYe(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return r?l(0).then(u=>r(null,u),r):l(0)},"which"),fVt=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=PYe(t,e),o=[];for(let a=0;a<r.length;a++){let l=r[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=kYe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=d+n[p];try{if(BYe.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw DYe(t)},"whichSync");LYe.exports=NYe;NYe.sync=fVt});var QYe=G((Uui,Dhe)=>{"use strict";f();var MYe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");Dhe.exports=MYe;Dhe.exports.default=MYe});var WYe=G((Gui,qYe)=>{"use strict";f();var OYe=require("path"),pVt=FYe(),mVt=QYe();function UYe(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=pVt.sync(t.command,{path:r[mVt({env:r})],pathExt:e?OYe.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=OYe.resolve(i?t.options.cwd:"",a)),a}s(UYe,"resolveCommandAttempt");function hVt(t){return UYe(t)||UYe(t,!0)}s(hVt,"resolveCommand");qYe.exports=hVt});var GYe=G((Vui,Nhe)=>{"use strict";f();var Phe=/([()\][%!^"`<>&|;, *?])/g;function gVt(t){return t=t.replace(Phe,"^$1"),t}s(gVt,"escapeCommand");function AVt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Phe,"^$1"),e&&(t=t.replace(Phe,"^$1")),t}s(AVt,"escapeArgument");Nhe.exports.command=gVt;Nhe.exports.argument=AVt});var jYe=G((Yui,HYe)=>{"use strict";f();HYe.exports=/^#!(.*)/});var $Ye=G((Jui,VYe)=>{"use strict";f();var yVt=jYe();VYe.exports=(t="")=>{let e=t.match(yVt);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var YYe=G((Zui,zYe)=>{"use strict";f();var Lhe=require("fs"),CVt=$Ye();function xVt(t){let r=Buffer.alloc(150),n;try{n=Lhe.openSync(t,"r"),Lhe.readSync(n,r,0,150,0),Lhe.closeSync(n)}catch{}return CVt(r.toString())}s(xVt,"readShebang");zYe.exports=xVt});var ZYe=G((rdi,XYe)=>{"use strict";f();var vVt=require("path"),KYe=WYe(),JYe=GYe(),bVt=YYe(),EVt=process.platform==="win32",IVt=/\.(?:com|exe)$/i,TVt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function wVt(t){t.file=KYe(t);let e=t.file&&bVt(t.file);return e?(t.args.unshift(t.file),t.command=e,KYe(t)):t.file}s(wVt,"detectShebang");function _Vt(t){if(!EVt)return t;let e=wVt(t),r=!IVt.test(e);if(t.options.forceShell||r){let n=TVt.test(e);t.command=vVt.normalize(t.command),t.command=JYe.command(t.command),t.args=t.args.map(o=>JYe.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(_Vt,"parseNonShell");function SVt(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:_Vt(n)}s(SVt,"parse");XYe.exports=SVt});var rKe=G((odi,tKe)=>{"use strict";f();var Fhe=process.platform==="win32";function Mhe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(Mhe,"notFoundError");function RVt(t,e){if(!Fhe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=eKe(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(RVt,"hookChildProcess");function eKe(t,e){return Fhe&&t===1&&!e.file?Mhe(e.original,"spawn"):null}s(eKe,"verifyENOENT");function kVt(t,e){return Fhe&&t===1&&!e.file?Mhe(e.original,"spawnSync"):null}s(kVt,"verifyENOENTSync");tKe.exports={hookChildProcess:RVt,verifyENOENT:eKe,verifyENOENTSync:kVt,notFoundError:Mhe}});var oKe=G((ldi,Nk)=>{"use strict";f();var nKe=require("child_process"),Qhe=ZYe(),Ohe=rKe();function iKe(t,e,r){let n=Qhe(t,e,r),i=nKe.spawn(n.command,n.args,n.options);return Ohe.hookChildProcess(i,n),i}s(iKe,"spawn");function BVt(t,e,r){let n=Qhe(t,e,r),i=nKe.spawnSync(n.command,n.args,n.options);return i.error=i.error||Ohe.verifyENOENTSync(i.status,n),i}s(BVt,"spawnSync");Nk.exports=iKe;Nk.exports.spawn=iKe;Nk.exports.sync=BVt;Nk.exports._parse=Qhe;Nk.exports._enoent=Ohe});var o$t={};d1(o$t,{getTokenizer:()=>Bo,getTokenizerAsync:()=>x2e,main:()=>jKe});module.exports=gXe(o$t);f();f();WAe().install();f();f();var mB="github.copilot";f();f();f();f();f();f();var ls=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();var xf=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return V7(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var vf="X-Copilot-RelatedPluginVersion-",hB=(q=>(q.Market="X-MSEdge-Market",q.CorpNet="X-FD-Corpnet",q.Build="X-VSCode-Build",q.ApplicationVersion="X-VSCode-AppVersion",q.TargetPopulation="X-VSCode-TargetPopulation",q.ClientId="X-MSEdge-ClientId",q.ExtensionName="X-VSCode-ExtensionName",q.ExtensionVersion="X-VSCode-ExtensionVersion",q.ExtensionRelease="X-VSCode-ExtensionRelease",q.Language="X-VSCode-Language",q.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",q.CopilotEngine="X-Copilot-Engine",q.CopilotOverrideEngine="X-Copilot-OverrideEngine",q.CopilotRepository="X-Copilot-Repository",q.CopilotFileType="X-Copilot-FileType",q.CopilotUserKind="X-Copilot-UserKind",q.CopilotDogfood="X-Copilot-Dogfood",q.CopilotCustomModel="X-Copilot-CustomModel",q.CopilotOrgs="X-Copilot-Orgs",q.CopilotCustomModelNames="X-Copilot-CustomModelNames",q.CopilotTrackingId="X-Copilot-CopilotTrackingId",q.CopilotClientVersion="X-Copilot-ClientVersion",q.CopilotRelatedPluginVersionCppTools=vf+"msvscodecpptools",q.CopilotRelatedPluginVersionCMakeTools=vf+"msvscodecmaketools",q.CopilotRelatedPluginVersionMakefileTools=vf+"msvscodemakefiletools",q.CopilotRelatedPluginVersionCSharpDevKit=vf+"msdotnettoolscsdevkit",q.CopilotRelatedPluginVersionPython=vf+"mspythonpython",q.CopilotRelatedPluginVersionPylance=vf+"mspythonvscodepylance",q.CopilotRelatedPluginVersionJavaPack=vf+"vscjavavscodejavapack",q.CopilotRelatedPluginVersionTypescript=vf+"vscodetypescriptlanguagefeatures",q.CopilotRelatedPluginVersionTypescriptNext=vf+"msvscodevscodetypescriptnext",q.CopilotRelatedPluginVersionCSharp=vf+"msdotnettoolscsharp",q))(hB||{});var tZe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},nI=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=tZe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();var on=class{static{s(this,"Fetcher")}#e;set rejectUnauthorized(e){this.#e=e}get rejectUnauthorized(){return this.#e}},gB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Lc(t){return!t||typeof t!="object"?!1:t instanceof gB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Lc,"isAbortError");var D_=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},eg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},rZe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function AB(t,e=!0){return t instanceof Error?e&&"cause"in t&&AB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof D_||t instanceof eg||t?.message?.startsWith("net::")||rZe.has(t.code??""):!1}s(AB,"isNetworkError");var xx=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new D_(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new D_(`Response body truncated: actualLength=${o}`,"Truncated"):new D_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function iI(t,e,r,n,i,o,a,l,c){let u={...l,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Bs).sessionId,"VScode-MachineId":t.get(Bs).machineId,...r0(t),"X-GitHub-Api-Version":bf};n&&(u["OpenAI-Intent"]=n);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(on);if(a){let h=p.makeAbortController();a.onCancellationRequested(()=>{Dt(t,"networking.cancelRequest",an.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(nZe(h))return Dt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(iI,"postRequest");function nZe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(nZe,"isInterruptedNetworkError");f();f();var lc=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){Ds(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,l=r.enterprise_list,c=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=n,this.ftFlag=i)})}};var BL=Ve(Ex()),DL=Ve(require("os"));var iZe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function oZe(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(iZe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(oZe,"buildExceptionDetail");function IX(t,e){let r=t.get(fn),n=r.getEditorInfo(),i=t.get(lc),o={"#editor":n.devName??n.name,"#editor_version":tg({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":tg(r.getEditorPluginInfo()),"#session_id":t.get(Bs).sessionId,"#machine_id":t.get(Bs).machineId,"#architecture":DL.arch(),"#os_platform":DL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(IX,"buildContext");function J1e(t,e){let r=t.get(po),n=t.get(fn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:IX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=oZe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,BL.SHA256)(BL.enc.Utf16.parse(u.join(`
`))).toString()),o}s(J1e,"buildPayload");f();var CB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var Z1e=Ve(Ex());var Kr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},xB=class extends Kr{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var rg=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Kr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var Ef=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:tye(r,n),verboseLogging:aZe(r,n),testMode:e,simulation:sZe(n)})}};function tm(t){return t.get(Ef).flags.testMode}s(tm,"isRunningInTest");function P_(t){return tm(t)}s(P_,"shouldFailForDebugPurposes");function vB(t){return t.get(Ef).flags.debug}s(vB,"isDebugEnabled");function eye(t){return t.get(Ef).flags.verboseLogging}s(eye,"isVerboseLoggingEnabled");function tye(t,e){return t.includes("--debug")||TX(e,"DEBUG")}s(tye,"determineDebugFlag");function sZe(t){return TX(t,"SIMULATION")}s(sZe,"determineSimulationFlag");function NL(t){return t.get(Ef).flags.simulation}s(NL,"isRunningInSimulation");function aZe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||TX(e,"VERBOSE")||tye(t,e)}s(aZe,"determineVerboseLoggingEnabled");function TX(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(TX,"determineEnvFlagEnabled");f();var va=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var iye=require("os"),oye=Ve(require("path"));function bB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(bB,"redactPaths");var lZe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),cZe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function _X(t){if(lZe.has(t))return t;for(let e of cZe)if(e.test(t))return t;return bB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(_X,"redactMessage");function LL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(LL,"escapeForRegExp");var uZe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+LL((0,iye.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function wX(t){return t.replace(uZe,"~")}s(wX,"redactHomeDir");var sye="[\\\\/]?([^:)]*)(?=:\\d)",rye=new RegExp(LL(oye.sep),"g"),nye=new RegExp(LL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+sye,"gi");function SX(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(nye.test(l))i.stack+=`
${bB(l.replace(nye,(c,u)=>"./"+u.replace(rye,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${bB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of n){let p=new RegExp(LL(d.replace(/[\\/]$/,""))+sye,"gi");if(p.test(l)){i.stack+=`
${bB(l.replace(p,(m,h)=>u+h.replace(rye,"/")))}`,c=!0;break}}if(c)continue;r?i.stack+=`
${wX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=wX(o));return t.cause instanceof Error&&(i.cause=SX(t.cause,e,r,n)),i}s(SX,"cloneError");function aye(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(aye,"errorMessageWithoutPath");function lye(t,e){return SX(t,s(function(n){return wX(aye(n))},"prepareMessage"),!0,e)}s(lye,"prepareErrorForRestrictedTelemetry");function cye(t,e,r=!1){return SX(t,s(function(i){if(r)return _X(aye(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=bB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(cye,"redactError");f();f();var Fc={};d1(Fc,{HasPropertyKey:()=>FL,IsArray:()=>ba,IsAsyncIterator:()=>RX,IsBigInt:()=>EB,IsBoolean:()=>m1,IsDate:()=>oI,IsFunction:()=>kX,IsIterator:()=>BX,IsNull:()=>DX,IsNumber:()=>n0,IsObject:()=>_o,IsRegExp:()=>IB,IsString:()=>Uo,IsSymbol:()=>PX,IsUint8Array:()=>h1,IsUndefined:()=>Ea});f();function FL(t,e){return e in t}s(FL,"HasPropertyKey");function RX(t){return _o(t)&&!ba(t)&&!h1(t)&&Symbol.asyncIterator in t}s(RX,"IsAsyncIterator");function ba(t){return Array.isArray(t)}s(ba,"IsArray");function EB(t){return typeof t=="bigint"}s(EB,"IsBigInt");function m1(t){return typeof t=="boolean"}s(m1,"IsBoolean");function oI(t){return t instanceof globalThis.Date}s(oI,"IsDate");function kX(t){return typeof t=="function"}s(kX,"IsFunction");function BX(t){return _o(t)&&!ba(t)&&!h1(t)&&Symbol.iterator in t}s(BX,"IsIterator");function DX(t){return t===null}s(DX,"IsNull");function n0(t){return typeof t=="number"}s(n0,"IsNumber");function _o(t){return typeof t=="object"&&t!==null}s(_o,"IsObject");function IB(t){return t instanceof globalThis.RegExp}s(IB,"IsRegExp");function Uo(t){return typeof t=="string"}s(Uo,"IsString");function PX(t){return typeof t=="symbol"}s(PX,"IsSymbol");function h1(t){return t instanceof globalThis.Uint8Array}s(h1,"IsUint8Array");function Ea(t){return t===void 0}s(Ea,"IsUndefined");function dZe(t){return t.map(e=>ML(e))}s(dZe,"ArrayType");function fZe(t){return new Date(t.getTime())}s(fZe,"DateType");function pZe(t){return new Uint8Array(t)}s(pZe,"Uint8ArrayType");function mZe(t){return new RegExp(t.source,t.flags)}s(mZe,"RegExpType");function hZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=ML(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=ML(t[r]);return e}s(hZe,"ObjectType");function ML(t){return ba(t)?dZe(t):oI(t)?fZe(t):h1(t)?pZe(t):IB(t)?mZe(t):_o(t)?hZe(t):t}s(ML,"Visit");function cs(t){return ML(t)}s(cs,"Clone");function N_(t,e){return e===void 0?cs(t):cs({...e,...t})}s(N_,"CloneType");f();f();f();function QL(t){return ui(t)&&globalThis.Symbol.asyncIterator in t}s(QL,"IsAsyncIterator");function OL(t){return ui(t)&&globalThis.Symbol.iterator in t}s(OL,"IsIterator");function NX(t){return ui(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(NX,"IsStandardObject");function UL(t){return t instanceof globalThis.Promise}s(UL,"IsPromise");function Cu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Cu,"IsDate");function uye(t){return t instanceof globalThis.Map}s(uye,"IsMap");function dye(t){return t instanceof globalThis.Set}s(dye,"IsSet");function If(t){return globalThis.ArrayBuffer.isView(t)}s(If,"IsTypedArray");function L_(t){return t instanceof globalThis.Uint8Array}s(L_,"IsUint8Array");function An(t,e){return e in t}s(An,"HasPropertyKey");function ui(t){return t!==null&&typeof t=="object"}s(ui,"IsObject");function yn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(yn,"IsArray");function us(t){return t===void 0}s(us,"IsUndefined");function g1(t){return t===null}s(g1,"IsNull");function ng(t){return typeof t=="boolean"}s(ng,"IsBoolean");function Wr(t){return typeof t=="number"}s(Wr,"IsNumber");function qL(t){return globalThis.Number.isInteger(t)}s(qL,"IsInteger");function cc(t){return typeof t=="bigint"}s(cc,"IsBigInt");function Ui(t){return typeof t=="string"}s(Ui,"IsString");function Ix(t){return typeof t=="function"}s(Ix,"IsFunction");function A1(t){return typeof t=="symbol"}s(A1,"IsSymbol");function i0(t){return cc(t)||ng(t)||g1(t)||Wr(t)||Ui(t)||A1(t)||us(t)}s(i0,"IsValueType");var Ko;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let l=ui(a);return t.AllowArrayObject?l:l&&!yn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Wr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=us(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Ko||(Ko={}));f();function gZe(t){return globalThis.Object.freeze(t).map(e=>TB(e))}s(gZe,"ImmutableArray");function AZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=TB(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=TB(t[r]);return globalThis.Object.freeze(e)}s(AZe,"ImmutableObject");function TB(t){return ba(t)?gZe(t):oI(t)?t:h1(t)?t:IB(t)?t:_o(t)?AZe(t):t}s(TB,"Immutable");function rt(t,e){let r=e!==void 0?{...e,...t}:t;switch(Ko.InstanceMode){case"freeze":return TB(r);case"clone":return cs(r);default:return r}}s(rt,"CreateType");f();var Cn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ps=Symbol.for("TypeBox.Transform"),rm=Symbol.for("TypeBox.Readonly"),uc=Symbol.for("TypeBox.Optional"),Tf=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function F_(t){return _o(t)&&t[rm]==="Readonly"}s(F_,"IsReadonly");function od(t){return _o(t)&&t[uc]==="Optional"}s(od,"IsOptional");function LX(t){return Pi(t,"Any")}s(LX,"IsAny");function FX(t){return Pi(t,"Argument")}s(FX,"IsArgument");function nm(t){return Pi(t,"Array")}s(nm,"IsArray");function sI(t){return Pi(t,"AsyncIterator")}s(sI,"IsAsyncIterator");function aI(t){return Pi(t,"BigInt")}s(aI,"IsBigInt");function y1(t){return Pi(t,"Boolean")}s(y1,"IsBoolean");function im(t){return Pi(t,"Computed")}s(im,"IsComputed");function om(t){return Pi(t,"Constructor")}s(om,"IsConstructor");function yZe(t){return Pi(t,"Date")}s(yZe,"IsDate");function sm(t){return Pi(t,"Function")}s(sm,"IsFunction");function am(t){return Pi(t,"Integer")}s(am,"IsInteger");function zs(t){return Pi(t,"Intersect")}s(zs,"IsIntersect");function lI(t){return Pi(t,"Iterator")}s(lI,"IsIterator");function Pi(t,e){return _o(t)&&Ze in t&&t[Ze]===e}s(Pi,"IsKindOf");function WL(t){return m1(t)||n0(t)||Uo(t)}s(WL,"IsLiteralValue");function o0(t){return Pi(t,"Literal")}s(o0,"IsLiteral");function s0(t){return Pi(t,"MappedKey")}s(s0,"IsMappedKey");function ds(t){return Pi(t,"MappedResult")}s(ds,"IsMappedResult");function Tx(t){return Pi(t,"Never")}s(Tx,"IsNever");function CZe(t){return Pi(t,"Not")}s(CZe,"IsNot");function wB(t){return Pi(t,"Null")}s(wB,"IsNull");function lm(t){return Pi(t,"Number")}s(lm,"IsNumber");function Ia(t){return Pi(t,"Object")}s(Ia,"IsObject");function cI(t){return Pi(t,"Promise")}s(cI,"IsPromise");function uI(t){return Pi(t,"Record")}s(uI,"IsRecord");function oa(t){return Pi(t,"Ref")}s(oa,"IsRef");function MX(t){return Pi(t,"RegExp")}s(MX,"IsRegExp");function C1(t){return Pi(t,"String")}s(C1,"IsString");function _B(t){return Pi(t,"Symbol")}s(_B,"IsSymbol");function a0(t){return Pi(t,"TemplateLiteral")}s(a0,"IsTemplateLiteral");function xZe(t){return Pi(t,"This")}s(xZe,"IsThis");function oo(t){return _o(t)&&Ps in t}s(oo,"IsTransform");function l0(t){return Pi(t,"Tuple")}s(l0,"IsTuple");function x1(t){return Pi(t,"Undefined")}s(x1,"IsUndefined");function qi(t){return Pi(t,"Union")}s(qi,"IsUnion");function vZe(t){return Pi(t,"Uint8Array")}s(vZe,"IsUint8Array");function bZe(t){return Pi(t,"Unknown")}s(bZe,"IsUnknown");function EZe(t){return Pi(t,"Unsafe")}s(EZe,"IsUnsafe");function IZe(t){return Pi(t,"Void")}s(IZe,"IsVoid");function wx(t){return _o(t)&&Ze in t&&Uo(t[Ze])}s(wx,"IsKind");function Ns(t){return LX(t)||FX(t)||nm(t)||y1(t)||aI(t)||sI(t)||im(t)||om(t)||yZe(t)||sm(t)||am(t)||zs(t)||lI(t)||o0(t)||s0(t)||ds(t)||Tx(t)||CZe(t)||wB(t)||lm(t)||Ia(t)||cI(t)||uI(t)||oa(t)||MX(t)||C1(t)||_B(t)||a0(t)||xZe(t)||l0(t)||x1(t)||qi(t)||vZe(t)||bZe(t)||EZe(t)||IZe(t)||wx(t)}s(Ns,"IsSchema");var De={};d1(De,{IsAny:()=>hye,IsArgument:()=>gye,IsArray:()=>Aye,IsAsyncIterator:()=>yye,IsBigInt:()=>Cye,IsBoolean:()=>xye,IsComputed:()=>vye,IsConstructor:()=>bye,IsDate:()=>Eye,IsFunction:()=>Iye,IsImport:()=>kZe,IsInteger:()=>Tye,IsIntersect:()=>wye,IsIterator:()=>_ye,IsKind:()=>Zye,IsKindOf:()=>Ai,IsLiteral:()=>RB,IsLiteralBoolean:()=>BZe,IsLiteralNumber:()=>Rye,IsLiteralString:()=>Sye,IsLiteralValue:()=>kye,IsMappedKey:()=>Bye,IsMappedResult:()=>Dye,IsNever:()=>Pye,IsNot:()=>Nye,IsNull:()=>Lye,IsNumber:()=>Fye,IsObject:()=>Mye,IsOptional:()=>RZe,IsPromise:()=>Qye,IsProperties:()=>GL,IsReadonly:()=>SZe,IsRecord:()=>Oye,IsRecursive:()=>DZe,IsRef:()=>Uye,IsRegExp:()=>qye,IsSchema:()=>ps,IsString:()=>Wye,IsSymbol:()=>Gye,IsTemplateLiteral:()=>Hye,IsThis:()=>jye,IsTransform:()=>Vye,IsTuple:()=>$ye,IsUint8Array:()=>Yye,IsUndefined:()=>zye,IsUnion:()=>qX,IsUnionLiteral:()=>PZe,IsUnknown:()=>Kye,IsUnsafe:()=>Jye,IsVoid:()=>Xye,TypeGuardUnknownTypeError:()=>QX});f();var QX=class extends Cn{static{s(this,"TypeGuardUnknownTypeError")}},TZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function fye(t){try{return new RegExp(t),!0}catch{return!1}}s(fye,"IsPattern");function OX(t){if(!Uo(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(OX,"IsControlCharacterFree");function pye(t){return UX(t)||ps(t)}s(pye,"IsAdditionalProperties");function SB(t){return Ea(t)||EB(t)}s(SB,"IsOptionalBigInt");function qo(t){return Ea(t)||n0(t)}s(qo,"IsOptionalNumber");function UX(t){return Ea(t)||m1(t)}s(UX,"IsOptionalBoolean");function So(t){return Ea(t)||Uo(t)}s(So,"IsOptionalString");function wZe(t){return Ea(t)||Uo(t)&&OX(t)&&fye(t)}s(wZe,"IsOptionalPattern");function _Ze(t){return Ea(t)||Uo(t)&&OX(t)}s(_Ze,"IsOptionalFormat");function mye(t){return Ea(t)||ps(t)}s(mye,"IsOptionalSchema");function SZe(t){return _o(t)&&t[rm]==="Readonly"}s(SZe,"IsReadonly");function RZe(t){return _o(t)&&t[uc]==="Optional"}s(RZe,"IsOptional");function hye(t){return Ai(t,"Any")&&So(t.$id)}s(hye,"IsAny");function gye(t){return Ai(t,"Argument")&&n0(t.index)}s(gye,"IsArgument");function Aye(t){return Ai(t,"Array")&&t.type==="array"&&So(t.$id)&&ps(t.items)&&qo(t.minItems)&&qo(t.maxItems)&&UX(t.uniqueItems)&&mye(t.contains)&&qo(t.minContains)&&qo(t.maxContains)}s(Aye,"IsArray");function yye(t){return Ai(t,"AsyncIterator")&&t.type==="AsyncIterator"&&So(t.$id)&&ps(t.items)}s(yye,"IsAsyncIterator");function Cye(t){return Ai(t,"BigInt")&&t.type==="bigint"&&So(t.$id)&&SB(t.exclusiveMaximum)&&SB(t.exclusiveMinimum)&&SB(t.maximum)&&SB(t.minimum)&&SB(t.multipleOf)}s(Cye,"IsBigInt");function xye(t){return Ai(t,"Boolean")&&t.type==="boolean"&&So(t.$id)}s(xye,"IsBoolean");function vye(t){return Ai(t,"Computed")&&Uo(t.target)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))}s(vye,"IsComputed");function bye(t){return Ai(t,"Constructor")&&t.type==="Constructor"&&So(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(bye,"IsConstructor");function Eye(t){return Ai(t,"Date")&&t.type==="Date"&&So(t.$id)&&qo(t.exclusiveMaximumTimestamp)&&qo(t.exclusiveMinimumTimestamp)&&qo(t.maximumTimestamp)&&qo(t.minimumTimestamp)&&qo(t.multipleOfTimestamp)}s(Eye,"IsDate");function Iye(t){return Ai(t,"Function")&&t.type==="Function"&&So(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(Iye,"IsFunction");function kZe(t){return Ai(t,"Import")&&FL(t,"$defs")&&_o(t.$defs)&&GL(t.$defs)&&FL(t,"$ref")&&Uo(t.$ref)&&t.$ref in t.$defs}s(kZe,"IsImport");function Tye(t){return Ai(t,"Integer")&&t.type==="integer"&&So(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(Tye,"IsInteger");function GL(t){return _o(t)&&Object.entries(t).every(([e,r])=>OX(e)&&ps(r))}s(GL,"IsProperties");function wye(t){return Ai(t,"Intersect")&&!(Uo(t.type)&&t.type!=="object")&&ba(t.allOf)&&t.allOf.every(e=>ps(e)&&!Vye(e))&&So(t.type)&&(UX(t.unevaluatedProperties)||mye(t.unevaluatedProperties))&&So(t.$id)}s(wye,"IsIntersect");function _ye(t){return Ai(t,"Iterator")&&t.type==="Iterator"&&So(t.$id)&&ps(t.items)}s(_ye,"IsIterator");function Ai(t,e){return _o(t)&&Ze in t&&t[Ze]===e}s(Ai,"IsKindOf");function Sye(t){return RB(t)&&Uo(t.const)}s(Sye,"IsLiteralString");function Rye(t){return RB(t)&&n0(t.const)}s(Rye,"IsLiteralNumber");function BZe(t){return RB(t)&&m1(t.const)}s(BZe,"IsLiteralBoolean");function RB(t){return Ai(t,"Literal")&&So(t.$id)&&kye(t.const)}s(RB,"IsLiteral");function kye(t){return m1(t)||n0(t)||Uo(t)}s(kye,"IsLiteralValue");function Bye(t){return Ai(t,"MappedKey")&&ba(t.keys)&&t.keys.every(e=>n0(e)||Uo(e))}s(Bye,"IsMappedKey");function Dye(t){return Ai(t,"MappedResult")&&GL(t.properties)}s(Dye,"IsMappedResult");function Pye(t){return Ai(t,"Never")&&_o(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(Pye,"IsNever");function Nye(t){return Ai(t,"Not")&&ps(t.not)}s(Nye,"IsNot");function Lye(t){return Ai(t,"Null")&&t.type==="null"&&So(t.$id)}s(Lye,"IsNull");function Fye(t){return Ai(t,"Number")&&t.type==="number"&&So(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(Fye,"IsNumber");function Mye(t){return Ai(t,"Object")&&t.type==="object"&&So(t.$id)&&GL(t.properties)&&pye(t.additionalProperties)&&qo(t.minProperties)&&qo(t.maxProperties)}s(Mye,"IsObject");function Qye(t){return Ai(t,"Promise")&&t.type==="Promise"&&So(t.$id)&&ps(t.item)}s(Qye,"IsPromise");function Oye(t){return Ai(t,"Record")&&t.type==="object"&&So(t.$id)&&pye(t.additionalProperties)&&_o(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&fye(r[0])&&_o(e.patternProperties)&&ps(e.patternProperties[r[0]])})(t)}s(Oye,"IsRecord");function DZe(t){return _o(t)&&Tf in t&&t[Tf]==="Recursive"}s(DZe,"IsRecursive");function Uye(t){return Ai(t,"Ref")&&So(t.$id)&&Uo(t.$ref)}s(Uye,"IsRef");function qye(t){return Ai(t,"RegExp")&&So(t.$id)&&Uo(t.source)&&Uo(t.flags)&&qo(t.maxLength)&&qo(t.minLength)}s(qye,"IsRegExp");function Wye(t){return Ai(t,"String")&&t.type==="string"&&So(t.$id)&&qo(t.minLength)&&qo(t.maxLength)&&wZe(t.pattern)&&_Ze(t.format)}s(Wye,"IsString");function Gye(t){return Ai(t,"Symbol")&&t.type==="symbol"&&So(t.$id)}s(Gye,"IsSymbol");function Hye(t){return Ai(t,"TemplateLiteral")&&t.type==="string"&&Uo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Hye,"IsTemplateLiteral");function jye(t){return Ai(t,"This")&&So(t.$id)&&Uo(t.$ref)}s(jye,"IsThis");function Vye(t){return _o(t)&&Ps in t}s(Vye,"IsTransform");function $ye(t){return Ai(t,"Tuple")&&t.type==="array"&&So(t.$id)&&n0(t.minItems)&&n0(t.maxItems)&&t.minItems===t.maxItems&&(Ea(t.items)&&Ea(t.additionalItems)&&t.minItems===0||ba(t.items)&&t.items.every(e=>ps(e)))}s($ye,"IsTuple");function zye(t){return Ai(t,"Undefined")&&t.type==="undefined"&&So(t.$id)}s(zye,"IsUndefined");function PZe(t){return qX(t)&&t.anyOf.every(e=>Sye(e)||Rye(e))}s(PZe,"IsUnionLiteral");function qX(t){return Ai(t,"Union")&&So(t.$id)&&_o(t)&&ba(t.anyOf)&&t.anyOf.every(e=>ps(e))}s(qX,"IsUnion");function Yye(t){return Ai(t,"Uint8Array")&&t.type==="Uint8Array"&&So(t.$id)&&qo(t.minByteLength)&&qo(t.maxByteLength)}s(Yye,"IsUint8Array");function Kye(t){return Ai(t,"Unknown")&&So(t.$id)}s(Kye,"IsUnknown");function Jye(t){return Ai(t,"Unsafe")}s(Jye,"IsUnsafe");function Xye(t){return Ai(t,"Void")&&t.type==="void"&&So(t.$id)}s(Xye,"IsVoid");function Zye(t){return _o(t)&&Ze in t&&Uo(t[Ze])&&!TZe.includes(t[Ze])}s(Zye,"IsKind");function ps(t){return _o(t)&&(hye(t)||gye(t)||Aye(t)||xye(t)||Cye(t)||yye(t)||vye(t)||bye(t)||Eye(t)||Iye(t)||Tye(t)||wye(t)||_ye(t)||RB(t)||Bye(t)||Dye(t)||Pye(t)||Nye(t)||Lye(t)||Fye(t)||Mye(t)||Qye(t)||Oye(t)||Uye(t)||qye(t)||Wye(t)||Gye(t)||Hye(t)||jye(t)||$ye(t)||zye(t)||qX(t)||Yye(t)||Kye(t)||Jye(t)||Xye(t)||Zye(t))}s(ps,"IsSchema");f();var WX="(true|false)",kB="(0|[1-9][0-9]*)",GX="(.*)",NZe="(?!.*)",UKt=`^${WX}$`,ig=`^${kB}$`,og=`^${GX}$`,eCe=`^${NZe}$`;f();var cm={};d1(cm,{Clear:()=>FZe,Delete:()=>MZe,Entries:()=>LZe,Get:()=>UZe,Has:()=>QZe,Set:()=>OZe});f();var M_=new Map;function LZe(){return new Map(M_)}s(LZe,"Entries");function FZe(){return M_.clear()}s(FZe,"Clear");function MZe(t){return M_.delete(t)}s(MZe,"Delete");function QZe(t){return M_.has(t)}s(QZe,"Has");function OZe(t,e){M_.set(t,e)}s(OZe,"Set");function UZe(t){return M_.get(t)}s(UZe,"Get");var xu={};d1(xu,{Clear:()=>WZe,Delete:()=>GZe,Entries:()=>qZe,Get:()=>VZe,Has:()=>HZe,Set:()=>jZe});f();var Q_=new Map;function qZe(){return new Map(Q_)}s(qZe,"Entries");function WZe(){return Q_.clear()}s(WZe,"Clear");function GZe(t){return Q_.delete(t)}s(GZe,"Delete");function HZe(t){return Q_.has(t)}s(HZe,"Has");function jZe(t,e){Q_.set(t,e)}s(jZe,"Set");function VZe(t){return Q_.get(t)}s(VZe,"Get");f();function tCe(t,e){return t.includes(e)}s(tCe,"SetIncludes");function rCe(t){return[...new Set(t)]}s(rCe,"SetDistinct");function $Ze(t,e){return t.filter(r=>e.includes(r))}s($Ze,"SetIntersect");function zZe(t,e){return t.reduce((r,n)=>$Ze(r,n),e)}s(zZe,"SetIntersectManyResolve");function nCe(t){return t.length===1?t[0]:t.length>1?zZe(t.slice(1),t[0]):[]}s(nCe,"SetIntersectMany");function iCe(t){let e=[];for(let r of t)e.push(...r);return e}s(iCe,"SetUnionMany");f();function _x(t){return rt({[Ze]:"Any"},t)}s(_x,"Any");f();function O_(t,e){return rt({[Ze]:"Array",type:"array",items:t},e)}s(O_,"Array");f();function oCe(t){return rt({[Ze]:"Argument",index:t})}s(oCe,"Argument");f();function U_(t,e){return rt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(U_,"AsyncIterator");f();f();function Jo(t,e,r){return rt({[Ze]:"Computed",target:t,parameters:e},r)}s(Jo,"Computed");f();f();function YZe(t,e){let{[e]:r,...n}=t;return n}s(YZe,"DiscardKey");function Ys(t,e){return e.reduce((r,n)=>YZe(r,n),t)}s(Ys,"Discard");f();function ni(t){return rt({[Ze]:"Never",not:{}},t)}s(ni,"Never");f();f();function zi(t){return rt({[Ze]:"MappedResult",properties:t})}s(zi,"MappedResult");f();f();function q_(t,e,r){return rt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(q_,"Constructor");f();function sg(t,e,r){return rt({[Ze]:"Function",type:"Function",parameters:t,returns:e},r)}s(sg,"Function");f();f();f();f();function BB(t,e){return rt({[Ze]:"Union",anyOf:t},e)}s(BB,"UnionCreate");function KZe(t){return t.some(e=>od(e))}s(KZe,"IsUnionOptional");function sCe(t){return t.map(e=>od(e)?JZe(e):e)}s(sCe,"RemoveOptionalFromRest");function JZe(t){return Ys(t,[uc])}s(JZe,"RemoveOptionalFromType");function XZe(t,e){return KZe(t)?Mc(BB(sCe(t),e)):BB(sCe(t),e)}s(XZe,"ResolveUnion");function ag(t,e){return t.length===1?rt(t[0],e):t.length===0?ni(e):XZe(t,e)}s(ag,"UnionEvaluated");f();function so(t,e){return t.length===0?ni(e):t.length===1?rt(t[0],e):BB(t,e)}s(so,"Union");f();f();f();var HL=class extends Cn{static{s(this,"TemplateLiteralParserError")}};function ZZe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(ZZe,"Unescape");function HX(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(HX,"IsNonEscaped");function b1(t,e){return HX(t,e,"(")}s(b1,"IsOpenParen");function DB(t,e){return HX(t,e,")")}s(DB,"IsCloseParen");function aCe(t,e){return HX(t,e,"|")}s(aCe,"IsSeparator");function eet(t){if(!(b1(t,0)&&DB(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(b1(t,r)&&(e+=1),DB(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(eet,"IsGroup");function tet(t){return t.slice(1,t.length-1)}s(tet,"InGroup");function ret(t){let e=0;for(let r=0;r<t.length;r++)if(b1(t,r)&&(e+=1),DB(t,r)&&(e-=1),aCe(t,r)&&e===0)return!0;return!1}s(ret,"IsPrecedenceOr");function net(t){for(let e=0;e<t.length;e++)if(b1(t,e))return!0;return!1}s(net,"IsPrecedenceAnd");function iet(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(b1(t,o)&&(e+=1),DB(t,o)&&(e-=1),aCe(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(W_(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(W_(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(iet,"Or");function oet(t){function e(i,o){if(!b1(i,o))throw new HL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(b1(i,l)&&(a+=1),DB(i,l)&&(a-=1),a===0)return[o,l];throw new HL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(b1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(b1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);n.push(W_(l)),i=a}else{let[o,a]=r(t,i),l=t.slice(o,a);l.length>0&&n.push(W_(l)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(oet,"And");function W_(t){return eet(t)?W_(tet(t)):ret(t)?iet(t):net(t)?oet(t):{type:"const",const:ZZe(t)}}s(W_,"TemplateLiteralParse");function G_(t){return W_(t.slice(1,t.length-1))}s(G_,"TemplateLiteralParseExact");var jX=class extends Cn{static{s(this,"TemplateLiteralFiniteError")}};function set(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(set,"IsNumberExpression");function aet(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(aet,"IsBooleanExpression");function cet(t){return t.type==="const"&&t.const===".*"}s(cet,"IsStringExpression");function dI(t){return set(t)||cet(t)?!1:aet(t)?!0:t.type==="and"?t.expr.every(e=>dI(e)):t.type==="or"?t.expr.every(e=>dI(e)):t.type==="const"?!0:(()=>{throw new jX("Unknown expression type")})()}s(dI,"IsTemplateLiteralExpressionFinite");function jL(t){let e=G_(t.pattern);return dI(e)}s(jL,"IsTemplateLiteralFinite");f();var VX=class extends Cn{static{s(this,"TemplateLiteralGenerateError")}};function*lCe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of lCe(t.slice(1)))yield`${e}${r}`}s(lCe,"GenerateReduce");function*uet(t){return yield*lCe(t.expr.map(e=>[...PB(e)]))}s(uet,"GenerateAnd");function*det(t){for(let e of t.expr)yield*PB(e)}s(det,"GenerateOr");function*fet(t){return yield t.const}s(fet,"GenerateConst");function*PB(t){return t.type==="and"?yield*uet(t):t.type==="or"?yield*det(t):t.type==="const"?yield*fet(t):(()=>{throw new VX("Unknown expression")})()}s(PB,"TemplateLiteralExpressionGenerate");function H_(t){let e=G_(t.pattern);return dI(e)?[...PB(e)]:[]}s(H_,"TemplateLiteralGenerate");f();f();function Ni(t,e){return rt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Ni,"Literal");f();function VL(t){return rt({[Ze]:"Boolean",type:"boolean"},t)}s(VL,"Boolean");f();function j_(t){return rt({[Ze]:"BigInt",type:"bigint"},t)}s(j_,"BigInt");f();function wf(t){return rt({[Ze]:"Number",type:"number"},t)}s(wf,"Number");f();function vu(t){return rt({[Ze]:"String",type:"string"},t)}s(vu,"String");function*pet(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield VL():e==="number"?yield wf():e==="bigint"?yield j_():e==="string"?yield vu():yield(()=>{let r=e.split("|").map(n=>Ni(n.trim()));return r.length===0?ni():r.length===1?r[0]:ag(r)})()}s(pet,"FromUnion");function*met(t){if(t[1]!=="{"){let e=Ni("$"),r=$X(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=pet(t.slice(2,e)),n=$X(t.slice(e+1));return yield*[...r,...n]}yield Ni(t)}s(met,"FromTerminal");function*$X(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=Ni(t.slice(0,e)),n=met(t.slice(e));return yield*[r,...n]}yield Ni(t)}s($X,"FromSyntax");function cCe(t){return[...$X(t)]}s(cCe,"TemplateLiteralSyntax");f();var zX=class extends Cn{static{s(this,"TemplateLiteralPatternError")}};function het(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(het,"Escape");function uCe(t,e){return a0(t)?t.pattern.slice(1,t.pattern.length-1):qi(t)?`(${t.anyOf.map(r=>uCe(r,e)).join("|")})`:lm(t)?`${e}${kB}`:am(t)?`${e}${kB}`:aI(t)?`${e}${kB}`:C1(t)?`${e}${GX}`:o0(t)?`${e}${het(t.const.toString())}`:y1(t)?`${e}${WX}`:(()=>{throw new zX(`Unexpected Kind '${t[Ze]}'`)})()}s(uCe,"Visit");function YX(t){return`^${t.map(e=>uCe(e,"")).join("")}$`}s(YX,"TemplateLiteralPattern");f();function fI(t){let r=H_(t).map(n=>Ni(n));return ag(r)}s(fI,"TemplateLiteralToUnion");f();function $L(t,e){let r=Uo(t)?YX(cCe(t)):YX(t);return rt({[Ze]:"TemplateLiteral",type:"string",pattern:r},e)}s($L,"TemplateLiteral");function get(t){return H_(t).map(r=>r.toString())}s(get,"FromTemplateLiteral");function Aet(t){let e=[];for(let r of t)e.push(...sd(r));return e}s(Aet,"FromUnion");function yet(t){return[t.toString()]}s(yet,"FromLiteral");function sd(t){return[...new Set(a0(t)?get(t):qi(t)?Aet(t.anyOf):o0(t)?yet(t.const):lm(t)?["[number]"]:am(t)?["[number]"]:[])]}s(sd,"IndexPropertyKeys");f();function Cet(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=Sx(t,sd(e[i]),r);return n}s(Cet,"FromProperties");function xet(t,e,r){return Cet(t,e.properties,r)}s(xet,"FromMappedResult");function dCe(t,e,r){let n=xet(t,e,r);return zi(n)}s(dCe,"IndexFromMappedResult");function pCe(t,e){return t.map(r=>mCe(r,e))}s(pCe,"FromRest");function vet(t){return t.filter(e=>!Tx(e))}s(vet,"FromIntersectRest");function bet(t,e){return zL(vet(pCe(t,e)))}s(bet,"FromIntersect");function Eet(t){return t.some(e=>Tx(e))?[]:t}s(Eet,"FromUnionRest");function Iet(t,e){return ag(Eet(pCe(t,e)))}s(Iet,"FromUnion");function Tet(t,e){return e in t?t[e]:e==="[number]"?ag(t):ni()}s(Tet,"FromTuple");function wet(t,e){return e==="[number]"?t:ni()}s(wet,"FromArray");function _et(t,e){return e in t?t[e]:ni()}s(_et,"FromProperty");function mCe(t,e){return zs(t)?bet(t.allOf,e):qi(t)?Iet(t.anyOf,e):l0(t)?Tet(t.items??[],e):nm(t)?wet(t.items,e):Ia(t)?_et(t.properties,e):ni()}s(mCe,"IndexFromPropertyKey");function NB(t,e){return e.map(r=>mCe(t,r))}s(NB,"IndexFromPropertyKeys");function fCe(t,e){return ag(NB(t,e))}s(fCe,"FromSchema");function Sx(t,e,r){if(oa(t)||oa(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ns(t)||!Ns(e))throw new Cn(n);return Jo("Index",[t,e])}return ds(e)?dCe(t,e,r):s0(e)?hCe(t,e,r):rt(Ns(e)?fCe(t,sd(e)):fCe(t,e),r)}s(Sx,"Index");function Ret(t,e,r){return{[e]:Sx(t,[e],cs(r))}}s(Ret,"MappedIndexPropertyKey");function ket(t,e,r){return e.reduce((n,i)=>({...n,...Ret(t,i,r)}),{})}s(ket,"MappedIndexPropertyKeys");function Bet(t,e,r){return ket(t,e.keys,r)}s(Bet,"MappedIndexProperties");function hCe(t,e,r){let n=Bet(t,e,r);return zi(n)}s(hCe,"IndexFromMappedKey");f();function V_(t,e){return rt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s(V_,"Iterator");f();function Det(t){let e=[];for(let r in t)od(t[r])||e.push(r);return e}s(Det,"RequiredKeys");function Pet(t,e){let r=Det(t),n=r.length>0?{[Ze]:"Object",type:"object",properties:t,required:r}:{[Ze]:"Object",type:"object",properties:t};return rt(n,e)}s(Pet,"_Object");var ao=Pet;f();function YL(t,e){return rt({[Ze]:"Promise",type:"Promise",item:t},e)}s(YL,"Promise");f();f();function Net(t){return rt(Ys(t,[rm]))}s(Net,"RemoveReadonly");function Let(t){return rt({...t,[rm]:"Readonly"})}s(Let,"AddReadonly");function Fet(t,e){return e===!1?Net(t):Let(t)}s(Fet,"ReadonlyWithFlag");function ad(t,e){let r=e??!0;return ds(t)?gCe(t,r):Fet(t,r)}s(ad,"Readonly");function Met(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=ad(t[n],e);return r}s(Met,"FromProperties");function Qet(t,e){return Met(t.properties,e)}s(Qet,"FromMappedResult");function gCe(t,e){let r=Qet(t,e);return zi(r)}s(gCe,"ReadonlyFromMappedResult");f();function _f(t,e){return rt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(_f,"Tuple");function ACe(t,e){return t in e?Sf(t,e[t]):zi(e)}s(ACe,"FromMappedResult");function Oet(t){return{[t]:Ni(t)}}s(Oet,"MappedKeyToKnownMappedResultProperties");function Uet(t){let e={};for(let r of t)e[r]=Ni(r);return e}s(Uet,"MappedKeyToUnknownMappedResultProperties");function qet(t,e){return tCe(e,t)?Oet(t):Uet(e)}s(qet,"MappedKeyToMappedResultProperties");function Wet(t,e){let r=qet(t,e);return ACe(t,r)}s(Wet,"FromMappedKey");function LB(t,e){return e.map(r=>Sf(t,r))}s(LB,"FromRest");function Get(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Sf(t,e[n]);return r}s(Get,"FromProperties");function Sf(t,e){let r={...e};return od(e)?Mc(Sf(t,Ys(e,[uc]))):F_(e)?ad(Sf(t,Ys(e,[rm]))):ds(e)?ACe(t,e.properties):s0(e)?Wet(t,e.keys):om(e)?q_(LB(t,e.parameters),Sf(t,e.returns),r):sm(e)?sg(LB(t,e.parameters),Sf(t,e.returns),r):sI(e)?U_(Sf(t,e.items),r):lI(e)?V_(Sf(t,e.items),r):zs(e)?Qc(LB(t,e.allOf),r):qi(e)?so(LB(t,e.anyOf),r):l0(e)?_f(LB(t,e.items??[]),r):Ia(e)?ao(Get(t,e.properties),r):nm(e)?O_(Sf(t,e.items),r):cI(e)?YL(Sf(t,e.item),r):e}s(Sf,"FromSchemaType");function Het(t,e){let r={};for(let n of t)r[n]=Sf(n,e);return r}s(Het,"MappedFunctionReturnType");function yCe(t,e,r){let n=Ns(t)?sd(t):t,i=e({[Ze]:"MappedKey",keys:n}),o=Het(n,i);return ao(o,r)}s(yCe,"Mapped");f();function jet(t){return rt(Ys(t,[uc]))}s(jet,"RemoveOptional");function Vet(t){return rt({...t,[uc]:"Optional"})}s(Vet,"AddOptional");function $et(t,e){return e===!1?jet(t):Vet(t)}s($et,"OptionalWithFlag");function Mc(t,e){let r=e??!0;return ds(t)?CCe(t,r):$et(t,r)}s(Mc,"Optional");function zet(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Mc(t[n],e);return r}s(zet,"FromProperties");function Yet(t,e){return zet(t.properties,e)}s(Yet,"FromMappedResult");function CCe(t,e){let r=Yet(t,e);return zi(r)}s(CCe,"OptionalFromMappedResult");f();function FB(t,e={}){let r=t.every(i=>Ia(i)),n=Ns(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return rt(e.unevaluatedProperties===!1||Ns(e.unevaluatedProperties)||r?{...n,[Ze]:"Intersect",type:"object",allOf:t}:{...n,[Ze]:"Intersect",allOf:t},e)}s(FB,"IntersectCreate");function Ket(t){return t.every(e=>od(e))}s(Ket,"IsIntersectOptional");function Jet(t){return Ys(t,[uc])}s(Jet,"RemoveOptionalFromType");function xCe(t){return t.map(e=>od(e)?Jet(e):e)}s(xCe,"RemoveOptionalFromRest");function Xet(t,e){return Ket(t)?Mc(FB(xCe(t),e)):FB(xCe(t),e)}s(Xet,"ResolveIntersect");function zL(t,e={}){if(t.length===1)return rt(t[0],e);if(t.length===0)return ni(e);if(t.some(r=>oo(r)))throw new Error("Cannot intersect transform types");return Xet(t,e)}s(zL,"IntersectEvaluated");f();function Qc(t,e){if(t.length===1)return rt(t[0],e);if(t.length===0)return ni(e);if(t.some(r=>oo(r)))throw new Error("Cannot intersect transform types");return FB(t,e)}s(Qc,"Intersect");f();function Rf(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Cn("Ref: $ref must be a string");return rt({[Ze]:"Ref",$ref:e},r)}s(Rf,"Ref");function Zet(t,e){return Jo("Awaited",[Jo(t,e)])}s(Zet,"FromComputed");function ett(t){return Jo("Awaited",[Rf(t)])}s(ett,"FromRef");function ttt(t){return Qc(vCe(t))}s(ttt,"FromIntersect");function rtt(t){return so(vCe(t))}s(rtt,"FromUnion");function ntt(t){return $_(t)}s(ntt,"FromPromise");function vCe(t){return t.map(e=>$_(e))}s(vCe,"FromRest");function $_(t,e){return rt(im(t)?Zet(t.target,t.parameters):zs(t)?ttt(t.allOf):qi(t)?rtt(t.anyOf):cI(t)?ntt(t.item):oa(t)?ett(t.$ref):t,e)}s($_,"Awaited");f();f();f();f();function bCe(t){let e=[];for(let r of t)e.push(ld(r));return e}s(bCe,"FromRest");function itt(t){let e=bCe(t);return iCe(e)}s(itt,"FromIntersect");function ott(t){let e=bCe(t);return nCe(e)}s(ott,"FromUnion");function stt(t){return t.map((e,r)=>r.toString())}s(stt,"FromTuple");function att(t){return["[number]"]}s(att,"FromArray");function ltt(t){return globalThis.Object.getOwnPropertyNames(t)}s(ltt,"FromProperties");function ctt(t){return KX?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(ctt,"FromPatternProperties");function ld(t){return zs(t)?itt(t.allOf):qi(t)?ott(t.anyOf):l0(t)?stt(t.items??[]):nm(t)?att(t.items):Ia(t)?ltt(t.properties):uI(t)?ctt(t.patternProperties):[]}s(ld,"KeyOfPropertyKeys");var KX=!1;function E1(t){KX=!0;let e=ld(t);return KX=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(E1,"KeyOfPattern");function utt(t,e){return Jo("KeyOf",[Jo(t,e)])}s(utt,"FromComputed");function dtt(t){return Jo("KeyOf",[Rf(t)])}s(dtt,"FromRef");function ftt(t,e){let r=ld(t),n=ptt(r),i=ag(n);return rt(i,e)}s(ftt,"KeyOfFromType");function ptt(t){return t.map(e=>e==="[number]"?wf():Ni(e))}s(ptt,"KeyOfPropertyKeysToRest");function z_(t,e){return im(t)?utt(t.target,t.parameters):oa(t)?dtt(t.$ref):ds(t)?ECe(t,e):ftt(t,e)}s(z_,"KeyOf");function mtt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=z_(t[n],cs(e));return r}s(mtt,"FromProperties");function htt(t,e){return mtt(t.properties,e)}s(htt,"FromMappedResult");function ECe(t,e){let r=htt(t,e);return zi(r)}s(ECe,"KeyOfFromMappedResult");f();function KL(t){let e=ld(t),r=NB(t,e);return e.map((n,i)=>[e[i],r[i]])}s(KL,"KeyOfPropertyEntries");function gtt(t){let e=[];for(let r of t)e.push(...ld(r));return rCe(e)}s(gtt,"CompositeKeys");function Att(t){return t.filter(e=>!Tx(e))}s(Att,"FilterNever");function ytt(t,e){let r=[];for(let n of t)r.push(...NB(n,[e]));return Att(r)}s(ytt,"CompositeProperty");function Ctt(t,e){let r={};for(let n of e)r[n]=zL(ytt(t,n));return r}s(Ctt,"CompositeProperties");function ICe(t,e){let r=gtt(t),n=Ctt(t,r);return ao(n,e)}s(ICe,"Composite");f();f();function JL(t){return rt({[Ze]:"Date",type:"Date"},t)}s(JL,"Date");f();function XL(t){return rt({[Ze]:"Null",type:"null"},t)}s(XL,"Null");f();function ZL(t){return rt({[Ze]:"Symbol",type:"symbol"},t)}s(ZL,"Symbol");f();function eF(t){return rt({[Ze]:"Undefined",type:"undefined"},t)}s(eF,"Undefined");f();function tF(t){return rt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(tF,"Uint8Array");f();function um(t){return rt({[Ze]:"Unknown"},t)}s(um,"Unknown");function xtt(t){return t.map(e=>JX(e,!1))}s(xtt,"FromArray");function vtt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=ad(JX(t[r],!1));return e}s(vtt,"FromProperties");function rF(t,e){return e===!0?t:ad(t)}s(rF,"ConditionalReadonly");function JX(t,e){return RX(t)?rF(_x(),e):BX(t)?rF(_x(),e):ba(t)?ad(_f(xtt(t))):h1(t)?tF():oI(t)?JL():_o(t)?rF(ao(vtt(t)),e):kX(t)?rF(sg([],um()),e):Ea(t)?eF():DX(t)?XL():PX(t)?ZL():EB(t)?j_():n0(t)?Ni(t):m1(t)?Ni(t):Uo(t)?Ni(t):ao({})}s(JX,"FromValue");function TCe(t,e){return rt(JX(t,!0),e)}s(TCe,"Const");f();function wCe(t,e){return om(t)?_f(t.parameters,e):ni(e)}s(wCe,"ConstructorParameters");f();function _Ce(t,e){if(Ea(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>Ni(o));return so(i,{...e,[Tf]:"Enum"})}s(_Ce,"Enum");f();f();f();var ZX=class extends Cn{static{s(this,"ExtendsResolverError")}},nt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(nt||(nt={}));function kf(t){return t===nt.False?t:nt.True}s(kf,"IntoBooleanResult");function Y_(t){throw new ZX(t)}s(Y_,"Throw");function Ga(t){return De.IsNever(t)||De.IsIntersect(t)||De.IsUnion(t)||De.IsUnknown(t)||De.IsAny(t)}s(Ga,"IsStructuralRight");function Ha(t,e){return De.IsNever(e)?NCe(t,e):De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?nZ(t,e):De.IsUnknown(e)?QCe(t,e):De.IsAny(e)?rZ(t,e):Y_("StructuralRight")}s(Ha,"StructuralRight");function rZ(t,e){return nt.True}s(rZ,"FromAnyRight");function btt(t,e){return De.IsIntersect(e)?nF(t,e):De.IsUnion(e)&&e.anyOf.some(r=>De.IsAny(r)||De.IsUnknown(r))?nt.True:De.IsUnion(e)?nt.Union:De.IsUnknown(e)||De.IsAny(e)?nt.True:nt.Union}s(btt,"FromAny");function Ett(t,e){return De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:De.IsNever(t)?nt.True:nt.False}s(Ett,"FromArrayRight");function Itt(t,e){return De.IsObject(e)&&iF(e)?nt.True:Ga(e)?Ha(t,e):De.IsArray(e)?kf(Ro(t.items,e.items)):nt.False}s(Itt,"FromArray");function Ttt(t,e){return Ga(e)?Ha(t,e):De.IsAsyncIterator(e)?kf(Ro(t.items,e.items)):nt.False}s(Ttt,"FromAsyncIterator");function wtt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsBigInt(e)?nt.True:nt.False}s(wtt,"FromBigInt");function DCe(t,e){return De.IsLiteralBoolean(t)||De.IsBoolean(t)?nt.True:nt.False}s(DCe,"FromBooleanRight");function _tt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsBoolean(e)?nt.True:nt.False}s(_tt,"FromBoolean");function Stt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsConstructor(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>kf(Ro(e.parameters[n],r))===nt.True)?kf(Ro(t.returns,e.returns)):nt.False:nt.False}s(Stt,"FromConstructor");function Rtt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsDate(e)?nt.True:nt.False}s(Rtt,"FromDate");function ktt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsFunction(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>kf(Ro(e.parameters[n],r))===nt.True)?kf(Ro(t.returns,e.returns)):nt.False:nt.False}s(ktt,"FromFunction");function PCe(t,e){return De.IsLiteral(t)&&Fc.IsNumber(t.const)||De.IsNumber(t)||De.IsInteger(t)?nt.True:nt.False}s(PCe,"FromIntegerRight");function Btt(t,e){return De.IsInteger(e)||De.IsNumber(e)?nt.True:Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):nt.False}s(Btt,"FromInteger");function nF(t,e){return e.allOf.every(r=>Ro(t,r)===nt.True)?nt.True:nt.False}s(nF,"FromIntersectRight");function Dtt(t,e){return t.allOf.some(r=>Ro(r,e)===nt.True)?nt.True:nt.False}s(Dtt,"FromIntersect");function Ptt(t,e){return Ga(e)?Ha(t,e):De.IsIterator(e)?kf(Ro(t.items,e.items)):nt.False}s(Ptt,"FromIterator");function Ntt(t,e){return De.IsLiteral(e)&&e.const===t.const?nt.True:Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsString(e)?MCe(t,e):De.IsNumber(e)?LCe(t,e):De.IsInteger(e)?PCe(t,e):De.IsBoolean(e)?DCe(t,e):nt.False}s(Ntt,"FromLiteral");function NCe(t,e){return nt.False}s(NCe,"FromNeverRight");function Ltt(t,e){return nt.True}s(Ltt,"FromNever");function SCe(t){let[e,r]=[t,0];for(;De.IsNot(e);)e=e.not,r+=1;return r%2===0?e:um()}s(SCe,"UnwrapTNot");function Ftt(t,e){return De.IsNot(t)?Ro(SCe(t),e):De.IsNot(e)?Ro(t,SCe(e)):Y_("Invalid fallthrough for Not")}s(Ftt,"FromNot");function Mtt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsNull(e)?nt.True:nt.False}s(Mtt,"FromNull");function LCe(t,e){return De.IsLiteralNumber(t)||De.IsNumber(t)||De.IsInteger(t)?nt.True:nt.False}s(LCe,"FromNumberRight");function Qtt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsInteger(e)||De.IsNumber(e)?nt.True:nt.False}s(Qtt,"FromNumber");function cd(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(cd,"IsObjectPropertyCount");function RCe(t){return iF(t)}s(RCe,"IsObjectStringLike");function kCe(t){return cd(t,0)||cd(t,1)&&"description"in t.properties&&De.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(De.IsString(t.properties.description.anyOf[0])&&De.IsUndefined(t.properties.description.anyOf[1])||De.IsString(t.properties.description.anyOf[1])&&De.IsUndefined(t.properties.description.anyOf[0]))}s(kCe,"IsObjectSymbolLike");function XX(t){return cd(t,0)}s(XX,"IsObjectNumberLike");function BCe(t){return cd(t,0)}s(BCe,"IsObjectBooleanLike");function Ott(t){return cd(t,0)}s(Ott,"IsObjectBigIntLike");function Utt(t){return cd(t,0)}s(Utt,"IsObjectDateLike");function qtt(t){return iF(t)}s(qtt,"IsObjectUint8ArrayLike");function Wtt(t){let e=wf();return cd(t,0)||cd(t,1)&&"length"in t.properties&&kf(Ro(t.properties.length,e))===nt.True}s(Wtt,"IsObjectFunctionLike");function Gtt(t){return cd(t,0)}s(Gtt,"IsObjectConstructorLike");function iF(t){let e=wf();return cd(t,0)||cd(t,1)&&"length"in t.properties&&kf(Ro(t.properties.length,e))===nt.True}s(iF,"IsObjectArrayLike");function Htt(t){let e=sg([_x()],_x());return cd(t,0)||cd(t,1)&&"then"in t.properties&&kf(Ro(t.properties.then,e))===nt.True}s(Htt,"IsObjectPromiseLike");function FCe(t,e){return Ro(t,e)===nt.False||De.IsOptional(t)&&!De.IsOptional(e)?nt.False:nt.True}s(FCe,"Property");function Oc(t,e){return De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:De.IsNever(t)||De.IsLiteralString(t)&&RCe(e)||De.IsLiteralNumber(t)&&XX(e)||De.IsLiteralBoolean(t)&&BCe(e)||De.IsSymbol(t)&&kCe(e)||De.IsBigInt(t)&&Ott(e)||De.IsString(t)&&RCe(e)||De.IsSymbol(t)&&kCe(e)||De.IsNumber(t)&&XX(e)||De.IsInteger(t)&&XX(e)||De.IsBoolean(t)&&BCe(e)||De.IsUint8Array(t)&&qtt(e)||De.IsDate(t)&&Utt(e)||De.IsConstructor(t)&&Gtt(e)||De.IsFunction(t)&&Wtt(e)?nt.True:De.IsRecord(t)&&De.IsString(eZ(t))?e[Tf]==="Record"?nt.True:nt.False:De.IsRecord(t)&&De.IsNumber(eZ(t))?cd(e,0)?nt.True:nt.False:nt.False}s(Oc,"FromObjectRight");function jtt(t,e){return Ga(e)?Ha(t,e):De.IsRecord(e)?Bf(t,e):De.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!De.IsOptional(e.properties[r]))return nt.False;if(De.IsOptional(e.properties[r]))return nt.True;if(FCe(t.properties[r],e.properties[r])===nt.False)return nt.False}return nt.True})():nt.False}s(jtt,"FromObject");function Vtt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)&&Htt(e)?nt.True:De.IsPromise(e)?kf(Ro(t.item,e.item)):nt.False}s(Vtt,"FromPromise");function eZ(t){return ig in t.patternProperties?wf():og in t.patternProperties?vu():Y_("Unknown record key pattern")}s(eZ,"RecordKey");function tZ(t){return ig in t.patternProperties?t.patternProperties[ig]:og in t.patternProperties?t.patternProperties[og]:Y_("Unable to get record value schema")}s(tZ,"RecordValue");function Bf(t,e){let[r,n]=[eZ(e),tZ(e)];return De.IsLiteralString(t)&&De.IsNumber(r)&&kf(Ro(t,n))===nt.True?nt.True:De.IsUint8Array(t)&&De.IsNumber(r)||De.IsString(t)&&De.IsNumber(r)||De.IsArray(t)&&De.IsNumber(r)?Ro(t,n):De.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(FCe(n,t.properties[i])===nt.False)return nt.False;return nt.True})():nt.False}s(Bf,"FromRecordRight");function $tt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Ro(tZ(t),tZ(e)):nt.False}s($tt,"FromRecord");function ztt(t,e){let r=De.IsRegExp(t)?vu():t,n=De.IsRegExp(e)?vu():e;return Ro(r,n)}s(ztt,"FromRegExp");function MCe(t,e){return De.IsLiteral(t)&&Fc.IsString(t.const)||De.IsString(t)?nt.True:nt.False}s(MCe,"FromStringRight");function Ytt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsString(e)?nt.True:nt.False}s(Ytt,"FromString");function Ktt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsSymbol(e)?nt.True:nt.False}s(Ktt,"FromSymbol");function Jtt(t,e){return De.IsTemplateLiteral(t)?Ro(fI(t),e):De.IsTemplateLiteral(e)?Ro(t,fI(e)):Y_("Invalid fallthrough for TemplateLiteral")}s(Jtt,"FromTemplateLiteral");function Xtt(t,e){return De.IsArray(e)&&t.items!==void 0&&t.items.every(r=>Ro(r,e.items)===nt.True)}s(Xtt,"IsArrayOfTuple");function Ztt(t,e){return De.IsNever(t)?nt.True:De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:nt.False}s(Ztt,"FromTupleRight");function ert(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)&&iF(e)||De.IsArray(e)&&Xtt(t,e)?nt.True:De.IsTuple(e)?Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||!Fc.IsUndefined(t.items)&&Fc.IsUndefined(e.items)?nt.False:Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||t.items.every((r,n)=>Ro(r,e.items[n])===nt.True)?nt.True:nt.False:nt.False}s(ert,"FromTuple");function trt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsUint8Array(e)?nt.True:nt.False}s(trt,"FromUint8Array");function rrt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Bf(t,e):De.IsVoid(e)?ort(t,e):De.IsUndefined(e)?nt.True:nt.False}s(rrt,"FromUndefined");function nZ(t,e){return e.anyOf.some(r=>Ro(t,r)===nt.True)?nt.True:nt.False}s(nZ,"FromUnionRight");function nrt(t,e){return t.anyOf.every(r=>Ro(r,e)===nt.True)?nt.True:nt.False}s(nrt,"FromUnion");function QCe(t,e){return nt.True}s(QCe,"FromUnknownRight");function irt(t,e){return De.IsNever(e)?NCe(t,e):De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?nZ(t,e):De.IsAny(e)?rZ(t,e):De.IsString(e)?MCe(t,e):De.IsNumber(e)?LCe(t,e):De.IsInteger(e)?PCe(t,e):De.IsBoolean(e)?DCe(t,e):De.IsArray(e)?Ett(t,e):De.IsTuple(e)?Ztt(t,e):De.IsObject(e)?Oc(t,e):De.IsUnknown(e)?nt.True:nt.False}s(irt,"FromUnknown");function ort(t,e){return De.IsUndefined(t)||De.IsUndefined(t)?nt.True:nt.False}s(ort,"FromVoidRight");function srt(t,e){return De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?nZ(t,e):De.IsUnknown(e)?QCe(t,e):De.IsAny(e)?rZ(t,e):De.IsObject(e)?Oc(t,e):De.IsVoid(e)?nt.True:nt.False}s(srt,"FromVoid");function Ro(t,e){return De.IsTemplateLiteral(t)||De.IsTemplateLiteral(e)?Jtt(t,e):De.IsRegExp(t)||De.IsRegExp(e)?ztt(t,e):De.IsNot(t)||De.IsNot(e)?Ftt(t,e):De.IsAny(t)?btt(t,e):De.IsArray(t)?Itt(t,e):De.IsBigInt(t)?wtt(t,e):De.IsBoolean(t)?_tt(t,e):De.IsAsyncIterator(t)?Ttt(t,e):De.IsConstructor(t)?Stt(t,e):De.IsDate(t)?Rtt(t,e):De.IsFunction(t)?ktt(t,e):De.IsInteger(t)?Btt(t,e):De.IsIntersect(t)?Dtt(t,e):De.IsIterator(t)?Ptt(t,e):De.IsLiteral(t)?Ntt(t,e):De.IsNever(t)?Ltt(t,e):De.IsNull(t)?Mtt(t,e):De.IsNumber(t)?Qtt(t,e):De.IsObject(t)?jtt(t,e):De.IsRecord(t)?$tt(t,e):De.IsString(t)?Ytt(t,e):De.IsSymbol(t)?Ktt(t,e):De.IsTuple(t)?ert(t,e):De.IsPromise(t)?Vtt(t,e):De.IsUint8Array(t)?trt(t,e):De.IsUndefined(t)?rrt(t,e):De.IsUnion(t)?nrt(t,e):De.IsUnknown(t)?irt(t,e):De.IsVoid(t)?srt(t,e):Y_(`Unknown left type operand '${t[Ze]}'`)}s(Ro,"Visit");function Rx(t,e){return Ro(t,e)}s(Rx,"ExtendsCheck");f();f();f();function art(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=K_(t[a],e,r,n,cs(i));return o}s(art,"FromProperties");function lrt(t,e,r,n,i){return art(t.properties,e,r,n,i)}s(lrt,"FromMappedResult");function OCe(t,e,r,n,i){let o=lrt(t,e,r,n,i);return zi(o)}s(OCe,"ExtendsFromMappedResult");function crt(t,e,r,n){let i=Rx(t,e);return i===nt.Union?so([r,n]):i===nt.True?r:n}s(crt,"ExtendsResolve");function K_(t,e,r,n,i){return ds(t)?OCe(t,e,r,n,i):s0(t)?rt(UCe(t,e,r,n,i)):rt(crt(t,e,r,n),i)}s(K_,"Extends");function urt(t,e,r,n,i){return{[t]:K_(Ni(t),e,r,n,cs(i))}}s(urt,"FromPropertyKey");function drt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...urt(a,e,r,n,i)}),{})}s(drt,"FromPropertyKeys");function frt(t,e,r,n,i){return drt(t.keys,e,r,n,i)}s(frt,"FromMappedKey");function UCe(t,e,r,n,i){let o=frt(t,e,r,n,i);return zi(o)}s(UCe,"ExtendsFromMappedKey");f();function prt(t){return t.allOf.every(e=>I1(e))}s(prt,"Intersect");function mrt(t){return t.anyOf.some(e=>I1(e))}s(mrt,"Union");function hrt(t){return!I1(t.not)}s(hrt,"Not");function I1(t){return t[Ze]==="Intersect"?prt(t):t[Ze]==="Union"?mrt(t):t[Ze]==="Not"?hrt(t):t[Ze]==="Undefined"}s(I1,"ExtendsUndefinedCheck");f();function qCe(t,e){return J_(fI(t),e)}s(qCe,"ExcludeFromTemplateLiteral");function grt(t,e){let r=t.filter(n=>Rx(n,e)===nt.False);return r.length===1?r[0]:so(r)}s(grt,"ExcludeRest");function J_(t,e,r={}){return a0(t)?rt(qCe(t,e),r):ds(t)?rt(WCe(t,e),r):rt(qi(t)?grt(t.anyOf,e):Rx(t,e)!==nt.False?ni():t,r)}s(J_,"Exclude");function Art(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=J_(t[n],e);return r}s(Art,"FromProperties");function yrt(t,e){return Art(t.properties,e)}s(yrt,"FromMappedResult");function WCe(t,e){let r=yrt(t,e);return zi(r)}s(WCe,"ExcludeFromMappedResult");f();f();f();function GCe(t,e){return X_(fI(t),e)}s(GCe,"ExtractFromTemplateLiteral");function Crt(t,e){let r=t.filter(n=>Rx(n,e)!==nt.False);return r.length===1?r[0]:so(r)}s(Crt,"ExtractRest");function X_(t,e,r){return a0(t)?rt(GCe(t,e),r):ds(t)?rt(HCe(t,e),r):rt(qi(t)?Crt(t.anyOf,e):Rx(t,e)!==nt.False?t:ni(),r)}s(X_,"Extract");function xrt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=X_(t[n],e);return r}s(xrt,"FromProperties");function vrt(t,e){return xrt(t.properties,e)}s(vrt,"FromMappedResult");function HCe(t,e){let r=vrt(t,e);return zi(r)}s(HCe,"ExtractFromMappedResult");f();function jCe(t,e){return om(t)?rt(t.returns,e):ni(e)}s(jCe,"InstanceType");f();f();function oF(t){return ad(Mc(t))}s(oF,"ReadonlyOptional");f();function pI(t,e,r){return rt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(pI,"RecordCreateFromPattern");function iZ(t,e,r){let n={};for(let i of t)n[i]=e;return ao(n,{...r,[Tf]:"Record"})}s(iZ,"RecordCreateFromKeys");function brt(t,e,r){return jL(t)?iZ(sd(t),e,r):pI(t.pattern,e,r)}s(brt,"FromTemplateLiteralKey");function Ert(t,e,r){return iZ(sd(so(t)),e,r)}s(Ert,"FromUnionKey");function Irt(t,e,r){return iZ([t.toString()],e,r)}s(Irt,"FromLiteralKey");function Trt(t,e,r){return pI(t.source,e,r)}s(Trt,"FromRegExpKey");function wrt(t,e,r){let n=Ea(t.pattern)?og:t.pattern;return pI(n,e,r)}s(wrt,"FromStringKey");function _rt(t,e,r){return pI(og,e,r)}s(_rt,"FromAnyKey");function Srt(t,e,r){return pI(eCe,e,r)}s(Srt,"FromNeverKey");function Rrt(t,e,r){return ao({true:e,false:e},r)}s(Rrt,"FromBooleanKey");function krt(t,e,r){return pI(ig,e,r)}s(krt,"FromIntegerKey");function Brt(t,e,r){return pI(ig,e,r)}s(Brt,"FromNumberKey");function sF(t,e,r={}){return qi(t)?Ert(t.anyOf,e,r):a0(t)?brt(t,e,r):o0(t)?Irt(t.const,e,r):y1(t)?Rrt(t,e,r):am(t)?krt(t,e,r):lm(t)?Brt(t,e,r):MX(t)?Trt(t,e,r):C1(t)?wrt(t,e,r):LX(t)?_rt(t,e,r):Tx(t)?Srt(t,e,r):ni(r)}s(sF,"Record");function aF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(aF,"RecordPattern");function VCe(t){let e=aF(t);return e===og?vu():e===ig?wf():vu({pattern:e})}s(VCe,"RecordKey");function lF(t){return t.patternProperties[aF(t)]}s(lF,"RecordValue");function Drt(t,e){return e.parameters=MB(t,e.parameters),e.returns=dm(t,e.returns),e}s(Drt,"FromConstructor");function Prt(t,e){return e.parameters=MB(t,e.parameters),e.returns=dm(t,e.returns),e}s(Prt,"FromFunction");function Nrt(t,e){return e.allOf=MB(t,e.allOf),e}s(Nrt,"FromIntersect");function Lrt(t,e){return e.anyOf=MB(t,e.anyOf),e}s(Lrt,"FromUnion");function Frt(t,e){return Ea(e.items)||(e.items=MB(t,e.items)),e}s(Frt,"FromTuple");function Mrt(t,e){return e.items=dm(t,e.items),e}s(Mrt,"FromArray");function Qrt(t,e){return e.items=dm(t,e.items),e}s(Qrt,"FromAsyncIterator");function Ort(t,e){return e.items=dm(t,e.items),e}s(Ort,"FromIterator");function Urt(t,e){return e.item=dm(t,e.item),e}s(Urt,"FromPromise");function qrt(t,e){let r=jrt(t,e.properties);return{...e,...ao(r)}}s(qrt,"FromObject");function Wrt(t,e){let r=dm(t,VCe(e)),n=dm(t,lF(e)),i=sF(r,n);return{...e,...i}}s(Wrt,"FromRecord");function Grt(t,e){return e.index in t?t[e.index]:um()}s(Grt,"FromArgument");function Hrt(t,e){let r=F_(e),n=od(e),i=dm(t,e);return r&&n?oF(i):r&&!n?ad(i):!r&&n?Mc(i):i}s(Hrt,"FromProperty");function jrt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:Hrt(t,e[n])}),{})}s(jrt,"FromProperties");function MB(t,e){return e.map(r=>dm(t,r))}s(MB,"FromTypes");function dm(t,e){return om(e)?Drt(t,e):sm(e)?Prt(t,e):zs(e)?Nrt(t,e):qi(e)?Lrt(t,e):l0(e)?Frt(t,e):nm(e)?Mrt(t,e):sI(e)?Qrt(t,e):lI(e)?Ort(t,e):cI(e)?Urt(t,e):Ia(e)?qrt(t,e):uI(e)?Wrt(t,e):FX(e)?Grt(t,e):e}s(dm,"FromType");function $Ce(t,e){return dm(e,N_(t))}s($Ce,"Instantiate");f();function zCe(t){return rt({[Ze]:"Integer",type:"integer"},t)}s(zCe,"Integer");f();f();f();function Vrt(t,e,r){return{[t]:fm(Ni(t),e,cs(r))}}s(Vrt,"MappedIntrinsicPropertyKey");function $rt(t,e,r){return t.reduce((i,o)=>({...i,...Vrt(o,e,r)}),{})}s($rt,"MappedIntrinsicPropertyKeys");function zrt(t,e,r){return $rt(t.keys,e,r)}s(zrt,"MappedIntrinsicProperties");function YCe(t,e,r){let n=zrt(t,e,r);return zi(n)}s(YCe,"IntrinsicFromMappedKey");function Yrt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(Yrt,"ApplyUncapitalize");function Krt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(Krt,"ApplyCapitalize");function Jrt(t){return t.toUpperCase()}s(Jrt,"ApplyUppercase");function Xrt(t){return t.toLowerCase()}s(Xrt,"ApplyLowercase");function Zrt(t,e,r){let n=G_(t.pattern);if(!dI(n))return{...t,pattern:KCe(t.pattern,e)};let a=[...PB(n)].map(u=>Ni(u)),l=JCe(a,e),c=so(l);return $L([c],r)}s(Zrt,"FromTemplateLiteral");function KCe(t,e){return typeof t=="string"?e==="Uncapitalize"?Yrt(t):e==="Capitalize"?Krt(t):e==="Uppercase"?Jrt(t):e==="Lowercase"?Xrt(t):t:t.toString()}s(KCe,"FromLiteralValue");function JCe(t,e){return t.map(r=>fm(r,e))}s(JCe,"FromRest");function fm(t,e,r={}){return s0(t)?YCe(t,e,r):a0(t)?Zrt(t,e,r):qi(t)?so(JCe(t.anyOf,e),r):o0(t)?Ni(KCe(t.const,e),r):rt(t,r)}s(fm,"Intrinsic");function XCe(t,e={}){return fm(t,"Capitalize",e)}s(XCe,"Capitalize");f();function ZCe(t,e={}){return fm(t,"Lowercase",e)}s(ZCe,"Lowercase");f();function exe(t,e={}){return fm(t,"Uncapitalize",e)}s(exe,"Uncapitalize");f();function txe(t,e={}){return fm(t,"Uppercase",e)}s(txe,"Uppercase");f();f();f();f();f();function ent(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=kx(t[i],e,cs(r));return n}s(ent,"FromProperties");function tnt(t,e,r){return ent(t.properties,e,r)}s(tnt,"FromMappedResult");function rxe(t,e,r){let n=tnt(t,e,r);return zi(n)}s(rxe,"OmitFromMappedResult");function rnt(t,e){return t.map(r=>oZ(r,e))}s(rnt,"FromIntersect");function nnt(t,e){return t.map(r=>oZ(r,e))}s(nnt,"FromUnion");function int(t,e){let{[e]:r,...n}=t;return n}s(int,"FromProperty");function ont(t,e){return e.reduce((r,n)=>int(r,n),t)}s(ont,"FromProperties");function snt(t,e){let r=Ys(t,[Ps,"$id","required","properties"]),n=ont(t.properties,e);return ao(n,r)}s(snt,"FromObject");function ant(t){let e=t.reduce((r,n)=>WL(n)?[...r,Ni(n)]:r,[]);return so(e)}s(ant,"UnionFromPropertyKeys");function oZ(t,e){return zs(t)?Qc(rnt(t.allOf,e)):qi(t)?so(nnt(t.anyOf,e)):Ia(t)?snt(t,e):ao({})}s(oZ,"OmitResolve");function kx(t,e,r){let n=ba(e)?ant(e):e,i=Ns(e)?sd(e):e,o=oa(t),a=oa(e);return ds(t)?rxe(t,i,r):s0(e)?nxe(t,e,r):o&&a?Jo("Omit",[t,n],r):!o&&a?Jo("Omit",[t,n],r):o&&!a?Jo("Omit",[t,n],r):rt({...oZ(t,i),...r})}s(kx,"Omit");function lnt(t,e,r){return{[e]:kx(t,[e],cs(r))}}s(lnt,"FromPropertyKey");function cnt(t,e,r){return e.reduce((n,i)=>({...n,...lnt(t,i,r)}),{})}s(cnt,"FromPropertyKeys");function unt(t,e,r){return cnt(t,e.keys,r)}s(unt,"FromMappedKey");function nxe(t,e,r){let n=unt(t,e,r);return zi(n)}s(nxe,"OmitFromMappedKey");f();f();f();function dnt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Bx(t[i],e,cs(r));return n}s(dnt,"FromProperties");function fnt(t,e,r){return dnt(t.properties,e,r)}s(fnt,"FromMappedResult");function ixe(t,e,r){let n=fnt(t,e,r);return zi(n)}s(ixe,"PickFromMappedResult");function pnt(t,e){return t.map(r=>sZ(r,e))}s(pnt,"FromIntersect");function mnt(t,e){return t.map(r=>sZ(r,e))}s(mnt,"FromUnion");function hnt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(hnt,"FromProperties");function gnt(t,e){let r=Ys(t,[Ps,"$id","required","properties"]),n=hnt(t.properties,e);return ao(n,r)}s(gnt,"FromObject");function Ant(t){let e=t.reduce((r,n)=>WL(n)?[...r,Ni(n)]:r,[]);return so(e)}s(Ant,"UnionFromPropertyKeys");function sZ(t,e){return zs(t)?Qc(pnt(t.allOf,e)):qi(t)?so(mnt(t.anyOf,e)):Ia(t)?gnt(t,e):ao({})}s(sZ,"PickResolve");function Bx(t,e,r){let n=ba(e)?Ant(e):e,i=Ns(e)?sd(e):e,o=oa(t),a=oa(e);return ds(t)?ixe(t,i,r):s0(e)?oxe(t,e,r):o&&a?Jo("Pick",[t,n],r):!o&&a?Jo("Pick",[t,n],r):o&&!a?Jo("Pick",[t,n],r):rt({...sZ(t,i),...r})}s(Bx,"Pick");function ynt(t,e,r){return{[e]:Bx(t,[e],cs(r))}}s(ynt,"FromPropertyKey");function Cnt(t,e,r){return e.reduce((n,i)=>({...n,...ynt(t,i,r)}),{})}s(Cnt,"FromPropertyKeys");function xnt(t,e,r){return Cnt(t,e.keys,r)}s(xnt,"FromMappedKey");function oxe(t,e,r){let n=xnt(t,e,r);return zi(n)}s(oxe,"PickFromMappedKey");f();f();function vnt(t,e){return Jo("Partial",[Jo(t,e)])}s(vnt,"FromComputed");function bnt(t){return Jo("Partial",[Rf(t)])}s(bnt,"FromRef");function Ent(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Mc(t[r]);return e}s(Ent,"FromProperties");function Int(t){let e=Ys(t,[Ps,"$id","required","properties"]),r=Ent(t.properties);return ao(r,e)}s(Int,"FromObject");function sxe(t){return t.map(e=>axe(e))}s(sxe,"FromRest");function axe(t){return im(t)?vnt(t.target,t.parameters):oa(t)?bnt(t.$ref):zs(t)?Qc(sxe(t.allOf)):qi(t)?so(sxe(t.anyOf)):Ia(t)?Int(t):aI(t)||y1(t)||am(t)||o0(t)||wB(t)||lm(t)||C1(t)||_B(t)||x1(t)?t:ao({})}s(axe,"PartialResolve");function Z_(t,e){return ds(t)?lxe(t,e):rt({...axe(t),...e})}s(Z_,"Partial");function Tnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Z_(t[n],cs(e));return r}s(Tnt,"FromProperties");function wnt(t,e){return Tnt(t.properties,e)}s(wnt,"FromMappedResult");function lxe(t,e){let r=wnt(t,e);return zi(r)}s(lxe,"PartialFromMappedResult");f();f();function _nt(t,e){return Jo("Required",[Jo(t,e)])}s(_nt,"FromComputed");function Snt(t){return Jo("Required",[Rf(t)])}s(Snt,"FromRef");function Rnt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ys(t[r],[uc]);return e}s(Rnt,"FromProperties");function knt(t){let e=Ys(t,[Ps,"$id","required","properties"]),r=Rnt(t.properties);return ao(r,e)}s(knt,"FromObject");function cxe(t){return t.map(e=>uxe(e))}s(cxe,"FromRest");function uxe(t){return im(t)?_nt(t.target,t.parameters):oa(t)?Snt(t.$ref):zs(t)?Qc(cxe(t.allOf)):qi(t)?so(cxe(t.anyOf)):Ia(t)?knt(t):aI(t)||y1(t)||am(t)||o0(t)||wB(t)||lm(t)||C1(t)||_B(t)||x1(t)?t:ao({})}s(uxe,"RequiredResolve");function eS(t,e){return ds(t)?dxe(t,e):rt({...uxe(t),...e})}s(eS,"Required");function Bnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=eS(t[n],e);return r}s(Bnt,"FromProperties");function Dnt(t,e){return Bnt(t.properties,e)}s(Dnt,"FromMappedResult");function dxe(t,e){let r=Dnt(t,e);return zi(r)}s(dxe,"RequiredFromMappedResult");function Pnt(t,e){return e.map(r=>oa(r)?aZ(t,r.$ref):c0(t,r))}s(Pnt,"DereferenceParameters");function aZ(t,e){return e in t?oa(t[e])?aZ(t,t[e].$ref):c0(t,t[e]):ni()}s(aZ,"Dereference");function Nnt(t){return $_(t[0])}s(Nnt,"FromAwaited");function Lnt(t){return Sx(t[0],t[1])}s(Lnt,"FromIndex");function Fnt(t){return z_(t[0])}s(Fnt,"FromKeyOf");function Mnt(t){return Z_(t[0])}s(Mnt,"FromPartial");function Qnt(t){return kx(t[0],t[1])}s(Qnt,"FromOmit");function Ont(t){return Bx(t[0],t[1])}s(Ont,"FromPick");function Unt(t){return eS(t[0])}s(Unt,"FromRequired");function qnt(t,e,r){let n=Pnt(t,r);return e==="Awaited"?Nnt(n):e==="Index"?Lnt(n):e==="KeyOf"?Fnt(n):e==="Partial"?Mnt(n):e==="Omit"?Qnt(n):e==="Pick"?Ont(n):e==="Required"?Unt(n):ni()}s(qnt,"FromComputed");function Wnt(t,e){return O_(c0(t,e))}s(Wnt,"FromArray");function Gnt(t,e){return U_(c0(t,e))}s(Gnt,"FromAsyncIterator");function Hnt(t,e,r){return q_(QB(t,e),c0(t,r))}s(Hnt,"FromConstructor");function jnt(t,e,r){return sg(QB(t,e),c0(t,r))}s(jnt,"FromFunction");function Vnt(t,e){return Qc(QB(t,e))}s(Vnt,"FromIntersect");function $nt(t,e){return V_(c0(t,e))}s($nt,"FromIterator");function znt(t,e){return ao(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:c0(t,e[n])}),{}))}s(znt,"FromObject");function Ynt(t,e){let[r,n]=[c0(t,lF(e)),aF(e)],i=N_(e);return i.patternProperties[n]=r,i}s(Ynt,"FromRecord");function Knt(t,e){return oa(e)?{...aZ(t,e.$ref),[Ps]:e[Ps]}:e}s(Knt,"FromTransform");function Jnt(t,e){return _f(QB(t,e))}s(Jnt,"FromTuple");function Xnt(t,e){return so(QB(t,e))}s(Xnt,"FromUnion");function QB(t,e){return e.map(r=>c0(t,r))}s(QB,"FromTypes");function c0(t,e){return od(e)?rt(c0(t,Ys(e,[uc])),e):F_(e)?rt(c0(t,Ys(e,[rm])),e):oo(e)?rt(Knt(t,e),e):nm(e)?rt(Wnt(t,e.items),e):sI(e)?rt(Gnt(t,e.items),e):im(e)?rt(qnt(t,e.target,e.parameters)):om(e)?rt(Hnt(t,e.parameters,e.returns),e):sm(e)?rt(jnt(t,e.parameters,e.returns),e):zs(e)?rt(Vnt(t,e.allOf),e):lI(e)?rt($nt(t,e.items),e):Ia(e)?rt(znt(t,e.properties),e):uI(e)?rt(Ynt(t,e)):l0(e)?rt(Jnt(t,e.items||[]),e):qi(e)?rt(Xnt(t,e.anyOf),e):e}s(c0,"FromType");function Znt(t,e){return e in t?c0(t,t[e]):ni()}s(Znt,"ComputeType");function fxe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:Znt(t,r)}),{})}s(fxe,"ComputeModuleProperties");var lZ=class{static{s(this,"TModule")}constructor(e){let r=fxe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:rt(this.$defs[e],r)};return rt({[Ze]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function pxe(t){return new lZ(t)}s(pxe,"Module");f();function mxe(t,e){return rt({[Ze]:"Not",not:t},e)}s(mxe,"Not");f();function hxe(t,e){return sm(t)?_f(t.parameters,e):ni()}s(hxe,"Parameters");f();var eit=0;function gxe(t,e={}){Ea(e.$id)&&(e.$id=`T${eit++}`);let r=N_(t({[Ze]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,rt({[Tf]:"Recursive",...r},e)}s(gxe,"Recursive");f();function Axe(t,e){let r=Uo(t)?new globalThis.RegExp(t):t;return rt({[Ze]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(Axe,"RegExp");f();function tit(t){return zs(t)?t.allOf:qi(t)?t.anyOf:l0(t)?t.items??[]:[]}s(tit,"RestResolve");function yxe(t){return tit(t)}s(yxe,"Rest");f();function Cxe(t,e){return sm(t)?rt(t.returns,e):ni(e)}s(Cxe,"ReturnType");f();var cZ=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new uZ(this.schema,e)}},uZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Ps].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Ps].Decode(a)),"Decode")};return{...r,[Ps]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ps]:n}}Encode(e){return oo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function xxe(t){return new cZ(t)}s(xxe,"Transform");f();function vxe(t={}){return rt({[Ze]:t[Ze]??"Unsafe"},t)}s(vxe,"Unsafe");f();function bxe(t){return rt({[Ze]:"Void",type:"void"},t)}s(bxe,"Void");f();var dZ={};d1(dZ,{Any:()=>_x,Argument:()=>oCe,Array:()=>O_,AsyncIterator:()=>U_,Awaited:()=>$_,BigInt:()=>j_,Boolean:()=>VL,Capitalize:()=>XCe,Composite:()=>ICe,Const:()=>TCe,Constructor:()=>q_,ConstructorParameters:()=>wCe,Date:()=>JL,Enum:()=>_Ce,Exclude:()=>J_,Extends:()=>K_,Extract:()=>X_,Function:()=>sg,Index:()=>Sx,InstanceType:()=>jCe,Instantiate:()=>$Ce,Integer:()=>zCe,Intersect:()=>Qc,Iterator:()=>V_,KeyOf:()=>z_,Literal:()=>Ni,Lowercase:()=>ZCe,Mapped:()=>yCe,Module:()=>pxe,Never:()=>ni,Not:()=>mxe,Null:()=>XL,Number:()=>wf,Object:()=>ao,Omit:()=>kx,Optional:()=>Mc,Parameters:()=>hxe,Partial:()=>Z_,Pick:()=>Bx,Promise:()=>YL,Readonly:()=>ad,ReadonlyOptional:()=>oF,Record:()=>sF,Recursive:()=>gxe,Ref:()=>Rf,RegExp:()=>Axe,Required:()=>eS,Rest:()=>yxe,ReturnType:()=>Cxe,String:()=>vu,Symbol:()=>ZL,TemplateLiteral:()=>$L,Transform:()=>xxe,Tuple:()=>_f,Uint8Array:()=>tF,Uncapitalize:()=>exe,Undefined:()=>eF,Union:()=>so,Unknown:()=>um,Unsafe:()=>vxe,Uppercase:()=>txe,Void:()=>bxe});f();var I=dZ;f();f();function rit(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(rit,"DefaultErrorFunction");var nit=rit;function Exe(){return nit}s(Exe,"GetErrorFunction");f();var fZ=class extends Cn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function iit(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new fZ(t);return Yi(r,e)}s(iit,"Resolve");function kl(t,e){return!Ui(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(kl,"Pushref");function Yi(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?iit(t,e):t}s(Yi,"Deref");f();var pZ=class extends Cn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},u0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(u0||(u0={}));var tS=BigInt("14695981039346656037"),[oit,sit]=[BigInt("1099511628211"),BigInt("18446744073709551616")],ait=Array.from({length:256}).map((t,e)=>BigInt(e)),Ixe=new Float64Array(1),Txe=new DataView(Ixe.buffer),wxe=new Uint8Array(Ixe.buffer);function*lit(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(lit,"NumberToBytes");function cit(t){Uc(u0.Array);for(let e of t)rS(e)}s(cit,"ArrayType");function uit(t){Uc(u0.Boolean),Uc(t?1:0)}s(uit,"BooleanType");function dit(t){Uc(u0.BigInt),Txe.setBigInt64(0,t);for(let e of wxe)Uc(e)}s(dit,"BigIntType");function fit(t){Uc(u0.Date),rS(t.getTime())}s(fit,"DateType");function pit(t){Uc(u0.Null)}s(pit,"NullType");function mit(t){Uc(u0.Number),Txe.setFloat64(0,t);for(let e of wxe)Uc(e)}s(mit,"NumberType");function hit(t){Uc(u0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())rS(e),rS(t[e])}s(hit,"ObjectType");function git(t){Uc(u0.String);for(let e=0;e<t.length;e++)for(let r of lit(t.charCodeAt(e)))Uc(r)}s(git,"StringType");function Ait(t){Uc(u0.Symbol),rS(t.description)}s(Ait,"SymbolType");function yit(t){Uc(u0.Uint8Array);for(let e=0;e<t.length;e++)Uc(t[e])}s(yit,"Uint8ArrayType");function Cit(t){return Uc(u0.Undefined)}s(Cit,"UndefinedType");function rS(t){if(yn(t))return cit(t);if(ng(t))return uit(t);if(cc(t))return dit(t);if(Cu(t))return fit(t);if(g1(t))return pit(t);if(Wr(t))return mit(t);if(ui(t))return hit(t);if(Ui(t))return git(t);if(A1(t))return Ait(t);if(L_(t))return yit(t);if(us(t))return Cit(t);throw new pZ(t)}s(rS,"Visit");function Uc(t){tS=tS^ait[t],tS=tS*oit%sit}s(Uc,"FNV1A64");function Dx(t){return tS=BigInt("14695981039346656037"),rS(t),tS}s(Dx,"Hash");f();var mZ=class extends Cn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function xit(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(xit,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function vit(t,e,r){return!0}s(vit,"FromAny");function bit(t,e,r){return!0}s(bit,"FromArgument");function Eit(t,e,r){if(!yn(r)||Ei(t.minItems)&&!(r.length>=t.minItems)||Ei(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Bl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let l=Dx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||Wr(t.minContains)||Wr(t.maxContains)))return!0;let n=Ei(t.contains)?t.contains:ni(),i=r.reduce((o,a)=>Bl(n,e,a)?o+1:o,0);return!(i===0||Wr(t.minContains)&&i<t.minContains||Wr(t.maxContains)&&i>t.maxContains)}s(Eit,"FromArray");function Iit(t,e,r){return QL(r)}s(Iit,"FromAsyncIterator");function Tit(t,e,r){return!(!cc(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(Tit,"FromBigInt");function wit(t,e,r){return ng(r)}s(wit,"FromBoolean");function _it(t,e,r){return Bl(t.returns,e,r.prototype)}s(_it,"FromConstructor");function Sit(t,e,r){return!(!Cu(r)||Ei(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(Sit,"FromDate");function Rit(t,e,r){return Ix(r)}s(Rit,"FromFunction");function kit(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Bl(i,[...e,...n],r)}s(kit,"FromImport");function Bit(t,e,r){return!(!qL(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.multipleOf)&&r%t.multipleOf!==0)}s(Bit,"FromInteger");function Dit(t,e,r){let n=t.allOf.every(i=>Bl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(E1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(Ns(t.unevaluatedProperties)){let i=new RegExp(E1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Bl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(Dit,"FromIntersect");function Pit(t,e,r){return OL(r)}s(Pit,"FromIterator");function Nit(t,e,r){return r===t.const}s(Nit,"FromLiteral");function Lit(t,e,r){return!1}s(Lit,"FromNever");function Fit(t,e,r){return!Bl(t.not,e,r)}s(Fit,"FromNot");function Mit(t,e,r){return g1(r)}s(Mit,"FromNull");function Qit(t,e,r){return!(!Ko.IsNumberLike(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.multipleOf)&&r%t.multipleOf!==0)}s(Qit,"FromNumber");function Oit(t,e,r){if(!Ko.IsObjectLike(r)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Bl(o,e,r[i])||(I1(o)||xit(o))&&!(i in r))return!1}else if(Ko.IsExactOptionalProperty(r,i)&&!Bl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Bl(t.additionalProperties,e,r[o])):!0}s(Oit,"FromObject");function Uit(t,e,r){return UL(r)}s(Uit,"FromPromise");function qit(t,e,r){if(!Ko.IsRecordLike(r)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,d])=>o.test(u)?Bl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>o.test(u)?!0:Bl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&l&&c}s(qit,"FromRecord");function Wit(t,e,r){return Bl(Yi(t,e),e,r)}s(Wit,"FromRef");function Git(t,e,r){let n=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(r.length>=t.minLength)||Ei(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(Git,"FromRegExp");function Hit(t,e,r){return!Ui(r)||Ei(t.minLength)&&!(r.length>=t.minLength)||Ei(t.maxLength)&&!(r.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Ei(t.format)?cm.Has(t.format)?cm.Get(t.format)(r):!1:!0}s(Hit,"FromString");function jit(t,e,r){return A1(r)}s(jit,"FromSymbol");function Vit(t,e,r){return Ui(r)&&new RegExp(t.pattern).test(r)}s(Vit,"FromTemplateLiteral");function $it(t,e,r){return Bl(Yi(t,e),e,r)}s($it,"FromThis");function zit(t,e,r){if(!yn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Bl(t.items[n],e,r[n]))return!1;return!0}s(zit,"FromTuple");function Yit(t,e,r){return us(r)}s(Yit,"FromUndefined");function Kit(t,e,r){return t.anyOf.some(n=>Bl(n,e,r))}s(Kit,"FromUnion");function Jit(t,e,r){return!(!L_(r)||Ei(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(r.length>=t.minByteLength))}s(Jit,"FromUint8Array");function Xit(t,e,r){return!0}s(Xit,"FromUnknown");function Zit(t,e,r){return Ko.IsVoidLike(r)}s(Zit,"FromVoid");function eot(t,e,r){return xu.Has(t[Ze])?xu.Get(t[Ze])(t,r):!1}s(eot,"FromKind");function Bl(t,e,r){let n=Ei(t.$id)?kl(t,e):e,i=t;switch(i[Ze]){case"Any":return vit(i,n,r);case"Argument":return bit(i,n,r);case"Array":return Eit(i,n,r);case"AsyncIterator":return Iit(i,n,r);case"BigInt":return Tit(i,n,r);case"Boolean":return wit(i,n,r);case"Constructor":return _it(i,n,r);case"Date":return Sit(i,n,r);case"Function":return Rit(i,n,r);case"Import":return kit(i,n,r);case"Integer":return Bit(i,n,r);case"Intersect":return Dit(i,n,r);case"Iterator":return Pit(i,n,r);case"Literal":return Nit(i,n,r);case"Never":return Lit(i,n,r);case"Not":return Fit(i,n,r);case"Null":return Mit(i,n,r);case"Number":return Qit(i,n,r);case"Object":return Oit(i,n,r);case"Promise":return Uit(i,n,r);case"Record":return qit(i,n,r);case"Ref":return Wit(i,n,r);case"RegExp":return Git(i,n,r);case"String":return Hit(i,n,r);case"Symbol":return jit(i,n,r);case"TemplateLiteral":return Vit(i,n,r);case"This":return $it(i,n,r);case"Tuple":return zit(i,n,r);case"Undefined":return Yit(i,n,r);case"Union":return Kit(i,n,r);case"Uint8Array":return Jit(i,n,r);case"Unknown":return Xit(i,n,r);case"Void":return Zit(i,n,r);default:if(!xu.Has(i[Ze]))throw new mZ(i);return eot(i,n,r)}}s(Bl,"Visit");function pi(...t){return t.length===3?Bl(t[0],t[1],t[2]):Bl(t[0],[],t[1])}s(pi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var hZ=class extends Cn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function T1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(T1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var Px=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function er(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:Exe()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(er,"Create");function*tot(t,e,r,n){}s(tot,"FromAny");function*rot(t,e,r,n){}s(rot,"FromArgument");function*not(t,e,r,n){if(!yn(n))return yield er(Ke.Array,t,r,n);Ii(t.minItems)&&!(n.length>=t.minItems)&&(yield er(Ke.ArrayMinItems,t,r,n)),Ii(t.maxItems)&&!(n.length<=t.maxItems)&&(yield er(Ke.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Dl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of n){let c=Dx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield er(Ke.ArrayUniqueItems,t,r,n)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ni(),o=n.reduce((a,l,c)=>Dl(i,e,`${r}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield er(Ke.ArrayContains,t,r,n)),Wr(t.minContains)&&o<t.minContains&&(yield er(Ke.ArrayMinContains,t,r,n)),Wr(t.maxContains)&&o>t.maxContains&&(yield er(Ke.ArrayMaxContains,t,r,n))}s(not,"FromArray");function*iot(t,e,r,n){QL(n)||(yield er(Ke.AsyncIterator,t,r,n))}s(iot,"FromAsyncIterator");function*oot(t,e,r,n){if(!cc(n))return yield er(Ke.BigInt,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.BigIntExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.BigIntExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.BigIntMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.BigIntMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield er(Ke.BigIntMultipleOf,t,r,n))}s(oot,"FromBigInt");function*sot(t,e,r,n){ng(n)||(yield er(Ke.Boolean,t,r,n))}s(sot,"FromBoolean");function*aot(t,e,r,n){yield*Dl(t.returns,e,r,n.prototype)}s(aot,"FromConstructor");function*lot(t,e,r,n){if(!Cu(n))return yield er(Ke.Date,t,r,n);Ii(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield er(Ke.DateExclusiveMaximumTimestamp,t,r,n)),Ii(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield er(Ke.DateExclusiveMinimumTimestamp,t,r,n)),Ii(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield er(Ke.DateMaximumTimestamp,t,r,n)),Ii(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield er(Ke.DateMinimumTimestamp,t,r,n)),Ii(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield er(Ke.DateMultipleOfTimestamp,t,r,n))}s(lot,"FromDate");function*cot(t,e,r,n){Ix(n)||(yield er(Ke.Function,t,r,n))}s(cot,"FromFunction");function*uot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Dl(o,[...e,...i],r,n)}s(uot,"FromImport");function*dot(t,e,r,n){if(!qL(n))return yield er(Ke.Integer,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.IntegerExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.IntegerExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.IntegerMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.IntegerMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.IntegerMultipleOf,t,r,n))}s(dot,"FromInteger");function*fot(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Dl(o,e,r,n))i=!0,yield a;if(i)return yield er(Ke.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(E1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield er(Ke.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(E1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let l=Dl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();l.done||(yield l.value)}}}s(fot,"FromIntersect");function*pot(t,e,r,n){OL(n)||(yield er(Ke.Iterator,t,r,n))}s(pot,"FromIterator");function*mot(t,e,r,n){n!==t.const&&(yield er(Ke.Literal,t,r,n))}s(mot,"FromLiteral");function*hot(t,e,r,n){yield er(Ke.Never,t,r,n)}s(hot,"FromNever");function*got(t,e,r,n){Dl(t.not,e,r,n).next().done===!0&&(yield er(Ke.Not,t,r,n))}s(got,"FromNot");function*Aot(t,e,r,n){g1(n)||(yield er(Ke.Null,t,r,n))}s(Aot,"FromNull");function*yot(t,e,r,n){if(!Ko.IsNumberLike(n))return yield er(Ke.Number,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.NumberExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.NumberExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.NumberMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.NumberMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.NumberMultipleOf,t,r,n))}s(yot,"FromNumber");function*Cot(t,e,r,n){if(!Ko.IsObjectLike(n))return yield er(Ke.Object,t,r,n);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let l of i)a.includes(l)||(yield er(Ke.ObjectRequiredProperty,t.properties[l],`${r}/${T1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield er(Ke.ObjectAdditionalProperties,t,`${r}/${T1(l)}`,n[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*Dl(t.additionalProperties,e,`${r}/${T1(l)}`,n[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*Dl(c,e,`${r}/${T1(l)}`,n[l]),I1(t)&&!(l in n)&&(yield er(Ke.ObjectRequiredProperty,c,`${r}/${T1(l)}`,void 0))):Ko.IsExactOptionalProperty(n,l)&&(yield*Dl(c,e,`${r}/${T1(l)}`,n[l]))}}s(Cot,"FromObject");function*xot(t,e,r,n){UL(n)||(yield er(Ke.Promise,t,r,n))}s(xot,"FromPromise");function*vot(t,e,r,n){if(!Ko.IsRecordLike(n))return yield er(Ke.Object,t,r,n);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(n))a.test(l)&&(yield*Dl(o,e,`${r}/${T1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(n))a.test(l)||(yield*Dl(t.additionalProperties,e,`${r}/${T1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(n))if(!a.test(l))return yield er(Ke.ObjectAdditionalProperties,t,`${r}/${T1(l)}`,c)}}s(vot,"FromRecord");function*bot(t,e,r,n){yield*Dl(Yi(t,e),e,r,n)}s(bot,"FromRef");function*Eot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);if(Ii(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ii(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield er(Ke.RegExp,t,r,n)}s(Eot,"FromRegExp");function*Iot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);Ii(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ii(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),Ui(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))),Ui(t.format)&&(cm.Has(t.format)?cm.Get(t.format)(n)||(yield er(Ke.StringFormat,t,r,n)):yield er(Ke.StringFormatUnknown,t,r,n))}s(Iot,"FromString");function*Tot(t,e,r,n){A1(n)||(yield er(Ke.Symbol,t,r,n))}s(Tot,"FromSymbol");function*wot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))}s(wot,"FromTemplateLiteral");function*_ot(t,e,r,n){yield*Dl(Yi(t,e),e,r,n)}s(_ot,"FromThis");function*Sot(t,e,r,n){if(!yn(n))return yield er(Ke.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield er(Ke.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield er(Ke.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Dl(t.items[i],e,`${r}/${i}`,n[i])}s(Sot,"FromTuple");function*Rot(t,e,r,n){us(n)||(yield er(Ke.Undefined,t,r,n))}s(Rot,"FromUndefined");function*kot(t,e,r,n){if(pi(t,e,n))return;let i=t.anyOf.map(o=>new Px(Dl(o,e,r,n)));yield er(Ke.Union,t,r,n,i)}s(kot,"FromUnion");function*Bot(t,e,r,n){if(!L_(n))return yield er(Ke.Uint8Array,t,r,n);Ii(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield er(Ke.Uint8ArrayMaxByteLength,t,r,n)),Ii(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield er(Ke.Uint8ArrayMinByteLength,t,r,n))}s(Bot,"FromUint8Array");function*Dot(t,e,r,n){}s(Dot,"FromUnknown");function*Pot(t,e,r,n){Ko.IsVoidLike(n)||(yield er(Ke.Void,t,r,n))}s(Pot,"FromVoid");function*Not(t,e,r,n){xu.Get(t[Ze])(t,n)||(yield er(Ke.Kind,t,r,n))}s(Not,"FromKind");function*Dl(t,e,r,n){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*tot(o,i,r,n);case"Argument":return yield*rot(o,i,r,n);case"Array":return yield*not(o,i,r,n);case"AsyncIterator":return yield*iot(o,i,r,n);case"BigInt":return yield*oot(o,i,r,n);case"Boolean":return yield*sot(o,i,r,n);case"Constructor":return yield*aot(o,i,r,n);case"Date":return yield*lot(o,i,r,n);case"Function":return yield*cot(o,i,r,n);case"Import":return yield*uot(o,i,r,n);case"Integer":return yield*dot(o,i,r,n);case"Intersect":return yield*fot(o,i,r,n);case"Iterator":return yield*pot(o,i,r,n);case"Literal":return yield*mot(o,i,r,n);case"Never":return yield*hot(o,i,r,n);case"Not":return yield*got(o,i,r,n);case"Null":return yield*Aot(o,i,r,n);case"Number":return yield*yot(o,i,r,n);case"Object":return yield*Cot(o,i,r,n);case"Promise":return yield*xot(o,i,r,n);case"Record":return yield*vot(o,i,r,n);case"Ref":return yield*bot(o,i,r,n);case"RegExp":return yield*Eot(o,i,r,n);case"String":return yield*Iot(o,i,r,n);case"Symbol":return yield*Tot(o,i,r,n);case"TemplateLiteral":return yield*wot(o,i,r,n);case"This":return yield*_ot(o,i,r,n);case"Tuple":return yield*Sot(o,i,r,n);case"Undefined":return yield*Rot(o,i,r,n);case"Union":return yield*kot(o,i,r,n);case"Uint8Array":return yield*Bot(o,i,r,n);case"Unknown":return yield*Dot(o,i,r,n);case"Void":return yield*Pot(o,i,r,n);default:if(!xu.Has(o[Ze]))throw new hZ(t);return yield*Not(o,i,r,n)}}s(Dl,"Visit");function lg(...t){let e=t.length===3?Dl(t[0],t[1],"",t[2]):Dl(t[0],[],"",t[1]);return new Px(e)}s(lg,"Errors");f();f();var nS=class extends Cn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},gZ=class extends Cn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Ls(t,e,r){try{return oo(t)?t[Ps].Decode(r):r}catch(n){throw new gZ(t,e,r,n)}}s(Ls,"Default");function Lot(t,e,r,n){return yn(n)?Ls(t,r,n.map((i,o)=>pm(t.items,e,`${r}/${o}`,i))):Ls(t,r,n)}s(Lot,"FromArray");function Fot(t,e,r,n){if(!ui(n)||i0(n))return Ls(t,r,n);let i=KL(t),o=i.map(d=>d[0]),a={...n};for(let[d,p]of i)d in a&&(a[d]=pm(p,e,`${r}/${d}`,a[d]));if(!oo(t.unevaluatedProperties))return Ls(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ls(c,`${r}/${d}`,u[d]));return Ls(t,r,u)}s(Fot,"FromIntersect");function Mot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=pm(o,[...e,...i],r,n);return Ls(t,r,a)}s(Mot,"FromImport");function Qot(t,e,r,n){return Ls(t,r,pm(t.not,e,r,n))}s(Qot,"FromNot");function Oot(t,e,r,n){if(!ui(n))return Ls(t,r,n);let i=ld(t),o={...n};for(let u of i)An(o,u)&&(us(o[u])&&(!x1(t.properties[u])||Ko.IsExactOptionalProperty(o,u))||(o[u]=pm(t.properties[u],e,`${r}/${u}`,o[u])));if(!Ns(t.additionalProperties))return Ls(t,r,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ls(l,`${r}/${u}`,c[u]));return Ls(t,r,c)}s(Oot,"FromObject");function Uot(t,e,r,n){if(!ui(n))return Ls(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let d of Object.getOwnPropertyNames(n))o.test(d)&&(a[d]=pm(t.patternProperties[i],e,`${r}/${d}`,a[d]));if(!Ns(t.additionalProperties))return Ls(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ls(c,`${r}/${d}`,u[d]));return Ls(t,r,u)}s(Uot,"FromRecord");function qot(t,e,r,n){let i=Yi(t,e);return Ls(t,r,pm(i,e,r,n))}s(qot,"FromRef");function Wot(t,e,r,n){let i=Yi(t,e);return Ls(t,r,pm(i,e,r,n))}s(Wot,"FromThis");function Got(t,e,r,n){return yn(n)&&yn(t.items)?Ls(t,r,t.items.map((i,o)=>pm(i,e,`${r}/${o}`,n[o]))):Ls(t,r,n)}s(Got,"FromTuple");function Hot(t,e,r,n){for(let i of t.anyOf){if(!pi(i,e,n))continue;let o=pm(i,e,r,n);return Ls(t,r,o)}return Ls(t,r,n)}s(Hot,"FromUnion");function pm(t,e,r,n){let i=kl(t,e),o=t;switch(t[Ze]){case"Array":return Lot(o,i,r,n);case"Import":return Mot(o,i,r,n);case"Intersect":return Fot(o,i,r,n);case"Not":return Qot(o,i,r,n);case"Object":return Oot(o,i,r,n);case"Record":return Uot(o,i,r,n);case"Ref":return qot(o,i,r,n);case"Symbol":return Ls(o,r,n);case"This":return Wot(o,i,r,n);case"Tuple":return Got(o,i,r,n);case"Union":return Hot(o,i,r,n);default:return Ls(o,r,n)}}s(pm,"Visit");function iS(t,e,r){return pm(t,e,"",r)}s(iS,"TransformDecode");f();var oS=class extends Cn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},AZ=class extends Cn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function dc(t,e,r){try{return oo(t)?t[Ps].Encode(r):r}catch(n){throw new AZ(t,e,r,n)}}s(dc,"Default");function jot(t,e,r,n){let i=dc(t,r,n);return yn(i)?i.map((o,a)=>mm(t.items,e,`${r}/${a}`,o)):i}s(jot,"FromArray");function Vot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=dc(t,r,n);return mm(o,[...e,...i],r,a)}s(Vot,"FromImport");function $ot(t,e,r,n){let i=dc(t,r,n);if(!ui(n)||i0(n))return i;let o=KL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=mm(m,e,`${r}/${p}`,l[p]));if(!oo(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=dc(u,`${r}/${p}`,d[p]));return d}s($ot,"FromIntersect");function zot(t,e,r,n){return dc(t.not,r,dc(t,r,n))}s(zot,"FromNot");function Yot(t,e,r,n){let i=dc(t,r,n);if(!ui(i))return i;let o=ld(t),a={...i};for(let d of o)An(a,d)&&(us(a[d])&&(!x1(t.properties[d])||Ko.IsExactOptionalProperty(a,d))||(a[d]=mm(t.properties[d],e,`${r}/${d}`,a[d])));if(!Ns(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=dc(c,`${r}/${d}`,u[d]));return u}s(Yot,"FromObject");function Kot(t,e,r,n){let i=dc(t,r,n);if(!ui(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(l[p]=mm(t.patternProperties[o],e,`${r}/${p}`,l[p]));if(!Ns(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=dc(u,`${r}/${p}`,d[p]));return d}s(Kot,"FromRecord");function Jot(t,e,r,n){let i=Yi(t,e),o=mm(i,e,r,n);return dc(t,r,o)}s(Jot,"FromRef");function Xot(t,e,r,n){let i=Yi(t,e),o=mm(i,e,r,n);return dc(t,r,o)}s(Xot,"FromThis");function Zot(t,e,r,n){let i=dc(t,r,n);return yn(t.items)?t.items.map((o,a)=>mm(o,e,`${r}/${a}`,i[a])):[]}s(Zot,"FromTuple");function est(t,e,r,n){for(let i of t.anyOf){if(!pi(i,e,n))continue;let o=mm(i,e,r,n);return dc(t,r,o)}for(let i of t.anyOf){let o=mm(i,e,r,n);if(pi(t,e,o))return dc(t,r,o)}return dc(t,r,n)}s(est,"FromUnion");function mm(t,e,r,n){let i=kl(t,e),o=t;switch(t[Ze]){case"Array":return jot(o,i,r,n);case"Import":return Vot(o,i,r,n);case"Intersect":return $ot(o,i,r,n);case"Not":return zot(o,i,r,n);case"Object":return Yot(o,i,r,n);case"Record":return Kot(o,i,r,n);case"Ref":return Jot(o,i,r,n);case"This":return Xot(o,i,r,n);case"Tuple":return Zot(o,i,r,n);case"Union":return est(o,i,r,n);default:return dc(o,r,n)}}s(mm,"Visit");function sS(t,e,r){return mm(t,e,"",r)}s(sS,"TransformEncode");f();function tst(t,e){return oo(t)||fl(t.items,e)}s(tst,"FromArray");function rst(t,e){return oo(t)||fl(t.items,e)}s(rst,"FromAsyncIterator");function nst(t,e){return oo(t)||fl(t.returns,e)||t.parameters.some(r=>fl(r,e))}s(nst,"FromConstructor");function ist(t,e){return oo(t)||fl(t.returns,e)||t.parameters.some(r=>fl(r,e))}s(ist,"FromFunction");function ost(t,e){return oo(t)||oo(t.unevaluatedProperties)||t.allOf.some(r=>fl(r,e))}s(ost,"FromIntersect");function sst(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return oo(t)||fl(n,[...r,...e])}s(sst,"FromImport");function ast(t,e){return oo(t)||fl(t.items,e)}s(ast,"FromIterator");function lst(t,e){return oo(t)||fl(t.not,e)}s(lst,"FromNot");function cst(t,e){return oo(t)||Object.values(t.properties).some(r=>fl(r,e))||Ns(t.additionalProperties)&&fl(t.additionalProperties,e)}s(cst,"FromObject");function ust(t,e){return oo(t)||fl(t.item,e)}s(ust,"FromPromise");function dst(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return oo(t)||fl(n,e)||Ns(t.additionalProperties)&&oo(t.additionalProperties)}s(dst,"FromRecord");function fst(t,e){return oo(t)?!0:fl(Yi(t,e),e)}s(fst,"FromRef");function pst(t,e){return oo(t)?!0:fl(Yi(t,e),e)}s(pst,"FromThis");function mst(t,e){return oo(t)||!us(t.items)&&t.items.some(r=>fl(r,e))}s(mst,"FromTuple");function hst(t,e){return oo(t)||t.anyOf.some(r=>fl(r,e))}s(hst,"FromUnion");function fl(t,e){let r=kl(t,e),n=t;if(t.$id&&yZ.has(t.$id))return!1;switch(t.$id&&yZ.add(t.$id),t[Ze]){case"Array":return tst(n,r);case"AsyncIterator":return rst(n,r);case"Constructor":return nst(n,r);case"Function":return ist(n,r);case"Import":return sst(n,r);case"Intersect":return ost(n,r);case"Iterator":return ast(n,r);case"Not":return lst(n,r);case"Object":return cst(n,r);case"Promise":return ust(n,r);case"Record":return dst(n,r);case"Ref":return fst(n,r);case"This":return pst(n,r);case"Tuple":return mst(n,r);case"Union":return hst(n,r);default:return oo(t)}}s(fl,"Visit");var yZ=new Set;function w1(t,e){return yZ.clear(),fl(t,e)}s(w1,"HasTransform");var CZ=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=w1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return lg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new nS(this.schema,e,this.Errors(e).First());return this.hasTransform?iS(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?sS(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new oS(this.schema,e,this.Errors(e).First());return r}},_1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(_1||(_1={}));var cF;(function(t){function e(o){return o.length===0?!1:_1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(_1.IsAlpha(l)||_1.IsNumeric(l)||_1.DollarSign(l)||_1.IsUnderscore(l)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(cF||(cF={}));var xZ;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);_1.IsNumeric(o)||_1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(xZ||(xZ={}));var vZ;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(vZ||(vZ={}));var bZ=class extends Cn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},uF=class extends Cn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},mI;(function(t){function e(a,l,c){return Ko.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${cF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return Ko.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Ko.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(mI||(mI={}));var ms;(function(t){function e(ce){return ce[Ze]==="Any"||ce[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ce,Oe,ye){yield"true"}s(r,"FromAny");function*n(ce,Oe,ye){yield"true"}s(n,"FromArgument");function*i(ce,Oe,ye){yield`Array.isArray(${ye})`;let[tt,X]=[Me("value","any"),Me("acc","number")];Wr(ce.maxItems)&&(yield`${ye}.length <= ${ce.maxItems}`),Wr(ce.minItems)&&(yield`${ye}.length >= ${ce.minItems}`);let ne=he(ce.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${ne})`,ps(ce.contains)||Wr(ce.minContains)||Wr(ce.maxContains)){let We=ps(ce.contains)?ce.contains:ni(),Pe=he(We,Oe,"value"),be=Wr(ce.minContains)?[`(count >= ${ce.minContains})`]:[],ze=Wr(ce.maxContains)?[`(count <= ${ce.maxContains})`]:[],it=`const count = value.reduce((${X}, ${tt}) => ${Pe} ? acc + 1 : acc, 0)`,gt=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${gt}})(${ye})`}ce.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ce,Oe,ye){yield`(typeof ${ye} === 'bigint')`,cc(ce.exclusiveMaximum)&&(yield`${ye} < BigInt(${ce.exclusiveMaximum})`),cc(ce.exclusiveMinimum)&&(yield`${ye} > BigInt(${ce.exclusiveMinimum})`),cc(ce.maximum)&&(yield`${ye} <= BigInt(${ce.maximum})`),cc(ce.minimum)&&(yield`${ye} >= BigInt(${ce.minimum})`),cc(ce.multipleOf)&&(yield`(${ye} % BigInt(${ce.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(ce,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(ce,Oe,ye){yield*re(ce.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(ce,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Wr(ce.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ce.exclusiveMaximumTimestamp}`),Wr(ce.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ce.exclusiveMinimumTimestamp}`),Wr(ce.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ce.maximumTimestamp}`),Wr(ce.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ce.minimumTimestamp}`),Wr(ce.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ce.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ce,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ce,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(ce.$defs).reduce((X,ne)=>[...X,ce.$defs[ne]],[]);yield*re(Rf(ce.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(ce,Oe,ye){yield`Number.isInteger(${ye})`,Wr(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wr(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wr(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wr(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wr(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ce,Oe,ye){let tt=ce.allOf.map(X=>he(X,Oe,ye)).join(" && ");if(ce.unevaluatedProperties===!1){let X=Re(`${new RegExp(E1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key))`;yield`(${tt} && ${ne})`}else if(ps(ce.unevaluatedProperties)){let X=Re(`${new RegExp(E1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key) || ${he(ce.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${ne})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(ce,Oe,ye){typeof ce.const=="number"||typeof ce.const=="boolean"?yield`(${ye} === ${ce.const})`:yield`(${ye} === '${vZ.Escape(ce.const)}')`}s(y,"FromLiteral");function*v(ce,Oe,ye){yield"false"}s(v,"FromNever");function*b(ce,Oe,ye){yield`(!${he(ce.not,Oe,ye)})`}s(b,"FromNot");function*E(ce,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(ce,Oe,ye){yield mI.IsNumberLike(ye),Wr(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wr(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wr(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wr(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wr(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(_,"FromNumber");function*k(ce,Oe,ye){yield mI.IsObjectLike(ye),Wr(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wr(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let tt=Object.getOwnPropertyNames(ce.properties);for(let X of tt){let ne=cF.Encode(ye,X),We=ce.properties[X];if(ce.required&&ce.required.includes(X))yield*re(We,Oe,ne),(I1(We)||e(We))&&(yield`('${X}' in ${ye})`);else{let Pe=he(We,Oe,ne);yield mI.IsExactOptionalProperty(ye,X,Pe)}}if(ce.additionalProperties===!1)if(ce.required&&ce.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let X=`[${tt.map(ne=>`'${ne}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${X}.includes(key))`}if(typeof ce.additionalProperties=="object"){let X=he(ce.additionalProperties,Oe,`${ye}[key]`),ne=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${ne}.includes(key) || ${X}))`}}s(k,"FromObject");function*B(ce,Oe,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*N(ce,Oe,ye){yield mI.IsRecordLike(ye),Wr(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wr(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let[tt,X]=Object.entries(ce.patternProperties)[0],ne=Re(`${new RegExp(tt)}`),We=he(X,Oe,"value"),Pe=ps(ce.additionalProperties)?he(ce.additionalProperties,Oe,ye):ce.additionalProperties===!1?"false":"true",be=`(${ne}.test(key) ? ${We} : ${Pe})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*W(ce,Oe,ye){let tt=Yi(ce,Oe);if(fe.functions.has(ce.$ref))return yield`${Ne(ce.$ref)}(${ye})`;yield*re(tt,Oe,ye)}s(W,"FromRef");function*ee(ce,Oe,ye){let tt=Re(`${new RegExp(ce.source,ce.flags)};`);yield`(typeof ${ye} === 'string')`,Wr(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wr(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),yield`${tt}.test(${ye})`}s(ee,"FromRegExp");function*me(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,Wr(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wr(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),ce.pattern!==void 0&&(yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`),ce.format!==void 0&&(yield`format('${ce.format}', ${ye})`)}s(me,"FromString");function*ae(ce,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(ae,"FromSymbol");function*H(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*O(ce,Oe,ye){yield`${Ne(ce.$ref)}(${ye})`}s(O,"FromThis");function*le(ce,Oe,ye){if(yield`Array.isArray(${ye})`,ce.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ce.maxItems})`;for(let tt=0;tt<ce.items.length;tt++)yield`${he(ce.items[tt],Oe,`${ye}[${tt}]`)}`}s(le,"FromTuple");function*ie(ce,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*j(ce,Oe,ye){yield`(${ce.anyOf.map(X=>he(X,Oe,ye)).join(" || ")})`}s(j,"FromUnion");function*q(ce,Oe,ye){yield`${ye} instanceof Uint8Array`,Wr(ce.maxByteLength)&&(yield`(${ye}.length <= ${ce.maxByteLength})`),Wr(ce.minByteLength)&&(yield`(${ye}.length >= ${ce.minByteLength})`)}s(q,"FromUint8Array");function*Y(ce,Oe,ye){yield"true"}s(Y,"FromUnknown");function*te(ce,Oe,ye){yield mI.IsVoidLike(ye)}s(te,"FromVoid");function*pe(ce,Oe,ye){let tt=fe.instances.size;fe.instances.set(tt,ce),yield`kind('${ce[Ze]}', ${tt}, ${ye})`}s(pe,"FromKind");function*re(ce,Oe,ye,tt=!0){let X=Ui(ce.$id)?[...Oe,ce]:Oe,ne=ce;if(tt&&Ui(ce.$id)){let We=Ne(ce.$id);if(fe.functions.has(We))return yield`${We}(${ye})`;{fe.functions.set(We,"<deferred>");let Pe=Je(We,ce,Oe,"value",!1);return fe.functions.set(We,Pe),yield`${We}(${ye})`}}switch(ne[Ze]){case"Any":return yield*r(ne,X,ye);case"Argument":return yield*n(ne,X,ye);case"Array":return yield*i(ne,X,ye);case"AsyncIterator":return yield*o(ne,X,ye);case"BigInt":return yield*a(ne,X,ye);case"Boolean":return yield*l(ne,X,ye);case"Constructor":return yield*c(ne,X,ye);case"Date":return yield*u(ne,X,ye);case"Function":return yield*d(ne,X,ye);case"Import":return yield*p(ne,X,ye);case"Integer":return yield*m(ne,X,ye);case"Intersect":return yield*h(ne,X,ye);case"Iterator":return yield*g(ne,X,ye);case"Literal":return yield*y(ne,X,ye);case"Never":return yield*v(ne,X,ye);case"Not":return yield*b(ne,X,ye);case"Null":return yield*E(ne,X,ye);case"Number":return yield*_(ne,X,ye);case"Object":return yield*k(ne,X,ye);case"Promise":return yield*B(ne,X,ye);case"Record":return yield*N(ne,X,ye);case"Ref":return yield*W(ne,X,ye);case"RegExp":return yield*ee(ne,X,ye);case"String":return yield*me(ne,X,ye);case"Symbol":return yield*ae(ne,X,ye);case"TemplateLiteral":return yield*H(ne,X,ye);case"This":return yield*O(ne,X,ye);case"Tuple":return yield*le(ne,X,ye);case"Undefined":return yield*ie(ne,X,ye);case"Union":return yield*j(ne,X,ye);case"Uint8Array":return yield*q(ne,X,ye);case"Unknown":return yield*Y(ne,X,ye);case"Void":return yield*te(ne,X,ye);default:if(!xu.Has(ne[Ze]))throw new bZ(ce);return yield*pe(ne,X,ye)}}s(re,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(ce,Oe,ye,tt=!0){return`(${[...re(ce,Oe,ye,tt)].join(" && ")})`}s(he,"CreateExpression");function Ne(ce){return`check_${xZ.Encode(ce)}`}s(Ne,"CreateFunctionName");function Re(ce){let Oe=`local_${fe.variables.size}`;return fe.variables.set(Oe,`const ${Oe} = ${ce}`),Oe}s(Re,"CreateVariable");function Je(ce,Oe,ye,tt,X=!0){let[ne,We]=[`
`,it=>"".padStart(it," ")],Pe=Me("value","any"),be=pt("boolean"),ze=[...re(Oe,ye,tt,X)].map(it=>`${We(4)}${it}`).join(` &&${ne}`);return`function ${ce}(${Pe})${be} {${ne}${We(2)}return (${ne}${ze}${ne}${We(2)})
}`}s(Je,"CreateFunction");function Me(ce,Oe){let ye=fe.language==="typescript"?`: ${Oe}`:"";return`${ce}${ye}`}s(Me,"CreateParameter");function pt(ce){return fe.language==="typescript"?`: ${ce}`:""}s(pt,"CreateReturns");function Tt(ce,Oe,ye){let tt=Je("check",ce,Oe,"value"),X=Me("value","any"),ne=pt("boolean"),We=[...fe.functions.values()],Pe=[...fe.variables.values()],be=Ui(ce.$id)?`return function check(${X})${ne} {
  return ${Ne(ce.$id)}(value)
}`:`return ${tt}`;return[...Pe,...We,be].join(`
`)}s(Tt,"Build");function Ct(...ce){let Oe={language:"javascript"},[ye,tt,X]=ce.length===2&&yn(ce[1])?[ce[0],ce[1],Oe]:ce.length===2&&!yn(ce[1])?[ce[0],[],ce[1]]:ce.length===3?[ce[0],ce[1],ce[2]]:ce.length===1?[ce[0],[],Oe]:[null,[],Oe];if(fe.language=X.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!ps(ye))throw new uF(ye);for(let ne of tt)if(!ps(ne))throw new uF(ne);return Tt(ye,tt,X)}s(Ct,"Code"),t.Code=Ct;function bt(ce,Oe=[]){let ye=Ct(ce,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),X=new Map(fe.instances);function ne(ze,it,gt){if(!xu.Has(ze)||!X.has(it))return!1;let Ot=xu.Get(ze),lr=X.get(it);return Ot(lr,gt)}s(ne,"typeRegistryFunction");function We(ze,it){return cm.Has(ze)?cm.Get(ze)(it):!1}s(We,"formatRegistryFunction");function Pe(ze){return Dx(ze)}s(Pe,"hashFunction");let be=tt(ne,We,Pe);return new CZ(ce,Oe,be,ye)}s(bt,"Compile"),t.Compile=bt})(ms||(ms={}));var ZF=Ve(Ex());f();f();var fc=[];for(let t=0;t<256;++t)fc.push((t+256).toString(16).slice(1));function _xe(t,e=0){return(fc[t[e+0]]+fc[t[e+1]]+fc[t[e+2]]+fc[t[e+3]]+"-"+fc[t[e+4]]+fc[t[e+5]]+"-"+fc[t[e+6]]+fc[t[e+7]]+"-"+fc[t[e+8]]+fc[t[e+9]]+"-"+fc[t[e+10]]+fc[t[e+11]]+fc[t[e+12]]+fc[t[e+13]]+fc[t[e+14]]+fc[t[e+15]]).toLowerCase()}s(_xe,"unsafeStringify");f();var Sxe=require("crypto");var fF=new Uint8Array(256),dF=fF.length;function EZ(){return dF>fF.length-16&&((0,Sxe.randomFillSync)(fF),dF=0),fF.slice(dF,dF+=16)}s(EZ,"rng");f();f();var Rxe=require("crypto"),IZ={randomUUID:Rxe.randomUUID};function gst(t,e,r){if(IZ.randomUUID&&!e&&!t)return IZ.randomUUID();t=t||{};let n=t.random??t.rng?.()??EZ();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return _xe(n)}s(gst,"v4");var sr=gst;var eM=Ve(ii());function wS(t){return t===1}s(wS,"isRestricted");var xat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],zB=8192,vat=21;var Nl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return wS(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(tM(e))return this.reporterRestricted;if(P_(e))return new CB}getFTReporter(e){if(oIe(e))return this.reporterFT;if(P_(e))return new CB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.dispose(),this.reporter=void 0);let r=Promise.resolve();this.reporterRestricted&&(r=this.reporterRestricted.dispose(),this.reporterRestricted=void 0);let n=Promise.resolve();this.reporterFT&&(n=this.reporterFT.dispose(),this.reporterFT=void 0),await Promise.all([e,r,n])}},bat=I.Object({},{additionalProperties:I.String()}),Eat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),Iat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Tat(t){return Iat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Tat,"isOomError");function wat(t){return AB(t)?"network":Tat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(wat,"getErrorType");var an=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ms.Compile(bat)}static{this.validateTelemetryMeasurements=ms.Compile(Eat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Js())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Js())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(kt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=tg(e.get(fn).getEditorInfo()),this.properties.editor_plugin_version=tg(e.get(fn).getEditorPluginInfo());let r=e.get(Bs);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${vI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(fn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=tg(n.getEditorInfo());let i=e.get(on);this.properties.fetcher=i.name;let o=i.proxySettings;this.properties.proxy_enabled=o?"true":"false",this.properties.proxy_auth=o?.proxyAuth?"true":"false",this.properties.proxy_kerberos_spn=o?.kerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=i.rejectUnauthorized?"true":"false"}extendWithConfigProperties(e){let r=uIe(e);r["copilot.build"]=dIe(e),r["copilot.buildType"]=Nf(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(wS(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>zB){let a=0,l=0;for(;o>0&&l<vat;){l+=1;let c=n;l>1&&(c=n+"_"+(l<10?"0":"")+l);let u=a+zB;o<zB&&(u=a+o),r[c]=i.slice(a,u),o-=zB,a+=zB}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=Rat(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(P_(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return xI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),wS(r)&&xI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,sIe(e))}},fg=class t extends an{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new nI({}),exp:xf.createEmptyConfig()})}};function YB(t,e,r,n){t.get(Nl).getReporter(t,e)?.sendTelemetryEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(YB,"sendTelemetryEvent");function _at(t,e,r,n){t.get(Nl).getReporter(t,e)?.sendTelemetryErrorEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(_at,"sendTelemetryErrorEvent");function Sat(t,e,r,n){t.get(Nl).getFTReporter(t)?.sendTelemetryEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(Sat,"sendFTTelemetryEvent");function _S(t){return t.isFimEnabled?{promptPrefixCharLen:t.prefix.length,promptSuffixCharLen:t.suffix.length}:{promptCharLen:t.prefix.length}}s(_S,"telemetrizePromptLength");function Js(){return performance.now()}s(Js,"now");function Rat(t){return Math.floor(t/1e3)}s(Rat,"nowSeconds");function tM(t){return t.get(lc).optedIn}s(tM,"shouldSendRestricted");function oIe(t){return t.get(lc).ftFlag!==""}s(oIe,"shouldSendFinetuningTelemetry");function Dt(t,e,r,n){return t.get(va).register(kat(t,e,Js(),r?.extendedBy(),n))}s(Dt,"telemetry");async function kat(t,e,r,n,i=0){let o=n||an.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!wS(i)||tM(t))&&YB(t,i,e,o),wS(i)&&xat.includes(e)&&oIe(t)&&Sat(t,i,e,o)}s(kat,"_telemetry");function V7(t,e){return t.get(va).register(Bat(t,e,Js()))}s(V7,"telemetryExpProblem");async function Bat(t,e,r){let n="expProblem",i=an.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),YB(t,0,n,i)}s(Bat,"_telemetryExpProblem");function Zee(t,e,r,n){return t.get(va).register(Dat(t,e,r,n))}s(Zee,"telemetryRaw");async function Dat(t,e,r,n){let i={...r,...sIe(t)};YB(t,0,e,{properties:i,measurements:n})}s(Dat,"_telemetryRaw");function sIe(t){let e=t.get(fn),r={unique_id:sr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:tg(e.getEditorInfo())},n=t.get(lc);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(sIe,"createRequiredProperties");var Xee=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,ZF.SHA256)(ZF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ta(t,e,r,n,i){return t.get(va).register(aIe(t,e,Js(),r,{...n},i))}s(Ta,"telemetryException");async function aIe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Lc(a)||a instanceof ls||a instanceof eM.ConnectionError||a instanceof eM.ResponseError)return}else{if(a=new Xee(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(fn).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=tM(t),d=cye(a,c,u),p=wat(a),m=p==="exception",h=an.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=_X(y.value):y.value="[redacted]");if(o??=J1e(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=lye(a,c),v=an.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",r),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,YB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(rg).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),YB(t,0,`error.${p}`,h)}s(aIe,"_telemetryException");function bu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await aIe(t,a,Js(),r,n)}},"wrapped");return(...o)=>t.get(va).register(i(...o))}s(bu,"telemetryCatch");function xI(t,e,r,n){return t.get(va).register(Pat(t,e,Js(),r?.extendedBy(),n))}s(xI,"telemetryError");async function Pat(t,e,r,n,i=0){if(wS(i)&&!tM(t))return;let o=n||an.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),_at(t,i,e,o)}s(Pat,"_telemetryError");function lIe(t,e,r,n,i){let o=an.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,l]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(n),Dt(t,"engine.completion",o,1)}s(lIe,"logEngineCompletion");function cIe(t,e,r){let n={};if(e.isFimEnabled?n={promptPrefixJson:JSON.stringify(e.prefix),promptSuffixJson:JSON.stringify(e.suffix)}:n={promptJson:JSON.stringify(e.prefix)},e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Dt(t,"engine.prompt",i,1)}s(cIe,"logEnginePrompt");f();f();var fIe=Ve(ii()),pIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),ete;(r=>(r.method="github/didChangeAuth",r.type=new fIe.ProtocolNotificationType(r.method)))(ete||={});f();var mIe=Ve(ii()),tte;(r=>(r.method="copilot/ipCodeCitation",r.type=new mIe.NotificationType(r.method)))(tte||={});f();var hIe=Ve(ii()),rM;(r=>(r.method="context/update",r.type=new hIe.ProtocolRequestType(r.method)))(rM||={});f();f();var Gx="Cancelled";f();var pn=Ve(ii()),KB=I.String(),md=I.Object({uri:KB}),bI=I.Intersect([md,I.Object({version:I.Optional(I.Integer())})]),Wmr=I.Required(bI),Ll=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),wa=I.Object({start:Ll,end:Ll}),rte=I.Union([I.Integer(),I.String()]),Gmr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var gIe=Ve(ii()),nte;(r=>(r.method="textDocument/didFocus",r.type=new gIe.ProtocolNotificationType(r.method)))(nte||={});f();var Nat=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),Lat=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),AIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),yIe=I.Object({editorInfo:I.Optional(AIe),editorPluginInfo:I.Optional(AIe),relatedPluginInfo:I.Optional(I.Array(Lat)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(Nat)),githubAppId:I.Optional(I.String())});f();var JB=Ve(ii());var nM=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(nM||{}),Fat=I.Enum(nM),Mat=I.Object({triggerKind:Fat,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:wa,tooltipSignature:I.Optional(I.String())}))}),CIe=I.Object({textDocument:bI,position:Ll,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:Mat,data:I.Optional(I.Unknown())}),ite;(r=>(r.method="textDocument/inlineCompletion",r.type=new JB.ProtocolRequestType(r.method)))(ite||={});var xIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),vIe=I.Object({item:xIe}),ote;(r=>(r.method="textDocument/didShowCompletion",r.type=new JB.ProtocolNotificationType(r.method)))(ote||={});var bIe=I.Object({item:xIe,acceptedLength:I.Integer({minimum:1})}),ste;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new JB.ProtocolNotificationType(r.method)))(ste||={});f();var EIe=Ve(ii()),ate;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new EIe.ProtocolRequestType(r.method)))(ate||={});f();var IIe=Ve(ii()),TIe=I.Object({textDocument:bI,position:Ll}),Qat=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),wIe=I.Object({item:Qat}),lte;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new IIe.ProtocolNotificationType(r.method)))(lte||={});f();var iM=Ve(ii());var _Ie=I.Object({textDocument:bI,position:Ll,partialResultToken:I.Optional(rte),workDoneToken:I.Optional(rte)}),oM;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new iM.ProtocolRequestType(n.method),n.partialResult=new iM.ProgressType))(oM||={});f();var SIe=Ve(ii()),cte;(r=>(r.method="copilot/related",r.type=new SIe.ProtocolRequestType(r.method)))(cte||={});f();var RIe=Ve(ii()),ute;(r=>(r.method="statusNotification",r.type=new RIe.ProtocolNotificationType(r.method)))(ute||={});var kIe=Ve(require("events"));var Am=class{static{s(this,"CopilotTokenNotifier")}#e=new kIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=bu(e,n,`event.${r}`);return this.#e.on(r,i),pn.Disposable.create(()=>this.#e.off(r,i))}};function Ds(t,e){return t.get(Am).on(t,"CopilotToken",e)}s(Ds,"onCopilotToken");function XB(t,e){return t.get(Am).emitToken(e)}s(XB,"emitCopilotToken");function BIe(t){return t.get(Am).lastToken}s(BIe,"getLastCopilotToken");f();var sM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function dte(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(dte,"findKnownOrg");function DIe(t){let e=t.organization_list??[];return dte(e)??""}s(DIe,"getUserKind");f();f();var EI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(EI||{}),Va=class{static{s(this,"LogTarget")}},pg=class{static{s(this,"TelemetryLogSender")}},_t=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Va).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(pg).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(pg).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},Mr=new _t("default");f();var $a=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};f();var mc=class{static{s(this,"UrlOpener")}};var Oat=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],PIe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",NIe="https://gh.io/copilot-network-errors",Eu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&Oat.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new _t("certificates").error(e,`${PIe} Please visit ${NIe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get($a).showWarningMessage(PIe,n).then(i=>{if(i?.title===n.title)return e.get(mc).open(NIe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function aM(){return typeof process>"u"}s(aM,"isWeb");var fte=class extends eg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Lf(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...aM()?{}:r0(t),...n.headers}};let i=await t.get(on).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new eg(i);if(!i.headers.get("x-github-request-id"))throw new fte(i);return i}s(Lf,"apiFetch");f();f();var MIe=require("os"),cM=require("path");f();var LIe;(()=>{"use strict";var t={975:H=>{function O(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(O,"e");function le(j,q){for(var Y,te="",pe=0,re=-1,fe=0,he=0;he<=j.length;++he){if(he<j.length)Y=j.charCodeAt(he);else{if(Y===47)break;Y=47}if(Y===47){if(!(re===he-1||fe===1))if(re!==he-1&&fe===2){if(te.length<2||pe!==2||te.charCodeAt(te.length-1)!==46||te.charCodeAt(te.length-2)!==46){if(te.length>2){var Ne=te.lastIndexOf("/");if(Ne!==te.length-1){Ne===-1?(te="",pe=0):pe=(te=te.slice(0,Ne)).length-1-te.lastIndexOf("/"),re=he,fe=0;continue}}else if(te.length===2||te.length===1){te="",pe=0,re=he,fe=0;continue}}q&&(te.length>0?te+="/..":te="..",pe=2)}else te.length>0?te+="/"+j.slice(re+1,he):te=j.slice(re+1,he),pe=he-re-1;re=he,fe=0}else Y===46&&fe!==-1?++fe:fe=-1}return te}s(le,"r");var ie={resolve:s(function(){for(var j,q="",Y=!1,te=arguments.length-1;te>=-1&&!Y;te--){var pe;te>=0?pe=arguments[te]:(j===void 0&&(j=process.cwd()),pe=j),O(pe),pe.length!==0&&(q=pe+"/"+q,Y=pe.charCodeAt(0)===47)}return q=le(q,!Y),Y?q.length>0?"/"+q:"/":q.length>0?q:"."},"resolve"),normalize:s(function(j){if(O(j),j.length===0)return".";var q=j.charCodeAt(0)===47,Y=j.charCodeAt(j.length-1)===47;return(j=le(j,!q)).length!==0||q||(j="."),j.length>0&&Y&&(j+="/"),q?"/"+j:j},"normalize"),isAbsolute:s(function(j){return O(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,q=0;q<arguments.length;++q){var Y=arguments[q];O(Y),Y.length>0&&(j===void 0?j=Y:j+="/"+Y)}return j===void 0?".":ie.normalize(j)},"join"),relative:s(function(j,q){if(O(j),O(q),j===q||(j=ie.resolve(j))===(q=ie.resolve(q)))return"";for(var Y=1;Y<j.length&&j.charCodeAt(Y)===47;++Y);for(var te=j.length,pe=te-Y,re=1;re<q.length&&q.charCodeAt(re)===47;++re);for(var fe=q.length-re,he=pe<fe?pe:fe,Ne=-1,Re=0;Re<=he;++Re){if(Re===he){if(fe>he){if(q.charCodeAt(re+Re)===47)return q.slice(re+Re+1);if(Re===0)return q.slice(re+Re)}else pe>he&&(j.charCodeAt(Y+Re)===47?Ne=Re:Re===0&&(Ne=0));break}var Je=j.charCodeAt(Y+Re);if(Je!==q.charCodeAt(re+Re))break;Je===47&&(Ne=Re)}var Me="";for(Re=Y+Ne+1;Re<=te;++Re)Re!==te&&j.charCodeAt(Re)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+q.slice(re+Ne):(re+=Ne,q.charCodeAt(re)===47&&++re,q.slice(re))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(O(j),j.length===0)return".";for(var q=j.charCodeAt(0),Y=q===47,te=-1,pe=!0,re=j.length-1;re>=1;--re)if((q=j.charCodeAt(re))===47){if(!pe){te=re;break}}else pe=!1;return te===-1?Y?"/":".":Y&&te===1?"//":j.slice(0,te)},"dirname"),basename:s(function(j,q){if(q!==void 0&&typeof q!="string")throw new TypeError('"ext" argument must be a string');O(j);var Y,te=0,pe=-1,re=!0;if(q!==void 0&&q.length>0&&q.length<=j.length){if(q.length===j.length&&q===j)return"";var fe=q.length-1,he=-1;for(Y=j.length-1;Y>=0;--Y){var Ne=j.charCodeAt(Y);if(Ne===47){if(!re){te=Y+1;break}}else he===-1&&(re=!1,he=Y+1),fe>=0&&(Ne===q.charCodeAt(fe)?--fe==-1&&(pe=Y):(fe=-1,pe=he))}return te===pe?pe=he:pe===-1&&(pe=j.length),j.slice(te,pe)}for(Y=j.length-1;Y>=0;--Y)if(j.charCodeAt(Y)===47){if(!re){te=Y+1;break}}else pe===-1&&(re=!1,pe=Y+1);return pe===-1?"":j.slice(te,pe)},"basename"),extname:s(function(j){O(j);for(var q=-1,Y=0,te=-1,pe=!0,re=0,fe=j.length-1;fe>=0;--fe){var he=j.charCodeAt(fe);if(he!==47)te===-1&&(pe=!1,te=fe+1),he===46?q===-1?q=fe:re!==1&&(re=1):q!==-1&&(re=-1);else if(!pe){Y=fe+1;break}}return q===-1||te===-1||re===0||re===1&&q===te-1&&q===Y+1?"":j.slice(q,te)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function(q,Y){var te=Y.dir||Y.root,pe=Y.base||(Y.name||"")+(Y.ext||"");return te?te===Y.root?te+pe:te+"/"+pe:pe}(0,j)},"format"),parse:s(function(j){O(j);var q={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return q;var Y,te=j.charCodeAt(0),pe=te===47;pe?(q.root="/",Y=1):Y=0;for(var re=-1,fe=0,he=-1,Ne=!0,Re=j.length-1,Je=0;Re>=Y;--Re)if((te=j.charCodeAt(Re))!==47)he===-1&&(Ne=!1,he=Re+1),te===46?re===-1?re=Re:Je!==1&&(Je=1):re!==-1&&(Je=-1);else if(!Ne){fe=Re+1;break}return re===-1||he===-1||Je===0||Je===1&&re===he-1&&re===fe+1?he!==-1&&(q.base=q.name=fe===0&&pe?j.slice(1,he):j.slice(fe,he)):(fe===0&&pe?(q.name=j.slice(1,re),q.base=j.slice(1,he)):(q.name=j.slice(fe,re),q.base=j.slice(fe,he)),q.ext=j.slice(re,he)),fe>0?q.dir=j.slice(0,fe-1):pe&&(q.dir="/"),q},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,H.exports=ie}},e={};function r(H){var O=e[H];if(O!==void 0)return O.exports;var le=e[H]={exports:{}};return t[H](le,le.exports,r),le.exports}s(r,"r"),r.d=(H,O)=>{for(var le in O)r.o(O,le)&&!r.o(H,le)&&Object.defineProperty(H,le,{enumerable:!0,get:O[le]})},r.o=(H,O)=>Object.prototype.hasOwnProperty.call(H,O),r.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>ae,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,O){if(!H.scheme&&O)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(O){return O instanceof m||!!O&&typeof O.authority=="string"&&typeof O.fragment=="string"&&typeof O.path=="string"&&typeof O.query=="string"&&typeof O.scheme=="string"&&typeof O.fsPath=="string"&&typeof O.with=="function"&&typeof O.toString=="function"}scheme;authority;path;query;fragment;constructor(O,le,ie,j,q,Y=!1){typeof O=="object"?(this.scheme=O.scheme||u,this.authority=O.authority||u,this.path=O.path||u,this.query=O.query||u,this.fragment=O.fragment||u):(this.scheme=function(te,pe){return te||pe?te:"file"}(O,Y),this.authority=le||u,this.path=function(te,pe){switch(te){case"https":case"http":case"file":pe?pe[0]!==d&&(pe=d+pe):pe=d}return pe}(this.scheme,ie||u),this.query=j||u,this.fragment=q||u,c(this,Y))}get fsPath(){return E(this,!1)}with(O){if(!O)return this;let{scheme:le,authority:ie,path:j,query:q,fragment:Y}=O;return le===void 0?le=this.scheme:le===null&&(le=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),j===void 0?j=this.path:j===null&&(j=u),q===void 0?q=this.query:q===null&&(q=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),le===this.scheme&&ie===this.authority&&j===this.path&&q===this.query&&Y===this.fragment?this:new g(le,ie,j,q,Y)}static parse(O,le=!1){let ie=p.exec(O);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),le):new g(u,u,u,u,u)}static file(O){let le=u;if(i&&(O=O.replace(/\\/g,d)),O[0]===d&&O[1]===d){let ie=O.indexOf(d,2);ie===-1?(le=O.substring(2),O=d):(le=O.substring(2,ie),O=O.substring(ie)||d)}return new g("file",le,O,u,u)}static from(O){let le=new g(O.scheme,O.authority,O.path,O.query,O.fragment);return c(le,!0),le}toString(O=!1){return _(this,O)}toJSON(){return this}static revive(O){if(O){if(O instanceof m)return O;{let le=new g(O);return le._formatted=O.external,le._fsPath=O._sep===h?O.fsPath:null,le}}return O}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(O=!1){return O?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let O={$mid:1};return this._fsPath&&(O.fsPath=this._fsPath,O._sep=h),this._formatted&&(O.external=this._formatted),this.path&&(O.path=this.path),this.scheme&&(O.scheme=this.scheme),this.authority&&(O.authority=this.authority),this.query&&(O.query=this.query),this.fragment&&(O.fragment=this.fragment),O}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,O,le){let ie,j=-1;for(let q=0;q<H.length;q++){let Y=H.charCodeAt(q);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||O&&Y===47||le&&Y===91||le&&Y===93||le&&Y===58)j!==-1&&(ie+=encodeURIComponent(H.substring(j,q)),j=-1),ie!==void 0&&(ie+=H.charAt(q));else{ie===void 0&&(ie=H.substr(0,q));let te=y[Y];te!==void 0?(j!==-1&&(ie+=encodeURIComponent(H.substring(j,q)),j=-1),ie+=te):j===-1&&(j=q)}}return j!==-1&&(ie+=encodeURIComponent(H.substring(j))),ie!==void 0?ie:H}s(v,"m");function b(H){let O;for(let le=0;le<H.length;le++){let ie=H.charCodeAt(le);ie===35||ie===63?(O===void 0&&(O=H.substr(0,le)),O+=y[ie]):O!==void 0&&(O+=H[le])}return O!==void 0?O:H}s(b,"y");function E(H,O){let le;return le=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?O?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(le=le.replace(/\//g,"\\")),le}s(E,"v");function _(H,O){let le=O?b:v,ie="",{scheme:j,authority:q,path:Y,query:te,fragment:pe}=H;if(j&&(ie+=j,ie+=":"),(q||j==="file")&&(ie+=d,ie+=d),q){let re=q.indexOf("@");if(re!==-1){let fe=q.substr(0,re);q=q.substr(re+1),re=fe.lastIndexOf(":"),re===-1?ie+=le(fe,!1,!1):(ie+=le(fe.substr(0,re),!1,!1),ie+=":",ie+=le(fe.substr(re+1),!1,!0)),ie+="@"}q=q.toLowerCase(),re=q.lastIndexOf(":"),re===-1?ie+=le(q,!1,!0):(ie+=le(q.substr(0,re),!1,!0),ie+=q.substr(re))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let re=Y.charCodeAt(1);re>=65&&re<=90&&(Y=`/${String.fromCharCode(re+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let re=Y.charCodeAt(0);re>=65&&re<=90&&(Y=`${String.fromCharCode(re+32)}:${Y.substr(2)}`)}ie+=le(Y,!0,!1)}return te&&(ie+="?",ie+=le(te,!1,!1)),pe&&(ie+="#",ie+=O?pe:v(pe,!1,!1)),ie}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(B)?H.replace(B,O=>k(O)):H}s(N,"w");var W=r(975);let ee=W.posix||W,me="/";var ae;(function(H){H.joinPath=function(O,...le){return O.with({path:ee.join(O.path,...le)})},H.resolvePath=function(O,...le){let ie=O.path,j=!1;ie[0]!==me&&(ie=me+ie,j=!0);let q=ee.resolve(ie,...le);return j&&q[0]===me&&!O.authority&&(q=q.substring(1)),O.with({path:q})},H.dirname=function(O){if(O.path.length===0||O.path===me)return O;let le=ee.dirname(O.path);return le.length===1&&le.charCodeAt(0)===46&&(le=""),O.with({path:le})},H.basename=function(O){return ee.basename(O.path)},H.extname=function(O){return ee.extname(O.path)}})(ae||(ae={})),LIe=n})();var{URI:Hx,Utils:lM}=LIe;function QIe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+QIe(t.substring(3)):t}}s(QIe,"decodeURIComponentGraceful");var FIe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function pte(t){return t.match(FIe)?t.replace(FIe,e=>QIe(e)):t}s(pte,"percentDecode");function pl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Hx.file(t).toString()}s(pl,"makeFsUri");function SS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Hx.parse(e[1]+e[2],!0):Hx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(SS,"parseUri");function OIe(t){return SS(t),t}s(OIe,"validateUri");function Fl(t){try{return SS(t).toString()}catch{return t}}s(Fl,"normalizeUri");var UIe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=SS(t);if(!UIe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,MIe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,cM.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Wo(t){try{return aa(t)}catch{return}}s(Wo,"getFsPath");function uM(t){let e=Wo(t);if(e)return Hx.file(e).toString()}s(uM,"getFsUri");function II(t,...e){let r,n=Wo(t);return n?r=pl((0,cM.resolve)(n,...e)):r=lM.resolvePath(SS(t),...e.map(i=>qIe(i))).toString(),typeof t=="string"?r:{uri:r}}s(II,"resolveFilePath");function bo(t,...e){let r=lM.joinPath(SS(t),...e.map(qIe)).toString();return typeof t=="string"?r:{uri:r}}s(bo,"joinPath");function qIe(t){return Uat(t)?t.replaceAll("\\","/"):t}s(qIe,"pathToURIPath");function Uat(t){return/^[^/\\]*\\/.test(t)}s(Uat,"isWinPath");function Ti(t){return pte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function hd(t){let e=lM.dirname(SS(t)),r;return UIe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(hd,"dirname");var Ml=class{static{s(this,"NetworkConfiguration")}},ZB={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function mte(t,e,r){if(r&&tm(t)){for(let n of r){let i=Jr(t,n);if(i)return i}return}for(let n of e){let i=Jr(t,n);if(i)return i}}s(mte,"urlConfigOverride");function qat(t,e){switch(e){case"api":return mte(t,[ft.DebugOverrideCapiUrl,ft.DebugOverrideCapiUrlLegacy],[ft.DebugTestOverrideCapiUrl,ft.DebugTestOverrideCapiUrlLegacy]);case"proxy":return mte(t,[ft.DebugOverrideProxyUrl,ft.DebugOverrideProxyUrlLegacy],[ft.DebugTestOverrideProxyUrl,ft.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!fM(t))return mte(t,[ft.DebugSnippyOverrideUrl])}}s(qat,"getEndpointOverrideUrl");function jx(t,e,r,...n){let i=qat(t,r)??e.endpoints[r];return bo(i,...n)}s(jx,"getEndpointUrl");function dM(t){return BIe(t)?.endpoints??ZB}s(dM,"getLastKnownEndpoints");var gd=new _t("auth"),HIe=60;function RS(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com",r="https://api.github.com"),{apiUrl:r,serverUrl:e}}s(RS,"fillGitHubUrls");function WIe(){return Math.floor(Date.now()/1e3)}s(WIe,"nowSeconds");async function pM(t,e){let r=an.createAndMarkAsIssued({},{});Dt(t,"auth.new_login");let n=await Wat(t,e),i=await n.json(),o=i.user_notification;if(GIe(t,o,e),n.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return gd.info(t,d),xI(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!n.ok||!i.token){gd.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),xI(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&GIe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=WIe()+i.refresh_in+HIe;let l=await hte(t,e),c;l.ok&&(c=await l.json());let u=new TI(i,c);return XB(t,u),Dt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:WIe()})),{kind:"success",copilotToken:u}}s(pM,"authFromGitHubSession");async function Wat(t,e){let r={"X-GitHub-Api-Version":bf},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Lf(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Eu).notifyUser(t,i),i}}s(Wat,"fetchCopilotToken");async function hte(t,e){let r={"X-GitHub-Api-Version":bf},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Lf(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Eu).notifyUser(t,i),i}}s(hte,"fetchCopilotUserInfo");function GIe(t,e,r){e&&t.get($a).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(fn).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(mc).open(l)}e.notification_id&&o&&await Gat(t,e.notification_id,r)}).catch(n=>{gd.exception(t,n,"copilotToken.notification")})}s(GIe,"notifyUser");async function Gat(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Lf(t,r,n,{method:"POST",headers:{"X-GitHub-Api-Version":bf},body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&gd.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Gat,"sendNotificationResultToGitHub");var TI=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new sM(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??ZB}needsRefresh(){return(this.envelope.expires_at-HIe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return dte(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");r.set(a,l)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();f();var YIe=Ve(VIe()),KIe=Ve(zIe()),p0=Ve(require("os"));var kS=class{constructor(e,r,n,i=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=i;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(on).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{Mr.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new KIe.ApplicationInsights({instrumentationKey:n,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:e.get(Ml).getTelemetryUrl(),extensionConfig:{[YIe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Hat(e),this.commonProperties=jat(e),this.#e=Ds(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Hat(t){let e={},r=t.get(Bs);e["ai.session.id"]=r.sessionId;let n=t.get(lc);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${p0.type()} ${p0.release()}`,e["ai.device.osArchitecture"]=p0.arch(),e["ai.device.osPlatform"]=p0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(po).getVersion(),e}s(Hat,"getTags");function jat(t){let e={};e.common_os=p0.platform(),e.common_platformversion=p0.release(),e.common_arch=p0.arch(),e.common_cpu=Array.from(new Set(p0.cpus().map(n=>n.model))).join();let r=t.get(Bs);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(jat,"getCommonProperties");var Vat="7d7048df-6dd0-4048-bb23-b716c1461f8f",$at="3fdd7f28-937a-48c8-9a21-ba337db23bd1",zat="f0000000-0000-0000-0000-000000000000",m0=class{constructor(){this._initialized=!1}static{s(this,"TelemetryInitialization")}get isInitialized(){return this._initialized}get isEnabled(){return this._enabled??!1}async initialize(e,r,n){let i=e.get(Nl).deactivate();if(this._namespace=r,this._enabled=n,this._initialized=!0,n){let o=e.get(Nl);o.setReporter(new kS(e,r,Vat)),o.setRestrictedReporter(new kS(e,r,$at)),o.setFTReporter(new kS(e,r,zat,!0))}await i}reInitialize(e){return this._initialized?this.initialize(e,this._namespace,this._enabled):Promise.reject(new Error("Cannot re-initialize telemetry that has not been initialized."))}};function gM(t,e,r){return t.get(m0).initialize(t,e,r)}s(gM,"setupTelemetryReporters");var kn=class{constructor(e,r,n){this.authPersistence=e;this._copilotTokenManager=r;this.env=n;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;#t;getCopilotTokenManager(){return this._copilotTokenManager}updateEnterpriseConfig(e,r){if(this.#t=void 0,this.authPersistence.setAuthAuthority(void 0),r?.uri?.match(/^https?:\/\//))try{this.authPersistence.setAuthAuthority(new URL(r.uri).host),this.#t=r.uri}catch(n){gd.exception(e,n,`Ignoring invalid github-enterprise.uri: <${r.uri}>`)}}getConfiguredUrls(){let e=this.#t??"https://github.com";return{serverUrl:e,apiUrl:e.replace("://","://api.")}}async checkAndUpdateStatus(e,r){let n=r?.localChecksOnly??!1,i;return r?.githubAppId!==void 0?i=await this.getPersistedSession(e,r):i=await this.getSession(e),i===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):n?{status:"MaybeOK",user:i.login}:(r?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(e,i,r?.freshSignIn??!1),user:i.login})}async getTokenWithSignUpLimited(e,r,n){try{await this._copilotTokenManager.getToken()}catch(i){if(i instanceof Ff)return n&&i.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e,r)?this.getTokenWithSignUpLimited(e,r,!1):i.result.reason==="HTTP401"?"NotSignedIn":i.result.reason;throw i}return"OK"}async getSession(e){let r=Yat(this.env)??this.#e;if(r)return{...r,...RS(r)};if(r!==null)return await this.getPersistedSession(e)}async getPersistedSession(e,r){let n=await this.authPersistence.getAuthRecord(r);if(n===void 0)return;let i={...this.getConfiguredUrls(),accessToken:n.oauth_token,login:n.user,githubAppId:n.githubAppId};return n.dev_override&&Nf(e)==="dev"&&(i.devOverride={copilotTokenUrl:n.dev_override.copilot_token_url,copilotUserInfoUrl:n.dev_override.copilot_user_info_url,notificationUrl:n.dev_override.notification_url,contentRestrictionsUrl:n.dev_override.content_restrictions_url}),i}async signUpLimited(e,r){let n="copilot_internal/subscribe_limited_user";try{return(await(await Lf(e,r,n,{method:"POST",headers:{"X-GitHub-Api-Version":bf},body:JSON.stringify({restricted_telemetry:e.get(m0).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(i){return gd.exception(e,i,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n},new URL(i||this.getConfiguredUrls().serverUrl).host),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord(),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Yat(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Yat,"getSessionFromEnv");f();var Ki=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},AM=class extends Ki{static{s(this,"NoOpStatusReporter")}didChange(){}};var Qr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Ff=class extends ls{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},yM=class extends Qr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new Ff({reason:"NotSignedIn"});if(!r.accessToken)throw new Ff({reason:"HTTP401"});let n=await pM(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new Ff(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(JIe(this.ctx))throw r;gd.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(Ki).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(Ki);if(n instanceof Ff)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Dt(this.ctx,"auth.reset_token_"+r),gd.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):gd.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},BS=class extends yM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(kn).getSession(this.ctx)}};f();var mg=class{static{s(this,"Clock")}now(){return new Date}};f();var ym=class{static{s(this,"ExpConfigMaker")}},e8=class extends ym{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(on),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",n.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return xf.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return xf.createFallbackConfig(r,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return Ta(r,m,"fetchExperiments"),xf.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new xf(d.Parameters,u.AssignmentContext,p.join(";"))}},CM=class extends ym{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(xf.createEmptyConfig())}};f();f();var xM=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},gte=class extends xM{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},XIe=s(t=>new gte(t),"DEFAULT_GRANULARITY"),vM=class extends xM{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)n.push(this.prefix+a+l);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var ZIe="X-Copilot-ClientTimeBucket",bM=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=XIe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new vM(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(ZIe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(ZIe,o))}}};f();f();f();function Kat(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Kat,"getIntegrationId");function Vx(t){let e={...r0(t),"X-GitHub-Api-Version":bf},r=Kat(t.get(fn));return r&&(e["Copilot-Integration-Id"]=r),e}s(Vx,"getCapiHeaders");function EM(t,e,...r){return jx(t,e,"api",...r)}s(EM,"getCapiUrl");async function wI(t,e){let r=await t.get(Qr).getToken(),n=EM(t,r,e),i={Authorization:`Bearer ${r.token}`,...Vx(t)};return await t.get(on).fetch(new URL(n).href,{method:"GET",headers:i})}s(wI,"fetchCapiUrl");async function e2e(t,e,r){let n=await t.get(Qr).getToken(),i=EM(t,n,e),o={Authorization:`Bearer ${n.token}`,...Vx(t)};return await t.get(on).fetch(new URL(i).href,{method:"POST",headers:o,body:r})}s(e2e,"postCapiUrl");f();var t2e=10*60*1e3,ln={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},r2e=new Set([ln.O1Ga,ln.O3Mini,ln.O1Mini,ln.Gemini20Pro,ln.Gemini20Flash]);function Mf(t){switch(t){case"edits":case"user":case"inline":return[ln.Gpt4o,ln.Gpt4turbo,ln.Gpt4,ln.O1Mini,ln.O1Ga,ln.Claude35Sonnet,ln.O3Mini,ln.Gemini20Flash,ln.Claude37Sonnet,ln.Claude37SonnetThought,ln.Gpt45,ln.Gpt41,ln.CopilotBase];case"meta":case"suggestions":case"synonyms":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt35turbo,ln.Gpt41,ln.CopilotBase];case"gitCommit":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt4,ln.Gpt41,ln.CopilotBase];case"codeReview":return[ln.Gpt4,ln.Gpt4o,ln.Gpt41,ln.CopilotBase];case"nesStubs":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt41,ln.CopilotBase]}}s(Mf,"getSupportedModelFamiliesForPrompt");var wM={textEmbedding3Small:"text-embedding-3-small"},Jat=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),Xat=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:Jat,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),n2e=I.Object({data:I.Array(Xat)}),Iu=class{static{s(this,"ModelMetadataProvider")}},IM=class extends Iu{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;Ds(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await wI(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){Mr.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw Mr.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new eg(r)}await this.processModels(r)}async fetchModel(r){let n=await wI(this.ctx,`/models/${r}`);if(!n.ok){Mr.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await e2e(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){Mr.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>t2e}},TM=class extends Iu{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(kt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<t2e)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function i2e(t){let e=Jr(t,ft.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(i2e,"getUserSelectedModelConfiguration");f();f();f();var DS=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var o2e=Ve(require("node:fs/promises")),_M=Ve(require("node:path"));async function SM(t){return await o2e.readFile(Ate(t))}s(SM,"readFile");function Ate(t){return _M.default.resolve(_M.default.extname(__filename)!==".ts"?__dirname:_M.default.resolve(__dirname,"../../dist"),t)}s(Ate,"locateFile");var PS=Ve(C2e());var r8=new Map;function Bo(t="o200k_base"){let e=r8.get(t);return e!==void 0?e:r8.get("o200k_base")}s(Bo,"getTokenizer");async function x2e(t="o200k_base"){return await Ste,Bo(t)}s(x2e,"getTokenizerAsync");async function mlt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await SM(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(mlt,"parseTikTokenNoIndex");var NM=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,PS.createTokenizer)(await mlt(`resources/${e}.tiktoken.noindex`),(0,PS.getSpecialTokensByEncoder)(e),(0,PS.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new DS("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(-r),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(0,r),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},_te=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},hlt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},LM=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){throw new Error("Not implemented")}detokenize(e){throw new Error("Not implemented")}tokenizeStrings(e){throw new Error("Not implemented")}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?hlt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){throw new Error("Not implemented")}},Ste=(async()=>{r8.set("mock",new _te),r8.set("cl100k_base",await NM.create("cl100k_base")),r8.set("o200k_base",await NM.create("o200k_base"))})();f();f();var glt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},b2e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Rte,FM,E2e,kte=class extends Cn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Rte.add(this),FM.set(this,void 0),glt(this,FM,e,"f"),this.error=r}Errors(){return new Px(b2e(this,Rte,"m",E2e).call(this))}};FM=new WeakMap,Rte=new WeakSet,E2e=s(function*(){this.error&&(yield this.error),yield*b2e(this,FM,"f")},"_AssertError_Iterator");function v2e(t,e,r){if(!pi(t,e,r))throw new kte(lg(t,e,r))}s(v2e,"AssertValue");function MM(...t){return t.length===3?v2e(t[0],t[1],t[2]):v2e(t[0],[],t[1])}s(MM,"Assert");f();f();f();function Alt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Ji(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Ji(t[r]);return e}s(Alt,"FromObject");function ylt(t){return t.map(e=>Ji(e))}s(ylt,"FromArray");function Clt(t){return t.slice()}s(Clt,"FromTypedArray");function xlt(t){return new Map(Ji([...t.entries()]))}s(xlt,"FromMap");function vlt(t){return new Set(Ji([...t.entries()]))}s(vlt,"FromSet");function blt(t){return new Date(t.toISOString())}s(blt,"FromDate");function Ji(t){if(yn(t))return ylt(t);if(Cu(t))return blt(t);if(If(t))return Clt(t);if(uye(t))return xlt(t);if(dye(t))return vlt(t);if(ui(t))return Alt(t);if(i0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ji,"Clone");var h0=class extends Cn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Xi(t){return Ix(t)?t():Ji(t)}s(Xi,"FromDefault");function Elt(t,e){return An(t,"default")?Xi(t.default):{}}s(Elt,"FromAny");function Ilt(t,e){return{}}s(Ilt,"FromArgument");function Tlt(t,e){if(t.uniqueItems===!0&&!An(t,"default"))throw new h0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!An(t,"default"))throw new h0(t,"Array with the contains constraint requires a default value");return"default"in t?Xi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Ad(t.items,e)):[]}s(Tlt,"FromArray");function wlt(t,e){return An(t,"default")?Xi(t.default):async function*(){}()}s(wlt,"FromAsyncIterator");function _lt(t,e){return An(t,"default")?Xi(t.default):BigInt(0)}s(_lt,"FromBigInt");function Slt(t,e){return An(t,"default")?Xi(t.default):!1}s(Slt,"FromBoolean");function Rlt(t,e){if(An(t,"default"))return Xi(t.default);{let r=Ad(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(Rlt,"FromConstructor");function klt(t,e){return An(t,"default")?Xi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(klt,"FromDate");function Blt(t,e){return An(t,"default")?Xi(t.default):()=>Ad(t.returns,e)}s(Blt,"FromFunction");function Dlt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Ad(n,[...e,...r])}s(Dlt,"FromImport");function Plt(t,e){return An(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Plt,"FromInteger");function Nlt(t,e){if(An(t,"default"))return Xi(t.default);{let r=t.allOf.reduce((n,i)=>{let o=Ad(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!pi(t,e,r))throw new h0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(Nlt,"FromIntersect");function Llt(t,e){return An(t,"default")?Xi(t.default):function*(){}()}s(Llt,"FromIterator");function Flt(t,e){return An(t,"default")?Xi(t.default):t.const}s(Flt,"FromLiteral");function Mlt(t,e){if(An(t,"default"))return Xi(t.default);throw new h0(t,"Never types cannot be created. Consider using a default value.")}s(Mlt,"FromNever");function Qlt(t,e){if(An(t,"default"))return Xi(t.default);throw new h0(t,"Not types must have a default value")}s(Qlt,"FromNot");function Olt(t,e){return An(t,"default")?Xi(t.default):null}s(Olt,"FromNull");function Ult(t,e){return An(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Ult,"FromNumber");function qlt(t,e){if(An(t,"default"))return Xi(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=Ad(o,e));return n}}s(qlt,"FromObject");function Wlt(t,e){return An(t,"default")?Xi(t.default):Promise.resolve(Ad(t.item,e))}s(Wlt,"FromPromise");function Glt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(An(t,"default"))return Xi(t.default);if(r===og||r===ig)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=Ad(n,e);return o}}s(Glt,"FromRecord");function Hlt(t,e){return An(t,"default")?Xi(t.default):Ad(Yi(t,e),e)}s(Hlt,"FromRef");function jlt(t,e){if(An(t,"default"))return Xi(t.default);throw new h0(t,"RegExp types cannot be created. Consider using a default value.")}s(jlt,"FromRegExp");function Vlt(t,e){if(t.pattern!==void 0){if(An(t,"default"))return Xi(t.default);throw new h0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(An(t,"default"))return Xi(t.default);throw new h0(t,"String types with formats must specify a default value")}else return An(t,"default")?Xi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(Vlt,"FromString");function $lt(t,e){return An(t,"default")?Xi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s($lt,"FromSymbol");function zlt(t,e){if(An(t,"default"))return Xi(t.default);if(!jL(t))throw new h0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return H_(t)[0]}s(zlt,"FromTemplateLiteral");function Ylt(t,e){if(I2e++>nct)throw new h0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return An(t,"default")?Xi(t.default):Ad(Yi(t,e),e)}s(Ylt,"FromThis");function Klt(t,e){return An(t,"default")?Xi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Ad(t.items[n],e))}s(Klt,"FromTuple");function Jlt(t,e){if(An(t,"default"))return Xi(t.default)}s(Jlt,"FromUndefined");function Xlt(t,e){if(An(t,"default"))return Xi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Ad(t.anyOf[0],e)}s(Xlt,"FromUnion");function Zlt(t,e){return An(t,"default")?Xi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Zlt,"FromUint8Array");function ect(t,e){return An(t,"default")?Xi(t.default):{}}s(ect,"FromUnknown");function tct(t,e){if(An(t,"default"))return Xi(t.default)}s(tct,"FromVoid");function rct(t,e){if(An(t,"default"))return Xi(t.default);throw new Error("User defined types must specify a default value")}s(rct,"FromKind");function Ad(t,e){let r=kl(t,e),n=t;switch(n[Ze]){case"Any":return Elt(n,r);case"Argument":return Ilt(n,r);case"Array":return Tlt(n,r);case"AsyncIterator":return wlt(n,r);case"BigInt":return _lt(n,r);case"Boolean":return Slt(n,r);case"Constructor":return Rlt(n,r);case"Date":return klt(n,r);case"Function":return Blt(n,r);case"Import":return Dlt(n,r);case"Integer":return Plt(n,r);case"Intersect":return Nlt(n,r);case"Iterator":return Llt(n,r);case"Literal":return Flt(n,r);case"Never":return Mlt(n,r);case"Not":return Qlt(n,r);case"Null":return Olt(n,r);case"Number":return Ult(n,r);case"Object":return qlt(n,r);case"Promise":return Wlt(n,r);case"Record":return Glt(n,r);case"Ref":return Hlt(n,r);case"RegExp":return jlt(n,r);case"String":return Vlt(n,r);case"Symbol":return $lt(n,r);case"TemplateLiteral":return zlt(n,r);case"This":return Ylt(n,r);case"Tuple":return Klt(n,r);case"Undefined":return Jlt(n,r);case"Union":return Xlt(n,r);case"Uint8Array":return Zlt(n,r);case"Unknown":return ect(n,r);case"Void":return tct(n,r);default:if(!xu.Has(n[Ze]))throw new h0(n,"Unknown type");return rct(n,r)}}s(Ad,"Visit");var nct=512,I2e=0;function Qf(...t){return I2e=0,t.length===2?Ad(t[0],t[1]):Ad(t[0],[])}s(Qf,"Create");var QM=class extends Cn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function ict(t,e,r){if(t[Ze]==="Object"&&typeof r=="object"&&!g1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===r[u]?l:0,m=pi(d,e,r[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return pi(t,e,r)?1:0}s(ict,"ScoreUnion");function oct(t,e,r){let n=t.anyOf.map(a=>Yi(a,e)),[i,o]=[n[0],0];for(let a of n){let l=ict(a,e,r);l>o&&(i=a,o=l)}return i}s(oct,"SelectUnion");function sct(t,e,r){if("default"in t)return typeof r=="function"?t.default:Ji(t.default);{let n=oct(t,e,r);return n8(n,e,r)}}s(sct,"CastUnion");function act(t,e,r){return pi(t,e,r)?Ji(r):Qf(t,e)}s(act,"DefaultClone");function lct(t,e,r){return pi(t,e,r)?r:Qf(t,e)}s(lct,"Default");function cct(t,e,r){if(pi(t,e,r))return Ji(r);let n=yn(r)?Ji(r):Qf(t,e),i=Wr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Wr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>Cm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!pi(t,e,l))throw new QM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(cct,"FromArray");function uct(t,e,r){if(pi(t,e,r))return Qf(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=Cm(a,e,r.prototype[o]));return i}s(uct,"FromConstructor");function dct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cm(i,[...e,...n],r)}s(dct,"FromImport");function fct(t,e,r){let n=Qf(t,e),i=ui(n)&&ui(r)?{...n,...r}:r;return pi(t,e,i)?i:Qf(t,e)}s(fct,"FromIntersect");function pct(t,e,r){throw new QM(t,"Never types cannot be cast")}s(pct,"FromNever");function mct(t,e,r){if(pi(t,e,r))return r;if(r===null||typeof r!="object")return Qf(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=Cm(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=Cm(t.additionalProperties,e,r[a]))}return i}s(mct,"FromObject");function hct(t,e,r){if(pi(t,e,r))return Ji(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Qf(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,l]of Object.entries(r))o[a]=Cm(i,e,l);return o}s(hct,"FromRecord");function gct(t,e,r){return Cm(Yi(t,e),e,r)}s(gct,"FromRef");function Act(t,e,r){return Cm(Yi(t,e),e,r)}s(Act,"FromThis");function yct(t,e,r){return pi(t,e,r)?Ji(r):yn(r)?t.items===void 0?[]:t.items.map((n,i)=>Cm(n,e,r[i])):Qf(t,e)}s(yct,"FromTuple");function Cct(t,e,r){return pi(t,e,r)?Ji(r):sct(t,e,r)}s(Cct,"FromUnion");function Cm(t,e,r){let n=Ui(t.$id)?kl(t,e):e,i=t;switch(t[Ze]){case"Array":return cct(i,n,r);case"Constructor":return uct(i,n,r);case"Import":return dct(i,n,r);case"Intersect":return fct(i,n,r);case"Never":return pct(i,n,r);case"Object":return mct(i,n,r);case"Record":return hct(i,n,r);case"Ref":return gct(i,n,r);case"This":return Act(i,n,r);case"Tuple":return yct(i,n,r);case"Union":return Cct(i,n,r);case"Date":case"Symbol":case"Uint8Array":return act(t,e,r);default:return lct(i,n,r)}}s(Cm,"Visit");function n8(...t){return t.length===3?Cm(t[0],t[1],t[2]):Cm(t[0],[],t[1])}s(n8,"Cast");f();function xct(t){return wx(t)&&t[Ze]!=="Unsafe"}s(xct,"IsCheckable");function vct(t,e,r){return yn(r)?r.map(n=>yd(t.items,e,n)):r}s(vct,"FromArray");function bct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return yd(i,[...e,...n],r)}s(bct,"FromImport");function Ect(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(l=>yd(l,e,Ji(r))).reduce((l,c)=>ui(c)?{...l,...c}:c,{});if(!ui(r)||!ui(o)||!wx(n))return o;let a=ld(t);for(let l of Object.getOwnPropertyNames(r))a.includes(l)||pi(n,e,r[l])&&(o[l]=yd(n,e,r[l]));return o}s(Ect,"FromIntersect");function Ict(t,e,r){if(!ui(r)||yn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(An(t.properties,i)){r[i]=yd(t.properties[i],e,r[i]);continue}if(wx(n)&&pi(n,e,r[i])){r[i]=yd(n,e,r[i]);continue}delete r[i]}return r}s(Ict,"FromObject");function Tct(t,e,r){if(!ui(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){r[c]=yd(a,e,r[c]);continue}if(wx(n)&&pi(n,e,r[c])){r[c]=yd(n,e,r[c]);continue}delete r[c]}return r}s(Tct,"FromRecord");function wct(t,e,r){return yd(Yi(t,e),e,r)}s(wct,"FromRef");function _ct(t,e,r){return yd(Yi(t,e),e,r)}s(_ct,"FromThis");function Sct(t,e,r){if(!yn(r))return r;if(us(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=yd(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(Sct,"FromTuple");function Rct(t,e,r){for(let n of t.anyOf)if(xct(n)&&pi(n,e,r))return yd(n,e,r);return r}s(Rct,"FromUnion");function yd(t,e,r){let n=Ui(t.$id)?kl(t,e):e,i=t;switch(i[Ze]){case"Array":return vct(i,n,r);case"Import":return bct(i,n,r);case"Intersect":return Ect(i,n,r);case"Object":return Ict(i,n,r);case"Record":return Tct(i,n,r);case"Ref":return wct(i,n,r);case"This":return _ct(i,n,r);case"Tuple":return Sct(i,n,r);case"Union":return Rct(i,n,r);default:return r}}s(yd,"Visit");function OM(...t){return t.length===3?yd(t[0],t[1],t[2]):yd(t[0],[],t[1])}s(OM,"Clean");f();function UM(t){return Ui(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(UM,"IsStringNumeric");function kct(t){return cc(t)||ng(t)||Wr(t)}s(kct,"IsValueToString");function i8(t){return t===!0||Wr(t)&&t===1||cc(t)&&t===BigInt("1")||Ui(t)&&(t.toLowerCase()==="true"||t==="1")}s(i8,"IsValueTrue");function o8(t){return t===!1||Wr(t)&&(t===0||Object.is(t,-0))||cc(t)&&t===BigInt("0")||Ui(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(o8,"IsValueFalse");function Bct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Bct,"IsTimeStringWithTimeZone");function Dct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Dct,"IsTimeStringWithoutTimeZone");function Pct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Pct,"IsDateTimeStringWithTimeZone");function Nct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Nct,"IsDateTimeStringWithoutTimeZone");function Lct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(Lct,"IsDateString");function Fct(t,e){let r=w2e(t);return r===e?r:t}s(Fct,"TryConvertLiteralString");function Mct(t,e){let r=_2e(t);return r===e?r:t}s(Mct,"TryConvertLiteralNumber");function Qct(t,e){let r=T2e(t);return r===e?r:t}s(Qct,"TryConvertLiteralBoolean");function Oct(t,e){return Ui(t.const)?Fct(e,t.const):Wr(t.const)?Mct(e,t.const):ng(t.const)?Qct(e,t.const):e}s(Oct,"TryConvertLiteral");function T2e(t){return i8(t)?!0:o8(t)?!1:t}s(T2e,"TryConvertBoolean");function Uct(t){let e=s(r=>r.split(".")[0],"truncateInteger");return UM(t)?BigInt(e(t)):Wr(t)?BigInt(Math.trunc(t)):o8(t)?BigInt(0):i8(t)?BigInt(1):t}s(Uct,"TryConvertBigInt");function w2e(t){return A1(t)&&t.description!==void 0?t.description.toString():kct(t)?t.toString():t}s(w2e,"TryConvertString");function _2e(t){return UM(t)?parseFloat(t):i8(t)?1:o8(t)?0:t}s(_2e,"TryConvertNumber");function qct(t){return UM(t)?parseInt(t):Wr(t)?Math.trunc(t):i8(t)?1:o8(t)?0:t}s(qct,"TryConvertInteger");function Wct(t){return Ui(t)&&t.toLowerCase()==="null"?null:t}s(Wct,"TryConvertNull");function Gct(t){return Ui(t)&&t==="undefined"?void 0:t}s(Gct,"TryConvertUndefined");function Hct(t){return Cu(t)?t:Wr(t)?new Date(t):i8(t)?new Date(1):o8(t)?new Date(0):UM(t)?new Date(parseInt(t)):Dct(t)?new Date(`1970-01-01T${t}.000Z`):Bct(t)?new Date(`1970-01-01T${t}`):Nct(t)?new Date(`${t}.000Z`):Pct(t)?new Date(t):Lct(t)?new Date(`${t}T00:00:00.000Z`):t}s(Hct,"TryConvertDate");function jct(t,e,r){return(yn(r)?r:[r]).map(i=>xm(t.items,e,i))}s(jct,"FromArray");function Vct(t,e,r){return Uct(r)}s(Vct,"FromBigInt");function $ct(t,e,r){return T2e(r)}s($ct,"FromBoolean");function zct(t,e,r){return Hct(r)}s(zct,"FromDate");function Yct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return xm(i,[...e,...n],r)}s(Yct,"FromImport");function Kct(t,e,r){return qct(r)}s(Kct,"FromInteger");function Jct(t,e,r){return t.allOf.reduce((n,i)=>xm(i,e,n),r)}s(Jct,"FromIntersect");function Xct(t,e,r){return Oct(t,r)}s(Xct,"FromLiteral");function Zct(t,e,r){return Wct(r)}s(Zct,"FromNull");function eut(t,e,r){return _2e(r)}s(eut,"FromNumber");function tut(t,e,r){if(!ui(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))An(r,n)&&(r[n]=xm(t.properties[n],e,r[n]));return r}s(tut,"FromObject");function rut(t,e,r){if(!ui(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(r))r[a]=xm(o,e,l);return r}s(rut,"FromRecord");function nut(t,e,r){return xm(Yi(t,e),e,r)}s(nut,"FromRef");function iut(t,e,r){return w2e(r)}s(iut,"FromString");function sut(t,e,r){return Ui(r)||Wr(r)?Symbol(r):r}s(sut,"FromSymbol");function aut(t,e,r){return xm(Yi(t,e),e,r)}s(aut,"FromThis");function lut(t,e,r){return yn(r)&&!us(t.items)?r.map((i,o)=>o<t.items.length?xm(t.items[o],e,i):i):r}s(lut,"FromTuple");function cut(t,e,r){return Gct(r)}s(cut,"FromUndefined");function uut(t,e,r){for(let n of t.anyOf){let i=xm(n,e,Ji(r));if(pi(n,e,i))return i}return r}s(uut,"FromUnion");function xm(t,e,r){let n=kl(t,e),i=t;switch(t[Ze]){case"Array":return jct(i,n,r);case"BigInt":return Vct(i,n,r);case"Boolean":return $ct(i,n,r);case"Date":return zct(i,n,r);case"Import":return Yct(i,n,r);case"Integer":return Kct(i,n,r);case"Intersect":return Jct(i,n,r);case"Literal":return Xct(i,n,r);case"Null":return Zct(i,n,r);case"Number":return eut(i,n,r);case"Object":return tut(i,n,r);case"Record":return rut(i,n,r);case"Ref":return nut(i,n,r);case"String":return iut(i,n,r);case"Symbol":return sut(i,n,r);case"This":return aut(i,n,r);case"Tuple":return lut(i,n,r);case"Undefined":return cut(i,n,r);case"Union":return uut(i,n,r);default:return r}}s(xm,"Visit");function qM(...t){return t.length===3?xm(t[0],t[1],t[2]):xm(t[0],[],t[1])}s(qM,"Convert");f();function S2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!pi(e,r,n))throw new nS(e,n,lg(e,r,n).First());return w1(e,r)?iS(e,r,n):n}s(S2e,"Decode");f();function k1(t,e){let r=An(t,"default")?t.default:void 0,n=Ix(r)?r():Ji(r);return us(e)?n:ui(e)&&ui(n)?Object.assign(n,e):e}s(k1,"ValueOrDefault");function Bte(t){return wx(t)&&"default"in t}s(Bte,"HasDefaultProperty");function dut(t,e,r){if(yn(r)){for(let i=0;i<r.length;i++)r[i]=wu(t.items,e,r[i]);return r}let n=k1(t,r);if(!yn(n))return n;for(let i=0;i<n.length;i++)n[i]=wu(t.items,e,n[i]);return n}s(dut,"FromArray");function fut(t,e,r){return Cu(r)?r:k1(t,r)}s(fut,"FromDate");function put(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return wu(i,[...e,...n],r)}s(put,"FromImport");function mut(t,e,r){let n=k1(t,r);return t.allOf.reduce((i,o)=>{let a=wu(o,e,n);return ui(a)?{...i,...a}:a},{})}s(mut,"FromIntersect");function hut(t,e,r){let n=k1(t,r);if(!ui(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=wu(t.properties[o],e,n[o]);us(a)||(n[o]=wu(t.properties[o],e,n[o]))}if(!Bte(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=wu(t.additionalProperties,e,n[o]));return n}s(hut,"FromObject");function gut(t,e,r){let n=k1(t,r);if(!ui(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(n))l.test(c)&&Bte(a)&&(n[c]=wu(a,e,n[c]));if(!Bte(i))return n;for(let c of Object.getOwnPropertyNames(n))l.test(c)||(n[c]=wu(i,e,n[c]));return n}s(gut,"FromRecord");function Aut(t,e,r){return wu(Yi(t,e),e,k1(t,r))}s(Aut,"FromRef");function yut(t,e,r){return wu(Yi(t,e),e,r)}s(yut,"FromThis");function Cut(t,e,r){let n=k1(t,r);if(!yn(n)||us(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=wu(i[a],e,n[a]));return n}s(Cut,"FromTuple");function xut(t,e,r){let n=k1(t,r);for(let i of t.anyOf){let o=wu(i,e,Ji(n));if(pi(i,e,o))return o}return n}s(xut,"FromUnion");function wu(t,e,r){let n=kl(t,e),i=t;switch(i[Ze]){case"Array":return dut(i,n,r);case"Date":return fut(i,n,r);case"Import":return put(i,n,r);case"Intersect":return mut(i,n,r);case"Object":return hut(i,n,r);case"Record":return gut(i,n,r);case"Ref":return Aut(i,n,r);case"This":return yut(i,n,r);case"Tuple":return Cut(i,n,r);case"Union":return xut(i,n,r);default:return k1(i,r)}}s(wu,"Visit");function WM(...t){return t.length===3?wu(t[0],t[1],t[2]):wu(t[0],[],t[1])}s(WM,"Default");f();f();var vm={};d1(vm,{Delete:()=>but,Format:()=>s8,Get:()=>Iut,Has:()=>Eut,Set:()=>vut,ValuePointerRootDeleteError:()=>HM,ValuePointerRootSetError:()=>GM});f();var GM=class extends Cn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},HM=class extends Cn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function R2e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(R2e,"Escape");function*s8(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield R2e(t.slice(e,r))),e=n+1):r=n;yield R2e(t.slice(e))}s(s8,"Format");function vut(t,e,r){if(e==="")throw new GM(t,e,r);let[n,i,o]=[null,t,""];for(let a of s8(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(vut,"Set");function but(t,e){if(e==="")throw new HM(t,e);let[r,n,i]=[null,t,""];for(let o of s8(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(but,"Delete");function Eut(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of s8(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(Eut,"Has");function Iut(t,e){if(e==="")return t;let r=t;for(let n of s8(e)){if(r[n]===void 0)return;r=r[n]}return r}s(Iut,"Get");f();function Tut(t,e){if(!ui(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>_I(t[i],e[i]))}s(Tut,"ObjectType");function wut(t,e){return Cu(e)&&t.getTime()===e.getTime()}s(wut,"DateType");function _ut(t,e){return!yn(e)||t.length!==e.length?!1:t.every((r,n)=>_I(r,e[n]))}s(_ut,"ArrayType");function Sut(t,e){return!If(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>_I(r,e[n]))}s(Sut,"TypedArrayType");function Rut(t,e){return t===e}s(Rut,"ValueType");function _I(t,e){if(Cu(t))return wut(t,e);if(If(t))return Sut(t,e);if(yn(t))return _ut(t,e);if(ui(t))return Tut(t,e);if(i0(t))return Rut(t,e);throw new Error("ValueEquals: Unable to compare value")}s(_I,"Equal");var kut=ao({type:Ni("insert"),path:vu(),value:um()}),But=ao({type:Ni("update"),path:vu(),value:um()}),Dut=ao({type:Ni("delete"),path:vu()}),B2e=so([kut,But,Dut]),jM=class extends Cn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function VM(t,e){return{type:"update",path:t,value:e}}s(VM,"CreateUpdate");function D2e(t,e){return{type:"insert",path:t,value:e}}s(D2e,"CreateInsert");function P2e(t){return{type:"delete",path:t}}s(P2e,"CreateDelete");function k2e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new jM(t,"Cannot diff objects with symbols")}s(k2e,"AssertDiffable");function*Put(t,e,r){if(k2e(e),k2e(r),!NX(r))return yield VM(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)An(e,o)||(yield D2e(`${t}/${o}`,r[o]));for(let o of n)An(r,o)&&(_I(e,r)||(yield*$M(`${t}/${o}`,e[o],r[o])));for(let o of n)An(r,o)||(yield P2e(`${t}/${o}`))}s(Put,"ObjectType");function*Nut(t,e,r){if(!yn(r))return yield VM(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*$M(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield D2e(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield P2e(`${t}/${n}`))}s(Nut,"ArrayType");function*Lut(t,e,r){if(!If(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield VM(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*$M(`${t}/${n}`,e[n],r[n])}s(Lut,"TypedArrayType");function*Fut(t,e,r){e!==r&&(yield VM(t,r))}s(Fut,"ValueType");function*$M(t,e,r){if(NX(e))return yield*Put(t,e,r);if(yn(e))return yield*Nut(t,e,r);if(If(e))return yield*Lut(t,e,r);if(i0(e))return yield*Fut(t,e,r);throw new jM(e,"Unable to diff value")}s($M,"Visit");function N2e(t,e){return[...$M("",t,e)]}s(N2e,"Diff");function Mut(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(Mut,"IsRootUpdate");function Qut(t){return t.length===0}s(Qut,"IsIdentity");function L2e(t,e){if(Mut(e))return Ji(e[0].value);if(Qut(e))return Ji(t);let r=Ji(t);for(let n of e)switch(n.type){case"insert":{vm.Set(r,n.path,n.value);break}case"update":{vm.Set(r,n.path,n.value);break}case"delete":{vm.Delete(r,n.path);break}}return r}s(L2e,"Patch");f();function F2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=w1(e,r)?sS(e,r,n):n;if(!pi(e,r,i))throw new oS(e,i,lg(e,r,i).First());return i}s(F2e,"Encode");f();function zM(t){return ui(t)&&!yn(t)}s(zM,"IsStandardObject");var YM=class extends Cn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Out(t,e,r,n){if(!zM(r))vm.Set(t,e,Ji(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Dte(t,`${e}/${a}`,r[a],n[a])}}s(Out,"ObjectType");function Uut(t,e,r,n){if(!yn(r))vm.Set(t,e,Ji(n));else{for(let i=0;i<n.length;i++)Dte(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(Uut,"ArrayType");function qut(t,e,r,n){if(If(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else vm.Set(t,e,Ji(n))}s(qut,"TypedArrayType");function Wut(t,e,r,n){r!==n&&vm.Set(t,e,n)}s(Wut,"ValueType");function Dte(t,e,r,n){if(yn(n))return Uut(t,e,r,n);if(If(n))return qut(t,e,r,n);if(zM(n))return Out(t,e,r,n);if(i0(n))return Wut(t,e,r,n)}s(Dte,"Visit");function M2e(t){return If(t)||i0(t)}s(M2e,"IsNonMutableValue");function Gut(t,e){return zM(t)&&yn(e)||yn(t)&&zM(e)}s(Gut,"IsMismatchedValue");function Q2e(t,e){if(M2e(t)||M2e(e))throw new YM("Only object and array types can be mutated at the root level");if(Gut(t,e))throw new YM("Cannot assign due type mismatch of assignable values");Dte(t,"",t,e)}s(Q2e,"Mutate");f();var KM=class extends Cn{static{s(this,"ParseError")}constructor(e){super(e)}},Pte;(function(t){let e=new Map([["Assert",(o,a,l)=>(MM(o,a,l),l)],["Cast",(o,a,l)=>n8(o,a,l)],["Clean",(o,a,l)=>OM(o,a,l)],["Clone",(o,a,l)=>Ji(l)],["Convert",(o,a,l)=>qM(o,a,l)],["Decode",(o,a,l)=>w1(o,a)?iS(o,a,l):l],["Default",(o,a,l)=>WM(o,a,l)],["Encode",(o,a,l)=>w1(o,a)?sS(o,a,l):l]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Pte||(Pte={}));var O2e=["Clone","Clean","Default","Convert","Assert","Decode"];function Hut(t,e,r,n){return t.reduce((i,o)=>{let a=Pte.Get(o);if(us(a))throw new KM(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(Hut,"ParseValue");function U2e(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?yn(t[0])?[t[0],t[1],[],t[2]]:[O2e,t[0],t[1],t[2]]:t.length===2?[O2e,t[0],[],t[1]]:(()=>{throw new KM("Invalid Arguments")})();return Hut(e,r,n,i)}s(U2e,"Parse");f();var zx={};d1(zx,{Assert:()=>MM,Cast:()=>n8,Check:()=>pi,Clean:()=>OM,Clone:()=>Ji,Convert:()=>qM,Create:()=>Qf,Decode:()=>S2e,Default:()=>WM,Diff:()=>N2e,Edit:()=>B2e,Encode:()=>F2e,Equal:()=>_I,Errors:()=>lg,Hash:()=>Dx,Mutate:()=>Q2e,Parse:()=>U2e,Patch:()=>L2e,ValueErrorIterator:()=>Px});f();var jut={capabilities:{family:"gpt-3.5-turbo",object:"model_capabilities",supports:{streaming:!0},tokenizer:"cl100k_base",type:"completion"},id:"copilot-codex",model_picker_enabled:!0,name:"GPT-3.5 Turbo",object:"model",preview:!1,version:"copilot-codex"},Vut="gpt-4o-copilot",Of=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&Ds(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Vut}parseModelsResponse(e){try{return zx.Parse(n2e,e)}catch(r){Mr.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",e.getTokenValue("fcv1")=="1"?Promise.resolve([jut]):await this.fetch()}async fetch(){let e=await wI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(Mr.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=i2e(this._ctx);if(n){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(n)||(l.length>0&&Mr.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=Jr(this._ctx,ft.DebugOverrideEngine)||Jr(this._ctx,ft.DebugOverrideEngineLegacy);if(i)return new Yx(i,"override");let o=e?this._ctx.get(kt).customEngine(e):"",a=e?this._ctx.get(kt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new Yx(o,"exp"):new Yx(n,"modelpicker"):o?new Yx(o,"exp"):this.customModels.length>0?new Yx(this.customModels[0],"custommodel"):new Yx(r,"default")}},Yx=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Kx(t,e=void 0){let r=t.get(Of),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(Kx,"getEngineRequestInfo");f();f();var lo=class{static{s(this,"FileSystem")}};var iTe=Ve(nTe());function oTe(t){return t!==void 0&&t!==0}s(oTe,"isRepoInfo");function sTe(t){if(t===void 0||t===0)return"";let e=B1(t);if(e==="github/github")return e;let r=ydt(t)?.toLowerCase();return r!==void 0?r:""}s(sTe,"getDogFood");function B1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(B1,"tryGetGitHubNWO");function ydt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(ydt,"tryGetADONWO");function Jx(t,e){let r=hd(e);return Cdt(t,r)}s(Jx,"extractRepoInfoInBackground");var Cdt=Edt(xdt,1e4);async function xdt(t,e){let r=uM(e);if(!r)return;let n=await vdt(t,r);if(!n)return;let i=t.get(lo),o=bo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=bdt(a)??"",c=Mte(l),u={uri:n};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(xdt,"extractRepoInfo");function Mte(t){let e;try{if(e=(0,iTe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Mte,"parseRepoUrl");async function vdt(t,e){let r=e+"_add_to_make_longer",n=t.get(lo);for(;e!=="file:///"&&e.length<r.length;){let i=bo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=hd(e)}}s(vdt,"getRepoBaseUri");function bdt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(r);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(n);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(bdt,"getRepoUrlFromConfigText");var Fte=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function Edt(t,e){let r=new Kr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=r.get(a);if(l)return l.result;if(n.has(a))return 0;let c=t(i,...o);return n.add(a),c.then(u=>{r.set(a,new Fte(u)),n.delete(a)}),0}}s(Edt,"computeInBackgroundAndMemoize");f();f();f();f();var Idt={tokenizerName:"o200k_base"};function Tdt(t){return{...Idt,...t}}s(Tdt,"cursorContextOptions");function a8(t,e={}){let r=Tdt(e),n=Bo(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(a8,"getCursorContext");f();f();var wdt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function aTe(t){let e=wdt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(aTe,"announceSnippet");var Qte=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Ote=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=kdt.get(e.languageId)??Rdt}tokenize(e){return new Set(_dt(e).filter(r=>!this.stopsForLanguage.has(r)))}},lTe=new Qte(20),NS=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Ote(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=lTe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:d,endLine:p})}return l&&lTe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let l=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function _dt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(_dt,"splitIntoWords");var Sdt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Rdt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Sdt]),kdt=new Map([]);f();f();f();function Ute(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Ute,"virtualNode");function cTe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(cTe,"lineNode");function qte(t){return{type:"blank",lineNumber:t,subs:[]}}s(qte,"blankNode");function JM(t){return{type:"top",indentation:-1,subs:t??[]}}s(JM,"topNode");function hc(t){return t.type==="blank"}s(hc,"isBlank");function RI(t){return t.type==="line"}s(RI,"isLine");function kI(t){return t.type==="virtual"}s(kI,"isVirtual");function uTe(t,e){return Hc(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(uTe,"clearLabelsIf");function BI(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>BI(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>BI(r,e)),label:t.label?e(t.label):void 0}}}s(BI,"mapLabels");function Hc(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Hc,"visitTree");function Wte(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Hc(t,o,n),i}s(Wte,"foldTree");function XM(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:JM()}s(XM,"rebuildTree");f();function Ddt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,r[u]);return[cTe(r[u],u,n[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(qte(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<n.length&&n[c]==="";)a.push(qte(c)),c+=1;if(c<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${n.length}`);return JM(a)}s(Ddt,"parseRaw");function l8(t,e){function r(n){if(RI(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Hc(t,r,"bottomUp")}s(l8,"labelLines");function ZM(t){function e(r){if(kI(r)&&r.label===void 0){let n=r.subs.filter(i=>!hc(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Hc(t,e,"bottomUp")}s(ZM,"labelVirtualInherited");function c8(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(c8,"buildLabelRules");function Gte(t){let r=XM(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let l=n.subs[a],c=n.subs[a-1];if(l.label==="opener"&&c!==void 0&&RI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(RI(l)||kI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&hc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Ute(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),hc(l)||(o=l)}return n.subs=i,n},"rebuilder"));return uTe(t,n=>n==="newVirtual"),r}s(Gte,"combineClosersAndOpeners");function dTe(t,e=hc,r){return XM(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=Ute(l,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),hc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(dTe,"groupBlocks");function DI(t){return XM(t,s(function(r){return kI(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&kI(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(DI,"flattenVirtual");var Pdt={opener:/^[[({]/,closer:/^[\])}]/},Ndt=c8(Pdt),fTe={};function Hte(t,e){fTe[t]=e}s(Hte,"registerLanguageSpecificParser");function u8(t,e){let r=Ddt(t),n=fTe[e??""];return n?n(r):(l8(r,Ndt),Gte(r))}s(u8,"parseTree");function eQ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(eQ,"getBasicWindowDelineations");var tQ=class t extends NS{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return eQ(this.windowLength,e)}_getCursorContextInfo(e){return a8(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return Ldt(e,r)}};function Ldt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(Ldt,"computeScore");f();f();var rQ=Ve(pTe());var Vte={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function g0(t){return t in Vte&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(g0,"isSupportedLanguageId");function nQ(t){if(!(t in Vte))throw new Error(`Unrecognized language: ${t}`);return Vte[t]}s(nQ,"languageIdToWasmLanguage");var jte=new Map;async function Fdt(t){let e;try{e=await SM(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new DS(`Could not load tree-sitter-${t}.wasm`,r):r}return rQ.default.Language.load(e)}s(Fdt,"loadWasmLanguage");function Mdt(t){let e=nQ(t);if(!jte.has(e)){let r=Fdt(e);jte.set(e,r)}return jte.get(e)}s(Mdt,"getLanguage");var $te=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function D1(t,e){await rQ.default.init({locateFile:s(o=>Ate(o),"locateFile")});let r;try{r=new rQ.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new $te(`Could not init Parse for language <${t}>`,o):o}let n=await Mdt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(D1,"parseTreeSitter");function mTe(t){switch(nQ(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(mTe,"getBlockCloseToken");function Qdt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(Qdt,"innerQuery");var Odt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function hTe(t){return Qdt([Odt],t).length==1}s(hTe,"queryPythonIsDocstring");var iQ=class t extends NS{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return eQ(this.windowLength,e)}_getCursorContextInfo(e){return a8(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):a8(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return Udt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await D1(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function Udt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(Udt,"computeScore");var qdt=0,Wdt=60,Gdt=4,Hdt=1,jdt=20,Vdt=1e4,d8={snippetLength:Wdt,threshold:qdt,maxTopSnippets:Gdt,maxCharPerFile:Vdt,maxNumberOfFiles:jdt,maxSnippetsPerFile:Hdt,useSubsetMatching:!1};var oQ={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function $dt(t,e){return(e.useSubsetMatching?iQ.FACTORY(e.snippetLength):tQ.FACTORY(e.snippetLength)).to(t)}s($dt,"getMatcher");async function gTe(t,e,r){let n=$dt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(gTe,"getSimilarSnippets");var f8=500,p8=8192-f8,ATe=4;var sQ=10,aQ=15;var zdt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function m8(t){return t=t.toLowerCase(),zdt[t]??t}s(m8,"normalizeLanguageId");var zte=class{constructor(e){this.ctx=e;this.cache=new Kr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Yte(()=>this.ctx.get(ym).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Yte=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function Kdt(t){return"uri"in t}s(Kdt,"isCompletionsFiltersInfo");var kt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new zte(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=an.createAndMarkAsIssued(),n=void 0){if(r instanceof fg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&Kdt(e)?Jx(this.ctx,e.uri):void 0,o=B1(i)??"",a=sTe(i)??"",l=e?.languageId??"",c=Kx(this.ctx).modelId;n??=await this.ctx.get(Qr).getToken();let u=DIe(n),d=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),B=k.newFilterSettings,N=await this.getExpConfig(B,g),W=new Promise(ee=>setTimeout(ee,t.upcomingDynamicFilterCheckDelayMs));for(let ee of k.otherFilterSettingsToPrefetch)W=W.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(ee,g)});return this.prepareForUpcomingFilters(B,g),new fg(r.properties,r.measurements,r.issuedTime,{filters:B,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Bs).machineId;this.granularityDirectory=new bM(e,this.ctx.get(mg))}return this.granularityDirectory}makeFilterSettings(e){return new nI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return xf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new nI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=dM(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??aQ}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??sQ}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??p8+f8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}ideEnableCopilotNewBilling(e){return e.filtersAndExp.exp.variables.ideenablecopilotnewbilling??!1}recentEditsInPrompt(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinprompt??!1}recentEditsEditCount(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditcount??5}recentEditsMaxFiles(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxfiles??5}recentEditsContextLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditscontextlines??3}recentEditsEditMergeLineDistance(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditmergelinedistance??3}recentEditsRemoveDeletedLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditsremovedeletedlines??!1}recentEditsInsertionsBeforeDeletions(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinsertionsbeforedeletions??!1}recentEditsAppendNoReplyMarker(e){return e.filtersAndExp.exp.variables.copilotrecenteditsappendnoreplymarker??!1}recentEditsMaxLinesBetweenEdits(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesbetweenedits??100}recentEditsActiveDocDistanceLimitFromCursor(e){return e.filtersAndExp.exp.variables.copilotrecenteditsactivedocdistancelimitfromcursor??100}recentEditsMaxLinesPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesperedit??10}recentEditsMaxCharsPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxcharsperedit??2e3}recentEditsSummarizationFormat(e){return e.filtersAndExp.exp.variables.copilotrecenteditsummarizationformat??"diff"}recentEditsDebounceTimeout(e){return e.filtersAndExp.exp.variables.copilotrecenteditsdebouncetimeout??500}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}completionsElisionStrategy(e){switch(e.filtersAndExp.exp.variables.copilotcompletionselisionstrategy??""){case"elidableText":return"elidableText";case"elidableTextWithoutChunks":return"elidableTextWithoutChunks";default:return"wishlist"}}approximateElision(e){return e.filtersAndExp.exp.variables.copilotapproximateelision??!1}beforeCursorLines(e){return e.filtersAndExp.exp.variables.copilotbeforecursorlines??60}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}};f();var Ag=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),l=n?`
${r}${a}+- `:"";return i+this.description+l}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},jc=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return h8.languageIds.has(e)||g8.languageIds.has(e)||A8.languageIds.has(e)||y8.languageIds.has(e)||C8.languageIds.has(e)||x8.languageIds.has(e)||v8.languageIds.has(e)||b8.languageIds.has(e)}static create(e,r,n,i){if(h8.languageIds.has(e))return new h8(e,r,n,i);if(g8.languageIds.has(e))return new g8(e,r,n,i);if(A8.languageIds.has(e))return new A8(e,r,n,i);if(x8.languageIds.has(e))return new x8(e,r,n,i);if(y8.languageIds.has(e))return new y8(e,r,n,i);if(C8.languageIds.has(e))return new C8(e,r,n,i);if(v8.languageIds.has(e))return new v8(e,r,n,i);if(b8.languageIds.has(e))return new b8(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await D1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Kte=class t extends Ag{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},h8=class extends jc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Kte(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Jte=class t extends Ag{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},g8=class extends jc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Jte(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Xte=class t extends Ag{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},A8=class extends jc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Xte(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Zte=class t extends Ag{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},y8=class extends jc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Zte(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},ere=class t extends Ag{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},C8=class extends jc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new ere(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},tre=class t extends Ag{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},x8=class extends jc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new tre(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},rre=class t extends Ag{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},v8=class extends jc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new rre(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},nre=class t extends Ag{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},b8=class extends jc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new nre(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var ire={};d1(ire,{activationEvents:()=>g0t,badges:()=>h0t,browser:()=>A0t,bugs:()=>a0t,build:()=>t0t,buildType:()=>r0t,categories:()=>p0t,contributes:()=>ore,default:()=>I0t,dependencies:()=>b0t,description:()=>Zdt,devDependencies:()=>v0t,displayName:()=>Xdt,enabledApiProposals:()=>C0t,engines:()=>f0t,extensionPack:()=>d0t,homepage:()=>o0t,icon:()=>c0t,keywords:()=>m0t,license:()=>s0t,main:()=>y0t,name:()=>Jdt,overrides:()=>E0t,preview:()=>i0t,pricing:()=>u0t,publisher:()=>n0t,qna:()=>l0t,scripts:()=>x0t,version:()=>e0t});var Jdt="copilot",Xdt="GitHub Copilot",Zdt="Your AI pair programmer",e0t="1.336.0",t0t="1633",r0t="prod",n0t="GitHub",i0t=!1,o0t="https://github.com/features/copilot?editor=vscode",s0t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",a0t={url:"https://github.com/microsoft/vscode-copilot-release/issues"},l0t="https://github.com/github-community/community/discussions/categories/copilot",c0t="assets/Copilot-App-Icon.png",u0t="Trial",d0t=["GitHub.copilot-chat","GitHub.copilot"],f0t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},p0t=["AI","Chat","Programming Languages","Machine Learning"],m0t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],h0t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],g0t=["onStartupFinished"],A0t="./dist/web",y0t="./dist/extension",C0t=["inlineCompletionsAdditions"],ore={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completion Model"__ command or open the model picker from the Copilot menu. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers)"},"github.copilot.inlineSuggest.enable":{type:"boolean",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Show inline suggestions"},"github.copilot.editor.enableAutoCompletions":{type:"boolean",scope:"language-overridable",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Automatically show inline completions"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},x0t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},v0t={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},b0t={"@adobe/helix-fetch":"github:devm33/helix-fetch#1088e599270f36632703f138d88c2100cbe468db","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},E0t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},I0t={name:Jdt,displayName:Xdt,description:Zdt,version:e0t,build:t0t,buildType:r0t,publisher:n0t,preview:i0t,homepage:o0t,license:s0t,bugs:a0t,qna:l0t,icon:c0t,pricing:u0t,extensionPack:d0t,engines:f0t,categories:p0t,keywords:m0t,badges:h0t,activationEvents:g0t,browser:A0t,main:y0t,enabledApiProposals:C0t,contributes:ore,scripts:x0t,devDependencies:v0t,dependencies:b0t,overrides:E0t};var ft={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",UseAsyncCompletions:"internal.useAsyncCompletions",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",RecentEditsInPrompt:"internal.recentEditsInPrompt",RecentEditsEditCount:"internal.recentEditsEditCount",RecentEditsMaxFiles:"internal.recentEditsMaxFiles",RecentEditsContextLines:"internal.recentEditsContextLines",RecentEditsEditMergeLineDistance:"internal.recentEditsEditMergeLineDistance",RecentEditsRemoveDeletedLines:"internal.recentEditsRemoveDeletedLines",InsertionsBeforeDeletions:"internal.recentEditsInsertionsBeforeDeletions",RecentEditsAppendNoReplyMarker:"internal.recentEditsAppendNoReplyMarker",RecentEditsMaxLinesBetweenEdits:"internal.recentEditsMaxLinesBetweenEdits",RecentEditsActiveDocDistanceLimitFromCursor:"internal.recentEditsActiveDocDistanceLimitFromCursor",RecentEditsSummarizationFormat:"internal.recentEditsSummarizationFormat",RecentEditsMaxLinesPerEdit:"internal.recentEditsMaxLinesPerEdit",RecentEditsMaxCharsPerEdit:"internal.recentEditsMaxCharsPerEdit",RecentEditsDebounceTimeout:"internal.recentEditsDebounceTimeout",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt"};function xTe(t){return["server","parsingandserver"].includes(t)}s(xTe,"shouldDoServerTrimming");var bm=class{static{s(this,"BlockModeConfig")}},MS=class extends bm{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(kt).overrideBlockMode(n);if(i)return yTe(i,r);let o=e.get(kt).enableProgressiveReveal(n);return Jr(e,ft.AlwaysRequestMultiline)??o?yTe("moremultiline",r):r=="ruby"?"parsing":g0(r)?"parsingandserver":"server"}};function T0t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(T0t,"blockModeRequiresTreeSitter");function yTe(t,e){return t==="moremultiline"&&jc.isSupported(e)?t:T0t(t)&&!g0(e)?"server":t}s(yTe,"toApplicableBlockMode");var yg=class{static{s(this,"ConfigProvider")}},QS=class extends yg{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return _0t(e)}getOptionalConfig(e){return S0t(e)}dumpForTelemetry(){return{}}},PI=class extends yg{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[ft.ShowEditorCompletions,ft.EnableAutoCompletions,ft.DelayCompletions,ft.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function w0t(t){return t?.type==="object"&&"properties"in t}s(w0t,"isContributesObject");function vTe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(vTe,"getConfigKeyRecursively");function _0t(t){if(LS.has(t))return LS.get(t);throw new Error(`Missing config default value: ${mB}.${t}`)}s(_0t,"getConfigDefaultForKey");function S0t(t){return LS.get(t)}s(S0t,"getOptionalConfigDefaultForKey");var LS=new Map([[ft.DebugOverrideCppHeadersEnableSwitch,!1],[ft.RelatedFilesVSCodeCSharp,!1],[ft.RelatedFilesVSCodeTypeScript,!1],[ft.RelatedFilesVSCode,!1],[ft.IncludeNeighboringFiles,!1],[ft.ExcludeRelatedFiles,!1],[ft.ContextProviders,[]],[ft.DebugUseEditorFetcher,null],[ft.DebugUseElectronFetcher,null],[ft.DebugOverrideLogLevels,{}],[ft.DebugSnippyOverrideUrl,""],[ft.FetchStrategy,"auto"],[ft.UseSubsetMatching,null],[ft.ContextProviderTimeBudget,void 0],[ft.DebugOverrideCapiUrl,""],[ft.DebugTestOverrideCapiUrl,""],[ft.DebugOverrideProxyUrl,""],[ft.DebugTestOverrideProxyUrl,""],[ft.DebugOverrideEngine,""],[ft.UseAsyncCompletions,void 0],[ft.EnableSpeculativeRequests,void 0],[ft.AlwaysRequestMultiline,void 0],[ft.ModelAlwaysTerminatesSingleline,void 0],[ft.TrimCompletionsAggressively,void 0],[ft.VSCodeDebounceThreshold,void 0],[ft.RecentEditsInPrompt,void 0],[ft.RecentEditsEditCount,void 0],[ft.RecentEditsMaxFiles,void 0],[ft.RecentEditsContextLines,void 0],[ft.RecentEditsEditMergeLineDistance,void 0],[ft.RecentEditsRemoveDeletedLines,void 0],[ft.InsertionsBeforeDeletions,void 0],[ft.RecentEditsAppendNoReplyMarker,void 0],[ft.RecentEditsMaxLinesBetweenEdits,void 0],[ft.RecentEditsActiveDocDistanceLimitFromCursor,void 0],[ft.RecentEditsSummarizationFormat,void 0],[ft.RecentEditsMaxLinesPerEdit,void 0],[ft.RecentEditsMaxCharsPerEdit,void 0],[ft.RecentEditsDebounceTimeout,void 0],[ft.MultilineAfterAccept,void 0],[ft.NESXTab,void 0],[ft.UseWorkspaceContextCoordinator,void 0],[ft.CompletionsDelay,void 0],[ft.UseSplitContextPrompt,void 0],[ft.ShowEditorCompletions,void 0],[ft.DelayCompletions,void 0],[ft.FilterCompletions,void 0]]);for(let t of Object.values(ft)){let e=ore.configuration[0],r=[],n=`${mB}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(w0t(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(LS.has(t))throw new Error(`Duplicate config default value ${mB}.${t}`);LS.set(t,i.default)}}if(!LS.has(t))throw new Error(`Missing config default value ${mB}.${t}`)}function Jr(t,e){return t.get(yg).getConfig(e)}s(Jr,"getConfig");function uIe(t){return t.get(yg).dumpForTelemetry()}s(uIe,"dumpForTelemetry");var po=class{constructor(){this.packageJson=ire}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function fM(t){return t.get(po).isProduction()}s(fM,"isProduction");function JIe(t){return t.get(po).getBuildType()==="dev"}s(JIe,"isDevBuild");function Nf(t){return t.get(po).getBuildType()}s(Nf,"getBuildType");function dIe(t){return t.get(po).getBuild()}s(dIe,"getBuild");function vI(t){return t.get(po).getVersion()}s(vI,"getVersion");var Bs=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function tg({name:t,version:e}){return`${t}/${e}`}s(tg,"formatNameAndVersion");var fn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},bf="2025-05-01";function r0(t){let e=t.get(fn);return{"Editor-Version":tg(e.getEditorInfo()),"Editor-Plugin-Version":tg(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":vI(t)}}s(r0,"editorVersionHeaders");var CTe="Iv1.b507a08c87ecfe98",_a=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??CTe}fallbackAppId(){return CTe}};f();f();f();var NI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var bTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],ETe={".php":[".blade"]},E8=Object.keys(NI).flatMap(t=>NI[t].extensions);var sre=Ve(require("node:path"));var US=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},I8=class{static{s(this,"LanguageDetection")}},are=new Map,OS=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(NI)){for(let n of e)are.set(n,[...are.get(n)??[],t]);for(let n of r??[])OS.set(n,[...OS.get(n)??[],t])}var lre=class extends I8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Ti(e.uri),n=sre.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new US(o.languageId,o.isGuess,a):new US(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(bTe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=sre.extname(n).toLowerCase();if(i.length>0&&E8.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=ETe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(OS.has(e))return{languageId:OS.get(e)[0],isGuess:!1};let n=are.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),OS.has(e))return{languageId:OS.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},cre=class extends I8{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new US("cpp",n.isGuess,n.fileExtension):n}},ure=class extends I8{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new US(r.languageId,!0,""):this.delegate.detectLanguage(r)}},R0t=new cre(new ure(new lre));function Xx({uri:t,languageId:e}){let r=R0t.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(Xx,"detectLanguage");f();f();f();f();function P1(t){if(t.isCancellationRequested)throw new lQ}s(P1,"throwIfCancellationRequested");function uQ(t){return t instanceof lQ?!0:t instanceof Error&&t.name===dre&&t.message===dre}s(uQ,"isCancellationError");var lQ=class extends Error{static{s(this,"CancellationError")}constructor(){super(dre),this.name=this.message}},dre="Canceled",cQ=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function LI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(LI,"isTypeDefinition");var Zo=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=TTe(e,e.length,i),ITe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=TTe(e,e.length,++i),ITe(n,r)):i++;return n.join("")}};function ITe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(ITe,"appendIndent");function TTe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(TTe,"consumeIndent");var Uf=class{constructor(e,r,n,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ka=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await D1(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new cQ,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,r,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=Zo.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(n):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=n.length,c=m);let y=Zo.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Uf(r,"","",Zo.fromBounds(o,a),Zo.fromBounds(u,d),Zo.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(n),E=this.createNameFromScopes(n,e.toArray());return E=g?`${g}.${E}`:E,new Uf(r,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var dQ=class extends Ka{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,k0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},fQ=class extends Ka{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,D0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,P0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},pQ=class extends Ka{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,B0t),i=new Set;try{n.matches.forEach(o=>{let a,l,c;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?l=u:u.name==="import"&&(c=u);if(a&&c){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d,p-d),h=new Zo(c.node.startIndex,c.node.endIndex-c.node.startIndex),g=Zo.empty,y=Zo.empty,v=u.substring(u.lastIndexOf("/")+1);i.add(new Uf(e,u,v,g,m,y,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},k0t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,B0t=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,D0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,P0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var hQ=class extends Ka{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,N0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},gQ=class extends Ka{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,F0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,M0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},AQ=class extends Ka{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,L0t)).filter(i=>i.kind===0)}},N0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,L0t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,F0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,M0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var Q0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),yQ=class extends Ka{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,O0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},CQ=class extends Ka{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,U0t)).filter(i=>!Q0t.has(i.unqualifiedName))}};var O0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,U0t=`
(call_expression function: (_) @name) @reference
`;f();var q0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),xQ=class extends Ka{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,W0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},vQ=class extends Ka{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,G0t)).filter(i=>!q0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,j0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},bQ=class extends Ka{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,H0t),i=new Set;try{n.matches.forEach(o=>{let a,l,c,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=a||c,p=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new Zo(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Zo.empty,g=Zo.empty,y=d.node.text,v=y.split(".").pop()||y,b;a?b=`${c.node.text}.${a.node.text}`:b=c.node.text,i.add(new Uf(e,b,v,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},W0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,G0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,H0t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,j0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var V0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),qS=class extends Ka{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,$0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},WS=class extends Ka{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,z0t)).filter(i=>!V0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var $0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,z0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var Y0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),EQ=class extends qS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,K0t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},IQ=class extends WS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,J0t),super.extractReferences(e,r)]);return[...n.filter(o=>!Y0t.has(o.unqualifiedName)),...i]}},K0t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,J0t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var T8=[{symbolExtractor:new hQ,referenceExtractor:new gQ,importExtractor:new AQ,languageId:"java"},{symbolExtractor:new dQ,referenceExtractor:new fQ,importExtractor:new pQ,languageId:"go"},{symbolExtractor:new xQ,referenceExtractor:new vQ,importExtractor:new bQ,languageId:"python"},{symbolExtractor:new qS,referenceExtractor:new WS,languageId:"typescript"},{symbolExtractor:new EQ,referenceExtractor:new IQ,languageId:"typescriptreact"},{symbolExtractor:new yQ,referenceExtractor:new CQ,languageId:"javascript"}];function wTe(t){let e=Xx({uri:t});if(e&&T8.some(r=>e===r.languageId))return e}s(wTe,"getSupportedLanguageIdForMultiLanguageProvider");var _Te=new Map(T8.map(t=>[t.languageId,t.referenceExtractor])),TQ=new Map(T8.map(t=>[t.languageId,t.symbolExtractor])),STe=new Map(T8.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),fre=T8.map(t=>NI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();var X0t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},Z0t=c8(X0t);function RTe(t){let e=t;return l8(e,Z0t),e=Gte(e),e=DI(e),ZM(e),Hc(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!hc(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(RTe,"processJava");f();var eft={heading:/^# /,subheading:/^## /,subsubheading:/### /},tft=c8(eft);function kTe(t){let e=t;if(l8(e,tft),hc(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||hc(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=dTe(e),e=DI(e),ZM(e),e}s(kTe,"processMarkdown");f();function BTe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(BTe,"deparseLine");Hte("markdown",kTe);Hte("java",RTe);var rft={worthUp:.9,worthSibling:.88,worthDown:.8};function pre(t,e,r=Bo(),n=rft){let i=BI(t,o=>o?1:void 0);return Hc(i,o=>{if(hc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Hc(i,o=>{if(hc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,n.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),nft(i,e,r)}s(pre,"fromTreeWithFocussedLines");function nft(t,e,r=Bo()){let n=Wte(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[BTe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new St(n,e,r)}s(nft,"fromTreeWithValuedLines");function _u(t,e=!0,r=!0,n,i=Bo()){let o=typeof t=="string"?u8(t):u8(t.source,t.languageId);DI(o);let a=BI(o,l=>e&&l!=="closer");return Hc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Hc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),r&&Hc(a,l=>{l.label||=(RI(l)||hc(l))&&l.lineNumber==0},"topDown"),pre(a,n,i)}s(_u,"elidableTextForSourceCode");f();var w8=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Bo().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var S8="elidableTextChunk",St=class t{constructor(e,r,n=Bo()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new w8(c,a,n.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&_u(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Bo().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u,chunksToLinesMap:d}=oft(this.lines,i);if(c<=e)return mre(l);sft(u,a);let p=c;for(;p>e&&u.length>0;){let h=u.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;p=lft(l,h,g,d,r,p);let v=n?aft(l,h):"",b=DTe(v,r,o,g);l[h]=b,p-=g.cost,p+=b.cost;let E=h+1;if(E<l.length){let k=l[E];_8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}let _=h-1;if(_>=0){let k=l[_];_8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}}if(p>e)return mre([DTe("",r,o)]);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)_8(m[h],r)&&_8(m[h-1],r)&&m.splice(h,1);return mre(m)}};function ift(t){return t?.text.match(/^\s*/)?.[0]??""}s(ift,"getIndentation");function _8(t,e){return t?.text.trim()===e.trim()}s(_8,"isEllipsis");function mre(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(mre,"produceElidedText");function oft(t,e){let r=0,n=[],i=new Map;return{lines:t.map((a,l)=>{let c=a.copy();e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:l,value:c.value});let u=c.metadata?.get(S8);if(u)for(let d of u)i.has(d)||i.set(d,new Set),i.get(d).add(l);return c}),totalCost:r,priorityQueue:n,chunksToLinesMap:i}}s(oft,"initializeElisionContext");function sft(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(sft,"sortPriorityQueue");function aft(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=ift(i);break}}return r}s(aft,"getClosestIndentation");function DTe(t,e,r,n){let i=t+e;return new w8(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(DTe,"getNewEllipsis");function lft(t,e,r,n,i,o){let a=r.metadata?.get(S8);if(a&&a.size>0){let l=new Set;for(let c of a){let u=n.get(c);if(u)for(let d of u)d!==e&&!t[d].markedForRemoval&&l.add(d)}for(let c of l){let u=t[c];if(!_8(u,i)&&!u.markedForRemoval){let d=u.metadata?.get(S8);d&&d.size>0&&[...a].every(p=>d.has(p))&&(u.markedForRemoval=!0,o-=u.cost)}}}return o}s(lft,"handleChunks");f();f();function Em(){}s(Em,"Diff");Em.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var c=r.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(PTe(a,g[0].lastComponent,r,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var B=void 0,N=g[k-1],W=g[k+1];N&&(g[k-1]=void 0);var ee=!1;if(W){var me=W.oldPos-k;ee=W&&0<=me&&me<c}var ae=N&&N.oldPos+1<u;if(!ee&&!ae){g[k]=void 0;continue}if(!ae||ee&&N.oldPos<W.oldPos?B=a.addToPath(W,!0,!1,0,i):B=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(B,r,e,k,i),B.oldPos+1>=u&&y+1>=c)return l(PTe(a,B.lastComponent,r,e,a.useLongestToken));g[k]=B,B.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,l=n.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(n[c+1],r[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function PTe(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(n.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(PTe,"buildValues");var uTr=new Em;function NTe(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(NTe,"longestCommonPrefix");function LTe(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(LTe,"longestCommonSuffix");function hre(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s(hre,"replacePrefix");function gre(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(gre,"replaceSuffix");function R8(t,e){return hre(t,e,"")}s(R8,"removePrefix");function wQ(t,e){return gre(t,e,"")}s(wQ,"removeSuffix");function FTe(t,e){return e.slice(0,cft(t,e))}s(FTe,"maximumOverlap");function cft(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=r;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(cft,"overlapCount");var _Q="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",uft=new RegExp("[".concat(_Q,"]+|\\s+|[^").concat(_Q,"]"),"ug"),SQ=new Em;SQ.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};SQ.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(uft)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};SQ.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};SQ.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&MTe(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&MTe(r,i,n,null),t};function MTe(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],l=r.value.match(/\s*$/)[0];if(t){var c=NTe(i,a);t.value=gre(t.value,a,c),e.value=R8(e.value,c),r.value=R8(r.value,c)}if(n){var u=LTe(o,l);n.value=hre(n.value,l,u),e.value=wQ(e.value,u),r.value=wQ(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var d=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=NTe(d,p);e.value=R8(e.value,h);var g=LTe(R8(d,h),m);e.value=wQ(e.value,g),n.value=hre(n.value,d,g),t.value=gre(t.value,d,d.slice(0,d.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=FTe(v,y);e.value=wQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=FTe(E,_);e.value=R8(e.value,k)}}s(MTe,"dedupeWhitespaceInChangeObjects");var dft=new Em;dft.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(_Q,"]+|[^\\S\\n\\r]+|[^").concat(_Q,"]"),"ug");return t.match(e)||[]};var xre=new Em;xre.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};xre.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Em.prototype.equals.call(this,t,e,r)};var fft=new Em;fft.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var pft=new Em;pft.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Are(t){"@babel/helpers - typeof";return Are=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Are(t)}s(Are,"_typeof");var k8=new Em;k8.useLongestToken=!0;k8.tokenize=xre.tokenize;k8.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(yre(t,null,null,i),i,"  ")};k8.equals=function(t,e,r){return Em.prototype.equals.call(k8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function yre(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=yre(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),Are(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=yre(t[c],e,r,n,c);e.pop(),r.pop()}else a=t;return a}s(yre,"canonicalize");var Cre=new Em;Cre.tokenize=function(t){return t.slice()};Cre.join=Cre.removeEmpty=function(t){return t};var QTe=require("fs");async function OTe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;P1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await hft([y])).elide(b).getText();l-=n.tokenLength(E),u.push({uri:h,value:E})}}return u}s(OTe,"symbolRangesToCodeSnippets");async function hft(t){if(t.length===0)return new St([]);let e=t[0].node.fileName,r=[],n="";try{let i=Wo(e);i&&(n=(await QTe.promises.readFile(i)).toString())}catch{}for(let i of t)UTe(i,n).forEach(o=>r.push(o));return new St(r)}s(hft,"sameFileSymbolRangeToElidableText");function UTe(t,e){let n=[],i=t.node,o=e.substring(vre(e,i.commentRange.start),i.commentRange.end);n.push([bre(o),1-3e-4]);let a=vre(e,i.bodyRange.start),l=vre(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(LI(i.kind)&&(c="BEGIN "+c.trimStart()),n.push([bre(c),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...UTe(u,e));else{let u=1-(LI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);n.push([bre(d),u])}return LI(i.kind)&&n.push(["END "+c.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(UTe,"prepareForElidableText");function vre(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(vre,"shiftLeftToNearestLineEndingOrAlphanumeric");function bre(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(bre,"trimLineEndingsAndTrailingWhitespace");var Ere=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},Zx=class extends Ere{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];P1(a);let c=await l.extractReferences(e,r);P1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>LI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(d.length+m.length>r.mlcpMaxContextItems){d.push(...m.slice(0,r.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,r){if(P1(r),LI(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),l=Math.abs(r.extentRange.start-n);return a-l}},RQ=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new Zx(e,r,!0,!0)),this.strategies.set("java",new Zx(e,r,!0,!0)),this.strategies.set("python",new Zx(e,r,!0,!1)),this.strategies.set("typescript",new Zx(e,r,!0,!0)),this.strategies.set("typescriptreact",new Zx(e,r,!0,!0)),this.strategies.set("javascript",new Zx(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,l){let c=await this.getContextAtPositionAsync(e,r,n,i,o,l);P1(l);let u=Bo();return OTe(c,a,e,u,l)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};f();f();f();f();var FI={Id:"id"},A0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Li={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var kQ=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new Ire(FI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},B8=class t extends kQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${A0.FilePath}');`]);this.fields=[new N8(A0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Cd(A0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},D8=class t extends kQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Li.DocumentId}', '${Li.ExtentStart}', '${Li.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Li.UnqualifiedName}');`],`FOREIGN KEY(${Li.DocumentId}) REFERENCES Document(${FI.Id}) ON DELETE CASCADE`);this.fields=[new Cd(Li.DocumentId),new N8(Li.FullyQualifiedName,{notNull:!0}),new N8(Li.UnqualifiedName,{notNull:!0}),new Cd(Li.CommentStart,{notNull:!0}),new Cd(Li.CommentLength,{notNull:!0}),new Cd(Li.NameStart,{notNull:!0}),new Cd(Li.NameLength,{notNull:!0}),new Cd(Li.BodyStart,{notNull:!0}),new Cd(Li.BodyLength,{notNull:!0}),new Cd(Li.ExtentStart,{notNull:!0}),new Cd(Li.ExtentLength,{notNull:!0}),new Cd(Li.SymbolKind,{notNull:!0}),new Cd(Li.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},P8=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},N8=class extends P8{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},Cd=class extends P8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Ire=class extends P8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var BQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?qf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return qf(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${FI.Id} = ?`,[e])}},N1=class t extends BQ{static{s(this,"DocumentTable")}static{this.tableName=B8.tableName}createQueryGenerator(){return new B8}async updateTimestamp(e,r){let n=await this.init;n&&await qf(n,`UPDATE ${t.tableName} SET ${A0.LastWriteTimeUtc} = ? WHERE ${A0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await qf(r,`DELETE FROM ${t.tableName} WHERE ${A0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?qf(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${A0.FilePath} = ?`,[e]):[]}},Ja=class t extends BQ{static{s(this,"SymbolTable")}static{this.tableName=D8.tableName}createQueryGenerator(){return new D8}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return qf(r,`DELETE FROM ${t.tableName} WHERE ${Li.DocumentId} = ?`,[e])}};async function qf(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(qf,"runPromisifiedDBQuery");var NQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${N1.tableName} ON ${Ja.tableName}.${Li.DocumentId} = ${N1.tableName}.${FI.Id}`;this.db=this.initDb(e),this.documentTable=new N1(this.db),this.symbolTable=new Ja(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ve(XTe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await qf(n,"pragma journal_mode=wal",[]),await qf(n,"pragma synchronous=normal",[]),await qf(n,"pragma optimize=0x10002",[]),await qf(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Li.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${A0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} <= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${A0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} >= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) <= ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${A0.FilePath} = ? AND ${Ja.tableName}.${Li.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,qf(n,e,r)):[]}};var LQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new NQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return jS(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,r);i.push(...c),P1(n)}return jS(i)}async getDefinitionsAsync(e){return jS(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return jS(n)}async findSymbolsContainedByRangeAsync(e,r,n){return jS(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return jS(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function jS(t){return t.map(e=>new Uf(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Zo(e.commentStart,e.commentLength),new Zo(e.nameStart,e.nameLength),new Zo(e.bodyStart,e.bodyLength),new Zo(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(jS,"symbolsToSymbolRanges");var MQ=Ve(require("fs/promises"));var FQ=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new LQ(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=Wo(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await MQ.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.get(r);if(!l)return;let c=(await MQ.readFile(n)).toString(),u=await l.extractSymbols(e,c),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,c);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function kre(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>bft(r))}s(kre,"isIndexWorkerData");var F8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},ev=class extends F8{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},QQ=class extends F8{constructor(r){super(Vc.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},Vc={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},OQ=class extends ev{constructor(r,n,i){super(r,Vc.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},UQ=class extends ev{constructor(r,n){super(r,Vc.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},qQ=class extends ev{constructor(r,n,i){super(r,Vc.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},WQ=class extends ev{constructor(r,n){super(r,Vc.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},GQ=class extends ev{constructor(r,n,i,o,a,l){super(r,Vc.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},HQ=class extends ev{static{s(this,"ExitRequest")}constructor(e){super(e,Vc.Exit)}},Im=class extends F8{constructor(r,n,i){super(Vc.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function bft(t){return"databaseFilePath"in t&&"rootPath"in t}s(bft,"isIndexableWorkspaceFolder");var ZTe=Ve(ii()),tv=require("worker_threads");var jQ=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new FQ(e,TQ,STe,r),this.contextRetreival=new RQ(this.index.reader,_Te)}},Bre=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=aa(i.rootPath);this.indices.set(o,new jQ(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new ZTe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case Vc.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case Vc.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case Vc.Cancel:n.get(e.id)?.cancel(),o=new Im(e.id,void 0,void 0);break;case Vc.Exit:o=await this.dispatchExit(e,r,i.token);break;case Vc.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case Vc.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case Vc.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Im(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=aa(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Im(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Im(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Im(e.id,a,l)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new Im(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new jQ(e.databaseFilePath)),new Im(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new Im(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function ewe(){return kre(tv.workerData)}s(ewe,"isIndexWorker");function twe(){let t=tv.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!kre(tv.workerData))throw new Error("Worker data must provide a valid database path.");let e=tv.workerData.cwd;process.cwd=()=>e,new Bre(t,tv.workerData.indexWorkspaceRoots,tv.workerData.params)}s(twe,"runIndexWorker");f();var M8=Ve(require("util"));function rwe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(Nf(t)==="dev")return t.get(Va).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",M8.format(...i)))},e.dir=(n,i)=>r(4,M8.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(M8.format(...n));i.name="Trace",e.log(i)},e}s(rwe,"createConsole");var WKe=Ve(require("fs/promises")),GKe=Ve(require("os")),Np=Ve(wm()),HKe=require("worker_threads");f();f();var RO=require("assert");f();f();var Lpt={right:Upt,center:qpt},Fpt=0,bO=1,Mpt=2,EO=3,nne=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&y0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),y0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=y0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>y0.stringWidth(a)&&(d+=" ".repeat(u-y0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=Lpt[e[l].align];d=m(d,u),y0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-y0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[EO]&&(o+=" ".repeat(p[EO])),o+=Kwe(e[l],d,"| "),o+=d,o+=Kwe(e[l],d," |"),p[bO]&&(o+=" ".repeat(p[bO])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=y0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=y0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[Fpt]||0).fill("")),i.push(...new Array(o.padding[Mpt]||0).fill(""))),i.forEach((l,c)=>{r[c]||r.push([]);let u=r[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[EO]||0)+(e.padding[bO]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||y0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,l)=>a===void 0?Math.max(o,Qpt(e[l])):a)}};function Kwe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(Kwe,"addBorder");function Qpt(t){let e=t.padding||[],r=1+(e[EO]||0)+(e[bO]||0);return t.border?r+4:r}s(Qpt,"_minWidth");function Opt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(Opt,"getWindowWidth");function Upt(t,e){t=t.trim();let r=y0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(Upt,"alignRight");function qpt(t,e){t=t.trim();let r=y0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(qpt,"alignCenter");var y0;function Jwe(t,e){return y0=e,new nne({width:t?.width||Opt(),wrap:t?.wrap})}s(Jwe,"cliui");f();var Xwe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function ine(t){return t.replace(Xwe,"")}s(ine,"stripAnsi");function Zwe(t,e){let[r,n]=t.match(Xwe)||["",""];t=ine(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(Zwe,"wrap");function one(t){return Jwe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:ine,wrap:Zwe})}s(one,"ui");f();var YS=require("path"),IO=require("fs");function sne(t,e){let r=(0,YS.resolve)(".",t),n;for((0,IO.statSync)(r).isDirectory()||(r=(0,YS.dirname)(r));;){if(n=e(r,(0,IO.readdirSync)(r)),n)return(0,YS.resolve)(r,n);if(r=(0,YS.dirname)(n=r),n===r)break}}s(sne,"default");var h_e=require("util"),g_e=require("fs"),A_e=require("url");f();var i_e=require("util"),SO=require("path");f();function UI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(UI,"camelCase");function TO(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(TO,"decamelize");function wO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(wO,"looksLikeNumber");f();f();function e_e(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(e_e,"tokenizeArgString");f();var $f;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})($f||($f={}));var L1,_O=class{static{s(this,"YargsParser")}constructor(e){L1=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=e_e(e),o=typeof e=="string",a=Wpt(Object.assign(Object.create(null),n.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),u=n.configObjects||[],d=n.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||L1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(X){let ne=typeof X=="object"?X.key:X,We=Object.keys(X).map(function(Pe){return{boolean:"bools",string:"strings",number:"numbers"}[Pe]}).filter(Boolean).pop();We&&(v[We][ne]=!0),v.arrays[ne]=!0,v.keys.push(ne)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(X){v.bools[X]=!0,v.keys.push(X)}),[].concat(n.string||[]).filter(Boolean).forEach(function(X){v.strings[X]=!0,v.keys.push(X)}),[].concat(n.number||[]).filter(Boolean).forEach(function(X){v.numbers[X]=!0,v.keys.push(X)}),[].concat(n.count||[]).filter(Boolean).forEach(function(X){v.counts[X]=!0,v.keys.push(X)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(X){v.normalize[X]=!0,v.keys.push(X)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([X,ne])=>{typeof ne=="number"&&(v.nargs[X]=ne,v.keys.push(X))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([X,ne])=>{typeof ne=="function"&&(v.coercions[X]=ne,v.keys.push(X))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(X){v.configs[X]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([X,ne])=>{(typeof ne=="boolean"||typeof ne=="function")&&(v.configs[X]=ne)})),Ne(n.key,a,n.default,v.arrays),Object.keys(c).forEach(function(X){(v.aliases[X]||[]).forEach(function(ne){c[ne]=c[X]})});let _=null;tt();let k=[],B=Object.assign(Object.create(null),{_:[]}),N={};for(let X=0;X<i.length;X++){let ne=i[X],We=ne.replace(/^-{3,}/,"---"),Pe,be,ze,it,gt,Ot;if(ne!=="--"&&/^-/.test(ne)&&Tt(ne))W(ne);else if(We.match(/^---+(=|$)/)){W(ne);continue}else if(ne.match(/^--.+=/)||!l["short-option-groups"]&&ne.match(/^-.+=/))it=ne.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Re(it[1],v.arrays)?X=me(X,it[1],i,it[2]):Re(it[1],v.nargs)!==!1?X=ee(X,it[1],i,it[2]):ae(it[1],it[2],!0));else if(ne.match(E)&&l["boolean-negation"])it=ne.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ae(be,Re(be,v.arrays)?[!1]:!1));else if(ne.match(/^--.+/)||!l["short-option-groups"]&&ne.match(/^-[^-]+/))it=ne.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=ee(X,be,i):(gt=i[X+1],gt!==void 0&&(!gt.match(/^-/)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(ae(be,gt),X++):ae(be,bt(be))));else if(ne.match(/^-.\..+=/))it=ne.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&ae(it[1],it[2]);else if(ne.match(/^-.\..+/)&&!ne.match(b))gt=i[X+1],it=ne.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],gt!==void 0&&!gt.match(/^-/)&&!Re(be,v.bools)&&!Re(be,v.counts)?(ae(be,gt),X++):ae(be,bt(be)));else if(ne.match(/^-[^-]+/)&&!ne.match(b)){ze=ne.slice(1,-1).split(""),Pe=!1;for(let lr=0;lr<ze.length;lr++){if(gt=ne.slice(lr+2),ze[lr+1]&&ze[lr+1]==="="){Ot=ne.slice(lr+3),be=ze[lr],Re(be,v.arrays)?X=me(X,be,i,Ot):Re(be,v.nargs)!==!1?X=ee(X,be,i,Ot):ae(be,Ot),Pe=!0;break}if(gt==="-"){ae(ze[lr],gt);continue}if(/[A-Za-z]/.test(ze[lr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(gt)&&Re(gt,v.bools)===!1){ae(ze[lr],gt),Pe=!0;break}if(ze[lr+1]&&ze[lr+1].match(/\W/)){ae(ze[lr],gt),Pe=!0;break}else ae(ze[lr],bt(ze[lr]))}be=ne.slice(-1)[0],!Pe&&be!=="-"&&(Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=ee(X,be,i):(gt=i[X+1],gt!==void 0&&(!/^(-|--)[^-]/.test(gt)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(ae(be,gt),X++):ae(be,bt(be))))}else if(ne.match(/^-[0-9]$/)&&ne.match(b)&&Re(ne.slice(1),v.bools))be=ne.slice(1),ae(be,bt(be));else if(ne==="--"){k=i.slice(X+1);break}else if(l["halt-at-non-option"]){k=i.slice(X);break}else W(ne)}Y(B,!0),Y(B,!1),ie(B),q(),re(B,v.aliases,c,!0),te(B),l["set-placeholder-key"]&&pe(B),Object.keys(v.counts).forEach(function(X){fe(B,X.split("."))||ae(X,0)}),p&&k.length&&(B[m]=[]),k.forEach(function(X){B[m].push(X)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(B).filter(X=>X!=="--"&&X.includes("-")).forEach(X=>{delete B[X]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(X=>a[X])).forEach(X=>{l["camel-case-expansion"]&&X.includes("-")&&delete B[X.split(".").map(ne=>UI(ne)).join(".")],delete B[X]});function W(X){let ne=le("_",X);(typeof ne=="string"||typeof ne=="number")&&B._.push(ne)}s(W,"pushPositional");function ee(X,ne,We,Pe){let be,ze=Re(ne,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(Pe)||(_=Error(y("Argument unexpected for: %s",ne))),ae(ne,bt(ne)),X;let it=ye(Pe)?0:1;if(l["nargs-eats-options"])We.length-(X+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",ne))),it=ze;else{for(be=X+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||Tt(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",ne)))}let gt=Math.min(it,ze);for(!ye(Pe)&&gt>0&&(ae(ne,Pe),gt--),be=X+1;be<gt+X+1;be++)ae(ne,We[be]);return X+gt}s(ee,"eatNargs");function me(X,ne,We,Pe){let be=[],ze=Pe||We[X+1],it=Re(ne,v.nargs);if(Re(ne,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(Pe)&&/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)){if(c[ne]!==void 0){let gt=c[ne];be=Array.isArray(gt)?gt:[gt]}}else{ye(Pe)||be.push(O(ne,Pe,!0));for(let gt=X+1;gt<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[gt],/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)));gt++)X=gt,be.push(O(ne,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ne))),ae(ne,be),X}s(me,"eatArray");function ae(X,ne,We=o){if(/-/.test(X)&&l["camel-case-expansion"]){let ze=X.split(".").map(function(it){return UI(it)}).join(".");H(X,ze)}let Pe=O(X,ne,We),be=X.split(".");he(B,be,Pe),v.aliases[X]&&v.aliases[X].forEach(function(ze){let it=ze.split(".");he(B,it,Pe)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),gt=[].concat(be);gt.shift(),it=it.concat(gt),(v.aliases[X]||[]).includes(it.join("."))||he(B,it,Pe)}),Re(X,v.normalize)&&!Re(X,v.arrays)&&[X].concat(v.aliases[X]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return ne},set(gt){ne=typeof gt=="string"?L1.normalize(gt):gt}})})}s(ae,"setArg");function H(X,ne){v.aliases[X]&&v.aliases[X].length||(v.aliases[X]=[ne],h[ne]=!0),v.aliases[ne]&&v.aliases[ne].length||H(ne,X)}s(H,"addNewAlias");function O(X,ne,We){We&&(ne=Gpt(ne)),(Re(X,v.bools)||Re(X,v.counts))&&typeof ne=="string"&&(ne=ne==="true");let Pe=Array.isArray(ne)?ne.map(function(be){return le(X,be)}):le(X,ne);return Re(X,v.counts)&&(ye(Pe)||typeof Pe=="boolean")&&(Pe=ane()),Re(X,v.normalize)&&Re(X,v.arrays)&&(Array.isArray(ne)?Pe=ne.map(be=>L1.normalize(be)):Pe=L1.normalize(ne)),Pe}s(O,"processValue");function le(X,ne){return!l["parse-positional-numbers"]&&X==="_"||!Re(X,v.strings)&&!Re(X,v.bools)&&!Array.isArray(ne)&&(wO(ne)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ne}`)))||!ye(ne)&&Re(X,v.numbers))&&(ne=Number(ne)),ne}s(le,"maybeCoerceNumber");function ie(X){let ne=Object.create(null);re(ne,v.aliases,c),Object.keys(v.configs).forEach(function(We){let Pe=X[We]||ne[We];if(Pe)try{let be=null,ze=L1.resolve(L1.cwd(),Pe),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(gt){be=gt}if(be instanceof Error){_=be;return}}else be=L1.require(ze);j(be)}catch(be){be.name==="PermissionDenied"?_=be:X[We]&&(_=Error(y("Invalid JSON config file: %s",Pe)))}})}s(ie,"setConfig");function j(X,ne){Object.keys(X).forEach(function(We){let Pe=X[We],be=ne?ne+"."+We:We;typeof Pe=="object"&&Pe!==null&&!Array.isArray(Pe)&&l["dot-notation"]?j(Pe,be):(!fe(B,be.split("."))||Re(be,v.arrays)&&l["combine-arrays"])&&ae(be,Pe)})}s(j,"setConfigObject");function q(){typeof u<"u"&&u.forEach(function(X){j(X)})}s(q,"setConfigObjects");function Y(X,ne){if(typeof d>"u")return;let We=typeof d=="string"?d:"",Pe=L1.env();Object.keys(Pe).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,gt){return gt===0&&(it=it.substring(We.length)),UI(it)});(ne&&v.configs[ze.join(".")]||!ne)&&!fe(X,ze)&&ae(ze.join("."),Pe[be])}})}s(Y,"applyEnvVars");function te(X){let ne,We=new Set;Object.keys(X).forEach(function(Pe){if(!We.has(Pe)&&(ne=Re(Pe,v.coercions),typeof ne=="function"))try{let be=le(Pe,ne(X[Pe]));[].concat(v.aliases[Pe]||[],Pe).forEach(ze=>{We.add(ze),X[ze]=be})}catch(be){_=be}})}s(te,"applyCoercions");function pe(X){return v.keys.forEach(ne=>{~ne.indexOf(".")||typeof X[ne]>"u"&&(X[ne]=void 0)}),X}s(pe,"setPlaceholderKeys");function re(X,ne,We,Pe=!1){Object.keys(We).forEach(function(be){fe(X,be.split("."))||(he(X,be.split("."),We[be]),Pe&&(g[be]=!0),(ne[be]||[]).forEach(function(ze){fe(X,ze.split("."))||he(X,ze.split("."),We[be])}))})}s(re,"applyDefaultsAndAliases");function fe(X,ne){let We=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(be){We=We[be]||{}});let Pe=ne[ne.length-1];return typeof We!="object"?!1:Pe in We}s(fe,"hasKey");function he(X,ne,We){let Pe=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(Ot){Ot=t_e(Ot),typeof Pe=="object"&&Pe[Ot]===void 0&&(Pe[Ot]={}),typeof Pe[Ot]!="object"||Array.isArray(Pe[Ot])?(Array.isArray(Pe[Ot])?Pe[Ot].push({}):Pe[Ot]=[Pe[Ot],{}],Pe=Pe[Ot][Pe[Ot].length-1]):Pe=Pe[Ot]});let be=t_e(ne[ne.length-1]),ze=Re(ne.join("."),v.arrays),it=Array.isArray(We),gt=l["duplicate-arguments-array"];!gt&&Re(be,v.nargs)&&(gt=!0,(!ye(Pe[be])&&v.nargs[be]===1||Array.isArray(Pe[be])&&Pe[be].length===v.nargs[be])&&(Pe[be]=void 0)),We===ane()?Pe[be]=ane(Pe[be]):Array.isArray(Pe[be])?gt&&ze&&it?Pe[be]=l["flatten-duplicate-arrays"]?Pe[be].concat(We):(Array.isArray(Pe[be][0])?Pe[be]:[Pe[be]]).concat([We]):!gt&&!!ze==!!it?Pe[be]=We:Pe[be]=Pe[be].concat([We]):Pe[be]===void 0&&ze?Pe[be]=it?We:[We]:gt&&!(Pe[be]===void 0||Re(be,v.counts)||Re(be,v.bools))?Pe[be]=[Pe[be],We]:Pe[be]=We}s(he,"setKey");function Ne(...X){X.forEach(function(ne){Object.keys(ne||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(Pe){if(/-/.test(Pe)&&l["camel-case-expansion"]){let be=UI(Pe);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(Pe){if(Pe.length>1&&/[A-Z]/.test(Pe)&&l["camel-case-expansion"]){let be=TO(Pe,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(Pe){v.aliases[Pe]=[We].concat(v.aliases[We].filter(function(be){return Pe!==be}))}))})})}s(Ne,"extendAliases");function Re(X,ne){let We=[].concat(v.aliases[X]||[],X),Pe=Object.keys(ne),be=We.find(ze=>Pe.includes(ze));return be?ne[be]:!1}s(Re,"checkAllAliases");function Je(X){let ne=Object.keys(v);return[].concat(ne.map(Pe=>v[Pe])).some(function(Pe){return Array.isArray(Pe)?Pe.includes(X):Pe[X]})}s(Je,"hasAnyFlag");function Me(X,...ne){return[].concat(...ne).some(function(Pe){let be=X.match(Pe);return be&&Je(be[1])})}s(Me,"hasFlagsMatching");function pt(X){if(X.match(b)||!X.match(/^-[^-]+/))return!1;let ne=!0,We,Pe=X.slice(1).split("");for(let be=0;be<Pe.length;be++){if(We=X.slice(be+2),!Je(Pe[be])){ne=!1;break}if(Pe[be+1]&&Pe[be+1]==="="||We==="-"||/[A-Za-z]/.test(Pe[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||Pe[be+1]&&Pe[be+1].match(/\W/))break}return ne}s(pt,"hasAllShortFlags");function Tt(X){return l["unknown-options-as-args"]&&Ct(X)}s(Tt,"isUnknownOptionAsArg");function Ct(X){return X=X.replace(/^-{3,}/,"--"),X.match(b)||pt(X)?!1:!Me(X,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(Ct,"isUnknownOption");function bt(X){return!Re(X,v.bools)&&!Re(X,v.counts)&&`${X}`in c?c[X]:ce(Oe(X))}s(bt,"defaultValue");function ce(X){return{[$f.BOOLEAN]:!0,[$f.STRING]:"",[$f.NUMBER]:void 0,[$f.ARRAY]:[]}[X]}s(ce,"defaultForType");function Oe(X){let ne=$f.BOOLEAN;return Re(X,v.strings)?ne=$f.STRING:Re(X,v.numbers)?ne=$f.NUMBER:Re(X,v.bools)?ne=$f.BOOLEAN:Re(X,v.arrays)&&(ne=$f.ARRAY),ne}s(Oe,"guessType");function ye(X){return X===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(X=>Re(X,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",X)),!0):Re(X,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",X)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,B),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function Wpt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(Wpt,"combineAliases");function ane(t){return t!==void 0?t+1:1}s(ane,"increment");function t_e(t){return t==="__proto__"?"___proto___":t}s(t_e,"sanitizeKey");function Gpt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(Gpt,"stripQuotes");var o_e=require("fs");var lne,cne,une,r_e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,n_e=(cne=(lne=process==null?void 0:process.versions)===null||lne===void 0?void 0:lne.node)!==null&&cne!==void 0?cne:(une=process==null?void 0:process.version)===null||une===void 0?void 0:une.slice(1);if(n_e&&Number(n_e.match(/^([^.]+)/)[1])<r_e)throw Error(`yargs parser supports a minimum Node.js version of ${r_e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Hpt=process?process.env:{},s_e=new _O({cwd:process.cwd,env:s(()=>Hpt,"env"),format:i_e.format,normalize:SO.normalize,resolve:SO.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,o_e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),H8=s(function(e,r){return s_e.parse(e.slice(),r).argv},"Parser");H8.detailed=function(t,e){return s_e.parse(t.slice(),e)};H8.camelCase=UI;H8.decamelize=TO;H8.looksLikeNumber=wO;var a_e=H8;var Sm=require("path");f();function jpt(){return Vpt()?0:1}s(jpt,"getProcessArgvBinIndex");function Vpt(){return $pt()&&!process.defaultApp}s(Vpt,"isBundledElectronApp");function $pt(){return!!process.versions.electron}s($pt,"isElectronApp");function l_e(){return process.argv[jpt()]}s(l_e,"getProcessArgvBin");f();var gs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var KS=require("fs"),c_e=require("util"),u_e=require("path");var d_e={fs:{readFileSync:KS.readFileSync,writeFile:KS.writeFile},format:c_e.format,resolve:u_e.resolve,exists:s(t=>{try{return(0,KS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var _m,dne=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),_m.format.apply(_m.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),_m.format.apply(_m.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),l=JSON.stringify(this.cache[i],null,2);_m.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{_m.fs.readFileSync&&(e=JSON.parse(_m.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=_m.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=_m.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return _m.exists(e)}};function f_e(t,e){_m=e;let r=new dne(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(f_e,"y18n");var zpt=s(t=>f_e(t,d_e),"y18n"),p_e=zpt;var Ypt="require is not supported by ESM",m_e="loading a directory of commands is not supported yet for ESM",j8;try{j8=(0,A_e.fileURLToPath)(importMetaUrlShim)}catch{j8=process.cwd()}var Kpt=j8.substring(0,j8.lastIndexOf("node_modules")),y_e={assert:{notStrictEqual:RO.notStrictEqual,strictEqual:RO.strictEqual},cliui:one,findUp:sne,getEnv:s(t=>process.env[t],"getEnv"),inspect:h_e.inspect,getCallerFile:s(()=>{throw new gs(m_e)},"getCallerFile"),getProcessArgvBin:l_e,mainFilename:Kpt||process.cwd(),Parser:a_e,path:{basename:Sm.basename,dirname:Sm.dirname,extname:Sm.extname,relative:Sm.relative,resolve:Sm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:g_e.readFileSync,require:s(()=>{throw new gs(Ypt)},"require"),requireDirectory:s(()=>{throw new gs(m_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:p_e({directory:(0,Sm.resolve)(j8,"../../../locales"),updateFiles:!1})};f();f();f();function Ru(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Ru,"assertNotStrictEqual");function fne(t,e){e.assert.strictEqual(typeof t,"string")}s(fne,"assertSingleKey");function JS(t){return Object.keys(t)}s(JS,"objectKeys");f();function As(t){return!!t&&!!t.then&&typeof t.then=="function"}s(As,"isPromise");f();f();f();function ov(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===r.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:c})}),o}s(ov,"parseCommand");var Jpt=["first","second","third","fourth","fifth","sixth"];function Cr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[ov(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,l]=n(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new gs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new gs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=C_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&x_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=C_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&x_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Cr,"argsert");function C_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(C_e,"guessType");function x_e(t,e,r){throw new gs(`Invalid ${Jpt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(x_e,"argumentTypeError");var kO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Cr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function v_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(v_e,"commandMiddlewareFactory");function qI(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(As(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return As(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(qI,"applyMiddleware");f();function WI(t,e,r=n=>{throw n}){try{let n=Xpt(t)?t():t;return As(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(WI,"maybeAsyncResult");function Xpt(t){return typeof t=="function"}s(Xpt,"isFunction");f();function pne(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(pne,"whichModule");var XS=/(^\*)|(^\$0)/,mne=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let l=[],c=v_e(o);if(i=i||(()=>{}),Array.isArray(e))if(Zpt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(tmt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(b_e(n)){this.addHandler([e].concat(l),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=ov(e);l=l.map(m=>ov(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>XS.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(XS,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,d,l,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=r.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,r,n.aliases,u,i,o,a);return As(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,r)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,l,c){let u=r.builder,d=n;if(BO(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),c);if(As(p))return p.then(m=>(d=I_e(m)?m:n,this.parseAndUpdateUsage(e,r,d,o,a,l)))}else emt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),d=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,d,o,a,l)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let l=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return As(l)?l.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=XS.test(r.original)?r.original.replace(XS,"").trim():r.original,i=e.filter(o=>!XS.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);n=WI(n,d=>(u(d),d))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=qI(n,a,l,!1),n=WI(n,d=>{let p=r.handler(d);return As(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),As(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,l){let c={};if(o)return n;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),d=qI(n,l,u,!0);return As(d)?d.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,r,d,i,a,l,u,c)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let c=o.shift();this.populatePositional(c,r,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,r,l)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=ov(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(r);Object.keys(r).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(r[d]||(r[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=XS.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(BO(r))return r(e,!0);b_e(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=pne(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Ru(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Ru(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function E_e(t,e,r,n){return new mne(t,e,r,n)}s(E_e,"command");function b_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(b_e,"isCommandBuilderDefinition");function Zpt(t){return t.every(e=>typeof e=="string")}s(Zpt,"isCommandAndAliases");function BO(t){return typeof t=="function"}s(BO,"isCommandBuilderCallback");function emt(t){return typeof t=="object"}s(emt,"isCommandBuilderOptionDefinitions");function tmt(t){return typeof t=="object"&&!Array.isArray(t)}s(tmt,"isCommandHandlerDefinition");f();f();function sv(t={},e=()=>!0){let r={};return JS(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(sv,"objFilter");f();function av(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(av,"setBlocking");function rmt(t){return typeof t=="boolean"}s(rmt,"isBoolean");function w_e(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(O){i.push(O)},"failFn");let o=null,a=null,l=!0;n.showHelpOnFail=s(function(O=!0,le){let[ie,j]=typeof O=="string"?[!0,O]:[O,le];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,l=ie,n},"showHelpOnFailFn");let c=!1;n.fail=s(function(O,le){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let q=i[j];if(rmt(q)){if(le)throw le;if(O)throw Error(O)}else q(O,le,n)}else{if(t.getExitProcess()&&av(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(O||le)&&ie.error(O||le);let j=o||a;j&&((O||le)&&ie.error(""),ie.error(j))}if(le=le||new gs(O),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,le);throw le}},"fail");let u=[],d=!1;n.usage=(H,O)=>H===null?(d=!0,u=[],n):(d=!1,u.push([H,O||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>d,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(H,O)=>{p.push([H,O||""])};let m=[];n.command=s(function(O,le,ie,j,q=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([O,le||"",ie,j,q])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(O,le){Array.isArray(O)?O.forEach(ie=>{n.describe(ie,le)}):typeof O=="object"?Object.keys(O).forEach(ie=>{n.describe(ie,O[ie])}):h[O]=le},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=H=>{g.push(H)};let y=!1,v;n.wrap=H=>{y=!0,v=H},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=ee(),y=!0),v);let b="__yargsString__:";n.deferY18nLookup=H=>b+H,n.help=s(function(){if(k)return k;_();let O=t.customScriptName?t.$0:e.path.basename(t.$0),le=t.getDemandedOptions(),ie=t.getDemandedCommands(),j=t.getDeprecatedOptions(),q=t.getGroups(),Y=t.getOptions(),te=[];te=te.concat(Object.keys(h)),te=te.concat(Object.keys(le)),te=te.concat(Object.keys(ie)),te=te.concat(Object.keys(Y.default)),te=te.filter(N),te=Object.keys(te.reduce((Me,pt)=>(pt!=="_"&&(Me[pt]=!0),Me),{}));let pe=n.getWrap(),re=e.cliui({width:pe,wrap:!!pe});if(!d){if(u.length)u.forEach(Me=>{re.div({text:`${Me[0].replace(/\$0/g,O)}`}),Me[1]&&re.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),re.div();else if(m.length){let Me=null;ie._?Me=`${O} <${r("command")}>
`:Me=`${O} [${r("command")}]
`,re.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){re.div(r("Commands:"));let Me=t.getInternalMethods().getContext(),pt=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((Ct,bt)=>Ct[0].localeCompare(bt[0])));let Tt=O?`${O} `:"";m.forEach(Ct=>{let bt=`${Tt}${pt}${Ct[0].replace(/^\$0 ?/,"")}`;re.span({text:bt,padding:[0,2,0,2],width:E(m,pe,`${O}${pt}`)+4},{text:Ct[1]});let ce=[];Ct[2]&&ce.push(`[${r("default")}]`),Ct[3]&&Ct[3].length&&ce.push(`[${r("aliases:")} ${Ct[3].join(", ")}]`),Ct[4]&&(typeof Ct[4]=="string"?ce.push(`[${r("deprecated: %s",Ct[4])}]`):ce.push(`[${r("deprecated")}]`)),ce.length?re.div({text:ce.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let fe=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);te=te.filter(Me=>!t.parsed.newAliases[Me]&&fe.every(pt=>(Y.alias[pt]||[]).indexOf(Me)===-1));let he=r("Options:");q[he]||(q[he]=[]),B(te,Y.alias,q,he);let Ne=s(Me=>/^--/.test(DO(Me)),"isLongSwitch"),Re=Object.keys(q).filter(Me=>q[Me].length>0).map(Me=>{let pt=q[Me].filter(N).map(Tt=>{if(fe.includes(Tt))return Tt;for(let Ct=0,bt;(bt=fe[Ct])!==void 0;Ct++)if((Y.alias[bt]||[]).includes(Tt))return bt;return Tt});return{groupName:Me,normalizedKeys:pt}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:pt})=>{let Tt=pt.reduce((Ct,bt)=>(Ct[bt]=[bt].concat(Y.alias[bt]||[]).map(ce=>Me===n.getPositionalGroupName()?ce:(/^[0-9]$/.test(ce)?Y.boolean.includes(bt)?"-":"--":ce.length>1?"--":"-")+ce).sort((ce,Oe)=>Ne(ce)===Ne(Oe)?0:Ne(ce)?1:-1).join(", "),Ct),{});return{groupName:Me,normalizedKeys:pt,switches:Tt}});if(Re.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).some(({normalizedKeys:Me,switches:pt})=>!Me.every(Tt=>Ne(pt[Tt])))&&Re.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:pt})=>{Me.forEach(Tt=>{Ne(pt[Tt])&&(pt[Tt]=nmt(pt[Tt],4))})}),Re.forEach(({groupName:Me,normalizedKeys:pt,switches:Tt})=>{re.div(Me),pt.forEach(Ct=>{let bt=Tt[Ct],ce=h[Ct]||"",Oe=null;ce.includes(b)&&(ce=r(ce.substring(b.length))),Y.boolean.includes(Ct)&&(Oe=`[${r("boolean")}]`),Y.count.includes(Ct)&&(Oe=`[${r("count")}]`),Y.string.includes(Ct)&&(Oe=`[${r("string")}]`),Y.normalize.includes(Ct)&&(Oe=`[${r("string")}]`),Y.array.includes(Ct)&&(Oe=`[${r("array")}]`),Y.number.includes(Ct)&&(Oe=`[${r("number")}]`);let ye=s(ne=>typeof ne=="string"?`[${r("deprecated: %s",ne)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),tt=[Ct in j?ye(j[Ct]):null,Oe,Ct in le?`[${r("required")}]`:null,Y.choices&&Y.choices[Ct]?`[${r("choices:")} ${n.stringifiedValues(Y.choices[Ct])}]`:null,W(Y.default[Ct],Y.defaultDescription[Ct])].filter(Boolean).join(" ");re.span({text:DO(bt),padding:[0,2,0,2+T_e(bt)],width:E(Tt,pe)+4},ce);let X=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!X?re.div({text:tt,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),p.length&&(re.div(r("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,O)}),p.forEach(Me=>{Me[1]===""?re.div({text:Me[0],padding:[0,2,0,2]}):re.div({text:Me[0],padding:[0,2,0,2],width:E(p,pe)+4},{text:Me[1]})}),re.div()),g.length>0){let Me=g.map(pt=>pt.replace(/\$0/g,O)).join(`
`);re.div(`${Me}
`)}return re.toString().replace(/\s*$/,"")},"help");function E(H,O,le){let ie=0;return Array.isArray(H)||(H=Object.values(H).map(j=>[j])),H.forEach(j=>{ie=Math.max(e.stringWidth(le?`${le} ${DO(j[0])}`:DO(j[0]))+T_e(j[0]),ie)}),O&&(ie=Math.min(ie,parseInt((O*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),O=t.getOptions();(Object.keys(O.alias)||[]).forEach(le=>{O.alias[le].forEach(ie=>{h[ie]&&n.describe(le,h[ie]),ie in H&&t.demandOption(le,H[ie]),O.boolean.includes(ie)&&t.boolean(le),O.count.includes(ie)&&t.count(le),O.string.includes(ie)&&t.string(le),O.normalize.includes(ie)&&t.normalize(le),O.array.includes(ie)&&t.array(le),O.number.includes(ie)&&t.number(le)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function B(H,O,le,ie){let j=[],q=null;return Object.keys(le).forEach(Y=>{j=j.concat(le[Y])}),H.forEach(Y=>{q=[Y].concat(O[Y]),q.some(te=>j.indexOf(te)!==-1)||le[ie].push(Y)}),j}s(B,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(n.help())},n.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(O,le){let ie="",j=le||", ",q=[].concat(O);return!O||!q.length||q.forEach(Y=>{ie.length&&(ie+=j),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function W(H,O){let le=`[${r("default:")} `;if(H===void 0&&!O)return null;if(O)le+=O;else switch(typeof H){case"string":le+=`"${H}"`;break;case"object":le+=JSON.stringify(H);break;default:le+=H}return`${le}]`}s(W,"defaultString");function ee(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(ee,"windowWidth");let me=null;n.version=H=>{me=H},n.showVersion=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(me)},n.reset=s(function(O){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=sv(h,le=>!O[le]),n},"reset");let ae=[];return n.freeze=s(function(){ae.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(O=!1){let le=ae.pop();le&&(O?(h={...le.descriptions,...h},m=[...le.commands,...m],u=[...le.usages,...u],p=[...le.examples,...p],g=[...le.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=le)},"unfreeze"),n}s(w_e,"usage");function hne(t){return typeof t=="object"}s(hne,"isIndentedText");function nmt(t,e){return hne(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(nmt,"addIndentation");function T_e(t){return hne(t)?t.indentation:0}s(T_e,"getIndentation");function DO(t){return hne(t)?t.text:t}s(DO,"getText");f();f();var __e=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,S_e=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var gne=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,l;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(BO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=ov(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(r,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[n._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!n||c.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Ru(this.customCompletionFunction,null,this.shim),omt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return As(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return smt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return As(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?S_e:__e,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function R_e(t,e,r,n){return new gne(t,e,r,n)}s(R_e,"completion");function omt(t){return t.length<3}s(omt,"isSyncCompletionFunction");function smt(t){return t.length>3}s(smt,"isFallbackCompletionFunction");f();f();function k_e(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(k_e,"levenshtein");var B_e=["$0","--","_"];function D_e(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!B_e.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let B=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+B;N<p._.length&&p._.slice(N).forEach(W=>{W=String(W),!_.commands.includes(W)&&!E.includes(W)&&E.push(W)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{B_e.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(v=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){Cr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Ru(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){Cr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=k_e(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=sv(a,m=>!p[m]),c=sv(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Ru(p,void 0,r),{implied:a,conflicting:c}=p},"unfreeze"),o}s(D_e,"validation");f();var Ane=[],V8;function PO(t,e,r,n){V8=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=lmt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}amt(a),Ane.push(a),i=o?JSON.parse(V8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=PO(i,V8.path.dirname(a),r,V8)}return Ane=[],r?P_e(i,t):Object.assign({},i,t)}s(PO,"applyExtends");function amt(t){if(Ane.indexOf(t)>-1)throw new gs(`Circular extended configurations: '${t}'.`)}s(amt,"checkForCircularExtends");function lmt(t,e){return V8.path.resolve(t,e)}s(lmt,"getPathToDefaultConfig");function P_e(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=P_e(t[i],e[i]):r[i]=e[i];return r}s(P_e,"mergeDeep");var Er=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},de=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Sa,GI,$8,zf,C0,NO,lv,HI,LO,Yf,FO,Kf,Cg,x0,Jf,MO,ZS,Ql,Or,QO,OO,v0,jI,e5,VI,cv,UO,Fn,$I,zI,YI,jn,qO,xg,la;function Z_e(t){return(e=[],r=t.process.cwd(),n)=>{let i=new Sne(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(Z_e,"YargsFactory");var N_e=Symbol("copyDoubleDash"),L_e=Symbol("copyDoubleDash"),yne=Symbol("deleteFromParserHintObject"),F_e=Symbol("emitWarning"),M_e=Symbol("freeze"),Q_e=Symbol("getDollarZero"),KI=Symbol("getParserConfiguration"),O_e=Symbol("getUsageConfiguration"),Cne=Symbol("guessLocale"),U_e=Symbol("guessVersion"),q_e=Symbol("parsePositionalNumbers"),xne=Symbol("pkgUp"),uv=Symbol("populateParserHintArray"),t5=Symbol("populateParserHintSingleValueDictionary"),vne=Symbol("populateParserHintArrayDictionary"),bne=Symbol("populateParserHintDictionary"),Ene=Symbol("sanitizeKey"),Ine=Symbol("setKey"),Tne=Symbol("unfreeze"),W_e=Symbol("validateAsync"),G_e=Symbol("getCommandInstance"),H_e=Symbol("getContext"),j_e=Symbol("getHasOutput"),V_e=Symbol("getLoggerInstance"),$_e=Symbol("getParseContext"),z_e=Symbol("getUsageInstance"),Y_e=Symbol("getValidationInstance"),WO=Symbol("hasParseCallback"),K_e=Symbol("isGlobalContext"),JI=Symbol("postProcess"),J_e=Symbol("rebase"),wne=Symbol("reset"),z8=Symbol("runYargsParserAndExecuteCommands"),_ne=Symbol("runValidation"),X_e=Symbol("setHasOutput"),XI=Symbol("kTrackManuallySetKeys"),Sne=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Sa.set(this,void 0),GI.set(this,void 0),$8.set(this,{commands:[],fullCommands:[]}),zf.set(this,null),C0.set(this,null),NO.set(this,"show-hidden"),lv.set(this,null),HI.set(this,!0),LO.set(this,{}),Yf.set(this,!0),FO.set(this,[]),Kf.set(this,void 0),Cg.set(this,{}),x0.set(this,!1),Jf.set(this,null),MO.set(this,!0),ZS.set(this,void 0),Ql.set(this,""),Or.set(this,void 0),QO.set(this,void 0),OO.set(this,{}),v0.set(this,null),jI.set(this,null),e5.set(this,{}),VI.set(this,{}),cv.set(this,void 0),UO.set(this,!1),Fn.set(this,void 0),$I.set(this,!1),zI.set(this,!1),YI.set(this,!1),jn.set(this,void 0),qO.set(this,{}),xg.set(this,null),la.set(this,void 0),Er(this,Fn,i,"f"),Er(this,cv,e,"f"),Er(this,GI,r,"f"),Er(this,QO,n,"f"),Er(this,Kf,new kO(this),"f"),this.$0=this[Q_e](),this[wne](),Er(this,Sa,de(this,Sa,"f"),"f"),Er(this,jn,de(this,jn,"f"),"f"),Er(this,la,de(this,la,"f"),"f"),Er(this,Or,de(this,Or,"f"),"f"),de(this,Or,"f").showHiddenOpt=de(this,NO,"f"),Er(this,ZS,this[L_e](),"f")}addHelpOpt(e,r){let n="help";return Cr("[string|boolean] [string]",[e,r],arguments.length),de(this,Jf,"f")&&(this[yne](de(this,Jf,"f")),Er(this,Jf,null,"f")),e===!1&&r===void 0?this:(Er(this,Jf,typeof e=="string"?e:n,"f"),this.boolean(de(this,Jf,"f")),this.describe(de(this,Jf,"f"),r||de(this,jn,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Cr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:de(this,NO,"f");return this.boolean(n),this.describe(n,r||de(this,jn,"f").deferY18nLookup("Show hidden options")),de(this,Or,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[vne](this.alias.bind(this),"alias",e,r),this}array(e){return Cr("<array|string>",[e],arguments.length),this[uv]("array",e),this[XI](e),this}boolean(e){return Cr("<array|string>",[e],arguments.length),this[uv]("boolean",e),this[XI](e),this}check(e,r){return Cr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>WI(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&de(this,jn,"f").fail(o.toString(),o):de(this,jn,"f").fail(de(this,Fn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(de(this,jn,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[vne](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Cr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new gs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new gs("coerce callback must be provided");return de(this,Or,"f").key[e]=!0,de(this,Kf,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?WI(()=>(o=i.getAliases(),r(n[e])),l=>{n[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])n[u]=l;return n},l=>{throw new gs(l.message)}):n},e),this}conflicts(e,r){return Cr("<string|object> [string|array]",[e,r],arguments.length),de(this,la,"f").conflicts(e,r),this}config(e="config",r,n){return Cr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=PO(e,de(this,GI,"f"),this[KI]()["deep-merge-config"]||!1,de(this,Fn,"f")),de(this,Or,"f").configObjects=(de(this,Or,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||de(this,jn,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{de(this,Or,"f").config[i]=n||!0}),this)}completion(e,r,n){return Cr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Er(this,C0,e||de(this,C0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(de(this,C0,"f"),r),n&&de(this,zf,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Cr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),de(this,Sa,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Cr("<string> [object]",[e,r],arguments.length);let n=de(this,QO,"f")||de(this,Fn,"f").require;return de(this,Sa,"f").addDirectory(e,n,de(this,Fn,"f").getCallerFile(),r),this}count(e){return Cr("<array|string>",[e],arguments.length),this[uv]("count",e),this[XI](e),this}default(e,r,n){return Cr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(fne(e,de(this,Fn,"f")),de(this,Or,"f").defaultDescription[e]=n),typeof r=="function"&&(fne(e,de(this,Fn,"f")),de(this,Or,"f").defaultDescription[e]||(de(this,Or,"f").defaultDescription[e]=de(this,jn,"f").functionDescription(r)),r=r.call()),this[t5](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Cr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),de(this,Or,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Ru(n,!0,de(this,Fn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Ru(n,!0,de(this,Fn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Ru(n,!0,de(this,Fn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[t5](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Cr("<string> [string|boolean]",[e,r],arguments.length),de(this,Or,"f").deprecatedOptions[e]=r,this}describe(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[Ine](e,!0),de(this,jn,"f").describe(e,r),this}detectLocale(e){return Cr("<boolean>",[e],arguments.length),Er(this,HI,e,"f"),this}env(e){return Cr("[string|boolean]",[e],arguments.length),e===!1?delete de(this,Or,"f").envPrefix:de(this,Or,"f").envPrefix=e||"",this}epilogue(e){return Cr("<string>",[e],arguments.length),de(this,jn,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Cr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):de(this,jn,"f").example(e,r),this}exit(e,r){Er(this,x0,!0,"f"),Er(this,lv,r,"f"),de(this,Yf,"f")&&de(this,Fn,"f").process.exit(e)}exitProcess(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,Yf,e,"f"),this}fail(e){if(Cr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new gs("Invalid first argument. Expected function or boolean 'false'");return de(this,jn,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Cr("<array> [function]",[e,r],arguments.length),r?de(this,zf,"f").getCompletion(e,r):new Promise((n,i)=>{de(this,zf,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Cr([],0),de(this,Or,"f").demandedOptions}getDemandedCommands(){return Cr([],0),de(this,Or,"f").demandedCommands}getDeprecatedOptions(){return Cr([],0),de(this,Or,"f").deprecatedOptions}getDetectLocale(){return de(this,HI,"f")}getExitProcess(){return de(this,Yf,"f")}getGroups(){return Object.assign({},de(this,Cg,"f"),de(this,VI,"f"))}getHelp(){if(Er(this,x0,!0,"f"),!de(this,jn,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[z8](de(this,cv,"f"),void 0,void 0,0,!0);if(As(r))return r.then(()=>de(this,jn,"f").help())}let e=de(this,Sa,"f").runDefaultBuilderOn(this);if(As(e))return e.then(()=>de(this,jn,"f").help())}return Promise.resolve(de(this,jn,"f").help())}getOptions(){return de(this,Or,"f")}getStrict(){return de(this,$I,"f")}getStrictCommands(){return de(this,zI,"f")}getStrictOptions(){return de(this,YI,"f")}global(e,r){return Cr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?de(this,Or,"f").local=de(this,Or,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{de(this,Or,"f").local.includes(n)||de(this,Or,"f").local.push(n)}),this}group(e,r){Cr("<string|array> <string>",[e,r],arguments.length);let n=de(this,VI,"f")[r]||de(this,Cg,"f")[r];de(this,VI,"f")[r]&&delete de(this,VI,"f")[r];let i={};return de(this,Cg,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Cr("<string>",[e],arguments.length),de(this,Or,"f").hiddenOptions.push(e),this}implies(e,r){return Cr("<string|object> [number|string|array]",[e,r],arguments.length),de(this,la,"f").implies(e,r),this}locale(e){return Cr("[string]",[e],arguments.length),e===void 0?(this[Cne](),de(this,Fn,"f").y18n.getLocale()):(Er(this,HI,!1,"f"),de(this,Fn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return de(this,Kf,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Cr("<string|object|array> [number]",[e,r],arguments.length),this[t5](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Cr("<array|string>",[e],arguments.length),this[uv]("normalize",e),this}number(e){return Cr("<array|string>",[e],arguments.length),this[uv]("number",e),this[XI](e),this}option(e,r){if(Cr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[XI](e),de(this,xg,"f")&&(e==="version"||r?.alias==="version")&&this[F_e](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),de(this,Or,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(de(this,Or,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=de(this,jn,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Cr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[M_e](),typeof e>"u"&&(e=de(this,cv,"f")),typeof r=="object"&&(Er(this,jI,r,"f"),r=n),typeof r=="function"&&(Er(this,v0,r,"f"),r=!1),r||Er(this,cv,e,"f"),de(this,v0,"f")&&Er(this,Yf,!1,"f");let i=this[z8](e,!!r),o=this.parsed;return de(this,zf,"f").setParsed(this.parsed),As(i)?i.then(a=>(de(this,v0,"f")&&de(this,v0,"f").call(this,de(this,lv,"f"),a,de(this,Ql,"f")),a)).catch(a=>{throw de(this,v0,"f")&&de(this,v0,"f")(a,this.parsed.argv,de(this,Ql,"f")),a}).finally(()=>{this[Tne](),this.parsed=o}):(de(this,v0,"f")&&de(this,v0,"f").call(this,de(this,lv,"f"),i,de(this,Ql,"f")),this[Tne](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return As(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(As(i))throw new gs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,OO,e,"f"),this}pkgConf(e,r){Cr("<string> [string]",[e,r],arguments.length);let n=null,i=this[xne](r||de(this,GI,"f"));return i[e]&&typeof i[e]=="object"&&(n=PO(i[e],r||de(this,GI,"f"),this[KI]()["deep-merge-config"]||!1,de(this,Fn,"f")),de(this,Or,"f").configObjects=(de(this,Or,"f").configObjects||[]).concat(n)),this}positional(e,r){Cr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=sv(r,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:n.includes(a));let i=de(this,$8,"f").fullCommands[de(this,$8,"f").fullCommands.length-1],o=i?de(this,Sa,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return JS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(r[a]=!0):l[e]&&!(a in r)&&(r[a]=l[e])}),this.group(e,de(this,jn,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,UO,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Cr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&de(this,Or,"f").narg[e]?this:(this[t5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Cr("[string] [string]",[e,r],arguments.length),e=e||this.$0,de(this,ZS,"f").log(de(this,zf,"f").generateCompletionScript(e,r||de(this,C0,"f")||"completion")),this}showHelp(e){if(Cr("[string|function]",[e],arguments.length),Er(this,x0,!0,"f"),!de(this,jn,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[z8](de(this,cv,"f"),void 0,void 0,0,!0);if(As(n))return n.then(()=>{de(this,jn,"f").showHelp(e)}),this}let r=de(this,Sa,"f").runDefaultBuilderOn(this);if(As(r))return r.then(()=>{de(this,jn,"f").showHelp(e)}),this}return de(this,jn,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Cr("[boolean|string] [string]",[e,r],arguments.length),de(this,jn,"f").showHelpOnFail(e,r),this}showVersion(e){return Cr("[string|function]",[e],arguments.length),de(this,jn,"f").showVersion(e),this}skipValidation(e){return Cr("<array|string>",[e],arguments.length),this[uv]("skipValidation",e),this}strict(e){return Cr("[boolean]",[e],arguments.length),Er(this,$I,e!==!1,"f"),this}strictCommands(e){return Cr("[boolean]",[e],arguments.length),Er(this,zI,e!==!1,"f"),this}strictOptions(e){return Cr("[boolean]",[e],arguments.length),Er(this,YI,e!==!1,"f"),this}string(e){return Cr("<array|string>",[e],arguments.length),this[uv]("string",e),this[XI](e),this}terminalWidth(){return Cr([],0),de(this,Fn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Cr("<object>",[e],arguments.length),Er(this,HI,!1,"f"),de(this,Fn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Cr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Ru(e,null,de(this,Fn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new gs(".usage() description must start with $0 if being used as alias for .command()")}else return de(this,jn,"f").usage(e),this}usageConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,qO,e,"f"),this}version(e,r,n){let i="version";if(Cr("[boolean|string] [string] [string]",[e,r,n],arguments.length),de(this,xg,"f")&&(this[yne](de(this,xg,"f")),de(this,jn,"f").version(void 0),Er(this,xg,null,"f")),arguments.length===0)n=this[U_e](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Er(this,xg,typeof e=="string"?e:i,"f"),r=r||de(this,jn,"f").deferY18nLookup("Show version number"),de(this,jn,"f").version(n||void 0),this.boolean(de(this,xg,"f")),this.describe(de(this,xg,"f"),r),this}wrap(e){return Cr("<number|null|undefined>",[e],arguments.length),de(this,jn,"f").wrap(e),this}[(Sa=new WeakMap,GI=new WeakMap,$8=new WeakMap,zf=new WeakMap,C0=new WeakMap,NO=new WeakMap,lv=new WeakMap,HI=new WeakMap,LO=new WeakMap,Yf=new WeakMap,FO=new WeakMap,Kf=new WeakMap,Cg=new WeakMap,x0=new WeakMap,Jf=new WeakMap,MO=new WeakMap,ZS=new WeakMap,Ql=new WeakMap,Or=new WeakMap,QO=new WeakMap,OO=new WeakMap,v0=new WeakMap,jI=new WeakMap,e5=new WeakMap,VI=new WeakMap,cv=new WeakMap,UO=new WeakMap,Fn=new WeakMap,$I=new WeakMap,zI=new WeakMap,YI=new WeakMap,jn=new WeakMap,qO=new WeakMap,xg=new WeakMap,la=new WeakMap,N_e)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[L_e](){return{log:s((...e)=>{this[WO]()||console.log(...e),Er(this,x0,!0,"f"),de(this,Ql,"f").length&&Er(this,Ql,de(this,Ql,"f")+`
`,"f"),Er(this,Ql,de(this,Ql,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[WO]()||console.error(...e),Er(this,x0,!0,"f"),de(this,Ql,"f").length&&Er(this,Ql,de(this,Ql,"f")+`
`,"f"),Er(this,Ql,de(this,Ql,"f")+e.join(" "),"f")},"error")}}[yne](e){JS(de(this,Or,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=de(this,Or,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete de(this,jn,"f").getDescriptions()[e]}[F_e](e,r,n){de(this,LO,"f")[n]||(de(this,Fn,"f").process.emitWarning(e,r),de(this,LO,"f")[n]=!0)}[M_e](){de(this,FO,"f").push({options:de(this,Or,"f"),configObjects:de(this,Or,"f").configObjects.slice(0),exitProcess:de(this,Yf,"f"),groups:de(this,Cg,"f"),strict:de(this,$I,"f"),strictCommands:de(this,zI,"f"),strictOptions:de(this,YI,"f"),completionCommand:de(this,C0,"f"),output:de(this,Ql,"f"),exitError:de(this,lv,"f"),hasOutput:de(this,x0,"f"),parsed:this.parsed,parseFn:de(this,v0,"f"),parseContext:de(this,jI,"f")}),de(this,jn,"f").freeze(),de(this,la,"f").freeze(),de(this,Sa,"f").freeze(),de(this,Kf,"f").freeze()}[Q_e](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(de(this,Fn,"f").process.argv()[0])?r=de(this,Fn,"f").process.argv().slice(1,2):r=de(this,Fn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[J_e](de(this,GI,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),de(this,Fn,"f").getEnv("_")&&de(this,Fn,"f").getProcessArgvBin()===de(this,Fn,"f").getEnv("_")&&(e=de(this,Fn,"f").getEnv("_").replace(`${de(this,Fn,"f").path.dirname(de(this,Fn,"f").process.execPath())}/`,"")),e}[KI](){return de(this,OO,"f")}[O_e](){return de(this,qO,"f")}[Cne](){if(!de(this,HI,"f"))return;let e=de(this,Fn,"f").getEnv("LC_ALL")||de(this,Fn,"f").getEnv("LC_MESSAGES")||de(this,Fn,"f").getEnv("LANG")||de(this,Fn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[U_e](){return this[xne]().version||"unknown"}[q_e](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)de(this,Fn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[xne](e){let r=e||"*";if(de(this,e5,"f")[r])return de(this,e5,"f")[r];let n={};try{let i=e||de(this,Fn,"f").mainFilename;!e&&de(this,Fn,"f").path.extname(i)&&(i=de(this,Fn,"f").path.dirname(i));let o=de(this,Fn,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});Ru(o,void 0,de(this,Fn,"f")),n=JSON.parse(de(this,Fn,"f").readFileSync(o,"utf8"))}catch{}return de(this,e5,"f")[r]=n||{},de(this,e5,"f")[r]}[uv](e,r){r=[].concat(r),r.forEach(n=>{n=this[Ene](n),de(this,Or,"f")[e].push(n)})}[t5](e,r,n,i){this[bne](e,r,n,i,(o,a,l)=>{de(this,Or,"f")[o][a]=l})}[vne](e,r,n,i){this[bne](e,r,n,i,(o,a,l)=>{de(this,Or,"f")[o][a]=(de(this,Or,"f")[o][a]||[]).concat(l)})}[bne](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of JS(n))e(a,n[a]);else o(r,this[Ene](n),i)}[Ene](e){return e==="__proto__"?"___proto___":e}[Ine](e,r){return this[t5](this[Ine].bind(this),"key",e,r),this}[Tne](){var e,r,n,i,o,a,l,c,u,d,p,m;let h=de(this,FO,"f").pop();Ru(h,void 0,de(this,Fn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){Er(e,Or,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){Er(r,Yf,y,"f")}}.value,groups:{set value(y){Er(n,Cg,y,"f")}}.value,output:{set value(y){Er(i,Ql,y,"f")}}.value,exitError:{set value(y){Er(o,lv,y,"f")}}.value,hasOutput:{set value(y){Er(a,x0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){Er(l,$I,y,"f")}}.value,strictCommands:{set value(y){Er(c,zI,y,"f")}}.value,strictOptions:{set value(y){Er(u,YI,y,"f")}}.value,completionCommand:{set value(y){Er(d,C0,y,"f")}}.value,parseFn:{set value(y){Er(p,v0,y,"f")}}.value,parseContext:{set value(y){Er(m,jI,y,"f")}}.value}=h,de(this,Or,"f").configObjects=g,de(this,jn,"f").unfreeze(),de(this,la,"f").unfreeze(),de(this,Sa,"f").unfreeze(),de(this,Kf,"f").unfreeze()}[W_e](e,r){return WI(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[G_e].bind(this),getContext:this[H_e].bind(this),getHasOutput:this[j_e].bind(this),getLoggerInstance:this[V_e].bind(this),getParseContext:this[$_e].bind(this),getParserConfiguration:this[KI].bind(this),getUsageConfiguration:this[O_e].bind(this),getUsageInstance:this[z_e].bind(this),getValidationInstance:this[Y_e].bind(this),hasParseCallback:this[WO].bind(this),isGlobalContext:this[K_e].bind(this),postProcess:this[JI].bind(this),reset:this[wne].bind(this),runValidation:this[_ne].bind(this),runYargsParserAndExecuteCommands:this[z8].bind(this),setHasOutput:this[X_e].bind(this)}}[G_e](){return de(this,Sa,"f")}[H_e](){return de(this,$8,"f")}[j_e](){return de(this,x0,"f")}[V_e](){return de(this,ZS,"f")}[$_e](){return de(this,jI,"f")||{}}[z_e](){return de(this,jn,"f")}[Y_e](){return de(this,la,"f")}[WO](){return!!de(this,v0,"f")}[K_e](){return de(this,MO,"f")}[JI](e,r,n,i){return n||As(e)||(r||(e=this[N_e](e)),(this[KI]()["parse-positional-numbers"]||this[KI]()["parse-positional-numbers"]===void 0)&&(e=this[q_e](e)),i&&(e=qI(e,this,de(this,Kf,"f").getMiddleware(),!1))),e}[wne](e={}){Er(this,Or,de(this,Or,"f")||{},"f");let r={};r.local=de(this,Or,"f").local||[],r.configObjects=de(this,Or,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(l=>{n[l]=!0})}),Object.assign(de(this,VI,"f"),Object.keys(de(this,Cg,"f")).reduce((a,l)=>{let c=de(this,Cg,"f")[l].filter(u=>!(u in n));return c.length>0&&(a[l]=c),a},{})),Er(this,Cg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(de(this,Or,"f")[a]||[]).filter(l=>!n[l])}),o.forEach(a=>{r[a]=sv(de(this,Or,"f")[a],l=>!n[l])}),r.envPrefix=de(this,Or,"f").envPrefix,Er(this,Or,r,"f"),Er(this,jn,de(this,jn,"f")?de(this,jn,"f").reset(n):w_e(this,de(this,Fn,"f")),"f"),Er(this,la,de(this,la,"f")?de(this,la,"f").reset(n):D_e(this,de(this,jn,"f"),de(this,Fn,"f")),"f"),Er(this,Sa,de(this,Sa,"f")?de(this,Sa,"f").reset():E_e(de(this,jn,"f"),de(this,la,"f"),de(this,Kf,"f"),de(this,Fn,"f")),"f"),de(this,zf,"f")||Er(this,zf,R_e(this,de(this,jn,"f"),de(this,Sa,"f"),de(this,Fn,"f")),"f"),de(this,Kf,"f").reset(),Er(this,C0,null,"f"),Er(this,Ql,"","f"),Er(this,lv,null,"f"),Er(this,x0,!1,"f"),this.parsed=!1,this}[J_e](e,r){return de(this,Fn,"f").path.relative(e,r)}[z8](e,r,n,i=0,o=!1){let a=!!n||o;e=e||de(this,cv,"f"),de(this,Or,"f").__=de(this,Fn,"f").y18n.__,de(this,Or,"f").configuration=this[KI]();let l=!!de(this,Or,"f").configuration["populate--"],c=Object.assign({},de(this,Or,"f").configuration,{"populate--":!0}),u=de(this,Fn,"f").Parser.detailed(e,Object.assign({},de(this,Or,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,de(this,jI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===de(this,Jf,"f")&&d[y]?h=!0:y===de(this,xg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&de(this,jn,"f").clearCachedHelpMessage();try{if(this[Cne](),r)return this[JI](d,l,!!n,!1);de(this,Jf,"f")&&[de(this,Jf,"f")].concat(m[de(this,Jf,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),Er(this,MO,!1,"f");let y=de(this,Sa,"f").getCommands(),v=de(this,zf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==de(this,C0,"f")){let B=de(this,Sa,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[JI](B,l,!!n,!1)}else if(!E&&k!==de(this,C0,"f")){E=k;break}!de(this,Sa,"f").hasDefaultCommand()&&de(this,UO,"f")&&E&&!b&&de(this,la,"f").recommendCommands(E,y)}de(this,C0,"f")&&d._.includes(de(this,C0,"f"))&&!v&&(de(this,Yf,"f")&&av(!0),this.showCompletionScript(),this.exit(0))}if(de(this,Sa,"f").hasDefaultCommand()&&!b){let E=de(this,Sa,"f").runCommand(null,this,u,0,o,h||g||o);return this[JI](E,l,!!n,!1)}if(v){de(this,Yf,"f")&&av(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${de(this,zf,"f").completionKey}`)+1);return de(this,zf,"f").getCompletion(E,(_,k)=>{if(_)throw new gs(_.message);(k||[]).forEach(B=>{de(this,ZS,"f").log(B)}),this.exit(0)}),this[JI](d,!l,!!n,!1)}if(de(this,x0,"f")||(h?(de(this,Yf,"f")&&av(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(de(this,Yf,"f")&&av(!0),a=!0,de(this,jn,"f").showVersion("log"),this.exit(0))),!a&&de(this,Or,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>de(this,Or,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new gs(u.error.message);if(!v){let E=this[_ne](m,{},u.error);n||(p=qI(d,this,de(this,Kf,"f").getMiddleware(),!0)),p=this[W_e](E,p??d),As(p)&&!n&&(p=p.then(()=>qI(d,this,de(this,Kf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof gs)de(this,jn,"f").fail(y.message,y);else throw y}return this[JI](p??d,l,!!n,!0)}[_ne](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new gs(n.message);de(this,la,"f").nonOptionCount(a),de(this,la,"f").requiredArguments(a,o);let l=!1;de(this,zI,"f")&&(l=de(this,la,"f").unknownCommands(a)),de(this,$I,"f")&&!l?de(this,la,"f").unknownArguments(a,e,r,!!i):de(this,YI,"f")&&de(this,la,"f").unknownArguments(a,e,{},!1,!1),de(this,la,"f").limitedChoices(a),de(this,la,"f").implications(a),de(this,la,"f").conflicting(a)}}[X_e](){Er(this,x0,!0,"f")}[XI](e){if(typeof e=="string")de(this,Or,"f").key[e]=!0;else for(let r of e)de(this,Or,"f").key[r]=!0}};function I_e(t){return!!t&&typeof t.getInternalMethods=="function"}s(I_e,"isYargsInstance");var cmt=Z_e(y_e),eSe=cmt;f();f();var Y8="apps",Rne="hosts",K8=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}#e;setAuthAuthority(e){this.#e=e}async getAuthRecord({githubAppId:e}={}){let r=this.getAuthAuthority(),n=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,r,e));return!e&&!n?(e=this.ctx.get(_a).fallbackAppId(),n=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,r,e))):e??=this.ctx.get(_a).findAppIdToAuthenticate(),n?{...n,oauth_token:n.access_token||n.oauth_token,user:n.login||n.user,githubAppId:e}:await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(Rne,e);if(r){let n=this.ctx.get(_a).fallbackAppId();return{...r,githubAppId:n}}}async saveAuthRecord(e,r=this.getAuthAuthority()){await this.persistenceManager.update(Y8,this.authRecordKey(this.ctx,r,e.githubAppId),e)}async deleteAuthRecord(){let e=this.getAuthAuthority(),r=await this.getAuthRecord();if(r){let n=this.ctx.get(_a).fallbackAppId();r.githubAppId===n&&await this.persistenceManager.delete(Rne,e),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e)),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e,n))}}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(Rne)}authRecordKey(e,r,n){let i=n??e.get(_a).findAppIdToAuthenticate();return`${r}:${i}`}getAuthAuthority(){return this.#e??"github.com"}};f();f();var tSe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function rSe(t,e,r){let n=an.createAndMarkAsIssued({authSource:e,authType:r});return Dt(t,tSe.NewGitHubLogin,n)}s(rSe,"telemetryNewGitHubLogin");function nSe(t,e){let r=an.createAndMarkAsIssued({authType:e});return Dt(t,tSe.GitHubLoginSuccess,r)}s(nSe,"telemetryGitHubLoginSuccess");var kne=class extends ls{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function umt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...r0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(on).fetch(o,n)}catch(a){throw a instanceof Error&&AB(a)?new ls(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new ls(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(umt,"requestDeviceFlowStage1");async function dmt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...r0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(on).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new kne(a):new ls(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(dmt,"requestDeviceFlowStage2");async function fmt(t,e){nSe(t,"deviceFlow");let n=await(await Lf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ls(`Error retrieving user information: ${String(n.errors)}`);return n}s(fmt,"requestUserInfo");var ZI=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(Eu).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){rSe(e,"unknown","deviceFlow");let i=await umt(e,r,n),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await dmt(e,i.device_code,r,n);if(a-=c,l=u.access_token,l){let d=await fmt(e,{...n,accessToken:l});return{...n,githubAppId:r,login:d.login,accessToken:l}}c=u.interval??c}throw new ls("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var b0=class{static{s(this,"CitationManager")}},GO=class extends b0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var pmt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Go=class{constructor(){this.capabilities={...pmt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};f();f();f();f();function F1(t,e){let r=E0(t,e);return r===-1?void 0:t[r]}s(F1,"findLastMonotonous");function E0(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(E0,"findLastIdxMonotonous");function iSe(t,e){let r=e2(t,e);return r===t.length?void 0:t[r]}s(iSe,"findFirstMonotonous");function e2(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(e2,"findFirstIdxMonotonousOrArrLen");var J8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=E0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var Bne=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?HO.isErrorNoTelemetry(e)?new HO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},oSe=new Bne;function t2(t){oSe.onUnexpectedError(t)}s(t2,"onBugIndicatingError");function r5(t){mmt(t)||oSe.onUnexpectedError(t)}s(r5,"onUnexpectedError");var Dne="Canceled";function mmt(t){return t instanceof vg?!0:t instanceof Error&&t.name===Dne&&t.message===Dne}s(mmt,"isCancellationError");var vg=class extends Error{static{s(this,"CancellationError")}constructor(){super(Dne),this.name=this.message}};function X8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(X8,"illegalArgument");function sSe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(sSe,"illegalState");var HO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},xn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function r2(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(r2,"equals");function*n5(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(n5,"groupAdjacentBy");function lSe(t,e){for(let r=0;r<=t.length;r++)e(r===0?void 0:t[r-1],r===t.length?void 0:t[r])}s(lSe,"forEachAdjacent");function cSe(t,e){for(let r=0;r<t.length;r++)e(r===0?void 0:t[r-1],t[r],r+1===t.length?void 0:t[r+1])}s(cSe,"forEachWithNeighbors");function uSe(t){return t.filter(e=>!!e)}s(uSe,"coalesce");function dSe(t,e){for(let r of e)t.push(r)}s(dSe,"pushMany");var fSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(c){return c>0}l.isGreaterThan=r,s(r,"isGreaterThan");function n(c){return c===0}l.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(fSe||={});function I0(t,e){return(r,n)=>e(t(r),t(n))}s(I0,"compareBy");var T0=s((t,e)=>t-e,"numberComparator");function pSe(t){return(e,r)=>-t(e,r)}s(pSe,"reverseOrder");var jO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},aSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||fSe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};f();function ASe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(ASe,"groupBy");var hSe,gSe,mSe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[hSe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(gSe=Symbol.iterator,hSe=Symbol.toStringTag,gSe)](){return this.values()}};f();function Pne(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(Pne,"createSingleCallFunction");f();var Nne;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let B=k.length-1;B>=0;B--)yield k[B]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,B){let N=0;for(let W of k)if(B(W,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,B){for(let N of k)if(B(N))return N}_.find=d,s(d,"find");function*p(k,B){for(let N of k)B(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,B){let N=0;for(let W of k)yield B(W,N++)}_.map=m,s(m,"map");function*h(k,B){let N=0;for(let W of k)yield*B(W,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let B of k)yield*B}_.concat=g,s(g,"concat");function y(k,B,N){let W=N;for(let ee of k)W=B(W,ee);return W}_.reduce=y,s(y,"reduce");function*v(k,B,N=k.length){for(B<-k.length&&(B=0),B<0&&(B+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);B<N;B++)yield k[B]}_.slice=v,s(v,"slice");function b(k,B=Number.POSITIVE_INFINITY){let N=[];if(B===0)return[N,k];let W=k[Symbol.iterator]();for(let ee=0;ee<B;ee++){let me=W.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return W}}]}_.consume=b,s(b,"consume");async function E(k){let B=[];for await(let N of k)B.push(N);return Promise.resolve(B)}_.asyncToArray=E,s(E,"asyncToArray")})(Nne||={});f();var Lne=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function gmt(t){return Array.isArray(t)}s(gmt,"isEntries");var CSe,VO=class t{constructor(e,r){this[CSe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(gmt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Lne(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(CSe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},xSe,ySe=class{constructor(e,r){this[xSe]="ResourceSet";!e||typeof e=="function"?this._map=new VO(e):(this._map=new VO(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(xSe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var vSe,Fne=class{constructor(){this[vSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(vSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Mne=class extends Fne{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},$O=class extends Mne{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var i5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var Amt=!1,o5=null;var bSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&d.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new i5;for(let c of n){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}n.sort(I0(c=>c.idx,T0));let a="",l=0;for(let c of n.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=ASe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${n.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function ymt(t){o5=t}s(ymt,"setDisposableTracker");if(Amt){let t="__is_disposable_tracked__";ymt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function s5(t){return o5?.trackDisposable(t),t}s(s5,"trackDisposable");function a5(t){o5?.markAsDisposed(t)}s(a5,"markAsDisposed");function Qne(t,e){o5?.setParent(t,e)}s(Qne,"setParentOfDisposable");function Cmt(t,e){if(o5)for(let r of t)o5.setParent(r,e)}s(Cmt,"setParentOfDisposables");function ESe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(ESe,"isDisposable");function zO(t){if(Nne.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(zO,"dispose");function ISe(...t){let e=Ra(()=>zO(t));return Cmt(t,e),e}s(ISe,"combinedDisposable");function Ra(t){let e=s5({dispose:Pne(()=>{a5(e),t()})});return e}s(Ra,"toDisposable");var ku=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;s5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(a5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{zO(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Qne(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Qne(e,null))}},Ho=class{constructor(){this._store=new ku;s5(this),Qne(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){a5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Xf=class extends Ho{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(Ds(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",l=parseFloat(n.get("rem")||"0.0"),c=n.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var TSe=Ve(require("events"));var YO="CompletionRequested",bg=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new TSe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(YO,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=bu(this.ctx,e,`event.${YO}`);return this.#e.on(YO,r),pn.Disposable.create(()=>this.#e.off(YO,r))}};f();var One=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},l5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new One(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var KO=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=SSe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=wSe(n.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=n.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=wSe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&_Se(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},dv;(function(t){function e(i,o,a,l){return new KO(i,o,a,l)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof KO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),l=Une(o.map(xmt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(dv||(dv={}));function Une(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);Une(n,e),Une(i,e);let o=0,a=0,l=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[l++]=n[o++]:t[l++]=i[a++];for(;o<n.length;)t[l++]=n[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Une,"mergeSort");function wSe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);_Se(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(wSe,"computeLineOffsets");function _Se(t){return t===13||t===10}s(_Se,"isEOL");function SSe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(SSe,"getWellformedRange");function xmt(t){let e=SSe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(xmt,"getWellformedEdit");f();var RSe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(RSe||(RSe={}));var qne;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(qne||(qne={}));var kSe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(kSe||(kSe={}));var JO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(JO||(JO={}));var zc;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=JO.MAX_VALUE),i===Number.MAX_VALUE&&(i=JO.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&je.uinteger(i.line)&&je.uinteger(i.character)}s(r,"is"),t.is=r})(zc||(zc={}));var es;(function(t){function e(n,i,o,a){if(je.uinteger(n)&&je.uinteger(i)&&je.uinteger(o)&&je.uinteger(a))return{start:zc.create(n,i),end:zc.create(o,a)};if(zc.is(n)&&zc.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&zc.is(i.start)&&zc.is(i.end)}s(r,"is"),t.is=r})(es||(es={}));var XO;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&es.is(i.range)&&(je.string(i.uri)||je.undefined(i.uri))}s(r,"is"),t.is=r})(XO||(XO={}));var BSe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&es.is(i.targetRange)&&je.string(i.targetUri)&&es.is(i.targetSelectionRange)&&(es.is(i.originSelectionRange)||je.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(BSe||(BSe={}));var Wne;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&je.numberRange(i.red,0,1)&&je.numberRange(i.green,0,1)&&je.numberRange(i.blue,0,1)&&je.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Wne||(Wne={}));var DSe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&es.is(i.range)&&Wne.is(i.color)}s(r,"is"),t.is=r})(DSe||(DSe={}));var PSe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&je.string(i.label)&&(je.undefined(i.textEdit)||u5.is(i))&&(je.undefined(i.additionalTextEdits)||je.typedArray(i.additionalTextEdits,u5.is))}s(r,"is"),t.is=r})(PSe||(PSe={}));var NSe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(NSe||(NSe={}));var LSe;(function(t){function e(n,i,o,a,l,c){let u={startLine:n,endLine:i};return je.defined(o)&&(u.startCharacter=o),je.defined(a)&&(u.endCharacter=a),je.defined(l)&&(u.kind=l),je.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&je.uinteger(i.startLine)&&je.uinteger(i.startLine)&&(je.undefined(i.startCharacter)||je.uinteger(i.startCharacter))&&(je.undefined(i.endCharacter)||je.uinteger(i.endCharacter))&&(je.undefined(i.kind)||je.string(i.kind))}s(r,"is"),t.is=r})(LSe||(LSe={}));var Gne;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&XO.is(i.location)&&je.string(i.message)}s(r,"is"),t.is=r})(Gne||(Gne={}));var FSe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(FSe||(FSe={}));var MSe;(function(t){t.Unnecessary=1,t.Deprecated=2})(MSe||(MSe={}));var QSe;(function(t){function e(r){let n=r;return je.objectLiteral(n)&&je.string(n.href)}s(e,"is"),t.is=e})(QSe||(QSe={}));var ZO;(function(t){function e(n,i,o,a,l,c){let u={range:n,message:i};return je.defined(o)&&(u.severity=o),je.defined(a)&&(u.code=a),je.defined(l)&&(u.source=l),je.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return je.defined(o)&&es.is(o.range)&&je.string(o.message)&&(je.number(o.severity)||je.undefined(o.severity))&&(je.integer(o.code)||je.string(o.code)||je.undefined(o.code))&&(je.undefined(o.codeDescription)||je.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(je.string(o.source)||je.undefined(o.source))&&(je.undefined(o.relatedInformation)||je.typedArray(o.relatedInformation,Gne.is))}s(r,"is"),t.is=r})(ZO||(ZO={}));var c5;(function(t){function e(n,i,...o){let a={title:n,command:i};return je.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.string(i.title)&&je.string(i.command)}s(r,"is"),t.is=r})(c5||(c5={}));var u5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return je.objectLiteral(a)&&je.string(a.newText)&&es.is(a.range)}s(i,"is"),t.is=i})(u5||(u5={}));var Hne;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&je.string(i.label)&&(je.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(je.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(Hne||(Hne={}));var d5;(function(t){function e(r){let n=r;return je.string(n)}s(e,"is"),t.is=e})(d5||(d5={}));var OSe;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function r(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return u5.is(a)&&(Hne.is(a.annotationId)||d5.is(a.annotationId))}s(i,"is"),t.is=i})(OSe||(OSe={}));var jne;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&Kne.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(jne||(jne={}));var Vne;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&je.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||d5.is(i.annotationId))}s(r,"is"),t.is=r})(Vne||(Vne={}));var $ne;(function(t){function e(n,i,o,a){let l={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&je.string(i.oldUri)&&je.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||d5.is(i.annotationId))}s(r,"is"),t.is=r})($ne||($ne={}));var zne;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&je.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||je.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||je.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||d5.is(i.annotationId))}s(r,"is"),t.is=r})(zne||(zne={}));var Yne;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>je.string(i.kind)?Vne.is(i)||$ne.is(i)||zne.is(i):jne.is(i)))}s(e,"is"),t.is=e})(Yne||(Yne={}));var USe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.string(i.uri)}s(r,"is"),t.is=r})(USe||(USe={}));var qSe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.string(i.uri)&&je.integer(i.version)}s(r,"is"),t.is=r})(qSe||(qSe={}));var Kne;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.string(i.uri)&&(i.version===null||je.integer(i.version))}s(r,"is"),t.is=r})(Kne||(Kne={}));var WSe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.string(i.uri)&&je.string(i.languageId)&&je.integer(i.version)&&je.string(i.text)}s(r,"is"),t.is=r})(WSe||(WSe={}));var Jne;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(Jne||(Jne={}));var Z8;(function(t){function e(r){let n=r;return je.objectLiteral(r)&&Jne.is(n.kind)&&je.string(n.value)}s(e,"is"),t.is=e})(Z8||(Z8={}));var GSe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(GSe||(GSe={}));var HSe;(function(t){t.PlainText=1,t.Snippet=2})(HSe||(HSe={}));var jSe;(function(t){t.Deprecated=1})(jSe||(jSe={}));var VSe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&je.string(i.newText)&&es.is(i.insert)&&es.is(i.replace)}s(r,"is"),t.is=r})(VSe||(VSe={}));var $Se;(function(t){t.asIs=1,t.adjustIndentation=2})($Se||($Se={}));var zSe;(function(t){function e(r){let n=r;return n&&(je.string(n.detail)||n.detail===void 0)&&(je.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(zSe||(zSe={}));var YSe;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(YSe||(YSe={}));var KSe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(KSe||(KSe={}));var eU;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return je.string(i)||je.objectLiteral(i)&&je.string(i.language)&&je.string(i.value)}s(r,"is"),t.is=r})(eU||(eU={}));var JSe;(function(t){function e(r){let n=r;return!!n&&je.objectLiteral(n)&&(Z8.is(n.contents)||eU.is(n.contents)||je.typedArray(n.contents,eU.is))&&(r.range===void 0||es.is(r.range))}s(e,"is"),t.is=e})(JSe||(JSe={}));var XSe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(XSe||(XSe={}));var ZSe;(function(t){function e(r,n,...i){let o={label:r};return je.defined(n)&&(o.documentation=n),je.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(ZSe||(ZSe={}));var e5e;(function(t){t.Text=1,t.Read=2,t.Write=3})(e5e||(e5e={}));var t5e;(function(t){function e(r,n){let i={range:r};return je.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(t5e||(t5e={}));var r5e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(r5e||(r5e={}));var n5e;(function(t){t.Deprecated=1})(n5e||(n5e={}));var i5e;(function(t){function e(r,n,i,o,a){let l={name:r,kind:n,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(i5e||(i5e={}));var o5e;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(o5e||(o5e={}));var s5e;(function(t){function e(n,i,o,a,l,c){let u={name:n,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&je.string(i.name)&&je.number(i.kind)&&es.is(i.range)&&es.is(i.selectionRange)&&(i.detail===void 0||je.string(i.detail))&&(i.deprecated===void 0||je.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(s5e||(s5e={}));var a5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(a5e||(a5e={}));var tU;(function(t){t.Invoked=1,t.Automatic=2})(tU||(tU={}));var l5e;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.typedArray(i.diagnostics,ZO.is)&&(i.only===void 0||je.typedArray(i.only,je.string))&&(i.triggerKind===void 0||i.triggerKind===tU.Invoked||i.triggerKind===tU.Automatic)}s(r,"is"),t.is=r})(l5e||(l5e={}));var c5e;(function(t){function e(n,i,o){let a={title:n},l=!0;return typeof i=="string"?(l=!1,a.kind=i):c5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&je.string(i.title)&&(i.diagnostics===void 0||je.typedArray(i.diagnostics,ZO.is))&&(i.kind===void 0||je.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||c5.is(i.command))&&(i.isPreferred===void 0||je.boolean(i.isPreferred))&&(i.edit===void 0||Yne.is(i.edit))}s(r,"is"),t.is=r})(c5e||(c5e={}));var u5e;(function(t){function e(n,i){let o={range:n};return je.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&es.is(i.range)&&(je.undefined(i.command)||c5.is(i.command))}s(r,"is"),t.is=r})(u5e||(u5e={}));var d5e;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&je.uinteger(i.tabSize)&&je.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(d5e||(d5e={}));var f5e;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&es.is(i.range)&&(je.undefined(i.target)||je.string(i.target))}s(r,"is"),t.is=r})(f5e||(f5e={}));var p5e;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&es.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(p5e||(p5e={}));var m5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(m5e||(m5e={}));var h5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(h5e||(h5e={}));var g5e;(function(t){function e(r){let n=r;return je.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(g5e||(g5e={}));var A5e;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&je.string(i.text)}s(r,"is"),t.is=r})(A5e||(A5e={}));var y5e;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&je.boolean(i.caseSensitiveLookup)&&(je.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(y5e||(y5e={}));var C5e;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&(je.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(C5e||(C5e={}));var x5e;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return je.defined(i)&&es.is(n.stoppedLocation)}s(r,"is"),t.is=r})(x5e||(x5e={}));var Xne;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Xne||(Xne={}));var Zne;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&(i.tooltip===void 0||je.string(i.tooltip)||Z8.is(i.tooltip))&&(i.location===void 0||XO.is(i.location))&&(i.command===void 0||c5.is(i.command))}s(r,"is"),t.is=r})(Zne||(Zne={}));var v5e;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return je.objectLiteral(i)&&zc.is(i.position)&&(je.string(i.label)||je.typedArray(i.label,Zne.is))&&(i.kind===void 0||Xne.is(i.kind))&&i.textEdits===void 0||je.typedArray(i.textEdits,u5.is)&&(i.tooltip===void 0||je.string(i.tooltip)||Z8.is(i.tooltip))&&(i.paddingLeft===void 0||je.boolean(i.paddingLeft))&&(i.paddingRight===void 0||je.boolean(i.paddingRight))}s(r,"is"),t.is=r})(v5e||(v5e={}));var b5e;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(b5e||(b5e={}));var E5e;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(E5e||(E5e={}));var I5e;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(I5e||(I5e={}));var T5e;(function(t){t.Invoked=0,t.Automatic=1})(T5e||(T5e={}));var w5e;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(w5e||(w5e={}));var _5e;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(_5e||(_5e={}));var S5e;(function(t){function e(r){let n=r;return je.objectLiteral(n)&&qne.is(n.uri)&&je.string(n.name)}s(e,"is"),t.is=e})(S5e||(S5e={}));var R5e;(function(t){function e(o,a,l,c){return new eie(o,a,l,c)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(je.defined(a)&&je.string(a.uri)&&(je.undefined(a.languageId)||je.string(a.languageId))&&je.uinteger(a.lineCount)&&je.func(a.getText)&&je.func(a.positionAt)&&je.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(R5e||(R5e={}));var eie=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return zc.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return zc.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},je;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(je||(je={}));var jo=class{static{s(this,"LocationFactory")}static{this.range=es.create.bind(es)}static{this.position=zc.create.bind(zc)}},M1=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=dv.create(e.clientUri,e.clientLanguageId,n,e.getText());return dv.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=dv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return dv.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=Xx({uri:e,languageId:r})){return new t(Fl(e),dv.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=es.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=es.create(zc.create(r,0),zc.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var eD={isBlocked:!1,reason:"VALID_FILE"},rU={isBlocked:!1,reason:"NO_MATCHING_POLICY"},k5e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},n2={all:"all",repo:"repo"},Q1=new _t("contentExclusion");f();f();var nU=class{static{s(this,"PolicyEvaluator")}};f();f();f();var B5e=new _t("repository"),i2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},Rm=class{static{s(this,"GitConfigLoader")}},iU=class extends Rm{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};f();var D5e=require("os");var oU=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Hx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Hx.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,D5e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var sU=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(Rm).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new oU(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var vmt=100,tie=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},O1=class t{constructor(e){this.ctx=e;this.remoteResolver=new sU;this.cache=new Kr(vmt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=hd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new tie(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(lo),i=bo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=bo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=II(r,o[1]),l=bo(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=bo(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=bo(a,"commondir");a=II(a,(await e.readFileString(u)).trimEnd());let d=bo(a,"config");return await e.stat(d),d}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var P5e=s((t,e)=>{if(zx.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...zx.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var aU=new WeakMap;function lU(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&aU.has(t))return aU.get(t);switch(aU.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=lU(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+lU(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+lU(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return aU.set(t,n),n}s(lU,"t");function cU(t){return lU(t,0)}s(cU,"r");var rie=new WeakMap;function N5e(t,e,r=cU(e)){let n,i,o=rie.get(t);o||(rie.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=n[d++];u.r(m));}s(p,"o"),rie.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?n[d-1].r(u):n[d-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let l=o[0].push(r)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(N5e,"n");var L5e=new WeakMap;function bmt(t,e,r,n=cU(r)){if(e||(e=L5e.get(t)),e||L5e.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=N5e(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(bmt,"n");function F5e(t,e){return function(r,n){return bmt(t,e,r,n)}}s(F5e,"o");f();var n4e=Ve(Y5e(),1);f();var nD=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var kmt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},iD=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Bmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),K5e=s(t=>t.join(""),"rangesToString"),J5e=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,c=!1,u=!1,d=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(kmt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-r,!0];o+=v.length,_?i.push(b):n.push(b),l=l||E;continue e}}if(c=!1,p){y>p?n.push(iD(p)+"-"+iD(y)):y===p&&n.push(iD(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(iD(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(iD(y)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[Bmt(y),!1,d-r,!1]}let m="["+(u?"^":"")+K5e(n)+"]",h="["+(u?"":"^")+K5e(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,l,d-r,!0]},"parseClass");f();var fv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var Dmt=new Set(["!","?","+","*","@"]),X5e=s(t=>Dmt.has(t),"isExtglobType"),Pmt="(?!(?:^|/)\\.\\.?(?:$|/))",uU="(?!\\.)",Nmt=new Set(["[","."]),Lmt=new Set(["..","."]),Fmt=new Set("().*{}+?[]^$\\!"),Mmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),oie="[^/]",Z5e=oie+"*?",e4e=oie+"+?",f5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#l=this.#e===this?n:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,l=-1,c=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&X5e(y)&&e.charAt(h)==="("){r.push(g),g="";let v=new t(y,r);h=t.#u(e,v,h,i),r.push(v);continue}g+=y}return r.push(g),h}let u=n+1,d=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(X5e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),d.push(m),m="",r.push(...p,d),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#l}toRegExpSource(e){let r=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&Lmt.has(this.#n[0]))){let g=Nmt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!r&&!e&&g.has(u.charAt(0));d=y?Pmt:v?uU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,fv(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#n=[c],this.type=null,this.#t=void 0,[c,fv(this.toString()),!1,!1]}let a=!n||e||r||!uU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!r?uU:"")+e4e;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?uU:"")+Z5e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,fv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(Fmt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=J5e(e,l);if(p){o+=u,a=a||d,l+=p-1,r=r||m;continue}}if(c==="*"){n&&e==="*"?o+=e4e:o+=Z5e,r=!0;continue}if(c==="?"){o+=oie,r=!0;continue}o+=Mmt(c)}return[o,fv(e),!!r,a]}};f();var sie=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var ka=s((t,e,r={})=>(nD(e),!r.nocomment&&e.charAt(0)==="#"?!1:new p5(e,r).match(t)),"minimatch"),Qmt=/^\*+([^+@!?\*\[\(]*)$/,Omt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),Umt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),qmt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),Wmt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),Gmt=/^\*+\.\*+$/,Hmt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),jmt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),Vmt=/^\.\*+$/,$mt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),zmt=/^\*+$/,Ymt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),Kmt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),Jmt=/^\?+([^+@!?\*\[\(]*)?$/,Xmt=s(([t,e=""])=>{let r=i4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),Zmt=s(([t,e=""])=>{let r=o4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),eht=s(([t,e=""])=>{let r=o4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),tht=s(([t,e=""])=>{let r=i4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),i4e=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),o4e=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),s4e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",t4e={win32:{sep:"\\"},posix:{sep:"/"}},rht=s4e==="win32"?t4e.win32.sep:t4e.posix.sep;ka.sep=rht;var ep=Symbol("globstar **");ka.GLOBSTAR=ep;var nht="[^/]",iht=nht+"*?",oht="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",sht="(?:(?!(?:\\/|^)\\.).)*?",aht=s((t,e={})=>r=>ka(r,t,e),"filter");ka.filter=aht;var Zf=s((t,e={})=>Object.assign({},t,e),"ext"),lht=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ka;let e=ka;return Object.assign(s((n,i,o={})=>e(n,i,Zf(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Zf(t,o))}static defaults(i){return e.defaults(Zf(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Zf(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Zf(t,o))}},unescape:s((n,i={})=>e.unescape(n,Zf(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Zf(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Zf(t,i)),"filter"),defaults:s(n=>e.defaults(Zf(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Zf(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Zf(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Zf(t,o)),"match"),sep:e.sep,GLOBSTAR:ep})},"defaults");ka.defaults=lht;var a4e=s((t,e={})=>(nD(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,n4e.default)(t)),"braceExpand");ka.braceExpand=a4e;var cht=s((t,e={})=>new p5(t,e).makeRe(),"makeRe");ka.makeRe=cht;var uht=s((t,e,r={})=>{let n=new p5(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");ka.match=uht;var r4e=/[?*]|[+@!]\(.*?\)|\[|\]/,dht=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),p5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){nD(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||s4e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!r4e.test(o[2]))&&!r4e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],c=n[i+2],u=n[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),E=!b&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[B,N]=[e[_],r[k]];B.toLowerCase()===N.toLowerCase()&&(r[k]=B,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,c=e.length,u=r.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],p=e[a];if(this.debug(r,d,p),d===!1)return!1;if(d===ep){this.debug("GLOBSTAR",[r,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return n;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return a4e(this.pattern,this.options)}parse(e){nD(e);let r=this.options;if(e==="**")return ep;if(e==="")return"";let n,i=null;(n=e.match(zmt))?i=r.dot?Kmt:Ymt:(n=e.match(Qmt))?i=(r.nocase?r.dot?Wmt:qmt:r.dot?Umt:Omt)(n[1]):(n=e.match(Jmt))?i=(r.nocase?r.dot?Zmt:Xmt:r.dot?eht:tht)(n):(n=e.match(Gmt))?i=r.dot?jmt:Hmt:(n=e.match(Vmt))&&(i=$mt);let o=f5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?iht:r.dot?oht:sht,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?dht(d):d===ep?ep:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==ep||h===ep||(h===void 0?m!==void 0&&m!==ep?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==ep&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=ep))}),u.filter(d=>d!==ep).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(n.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ka.defaults(e).Minimatch}};ka.AST=f5;ka.Minimatch=p5;ka.escape=sie;ka.unescape=fv;var aie="contentExclusion",dU=class extends nU{static{s(this,"CopilotContentExclusion")}#e;#t=new Kr(1e4);#i=new Kr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=II(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??n2.all);if(!i)return rU;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,r);if(l.isBlocked)return l}catch(n){return Q1.exception(this.#e,n,`${aie}.evaluate`),k5e}return eD}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=eD,a,l=pte(e.replace(r,""));e:for(let c of n)for(let u of c.paths)if(ka(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=lie(c,"FILE_BLOCKED_PATH"),a=u;break e}return Q1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(l=>l.ifAnyMatch),o=r.filter(l=>l.ifNoneMatch);if(!n||i.length===0&&o.length===0)return eD;let a=this.evaluateFileContent(i,o,n);return Q1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>l4e(a)).some(a=>a.test(n)))return lie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>l4e(a)).some(a=>a.test(n)))return lie(i,"FILE_BLOCKED_TEXT_BASED");return eD}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ta(this.#e,e,`${aie}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=F5e(async e=>{let r=await this.#e.get(Qr).getGitHubSession();if(!r)throw new ls("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(n2.all);e.filter(u=>u!==n2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==n2.all).join(",")),i.searchParams.set("scope",o?n2.all:n2.repo);let l=await Lf(this.#e,r,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new eg(l)}return this.#s("fetch.success"),P5e(hht,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(O1).getRepo(hd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Dt(this.#e,`${aie}.${e}`,an.createAndMarkAsIssued(r,n))}};function l4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(l4e,"stringToRegex");function lie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(lie,"fileBlockedEvaluationResult");var fht=I.Object({name:I.String(),type:I.String()}),pht=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:fht}),cie=I.Array(pht),mht=I.Object({rules:cie,last_updated_at:I.String(),scope:I.String()}),hht=I.Array(mht);var Yc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new dU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Rr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(Rr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),Ds(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){let i=Wo(e)!==void 0;if(i||Q1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,r),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){Q1.error(this.ctx,"Error tracking telemetry",u)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Ki).setInactive(r??"Copilot is disabled"):this.ctx.get(Ki).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===rU.reason)return Q1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let l={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},c={elapsedMs:i};return Dt(this.ctx,e,an.createAndMarkAsIssued(l,c)),Dt(this.ctx,e,an.createAndMarkAsIssued({...l,path:r},c),1),Q1.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function U1(t,e,r){let n=await t.get(Yc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(U1,"isDocumentValid");var Rr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await U1(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Fl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return U1(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(lo).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(lo).readFileString(e)}getWorkspaceFolder(e){let r=Fl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Fl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Fl(e.uri);for(let n of this.getWorkspaceFolders()){let i=Fl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Ti(r)}};function ys(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ys,"statusFromTextDocumentResult");var vn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Rr).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Rr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await U1(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:M1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(lo).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(lo).stat(e)).size/1024/1024}};f();f();var Eg=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function q1(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(q1,"delay");f();var uie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},fU=class extends uie{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var vd=class{constructor(e){this.ctx=e;this.#e=new _t("AsyncCompletionManager");this.requests=new Kr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(die(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new fU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(kt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Eg,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(die(r,n,d)){if(d.state===0){let p=r.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)die(r,n,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function die(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(die,"isCandidate");f();f();var sD=class{constructor(e){this.maxSize=e;this.root=new oD;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new oD;n.removeChild(o),n.addChild(l,c),c.addChild(o.slice(l.length),a),n=c,i=i.slice(l.length);break}if(i.length>0){let o=new oD;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],l=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},oD=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var km=class{constructor(){this.cache=new sD(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new sD(100)}};f();f();f();var Bm=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return jc.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=XJ(n,jc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{ZJ(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var pU=class extends Bm{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,l=r.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function c4e(t,e){var l=[];try{let r=t.getText();let n=t.offsetAt(e);let i=XJ(l,jc.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{ZJ(l,u,d)}}s(c4e,"getBlockPositionType");f();f();var W1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function u4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let W;t[131]>1e-35?W=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?W=.07473600489975568:t[0]>93.50000000000001?W=-.021596848506011502:W=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?W=.10264284346448256:W=.031042487183181262:W=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?W=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?W=.006271403149804702:W=-.030013637555715046:t[0]>4449.500000000001?W=-.06556876058654929:W=.06437994816903034:t[32]>1e-35?W=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?W=-.09349726304052086:t[210]>1e-35?W=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?W=-.029188394315052574:W=.017219308333820193:W=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?W=-.04428555753857688:W=.0001456106867817353:t[5]>213.50000000000003?W=.01740292726636365:W=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?W=.03410288911259329:t[121]>1e-35?W=-.06056527462120627:t[8]>2592.5000000000005?W=.12166808844363577:t[191]>1e-35?W=.11669879218998758:W=-.001664858391716235:W=-.01262927450503166:W=-.04506589951879664:t[227]>1e-35?W=-.08548904959752329:W=.02156080776537726;let ee;t[306]>1e-35?t[149]>1e-35?ee=-.1389218965136736:ee=-.032218642644416894:t[13]>1e-35?ee=.006465035217331847:t[50]>1e-35?ee=-.1381687930130022:t[179]>1e-35?ee=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?ee=-.03262719498763048:ee=.023342916702125613:t[191]>1e-35?ee=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?ee=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?ee=-.09989343595668776:ee=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?ee=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?ee=-.09165257825246746:t[9]>32.50000000000001?ee=.02484870392366004:ee=-.008499493096971395:t[8]>24.500000000000004?ee=.02459679192828244:ee=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?ee=.0015644546318714849:ee=-.06579524865022705:ee=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?ee=.03331853632960164:ee=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?ee=-.019091477207111116:ee=.037878468575478504:t[94]>1e-35?ee=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?ee=.16919658785098224:t[243]>1e-35?ee=-.06580584936754524:ee=.01567555159935563:t[129]>1e-35?ee=.06721746994993226:t[10]>32.50000000000001?ee=-.046394462507797975:ee=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let ae;t[306]>1e-35?ae=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?ae=-.09091897542577475:ae=.04042943082645558:t[218]>1e-35?ae=.056254985867151:ae=-.053848117950183044:ae=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?ae=.021581808008986944:ae=-.05639286496176611:ae=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?ae=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?ae=.023885302967553288:ae=.1617794086125622:t[212]>1e-35?ae=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?ae=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?ae=.01894935813286188:ae=-.06449356357429188:ae=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?ae=-.034718828212885515:ae=.0898976288814321:t[1]>17.500000000000004?ae=-.15440137451988326:ae=-.03864183216821465:ae=.009988507307006308:ae=-.08540311947043305:t[50]>1e-35?ae=-.13323659732101975:t[134]>1e-35?ae=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?ae=.08082476177379844:ae=-.041665761903645876:t[179]>1e-35?ae=-.12405023987936657:t[39]>1e-35?ae=-.06247416524997478:t[138]>1e-35?ae=-.10724031753676487:ae=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let O;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?O=-.03461119351456781:O=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?O=-.12404435523286539:O=-.0034376913880382956:O=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?O=.0037507103585310234:O=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?O=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?O=-.04832024079663151:t[37]>1e-35?O=-.037103393468366934:O=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?O=.032539071163832034:t[5]>1643.5000000000002?O=.036408625378035665:t[0]>1500.5000000000002?O=-.1346358322854993:O=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?O=-.1133991164577881:t[9]>52.50000000000001?O=-.024478640359723122:O=.03673777861098756:O=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?O=.002583438691776944:O=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?O=-.02141222346712401:O=.06392462314316179:t[4]>12.500000000000002?O=.08700122294434816:t[8]>267.50000000000006?O=.056923170082743224:O=-.07716309825583327:t[32]>1e-35?O=-.03961343943752142:O=.002674914122888783:t[1]>42.50000000000001?O=-.05217539654421676:t[145]>1e-35?O=.09553630282946368:O=-.009424791262477729;let le;t[183]>1e-35?le=-.05753337139158443:t[308]>1e-35?le=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?le=-.10477869875380448:le=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?le=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?le=-.04442302951713574:le=.00012409888451734224:le=-.092199119633697:t[225]>1e-35?le=.13773072450201831:t[0]>2882.5000000000005?le=.0028540012229920533:t[298]>1e-35?le=.07134486044361629:le=.014297412329837425:t[145]>1e-35?le=.05608385321902638:t[92]>1e-35?le=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?le=-.0039957800609801315:le=.0776927564241081:t[203]>1e-35?le=-.05502900859432093:t[105]>1e-35?le=.06062892720841595:le=-.009574839629252128:t[31]>1e-35?le=.009488858841144216:t[23]>1e-35?t[20]>1e-35?le=.08818126313644752:t[8]>161.50000000000003?le=.014353968957885408:le=-.022240738532827903:t[210]>1e-35?le=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?le=-.043902062079383485:le=-.014741559220396223:le=-.00934935734853194:t[6]>32.50000000000001?le=.1514593126307404:le=.010771222510801532:t[10]>22.500000000000004?le=.01412495209334078:le=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let q;t[0]>384.50000000000006?t[84]>1e-35?q=-.06088131453064195:t[147]>1e-35?q=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?q=.04219361472548491:q=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?q=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?q=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?q=-.11431764534511478:q=.013549717238356157:q=-.020987333767091276:t[6]>2.5000000000000004?q=-.02914877855133127:q=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?q=-.10087072787978416:t[37]>1e-35?q=-.030467397753331196:t[229]>1e-35?q=-.1017559811057469:t[4]>20.500000000000004?q=-.00413177742240167:t[20]>1e-35?q=.05213315982685969:q=.0037921635866823133:t[8]>51.50000000000001?q=.07327913092421544:t[6]>49.50000000000001?q=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?q=.02744420891894289:q=.11288946357194463:q=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?q=-.012329314369909049:q=.026816658655600168:q=-.0872405354618811:q=.007872673500247845:t[1]>42.50000000000001?q=-.04309044198258254:t[145]>1e-35?q=.07572529147860785:t[7]>5.500000000000001?q=-.013837187093264945:t[1]>17.500000000000004?q=.04208698439539668:q=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let te;t[8]>2915.5000000000005?t[297]>1e-35?te=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?te=-.01034964686484714:te=-.07357437440667927:te=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?te=-.09476398869062203:t[9]>72.50000000000001?te=-.0757383854264379:te=.02806542779508718:te=-.05147742568418084:te=.10212721564444344:te=.0518263760642861:te=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?te=-.10669213185972036:te=.027050434286384796:t[302]>1e-35?te=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?te=.06354599160071946:t[1]>67.50000000000001?te=.05317447949011187:te=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?te=-.09369289448773599:t[0]>2215.5000000000005?te=.04077965380363924:t[0]>807.5000000000001?te=-.0591771776458298:te=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?te=-.016323380219241672:te=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?te=.03720704290087811:te=-.008730548158766654:t[4]>80.50000000000001?te=-.05346644687473197:te=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?te=.019984510398089086:te=-.03917825025861855:t[9]>170.50000000000003?te=-.09759719821334525:te=-.0023586682752856298;let pe;t[183]>1e-35?t[17]>1e-35?pe=.030100940443356424:t[10]>1.5000000000000002?pe=-.10861112216742408:pe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?pe=-.032062878390325456:pe=-.10808232631806887:t[8]>1641.5000000000002?pe=-.06147013392655731:t[4]>12.500000000000002?pe=.03324767551088266:t[145]>1e-35?pe=.028851633810612017:pe=-.054871239091792784:t[134]>1e-35?pe=-.023813968121342108:t[266]>1e-35?pe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?pe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?pe=-.025350325484720576:pe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?pe=.056817276537534815:pe=-.07674158463557636:pe=-.06335553143454145:t[1]>56.50000000000001?pe=.16390494217299284:pe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?pe=.041717597065890205:pe=-.10357913492269129:t[10]>29.500000000000004?pe=.1365512866715726:pe=.020600048310575665:pe=.09708785634773187:pe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?pe=-.03146213719547347:pe=.11784024316238083:pe=-.050940520532045355:pe=-.047988344143075616:t[191]>1e-35?pe=.028764654731460032:pe=.0011911575567860023;let re;t[294]>1e-35?t[10]>50.50000000000001?re=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?re=-.05103908560370243:re=.05002066201169583:re=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?re=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?re=.127983140816313:re=-.05436534163636867:re=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?re=-.009504203657088933:t[8]>819.5000000000001?re=.18689664822602375:re=.03635576744011826:re=-.029862411809998525:t[223]>1e-35?re=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?re=-.09405026597863717:t[0]>4153.500000000001?re=.053577663326799765:re=-.05062127873995668:re=.06512222894425874:t[39]>1e-35?re=-.04985311717827547:t[51]>1e-35?re=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?re=-.02860634573675884:re=.08863753005590103:re=.11158892111063744:t[0]>655.5000000000001?re=-.031005736641654926:re=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?re=-.00843386136334982:re=-.05273594615999777:re=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?re=-.015774115523598486:re=.10147367091236065:re=-.048307000563071016:re=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Ne;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Ne=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Ne=-.017696526862422682:Ne=.1450050954613223:Ne=-.05406930069823832:Ne=-.08308700260259043:t[120]>1e-35?Ne=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Ne=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Ne=.038431826961746934:Ne=-.05937462906539856:t[9]>65.50000000000001?Ne=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Ne=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Ne=-.09579030954062734:Ne=.025064711572811746:Ne=.02579440518821548:Ne=.1044440128091862:Ne=-.058348633139536844:Ne=.07766788227934436:Ne=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Ne=.07463684068207214:Ne=.18244269035484484:t[6]>39.50000000000001?Ne=-.06050050067471004:Ne=.05787759066913493:Ne=.010783225857972171:Ne=.1674891243602606:t[4]>9.500000000000002?Ne=-.004814132027475892:Ne=-.14543299413454813:Ne=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Ne=-.07634466313617769:Ne=.0287825335169114:Ne=-.06894721943300268:Ne=-.00023988459059521937;let Re;t[131]>1e-35?t[1]>93.50000000000001?Re=-.05706887458825395:t[2]>1.5000000000000002?Re=.011446637886629108:Re=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Re=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Re=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Re=.026278724448495064:Re=.17053138400480508:t[0]>4463.500000000001?Re=-.06482289890096041:Re=.03026516489536295:Re=-.031785170717683144:Re=.1312690622980455:t[13]>1e-35?Re=.14336922540461444:Re=.03523850945454039:Re=-.015407465968975714:t[39]>1e-35?Re=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Re=-.0659975068798723:Re=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Re=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Re=.057409156184759516:Re=.2024322059866388:Re=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Re=.010648654146284154:t[308]>1e-35?Re=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Re=.12364025998551711:Re=-.02247495081065243:t[1]>22.500000000000004?Re=-.0726295464624251:Re=.03481895086048152:t[0]>4331.500000000001?Re=-.04775443357020673:Re=.07172377425057568:t[2]>89.50000000000001?Re=-.11782645274716962:Re=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let pt;t[179]>1e-35?pt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?pt=-.07595415373151816:pt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?pt=.022822510448266862:pt=.17491569312933697:pt=-.058362287133533565:t[2]>2.5000000000000004?pt=-.03633895806364428:pt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?pt=-.07294848747514579:pt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?pt=-.07009535282685533:t[8]>2640.0000000000005?pt=-.051761240111316276:t[131]>1e-35?pt=-.06245774419231631:pt=.03495606662854905:pt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?pt=.0015036626973581122:pt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?pt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?pt=.022343994371919224:pt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?pt=.07724450228328664:t[0]>3853.5000000000005?pt=-.15671707454435677:t[10]>28.500000000000004?pt=-.10179090671841723:pt=.014878216919760927:pt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?pt=.14054154485273487:pt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?pt=-.08632985141410315:pt=.005524157938954954:pt=-.08802502622523681:pt=-.0004649168897260341;let Tt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Tt=-.007458687464321174:Tt=-.09444966249102484:t[1]>23.500000000000004?Tt=.08564129697360716:Tt=-.07105002902845851:Tt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Tt=-.10326216566705966:t[1]>26.500000000000004?Tt=.0050539832484585365:Tt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Tt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Tt=.05783632021087773:t[10]>17.500000000000004?Tt=-.06720598671764105:t[1]>47.50000000000001?Tt=.097495825172558:Tt=-.013372242800584872:Tt=-.06463226787713715:t[42]>1e-35?Tt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Tt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Tt=.11051270080118503:Tt=.027719462817590454:t[8]>597.5000000000001?Tt=-.08441503592016869:Tt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Tt=-.12190088985091102:Tt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Tt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Tt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Tt=.016585157185448045:Tt=-.11032043771149425:Tt=.01586986028570486:t[8]>388.50000000000006?Tt=-.10592413013261853:Tt=.04930703248769364:t[13]>1e-35?Tt=.003621937787920821:Tt=-.0013786331198611841;let Ct;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Ct=.009769895322846493:Ct=-.10620052926943656:t[9]>19.500000000000004?Ct=.03781202525403449:t[9]>14.500000000000002?Ct=-.11485785321365344:t[9]>6.500000000000001?Ct=.07677177833073881:t[0]>4342.500000000001?Ct=-.07079285609687631:t[49]>1e-35?Ct=.06156814809246001:Ct=-.014788509042554625:Ct=-.032659201618470655:t[5]>5207.500000000001?Ct=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Ct=-.03094160322187924:t[1]>29.500000000000004?Ct=.09474646043921069:Ct=.023445783928231618:Ct=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Ct=-.07164443768784848:t[1]>29.500000000000004?Ct=.089473622509272:t[8]>597.5000000000001?Ct=-.08155349903101317:Ct=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Ct=-.004003900679358653:t[190]>1e-35?Ct=-.09236113461485262:t[8]>3198.5000000000005?Ct=-.0124130160451179:Ct=.018453070064009328:t[15]>1e-35?Ct=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Ct=-.0009580759587680961:Ct=-.03227283036698222:Ct=.01369287669536875:t[1]>50.50000000000001?Ct=-.04213060332500437:t[35]>1e-35?Ct=-.11508095777767471:t[190]>1e-35?Ct=-.08611884672400155:t[297]>1e-35?Ct=.05723551879433584:Ct=-.004829340082311461;let bt;t[183]>1e-35?bt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?bt=-.11753465135886734:bt=-.007515490299047085:bt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?bt=-.12371142493530439:t[1]>36.50000000000001?bt=.032189417575190435:bt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?bt=-.0784518658439288:t[2]>54.50000000000001?bt=.12477882322370665:bt=.000313468482399738:bt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?bt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?bt=.0353146070135579:bt=-.06327619611098285:bt=.02813577701641991:bt=-.12354390728506215:t[34]>1e-35?bt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?bt=-.01245803535276381:bt=-.07169472553475001:t[1]>11.500000000000002?bt=.12989984824561698:bt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?bt=.010390226893521422:t[10]>14.500000000000002?bt=.16790888126487719:bt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?bt=-.043398307129729134:bt=.09963544907820426:t[9]>30.500000000000004?bt=-.13540713124984502:t[9]>17.500000000000004?bt=.0509435850590757:bt=-.04761897852404613:t[4]>78.50000000000001?bt=.09197086656470652:bt=.0006771050176682337;let ce;t[122]>1e-35?t[6]>36.50000000000001?ce=.05686884451670743:ce=-.05334759543084309:t[266]>1e-35?ce=-.08603579519816038:t[157]>1e-35?ce=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ce=-.0499592651503952:t[0]>725.5000000000001?ce=.11780353905132664:ce=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ce=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ce=-.03190157229022304:ce=.07985197845805492:ce=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ce=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ce=-.027174047777029083:ce=.057117284879796476:t[3]>43.50000000000001?ce=-.0016147040913107311:ce=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ce=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ce=-.01466076988151239:ce=.13375695925484857:ce=-.04885873081899647:t[0]>5566.500000000001?ce=.11086813028591343:t[8]>992.5000000000001?ce=-.07622304217072383:ce=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ce=.03285858361708423:ce=-.12354858211764992:ce=.0672788301823281:t[15]>1e-35?ce=.08658836986585006:ce=-.02741484278509758:t[290]>1e-35?ce=-.08161310335133287:t[135]>1e-35?ce=-.04824156054814152:ce=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let X;t[179]>1e-35?X=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?X=.1470294450403005:X=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?X=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?X=.07965955447707423:t[10]>10.500000000000002?X=-.09236156404262426:X=.03396273196231458:X=-.13246465021467432:X=.07092822261735353:X=-.08753829085942:X=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?X=.004705878789890202:X=.13775378964952867:X=-.04770928980587811:t[10]>29.500000000000004?X=.011221519891071544:t[0]>3853.5000000000005?X=.06365381191628273:X=.15506252245336827:t[1]>37.50000000000001?X=-.07254777021042061:X=.026514587757252385:t[308]>1e-35?X=.04115804816617256:t[10]>26.500000000000004?X=.02077721353011946:t[5]>3548.5000000000005?X=-.1280907116663952:X=-.021974774274438:t[306]>1e-35?X=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?X=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?X=-.005710865560475598:t[94]>1e-35?X=-.06751507982853555:X=.027250040757588703:t[9]>52.50000000000001?X=.07060357924595577:X=-.030297760713011795:X=-.0006005400085266517;let ne;t[113]>1e-35?ne=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ne=-.06996356565314456:ne=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ne=-.08317707559926495:t[21]>1e-35?ne=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ne=-.010538203005984922:ne=.08454819465349446:t[9]>124.50000000000001?ne=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ne=-.08542251249346582:t[9]>50.50000000000001?ne=-.023428882537657472:ne=.010042500833979073:ne=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ne=.03006025206979096:t[9]>108.50000000000001?ne=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ne=.04222035773042132:ne=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ne=-.07209095448054853:ne=.028065954981903313:ne=.08714651929917122:ne=-.006678820669279169:t[10]>40.50000000000001?ne=.006982396294941626:ne=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ne=-.09351114982645548:t[4]>3.5000000000000004?ne=-.004837550129223451:ne=-.08324141237464677:t[303]>1e-35?ne=.10703037493990825:t[9]>156.50000000000003?ne=-.10803018621648303:t[116]>1e-35?ne=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ne=.10261721665006701:ne=.018994509090668264:ne=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let Pe;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pe=.08396556264106572:Pe=-.0562516995099192:Pe=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Pe=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Pe=.0052017514017035915:Pe=-.11194119432743639:Pe=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Pe=-.025692451287403446:Pe=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Pe=-.11892250746801664:t[10]>22.500000000000004?Pe=.07548493166973796:Pe=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Pe=.13750699058082427:t[18]>1e-35?Pe=.06535408879552801:Pe=-.054118179035040674:Pe=.1344282838979622:t[0]>3982.5000000000005?Pe=-.10409582202467015:t[19]>1e-35?Pe=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Pe=.012705935670766466:Pe=.14149359442527545:Pe=-.047977876173706004:t[20]>1e-35?Pe=.057945228080337946:t[0]>3642.5000000000005?Pe=-.008726535792122467:Pe=-.08424769891378858:t[34]>1e-35?Pe=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Pe=.01196849566739346:Pe=.1614642278429876:Pe=-.043022338150701625:t[3]>5.500000000000001?Pe=-.03907848255033881:Pe=.018280601026175593:Pe=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let gt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?gt=-.01192072916082109:gt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?gt=.06874032717466054:t[4]>40.50000000000001?gt=-.07752510020707537:t[1]>76.50000000000001?gt=-.09944032260703917:t[8]>1381.5000000000002?gt=-.054466635810800745:t[1]>32.50000000000001?gt=.05974084520839573:gt=-.0384718740755954:gt=-.11374190719134032:t[0]>2151.5000000000005?gt=-.13703645155803298:gt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?gt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?gt=.013539805885738608:gt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?gt=.09941880179344399:gt=-.01608127391210995:gt=.08025226531247417:t[9]>67.50000000000001?gt=.13525448212444113:t[6]>61.50000000000001?gt=-.05511099182158894:t[94]>1e-35?gt=-.06821509831783572:t[128]>1e-35?gt=.11361314817714643:gt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?gt=-.09954181329804547:t[197]>1e-35?gt=.10102833149755386:t[188]>1e-35?gt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?gt=-.03781554214742005:gt=.09927933385592314:gt=-.020006000056720083:gt=-.10520473615957895:gt=-.12006990846253787:gt=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let lr;t[147]>1e-35?t[1]>53.50000000000001?lr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?lr=-.030504020655417463:lr=.07102458639110094:lr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?lr=.055304563442710876:t[1]>53.50000000000001?lr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?lr=-.1568835288372895:lr=-.0279829124400056:lr=.04493843959601833:lr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?lr=-.054133834303687026:t[9]>48.50000000000001?lr=.11263810289007213:t[9]>9.500000000000002?lr=-.02202034562838259:t[4]>45.50000000000001?lr=-.03410927569045158:lr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?lr=-.029687297407295893:lr=.10673602850001934:t[4]>42.50000000000001?lr=.0036275562945108117:lr=-.0760789221330622:lr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?lr=.08274426793676076:lr=-.07076234425516396:lr=.13890177606150175:lr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?lr=-.09250637750836187:lr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?lr=-.01897867921812603:lr=.04890781705365262:lr=-.11569892307597907:t[2]>106.50000000000001?lr=.09032697440623969:lr=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Gr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Gr=.0011484728213539738:Gr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Gr=-.09828874964938798:t[8]>1586.5000000000002?Gr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Gr=.011938269926919522:Gr=.17541983715953954:t[19]>1e-35?Gr=.023002786011088672:Gr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Gr=.06508934844183291:Gr=-.10168553534835639:Gr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Gr=.021140806225203937:Gr=-.1167833342453639:t[2]>33.50000000000001?Gr=.13163585734056618:Gr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Gr=.06314479201263888:Gr=-.09639088327091713:t[10]>29.500000000000004?Gr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Gr=40577156464836036e-21:Gr=.12322387121810757:Gr=-.03697224045046014:t[1]>22.500000000000004?Gr=.016474835887320276:Gr=.16919298733903063:Gr=.07633203630214054:Gr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Gr=.14150493354700563:Gr=-.01831155354975749:t[1]>28.500000000000004?Gr=-.07952557178685365:t[10]>28.500000000000004?Gr=.0665695554984927:Gr=-.053640139319277094:Gr=.0004754840665898665;let zr;t[76]>1e-35?zr=-.06814884255939921:t[179]>1e-35?zr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?zr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?zr=.004193658608848433:zr=-.1066968975983452:t[8]>302.50000000000006?zr=.05476730110440451:zr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?zr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?zr=.013555772109446666:zr=-.09856116699770784:zr=.0284329611813383:t[2]>52.50000000000001?zr=.04008708444763762:t[9]>29.500000000000004?zr=-.1289599546008197:zr=-.018566534248335896:t[8]>747.5000000000001?zr=.02236484980076122:zr=.1148871655157582:t[8]>3084.0000000000005?zr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?zr=.03164751204281298:zr=.11752140436184891:t[9]>42.50000000000001?zr=-.07180559595410106:t[22]>1e-35?zr=.09325040416256854:zr=-.016041122807939914:zr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?zr=-.010718250133458515:zr=.09818827994853763:zr=.010180038981174032:zr=-.039472162599295535:t[9]>170.50000000000003?zr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?zr=-.08674788057474031:zr=.02077653508548371:zr=-.0003536561382007414;let mn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?mn=.018337297491457794:mn=-.05926206443180149:mn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?mn=.10747078482128616:t[126]>1e-35?mn=-.10550625192391357:t[7]>71.50000000000001?mn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?mn=.1317396472229434:mn=-.025035791351328947:mn=-.0728334305864372:t[8]>963.5000000000001?mn=.023642201723096064:mn=.183010326734258:t[128]>1e-35?mn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?mn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?mn=-.1088876900335281:mn=.02758317023002635:mn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?mn=-.01928020117446408:mn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?mn=.07893723375925096:mn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?mn=-.10301657587280551:mn=.005787463140224318:mn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?mn=-.019296977889522397:mn=-.07274529751752634:t[1]>30.500000000000004?mn=-.050368901143148286:mn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?mn=.0015332402792773946:mn=.09930153676749967:mn=-.06370844564357069:mn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let yt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?yt=-.10504730480402079:t[5]>3341.5000000000005?yt=.11087894671081754:yt=-.0406668834674614:yt=.03308382165616109:t[8]>104.50000000000001?yt=-.10431436764549162:yt=.0073928337244891455:t[4]>34.50000000000001?yt=-.10571751512748416:yt=-.006081128814142983:t[13]>1e-35?yt=.1299673566095023:t[4]>60.50000000000001?yt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?yt=.04857126072645073:yt=-.03431365358104773:t[4]>16.500000000000004?yt=.04101865986596709:yt=.16480274980378218:t[10]>26.500000000000004?yt=.03673978504199255:t[10]>9.500000000000002?yt=-.10996402743800027:t[308]>1e-35?yt=.0553693735082498:yt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?yt=.010902983761213922:yt=.1325118659895645:yt=-.064362945508595:t[1]>66.50000000000001?yt=.033416767779331176:yt=-.054080316225040496:t[42]>1e-35?yt=-.07762364337810815:t[10]>1089.5000000000002?yt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?yt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?yt=.0220102041325908:yt=-.06516708740003069:yt=.012833498905748267:t[224]>1e-35?yt=-.007038418272997865:yt=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let Ar;t[40]>1e-35?t[0]>1937.5000000000002?Ar=-.06421671152073961:Ar=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Ar=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Ar=-.03520420769287065:t[8]>1085.5000000000002?Ar=-.019817352506127633:Ar=.11444439424520964:Ar=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Ar=-.010490117519863269:Ar=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Ar=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Ar=.06619344145920268:t[0]>4091.5000000000005?Ar=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ar=.10016091391222309:Ar=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Ar=-.019511460451434884:Ar=-.11643672465055221:t[2]>18.500000000000004?Ar=.07848228087333317:t[8]>55.50000000000001?Ar=.032583027899956235:Ar=-.11209832692153521:t[11]>1e-35?Ar=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Ar=-.09996887746328006:t[9]>2.5000000000000004?Ar=.02157682011863397:Ar=-.05247727848991843:Ar=.07409150201483244:t[1]>38.50000000000001?Ar=-.11378466075449625:t[224]>1e-35?Ar=-.10741749127732923:t[1]>26.500000000000004?Ar=.07343136534146562:Ar=-.07013573628594773:t[25]>1e-35?Ar=-.04626669734164317:Ar=.05518333197956482:Ar=.00032434010867555516;let xr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?xr=.026313251010808853:xr=-.08997339150292381:xr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?xr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?xr=.0905155504503746:t[8]>1049.5000000000002?xr=-.062312558183394054:t[8]>719.5000000000001?xr=.09583836191410239:t[0]>3719.5000000000005?xr=-.0778097309430818:xr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?xr=-.12920865648544927:t[0]>2699.5000000000005?xr=-.07086587879041864:xr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?xr=-.11377786322600797:xr=-.009486325820117998:t[1]>55.50000000000001?xr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?xr=-.07938291201004219:t[2]>36.50000000000001?xr=.01520046732530246:xr=.13649854049662832:xr=-.07145015938528873:t[8]>407.50000000000006?xr=-.00350257360822279:xr=.11332047082193297:xr=-.10060624458629897:xr=.05429496612497562:t[8]>1446.5000000000002?xr=.006073419197482838:xr=-.08718676350883998:xr=-.11532497988252638:xr=.10766270463068293:t[34]>1e-35?xr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?xr=-.0004109812623829506:xr=.021601073497455662:xr=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let rr;t[76]>1e-35?rr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?rr=.013633653464240465:rr=-.10164319411983509:rr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?rr=.00632864847804078:rr=-.08393000368134668:rr=.07870508617440916:t[284]>1e-35?rr=.1092302727710421:rr=-.0025505047582483234:t[248]>1e-35?rr=.07101822393621864:t[274]>1e-35?rr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?rr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?rr=.025081789181021243:rr=-.014813325803582618:t[9]>33.50000000000001?rr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?rr=.11926990418060353:rr=.01852125513565268:rr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?rr=-.1178464984373743:t[283]>1e-35?rr=.043370859226927405:t[5]>4320.500000000001?rr=-.01103141226366587:t[8]>1104.5000000000002?rr=-.023053423988095886:rr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?rr=.000579145585864887:rr=.03389152834202143:t[128]>1e-35?rr=-.14527722052568462:t[210]>1e-35?rr=-.08915971541902741:t[7]>9.500000000000002?rr=-.03307314577076116:t[18]>1e-35?rr=-.05521712302023565:rr=.009315605032770029:rr=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Ir;t[3]>7.500000000000001?t[157]>1e-35?Ir=-.07514182877923786:Ir=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ir=.028692053800951845:Ir=.14081686716133598:Ir=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Ir=.0037139292567243084:Ir=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Ir=.01202688580305612:Ir=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Ir=.043935495082738626:Ir=-.05639305759669704:t[247]>1e-35?Ir=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Ir=.10331836202616368:Ir=.0006926658459781341:t[96]>1e-35?Ir=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Ir=-.0741403257305367:Ir=.022900127535540854:t[7]>3.5000000000000004?Ir=.038110741403836294:Ir=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ir=-.09552842289807008:t[1]>27.500000000000004?Ir=.012505935885798007:Ir=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Ir=-.1046104767723845:Ir=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Ir=.023466328488582572:Ir=.11730925774586994:Ir=-.04771965631104874:Ir=.17059689880751394:Ir=-.08181850955999449:t[26]>1e-35?Ir=-.12727482696678769:Ir=-.014343123272734182;let Nr;t[147]>1e-35?t[1]>53.50000000000001?Nr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Nr=-.02763546051134888:Nr=.06423344777499343:Nr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Nr=.049825139823021586:t[7]>22.500000000000004?Nr=-.01131680751379858:t[0]>2579.5000000000005?Nr=-.10673674485369694:Nr=-.015387212937189957:Nr=.04347325151148724:t[179]>1e-35?Nr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Nr=.0650355590939066:Nr=-.0473332870892226:Nr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Nr=.11139543329789044:t[126]>1e-35?Nr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Nr=.06370903833231022:t[10]>29.500000000000004?Nr=.03415223859607161:t[10]>3.5000000000000004?Nr=-.07415518117873297:Nr=-.0014119203473324082:Nr=.12617652343819508:t[9]>41.50000000000001?Nr=-.10311145857176976:t[8]>2757.5000000000005?Nr=-.08106484219011428:t[7]>71.50000000000001?Nr=-.09783384432091176:t[1]>88.50000000000001?Nr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Nr=-.008884084501608536:Nr=.061339437777743616:Nr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Nr=.01526664064166223:Nr=.13534828515415498:Nr=-.06985484465894776:Nr=.0005758961943178744;let Yr;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Yr=-.029152732370514342:Yr=.07173628916139178:t[1]>36.50000000000001?Yr=-.08859111297255318:Yr=.0018030071815630785:Yr=.13652461563759322:Yr=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Yr=-.07145140450454163:t[21]>1e-35?Yr=-.07422841663493233:Yr=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Yr=.11864240653986852:t[3]>33.50000000000001?Yr=-.08821209591953476:Yr=.05706392280054726:Yr=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Yr=.01953613016837112:Yr=-.059781039130025006:t[148]>1e-35?Yr=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Yr=.07207826841738371:t[202]>1e-35?Yr=.08163917539410503:Yr=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Yr=-.06858280496900336:Yr=-.1781828899516648:Yr=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Yr=.018232649414147116:Yr=-.04419781124222661:Yr=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Yr=.11452368095776105:Yr=-.036496437259924026:Yr=-.040445338739465486:Yr=.0816572651001145:Yr=-.08968914517368663:Yr=.0002826343082585516;let Wn;t[189]>1e-35?t[0]>5269.500000000001?Wn=-.08839493050459957:t[10]>85.50000000000001?Wn=.10046908365702462:t[8]>2592.5000000000005?Wn=-.09632233975926387:t[8]>2000.5000000000002?Wn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Wn=.035504970430426296:t[1]>31.500000000000004?Wn=-.1133764813142531:Wn=-.01138280942244812:t[8]>1125.5000000000002?Wn=.09800530246229806:Wn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Wn=.07316772160107896:Wn=-.059095014819051765:Wn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Wn=-.09150209066166894:t[8]>3084.0000000000005?Wn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Wn=-.04449234460408263:Wn=.05568837973347338:Wn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Wn=.12741077850267066:Wn=.007372371864985329:t[2]>39.50000000000001?Wn=.02295917234617787:Wn=.14966532083907075:t[1]>39.50000000000001?Wn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Wn=-.02511861881285652:t[1]>27.500000000000004?Wn=.08683660011672288:Wn=.02956214835267301:t[9]>15.500000000000002?Wn=-.016538805462996232:Wn=.04352738094981517:Wn=-.05561856645643868:t[9]>170.50000000000003?Wn=-.07996752635874248:t[179]>1e-35?Wn=-.09065975936933919:Wn=-.00042817975060427177;let Jn;t[39]>1e-35?t[4]>25.500000000000004?Jn=.03443173196222934:Jn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Jn=-.0013415395759330318:Jn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Jn=.002297618040307216:Jn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Jn=-.015297257305397608:Jn=.09651828834062742:Jn=-.06636003334371929:t[10]>11.500000000000002?Jn=.17631616138309397:t[0]>1639.5000000000002?Jn=3804386478092585e-20:Jn=-.09099296398683193:Jn=-.06874415876172972:t[0]>2151.5000000000005?Jn=-.1311264883406766:Jn=.00809052010141122:t[253]>1e-35?Jn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Jn=.045038497754638605:Jn=-.07770167665661752:Jn=-.08596294280650517:Jn=.08538655727027213:Jn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Jn=.054627956617973275:t[1]>61.50000000000001?Jn=-.11994465088415499:t[4]>8.500000000000002?Jn=.06676200239406452:Jn=-.027503148069376867:t[8]>676.5000000000001?Jn=-.10363964928357075:t[4]>8.500000000000002?Jn=-.07589816227175682:Jn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Jn=.009093153189012338:Jn=-.06119765876605404:Jn=.0004668642103528348;let Qn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Qn=-.10100794502567233:Qn=.08000205636470442:Qn=-.11945419826856896:t[113]>1e-35?Qn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Qn=.1224302423880318:Qn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Qn=.0019277012166729114:t[1]>28.500000000000004?Qn=-.054445821715687494:Qn=.045645722976713245:t[30]>1e-35?Qn=.13402660155331655:Qn=.008921176001777645:Qn=-.058547426505451076:Qn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Qn=-.13526418192218206:Qn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Qn=.0007263224246135398:Qn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Qn=-.11575657261278308:Qn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Qn=-.01995960178292952:Qn=.11216586049153021:Qn=-.10050961087149474:Qn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Qn=.10303451081526649:Qn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Qn=-.043799548968209395:Qn=-.12451444314954115:t[4]>12.500000000000002?Qn=-.03838117361958468:Qn=.06504990789767144:t[57]>1e-35?Qn=.06890006938293915:Qn=.0003914274695562949;let $n;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?$n=.004271749009686975:$n=-.10523878297127605:$n=.04633982158107851:$n=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?$n=-.08655730561951676:t[8]>919.5000000000001?$n=-.0676453705610183:t[7]>18.500000000000004?$n=-.027787974193650575:$n=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?$n=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?$n=-.03473877164537313:t[8]>719.5000000000001?$n=.10471053866934404:$n=.008236107678382981:t[4]>57.50000000000001?$n=.09412219478825269:t[10]>66.50000000000001?$n=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?$n=-.040681323751002293:$n=.06374650297561021:$n=.12884615227401788:t[10]>5.500000000000001?$n=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?$n=-.05474068967150784:$n=.03744700650806603:$n=-.07846396348680855:t[1]>42.50000000000001?$n=.018972315810821302:$n=.10953621007604744:t[5]>4439.500000000001?$n=.010999776705494586:t[1]>40.50000000000001?$n=-.12394200059775967:t[10]>2.5000000000000004?$n=.013528093962849453:$n=-.09222088417048682:$n=-.12662967149701485:$n=.09327296405849603:t[3]>99.50000000000001?$n=-.013581954439986752:$n=.0005526498251862075;let rn;t[187]>1e-35?t[243]>1e-35?rn=-.08392792551692502:t[10]>68.50000000000001?rn=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?rn=-.0825306209711224:rn=.049559996084532945:rn=-.1064938580886302:rn=.03353240732240275:rn=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?rn=.16966001471529374:t[1]>57.50000000000001?rn=-.005772777673676247:rn=.09383677041525058:t[8]>747.5000000000001?rn=.054068175469351235:rn=-.049968216310277036:t[8]>753.5000000000001?rn=-.0679383555784074:t[4]>8.500000000000002?rn=-.059757341189735386:rn=.05701083682780414:rn=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?rn=.05820296128730006:rn=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?rn=.15340611616954566:rn=.04385036188666874:t[0]>4449.500000000001?rn=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?rn=.004840354641006495:rn=.09967827580276283:rn=.11605363537391578:t[9]>19.500000000000004?rn=-.0735831692725717:rn=.019973331823355176:t[306]>1e-35?t[149]>1e-35?rn=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?rn=-.02442182361342386:rn=.10334853004243093:rn=-.030431948680167104:rn=-956078595250818e-19;let zn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?zn=-.040232505718244854:t[0]>3030.5000000000005?zn=.0634109586813073:zn=-.04043617034245621:zn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?zn=-.007859096946435131:zn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?zn=.05515771679628051:zn=-.04214471312668263:zn=-.09589322222261765:t[193]>1e-35?zn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?zn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?zn=-.08152604001147906:t[11]>1e-35?zn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?zn=.13100930780107503:t[10]>25.500000000000004?zn=.05921074710011526:zn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?zn=.0009447118243153454:zn=-.09820565036865991:zn=.057146909749745546:t[0]>2115.5000000000005?zn=-.12331216726611678:zn=.007281983677694285:t[2]>56.50000000000001?zn=.012310154675612615:zn=-.08873665774670461:t[6]>25.500000000000004?zn=.134708740821879:t[9]>5.500000000000001?zn=-.0805901581148979:t[224]>1e-35?zn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?zn=.10842593386554122:t[2]>13.500000000000002?zn=.06466798320378395:zn=-.08578130788886655:zn=-.03590892078300114:zn=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let U;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?U=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?U=.020637047900190317:U=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?U=-.04632587527094407:U=.08603684785510396:U=-.05101401015448496:U=.025466432054358498:U=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?U=.020385355430046367:U=.12032592051335252:U=-.012387370292173013:t[2]>23.500000000000004?U=-.12568545484492677:U=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?U=.043528764484784536:U=.14352071657196003:U=-.009332833816977268:U=.11186782227735846:U=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?U=-.05649104643152564:U=.03884200719305747:t[42]>1e-35?U=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?U=-.04103416502526736:U=.04881823954656287:t[4]>15.500000000000002?U=.009342724662897898:t[0]>3969.5000000000005?U=-.025637309961309498:U=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?U=-.08185697075265091:t[0]>2215.5000000000005?U=.030063975892297354:t[0]>807.5000000000001?U=-.03924325550733229:U=.0415330999189793:U=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let Z;t[7]>17.500000000000004?t[115]>1e-35?Z=.08741852531696623:t[167]>1e-35?Z=.10078975495600809:Z=-.0018324767784017562:t[290]>1e-35?Z=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Z=.1379733311640402:Z=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Z=-.09360083033774169:Z=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Z=-.015599362579530679:t[0]>4593.500000000001?Z=-.12029549262691491:Z=-.018917032256501397:Z=.04632831686576592:Z=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Z=-.05894883236412263:Z=.05213944998315824:Z=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Z=.07577412405680808:Z=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Z=-.0277076900736147:t[1]>65.50000000000001?Z=-.023587471585763506:Z=.10184896592433082:Z=-.057699270527916825:Z=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Z=.06566902102799584:t[10]>25.500000000000004?Z=-.07033633753181047:Z=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Z=-.08108035861059537:Z=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Z=-.12431182772561139:Z=.01886235886984271:Z=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let _r;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?_r=.057446442918106:_r=-.04404018270156349:_r=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?_r=-.05930486238817954:t[1]>29.500000000000004?_r=.06955866121256543:t[8]>597.5000000000001?_r=-.06538593556505168:_r=.06212512595497445:_r=.00021102929959182257:t[9]>90.50000000000001?_r=.0958061289119631:t[102]>1e-35?_r=.07172059675638813:t[1]>47.50000000000001?_r=-.03879798603977766:t[297]>1e-35?_r=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?_r=.003805910996312012:_r=.09304295674749524:t[11]>1e-35?t[18]>1e-35?_r=.11252376801858695:t[288]>1e-35?_r=-.10293901912180432:_r=.014669268837893872:t[1]>42.50000000000001?_r=-.05988274123836837:t[145]>1e-35?_r=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?_r=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?_r=-.03366718308159971:_r=.11936550608549797:t[1]>31.500000000000004?_r=-.07454716789539667:_r=.027859650621164217:t[10]>10.500000000000002?_r=-.11806374092321247:_r=-.03506042229223101:_r=-.0007080765837654515:t[10]>6.500000000000001?_r=-.028077713664996503:t[2]>7.500000000000001?_r=.15803724124216814:_r=.0351381284833169:_r=-.07877953381054767;let pr;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?pr=.14144941521975005:pr=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?pr=.10514088112381886:t[7]>18.500000000000004?pr=-.10370643555956745:pr=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?pr=-.0508129468802936:t[224]>1e-35?pr=-.037816066368733595:t[10]>43.50000000000001?pr=.07793408602607932:pr=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?pr=.036972453794202324:pr=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?pr=.09475302525132188:pr=-.03580104945898193:pr=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?pr=-.1282448778804823:pr=-.014395808269207212:pr=-.008940927190750592:pr=-.1459118815453748:t[0]>4897.500000000001?pr=-.09733068457286576:t[1]>57.50000000000001?pr=.06575271409540207:pr=-.019556422817450115:pr=-.10623959222984136:t[18]>1e-35?pr=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?pr=.008125645893104896:pr=-.11084368630465868:pr=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?pr=-.05854904579626861:t[4]>5.500000000000001?pr=.02985784951394175:pr=-.03247600140149334:pr=-.11152899295304973:pr=-.00035424577714215764;let un;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?un=-.06563670567578264:un=.067656954313663:un=-.10388217548685377:t[8]>2302.5000000000005?un=.07190621943790435:t[4]>67.50000000000001?un=.060020507643618604:t[4]>38.50000000000001?un=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?un=-.06568134366461277:t[8]>1075.5000000000002?un=-.004768057709758692:un=.11785959165999467:un=-.05080221682879267:un=.14814206127494542:un=-.07241946332311736:t[253]>1e-35?un=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?un=-.02471195342450034:un=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?un=-.10741850739482771:un=.010051635824944:un=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?un=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?un=-.08992396138178163:un=.010944365997007212:un=.06221307021813793:un=.1286024087559141:t[127]>1e-35?un=.06568148624531012:t[10]>40.50000000000001?un=-.07567979134643352:t[5]>5647.500000000001?un=.07594672895572069:un=-.018158016446439187:t[6]>55.50000000000001?un=.009293422430111872:t[4]>45.50000000000001?un=-.017749818406964022:t[2]>46.50000000000001?un=.01714136511113982:un=-724762291423549e-19;let hn;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?hn=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?hn=.07084726276890757:hn=-.11232323677722932:hn=.04812773089510436:hn=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?hn=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?hn=.0879462816013881:hn=-.002966662093626573:t[306]>1e-35?hn=-.04588085188342676:hn=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?hn=-.006600332774461143:hn=.1272481351557754:hn=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?hn=.011884312066620044:hn=.11678751052403374:t[4]>8.500000000000002?hn=.03627129613273813:hn=-.12132783497902287:hn=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?hn=-.06830131718398992:t[0]>5147.500000000001?hn=.062360406249609306:t[4]>4.500000000000001?hn=-.013162203864592055:hn=-.07153029184927609:hn=.07628618062271557:hn=-.12085065687320373:t[190]>1e-35?hn=-.045816889524231186:t[137]>1e-35?hn=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?hn=.025895337822752502:hn=-.06503949350616421:t[10]>227.50000000000003?hn=-.09989456525790491:t[10]>130.50000000000003?hn=.08616651057030683:hn=.0001234981796706021;let vr;t[8]>1014.5000000000001?t[9]>137.50000000000003?vr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?vr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?vr=-.141732381961068:vr=-.0317152307496497:vr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?vr=.12191801556691254:vr=-.0003444689085397977:vr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?vr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?vr=-.05676033995381961:vr=.10933961076803381:t[4]>26.500000000000004?vr=-.11667582544549814:t[8]>1765.5000000000002?vr=.032174455312047705:vr=-.0755016390126608:t[293]>1e-35?vr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?vr=.026571311956824436:t[15]>1e-35?vr=.06175459479851121:vr=-.018778084411148754:t[9]>40.50000000000001?vr=-.09420232889965811:vr=-.004578248021263184:t[2]>1.5000000000000002?vr=.005453714644971445:vr=-.03907138175699279:vr=-.055296364182154736:t[23]>1e-35?vr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?vr=-.09358146510580179:vr=.060524657996178094:vr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?vr=-.12698331085931538:vr=.006059605604079918:t[2]>196.50000000000003?vr=-.09451315810804783:vr=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let On;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?On=-.06904501553217077:On=.05696231672035904:On=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?On=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?On=-.011419256378538392:t[0]>3830.5000000000005?On=.140315841503076:On=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?On=-.04027822909411164:On=.03176085103667189:On=.06779515865838849:t[4]>15.500000000000002?On=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?On=.06124039747298539:On=-.04312732764434027:On=.09161522761808062:On=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?On=.11211681010488772:t[13]>1e-35?On=.06725735814960367:On=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?On=.11743605068905603:On=-.011309033539148687:On=-.07896094707523052:On=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?On=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?On=.02836295848998302:On=.12210680366745175:On=-.058302317470509096:t[5]>4144.500000000001?On=.06123341960495106:On=-.03840046906926525:On=-.05221474543453495:On=.03988215485860711:On=-.00033074684693083496;let Ws=ght(e+r+n+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+B+N+W+ee+me+ae+H+O+le+ie+j+q+Y+te+pe+re+fe+he+Ne+Re+Je+Me+pt+Tt+Ct+bt+ce+Oe+ye+tt+X+ne+We+Pe+be+ze+it+gt+Ot+lr+Lt+Gr+zr+mn+Ae+Ge+ut+yt+Xt+Gt+Ar+xr+jt+rr+Jt+Ir+Nr+Yr+Wn+Jn+Qn+$n+rn+zn+_e+U+ge+ve+Z+M+ke+$e+qt+_r+pr+un+hn+vr+Ht+On);return[1-Ws,Ws]}s(u4e,"multilineModelPredict");function ght(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(ght,"sigmoid");var Aht={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},d4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function f4e(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Aht[r]??[]).some(l=>o.includes(l))}s(f4e,"hasComment");var mU=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=f4e(e,-2,r),this.rstripSecondToLastLineHasComment=f4e(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},fie=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new mU(e,n),this.suffixFeatures=new mU(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(d4e).length+1).fill(0);r[d4e[this.language]??0]=1;let n=new Array(Object.keys(W1).length+1).fill(0);n[W1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(W1).length+1).fill(0);i[W1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(W1).length+1).fill(0);o[W1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(W1).length+1).fill(0);return a[W1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function yht(t,e){return new fie(t.prefix,t.suffix,e)}s(yht,"constructMultilineFeatures");function p4e(t,e){let r=yht(t,e).constructFeatures();return u4e(r)[1]}s(p4e,"requestMultilineScore");f();f();f();f();async function*G1(t,e){for await(let r of t)yield e(r)}s(G1,"asyncIterableMap");async function*m4e(t,e){for await(let r of t)await e(r)&&(yield r)}s(m4e,"asyncIterableFilter");async function*aD(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(aD,"asyncIterableMapFilter");async function*h4e(...t){for(let e of t)yield*e}s(h4e,"asyncIterableConcat");f();async function lD(t,e,r,n){let i=an.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(kt).updateExPValuesAndAssignments(n,i)}s(lD,"createTelemetryWithExpWithId");function gc(t,{turn:e,conversation:r}={},n){return lD(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(gc,"createTelemetryWithExpWithTurn");function cD(t,e,r,n,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(Cht(l))),a=a.extendedBy(u,d),a}s(cD,"extendUserMessageTelemetryData");function Cht(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(Cht,"mapSkillResolutionsForTelemetry");function g4e(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),hU(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(g4e,"createUserMessageTelemetryData");function A4e(t,e,r,n,i,o,a,l){let c=vht(n);return hU(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:n.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(A4e,"createModelMessageTelemetryData");function y4e(t,e,r,n,i,o,a){hU(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(y4e,"createOffTopicMessageTelemetryData");function C4e(t,e,r,n,i,o,a,l,c){let u=hU(t,l,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},c);return xht(t,r,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(C4e,"createSuggestionMessageTelemetryData");var x4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function v4e(t,e,r){let n=await gc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";w0(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(v4e,"telemetryIndexCodesearch");function hU(t,e,r,n,i,o,a){let l=a??an.createAndMarkAsIssued(),c={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=sr();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=Bu(r);return Dt(t,`${p}.message`,u),Dt(t,`${p}.messageText`,d,1),u}s(hU,"telemetryMessage");function b4e(t,e,r,n){w0(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(b4e,"createSuggestionShownTelemetryData");function xht(t,e,r,n,i,o,a,l){w0(t,l,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(xht,"createSuggestionSelectedTelemetryData");function w0(t,e,r,n,i,o){let a=o??an.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let l=a.extendedBy(r,n);return Dt(t,i,l),l}s(w0,"telemetryUserAction");function h5(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Dt(t,"engine.messages",n,1)}s(h5,"logEngineMessages");function Bu(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Bu,"telemetryPrefixForUiKind");function vht(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(vht,"getCodeBlocks");function E4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(E4e,"uiKindToIntent");function pv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(pv,"conversationSourceToUiKind");function I4e(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};w4e(t,"round",i.extendedBy(o,a))}s(I4e,"createAgentRoundTelemetryData");function T4e(t,e,r,n,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};w4e(t,"toolCall",l.extendedBy(c,u))}s(T4e,"createToolInvocationTelemetryData");function w4e(t,e,r){return Dt(t,`${Bu("agentPanel")}.${e}`,r)}s(w4e,"logAgenticEvent");f();var bd=new _t("streamChoices"),pie=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new gie;this.tool_calls=[];this.function_call=new hie;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new mie),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function bht(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(bht,"splitChunk");var mie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},hie=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},gie=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},mv=class t{constructor(e,r,n,i,o,a,l){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=hv(this.response);this.stats=new Aie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let l=n.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,r,n,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),bd.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),bd.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;bd.debug(this.ctx,"chunk",a.toString());let[l,c]=bht(r+a.toString());r=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(d)}catch{bd.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Eht(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?bd.error(this.ctx,"Error in response:",p.error.message):bd.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=hv(this.response,p),this.requestId.created===0&&p.choices?.length&&bd.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];bd.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new pie);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>uD(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Kx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&bd.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{bd.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>uD(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(bd.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function gU(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(bd.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),bd.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),bd.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution);return AU(t,n,o,e.index,e.requestId,i,r)}s(gU,"prepareSolutionForReturn");function uD(t){let e=t.text.join(""),r=Iht(t),n=Tht(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(uD,"convertToAPIJsonData");function Eht(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Eht,"isCopilotConfirmation");function Iht(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.length>0?JSON.parse(r.arguments.join("")):{};e.push({type:"function",function:{name:r.name,arguments:n},approxNumTokens:r.arguments.length+1})}return e}s(Iht,"extractToolCalls");function Tht(t){if(t.function_call.name){let e=t.function_call.arguments.length>0?JSON.parse(t.function_call.arguments.join("")):{};return{name:t.function_call.name,arguments:e}}}s(Tht,"extractFunctionCall");var Aie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new yie,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},yie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function yU(t,e){return t!==null&&typeof t=="object"&&e in t}s(yU,"hasKey");function Pu(t,e){return yU(t,e)?t[e]:void 0}s(Pu,"getKey");var S4e=Ve(ii());var Xs=new _t("fetchCompletions");function hv(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(hv,"getRequestId");function g5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(g5,"getProcessingTime");function R4e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(R4e,"uiKindToIntent");var Ed=class{static{s(this,"OpenAIFetcher")}};function wht(t,e,r,n){return jx(t,e,"proxy","v1/engines",r,n)}s(wht,"getProxyEngineUrl");function CU(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let l={...a};for(let c of n)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(CU,"sanitizeRequestOptionTelemetry");async function _4e(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(Ki),m=wht(t,a,r,n),h=c.extendedBy({endpoint:n,engineName:r,uiKind:l},_S(e));CU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Dt(t,"request.sent",h);let g=Js(),y=R4e(l);return iI(t,m,a.token,y,i,o,u,d).then(v=>{let b=hv(v,void 0);h.extendWithRequestId(b);let E=Js()-g;return h.measurements.totalTimeMs=E,Xs.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Xs.debug(t,"request.response properties",h.properties),Xs.debug(t,"request.response measurements",h.measurements),Xs.debug(t,"prompt:",e),Dt(t,"request.response",h),v}).catch(v=>{if(Lc(v))throw Dt(t,"request.cancel",h),v;p.setWarning(Pu(v,"message")??"");let b=h.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",b),h.properties.message=String(Pu(v,"name")??""),h.properties.code=String(Pu(v,"code")??""),h.properties.errno=String(Pu(v,"errno")??""),h.properties.type=String(Pu(v,"type")??"");let E=Js()-g;throw h.measurements.totalTimeMs=E,Xs.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Xs.debug(t,"request.error properties",h.properties),Xs.debug(t,"request.error measurements",h.measurements),Dt(t,"request.error",h),v}).finally(()=>{cIe(t,e,h)})}s(_4e,"fetchWithInstrumentation");async function _ht(t,e,r,n,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:l});CU(o,d,["messages"]),d.properties.headerRequestId=i,Dt(t,"request.sent",d);let p=Js(),m=R4e(l),h={...Vx(t)};try{let g=await iI(t,n,a.token,m,i,o,u,h),y=hv(g,void 0);d.extendWithRequestId(y);let v=Js()-p;return d.measurements.totalTimeMs=v,Xs.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${v}ms`),Xs.debug(t,"request.response properties",d.properties),Xs.debug(t,"request.response measurements",d.measurements),Xs.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",d),g}catch(g){if(Lc(g))throw Dt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",y),d.properties.message=String(Pu(g,"name")??""),d.properties.code=String(Pu(g,"code")??""),d.properties.errno=String(Pu(g,"errno")??""),d.properties.type=String(Pu(g,"type")??"");let v=Js()-p;throw d.measurements.totalTimeMs=v,Xs.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${v}ms`),Xs.debug(t,"request.error properties",d.properties),Xs.debug(t,"request.error measurements",d.measurements),Dt(t,"request.error",d),g}finally{h5(t,e,d)}}s(_ht,"fetchChatWithInstrumentation");function Cie(t){return m4e(t,e=>e.completionText.trim().length>0)}s(Cie,"postProcessChoices");var Sht="github.copilot.completions.quotaExceeded",dD=class extends Ed{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="completions",c=await e.get(Qr).getToken(),u=await this.fetchWithParameters(e,l,r,c,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Xs.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,r);return this.handleError(e,a,h,u,c)}let p=mv.create(e,r.count,u,n,[],o).processSSE(i),m=G1(p,h=>gU(e,h,n));return{type:"success",choices:Cie(m),getProcessingTime:s(()=>g5(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:l.id,stream:!0,...c},m=n.extendedBy({endpoint:d,model:l.name}),h=e.get(Ki),g=await e.get(Qr).getToken(),y=await _ht(e,r,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Xs.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=an.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=mv.create(e,1,y,m,[],S4e.CancellationToken.None).processSSE(),E=G1(b,_=>gU(e,_,n));return{type:"success",choices:Cie(E),getProcessingTime:s(()=>g5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="speculation",c=await e.get(Qr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:sr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,n,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Xs.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=mv.create(e,1,d,n,[],o).processSSE(i),h=G1(m,g=>gU(e,g,n));return{type:"success",choices:Cie(h),getProcessingTime:s(()=>g5(d),"getProcessingTime")}}createTelemetryData(e,r,n){return an.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let l={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await q1(0),a?.isCancellationRequested?"not-sent":await _4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let l=e.get(kt).disableLogProb(o),c={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:vU(e),temperature:A5(e,n.count),top_p:xU(e),n:n.count,stop:k4e(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!l)&&(c.logprobs=2);let u=B1(n.repoInfo);return u!==void 0&&(c.nwo=u),n.postOptions&&Object.assign(c,n.postOptions),n.prompt.context&&(c.extra.context=n.prompt.context),await q1(0),a?.isCancellationRequested?"not-sent":await _4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:Sht,title:"Learn More"});let c=Ds(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Xs.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Xs.error(e,l),r.setWarning(l),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Xs.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Dt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Qr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Xs.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Xs.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Xs.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function AU(t,e,r,n,i,o,a){return lIe(t,e,r,i,n),{completionText:e,meanLogProb:Rht(t,r),meanAlternativeLogProb:kht(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:sr(),finishReason:r.finish_reason}}s(AU,"convertToAPIChoice");function Rht(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){Mr.exception(t,r,"Error calculating mean prob")}}s(Rht,"calculateMeanLogProb");function kht(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){Mr.exception(t,r,"Error calculating mean prob")}}s(kht,"calculateMeanAlternativeLogProb");function A5(t,e){return tm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(A5,"getTemperatureForSamples");var Bht={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function k4e(t,e){return Bht[e??""]??[`


`,"\n```"]}s(k4e,"getStops");function xU(t){return 1}s(xU,"getTopP");function vU(t){return f8}s(vU,"getMaxSolutionTokens");var xie=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},bU=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new xie(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new pU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=AU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();var EU=new _t("getCompletions");function IU(t,e,r){r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=y5(r.resultType),Dt(t,`${e}.shown`,r.telemetry)}s(IU,"telemetryShown");function B4e(t,e,r){let n=e+".accepted";Dt(t,n,r)}s(B4e,"telemetryAccepted");function D4e(t,e,r){let n=e+".rejected";Dt(t,n,r)}s(D4e,"telemetryRejected");function Ig(t,e={}){return{...e,telemetryBlob:t}}s(Ig,"mkCanceledResultTelemetry");function Zs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Zs,"mkBasicResultTelemetry");function P4e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Js()-e.telemetryBlob.issuedTime,n=y5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return EU.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${l}`),Zee(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(EU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Dt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Zee(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(P4e,"handleGhostTextResultTelemetry");function y5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(y5,"resultTypeToString");f();f();f();async function Dht(t){if(t.isCancellationRequested)return;let e=new Eg,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(Dht,"cancellationTokenToPromise");async function N4e(t,e){if(e){let r=Dht(e);await Promise.race([t,r])}else await t}s(N4e,"raceCancellation");function vie(t){return Array.isArray(t)}s(vie,"isArrayOfT");async function TU(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let l;o instanceof Promise?l=await Pht(o,e):l=await Nht(o,e),r.set(i,l)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(TU,"resolveAll");async function Pht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:vie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await N4e(i,e),n.resolutionTime=performance.now()-r,n}s(Pht,"resolvePromise");async function Nht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await N4e(i,e),n.resolutionTime=performance.now()-r,n}s(Nht,"resolveIterable");f();var Lht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Fht="ms-vscode.cpptools",Mht="CppCompletionContextProvider";function L4e(t,e,r,n){(e.includes(Mht)||e.length===1&&e[0]==="*")&&M4e(t,r,n)}s(L4e,"fillInCppVSActiveExperiments");function F4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Fht))&&M4e(t,r,n)}s(F4e,"fillInCppVSCodeActiveExperiments");function M4e(t,e,r){try{let n=Lht,i=t.get(kt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){Mr.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){Mr.exception(t,n,"fillInCppActiveExperiments")}}s(M4e,"addActiveExperiments");f();function wU(t,e,r){try{let n=t.get(kt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return Mr.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(wU,"fillInCSharpActiveExperiments");f();var gv="fallbackContextProvider",_U={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function Q4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(gv))&&Qht(t,r,n)}s(Q4e,"fillInMultiLanguageActiveExperiments");function Qht(t,e,r){try{let n=Oht(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){Mr.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(Qht,"addActiveExperiments");function Oht(t,e){let r=_U,n=t.get(kt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){Mr.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(Oht,"getMultiLanguageContextProviderParamsFromExp");function O4e(t){let e={..._U};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(O4e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var U4e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),q4e=I.Intersect([I.Object({name:I.String(),value:I.String()}),U4e]),W4e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),U4e]),Uht=[q4e,W4e],qht=I.Union(Uht),Wht=new Map([["Trait",ms.Compile(q4e)],["CodeSnippet",ms.Compile(W4e)]]),Ght=s(t=>t,"ensureTypesAreEqual");Ght(!0);var Hht=I.Object({contextItems:I.Array(qht)}),jht=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),bie=I.Object({id:I.String()}),Vht=I.Intersect([bie,jht]),$ht=I.Intersect([bie,Hht]),G4e=I.Object({providers:I.Array(Vht)}),H4e=I.Object({providers:I.Array(bie)}),Eie=I.Object({providers:I.Array($ht),updating:I.Optional(I.Array(I.String()))}),SU=I.Intersect([CIe,I.Object({contextItems:I.Optional(Eie)})]);function RU(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(RU,"filterContextItemsByType");function j4e(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of Wht.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(j4e,"filterSupportedContextItems");function zht(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(zht,"validateContextItemId");function V4e(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??sr();if(!zht(o)){let a=sr();Mr.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=sr();Mr.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(V4e,"addOrValidateContextItemsIDs");f();var Ol=class{constructor(e=()=>new Iie){this.createStatistics=e;this.statistics=new Kr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},Iie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function $4e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s($4e,"componentStatisticsToPromptMatcher");var z4e=Ve(ii());var Ba=class{static{s(this,"ContextProviderRegistry")}},Tg=class{static{s(this,"DefaultContextProviders")}},x5=class extends Tg{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},Tie=class extends Ba{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a){if(o?.isCancellationRequested)return Mr.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;wU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(n,i),d=u.filter(_=>_[1]>0),p=u.filter(_=>_[1]<=0);if(F4e(this.ctx,d.map(_=>_[0].id),l,i),Q4e(this.ctx,d.map(_=>_[0].id),l,i),p.forEach(([_,k])=>{let B={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(B)}),d.length===0)return c;if(o?.isCancellationRequested)return Mr.debug(this.ctx,"Resolving context providers cancelled"),[];let m=new z4e.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=vB(this.ctx)&&!NL(this.ctx)?0:Yht(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:r,documentContext:n,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ol).getPreviousStatisticsForCompletion(r)?.get(_.id);k&&(b.previousUsageStatistics=k);let B=_.resolver.resolve(b,m.token);v.set(_.id,B)}let E=await TU(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let B=E.get(_.id);if(B){if(B.status==="error")uQ(B.reason)||Mr.error(this.ctx,`Error resolving context from ${_.id}: `,B.reason),c.push({providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let N=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(Mr.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let H=_.resolver.resolveOnTimeout(b);vie(H)?N.push(...H):H&&N.push(H),N.length>0&&(B.status="partial")}catch(H){Mr.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,H)}let[W,ee]=j4e(N);ee&&Mr.error(this.ctx,`Dropped ${ee} context items from ${_.id} due to invalid schema`);let me=V4e(this.ctx,W),ae={providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:me};c.push(ae)}this.ctx.get(Ol).getStatisticsForCompletion(r).setLastResolution(_.id,B.status)}else Mr.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(r,n){let i=BU(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,r);return[l,c]}))}},wie=class extends Ba{constructor(r){super();this.delegate=r;this._cachedContextItems=new Kr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(r,n,i,o,a);return c.length>0&&r&&this._cachedContextItems.set(r,c),c}};function kU(t,e){return new wie(new Tie(t,e))}s(kU,"getContextProviderRegistry");function Y4e(t,e,r){let n=t.get(Ol).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=n.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(Y4e,"telemetrizeContextItems");function K4e(t){return t.matchScore>0&&t.resolution!=="error"}s(K4e,"matchContextItems");function BU(t,e){let r=_ie(t,e),n=Jr(t,ft.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(Tg).getIds();return Array.from(new Set([...i,...r,...n]))}s(BU,"getActiveContextProviders");function _ie(t,e){return vB(t)?["*"]:t.get(kt).contextProviders(e)}s(_ie,"getExpContextProviders");function Sie(t,e){return BU(t,e).length>0}s(Sie,"useContextProviderAPI");function Yht(t,e){let r=Jr(t,ft.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(kt).contextProviderTimeBudget(e)}s(Yht,"getContextProviderTimeBudget");var tp=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Kr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o){let a=this.ctx.get(Ba),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(r,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},n,i,o?.data);this.scheduledResolutions.set(r,m)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var DU=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await D1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},PU=class extends DU{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=X4e(r,n),this.isBlockStart(Kht(r,n))&&this.isBlockBodyEmpty(r,n)}};function Kht(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(Kht,"getLineAtOffset");function X4e(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(X4e,"rewindToNearestNonWs");function J4e(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(J4e,"indent");function Jht(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=J4e(t,r),i=J4e(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(Jht,"outdented");var wg=class extends DU{constructor(r,n,i,o,a,l,c){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&hTe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=X4e(r,n);let i=await D1(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&Jht(d,p,r)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=n}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},Xht={python:new wg("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new wg("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new wg("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new wg("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new PU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new PU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new wg("csharp",{},new Map([]),[],"block",null,!0),java:new wg("java",{},new Map([]),[],"block",null,!0),php:new wg("php",{},new Map([]),[],"block",null,!0),cpp:new wg("cpp",{},new Map([]),[],"block",null,!0)};function Rie(t){if(!g0(t))throw new Error(`Language ${t} is not supported`);return Xht[nQ(t)]}s(Rie,"getBlockParser");async function Z4e(t,e,r){return g0(t)?Rie(t).isEmptyBlockStart(e,r):!1}s(Z4e,"isEmptyBlockStart");async function eRe(t,e,r,n){if(g0(t))return Rie(t).isBlockBodyFinished(e,r,n)}s(eRe,"isBlockBodyFinished");async function tRe(t,e,r){if(g0(t))return Rie(t).getNodeStart(e,r)}s(tRe,"getNodeStart");var z9r=new _t("parseBlock");function fD(t,e,r,n){let i=e.getText(jo.range(jo.position(0,0),r))+(n?`
`:""),o=e.offsetAt(r)+(n?1:0),a=e.detectedLanguageId;return l=>eRe(a,i,l,o)}s(fD,"parsingBlockFinished");function LU(t,e){return Z4e(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(LU,"isEmptyBlockStartUtil");async function rRe(t,e,r,n){let o=e.getText(jo.range(jo.position(0,0),r))+n,a=await tRe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(rRe,"getNodeStartUtil");var Zht=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),egt=new RegExp(`^(${Zht.join("|")})`);function tgt(t){return egt.test(t.trimLeft().toLowerCase())}s(tgt,"isContinuationLine");function NU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(NU,"indentationOfLine");function pD(t,e){let r=t.getText(),n=t.offsetAt(e);return kie(r,n,t.detectedLanguageId)}s(pD,"contextIndentation");function kie(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=NU(d[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=NU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(n,n.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=NU(n[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(kie,"contextIndentationFromText");var rgt=!1;function ngt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&rgt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<n.length;c++){let u=n[c];c==0&&o!==void 0&&(u=o+u);let d=NU(u);if(d!==void 0&&(d<l||d===l&&!tgt(u)))return n.slice(0,c).join(`
`).length}return"continue"}s(ngt,"completionCutOrContinue");function nRe(t,e){return async r=>{let n=ngt(r,t,e);return n==="continue"?void 0:n}}s(nRe,"indentationBlockFinished");f();f();f();function iRe(t,e){return{...oQ,useSubsetMatching:Bie(t,e)}}s(iRe,"getCppSimilarFilesOptions");function oRe(t){return oQ.maxTopSnippets}s(oRe,"getCppNumberOfSnippets");var igt=new Map([["cpp",iRe]]);function FU(t,e,r){let n=igt.get(r);return n?n(t,e):{...d8,useSubsetMatching:Bie(t,e)}}s(FU,"getSimilarFilesOptions");var ogt=new Map([["cpp",oRe]]);function sRe(t,e){let r=ogt.get(e);return r?r(t):ATe}s(sRe,"getNumberOfSnippets");function Bie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Jr(t,ft.UseSubsetMatching))??!1}s(Bie,"useSubsetMatching");f();f();var sgt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function agt(t){return sgt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(agt,"isOomError");function Av(t,e,r,n=Mr){if(!Lc(e)){if(e instanceof Error){let i=e;agt(i)?t.get(Ki).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ki).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ki).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ki).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ki).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(Av,"handleException");function aRe(t){process.addListener("uncaughtException",r=>{Av(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,Av(t,r,"unhandledRejection")}finally{e=!1}})}s(aRe,"registerDefaultHandlers");f();f();var lgt="content_excluded";async function lRe(t,e,r,n){let i=RU(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(Rr),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ol).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,lgt]]),m}).map(d=>d.data)}s(lRe,"getCodeSnippetsFromContextItems");function cRe(t,e){let r=t.get(Rr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(cRe,"addRelativePathToCodeSnippets");f();function ml(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(ml,"Text");function yv(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(yv,"Code");function v5(t){return t.children}s(v5,"Chunk");f();function kr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(kr,"functionComponentFunction");function Dm(t){return{type:"f",children:t}}s(Dm,"fragmentFunction");Dm.isFragmentFunction=!0;var MU=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Kc,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=cRe(t.ctx,r),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(kr(ml,{expElidableTextWeight:1,children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(kr(yv,{source:p,expElidableTextWeight:.99,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(kr(ml,{expElidableTextWeight:.5,children:"---"}))}),kr(v5,{children:d})})},"CodeSnippets");f();function Die(t){return t.children}s(Die,"CompletionsContext");function Pie(t){return t.children}s(Pie,"StableCompletionsContext");function Nie(t){return t.children}s(Nie,"AdditionalCompletionsContext");function QU(t){return t.name===Die.name||t.name===Pie.name||t.name===Nie.name}s(QU,"isContextNode");f();f();f();f();f();f();var Cs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},mD=class{constructor(){this._first=Cs.Undefined;this._last=Cs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===Cs.Undefined}clear(){let e=this._first;for(;e!==Cs.Undefined;){let r=e.next;e.prev=Cs.Undefined,e.next=Cs.Undefined,e=r}this._first=Cs.Undefined,this._last=Cs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Cs(e);if(this._first===Cs.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Cs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Cs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Cs.Undefined&&e.next!==Cs.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Cs.Undefined&&e.next===Cs.Undefined?(this._first=Cs.Undefined,this._last=Cs.Undefined):e.next===Cs.Undefined?(this._last=this._last.prev,this._last.next=Cs.Undefined):e.prev===Cs.Undefined&&(this._first=this._first.next,this._first.prev=Cs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Cs.Undefined;)yield e.element,e=e.next}};f();var cgt=globalThis.performance&&typeof globalThis.performance.now=="function",b5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=cgt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var uRe=!1,ugt=!1,o2;(ie=>{ie.None=s(()=>Ho.None,"None");function e(j){if(ugt){let{onDidAddListener:q}=j,Y=hD.create(),te=0;j.onDidAddListener=()=>{++te===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),q?.()}}}s(e,"_addLeakageTraceLogic");function r(j,q){return h(j,()=>{},0,void 0,!0,void 0,q)}ie.defer=r,s(r,"defer");function n(j){return(q,Y=null,te)=>{let pe=!1,re;return re=j(fe=>{if(!pe)return re?re.dispose():pe=!0,q.call(Y,fe)},null,te),pe&&re.dispose(),re}}ie.once=n,s(n,"once");function i(j,q){return ie.once(ie.filter(j,q))}ie.onceIf=i,s(i,"onceIf");function o(j,q,Y){return p((te,pe=null,re)=>j(fe=>te.call(pe,q(fe)),null,re),Y)}ie.map=o,s(o,"map");function a(j,q,Y){return p((te,pe=null,re)=>j(fe=>{q(fe),te.call(pe,fe)},null,re),Y)}ie.forEach=a,s(a,"forEach");function l(j,q,Y){return p((te,pe=null,re)=>j(fe=>q(fe)&&te.call(pe,fe),null,re),Y)}ie.filter=l,s(l,"filter");function c(j){return j}ie.signal=c,s(c,"signal");function u(...j){return(q,Y=null,te)=>{let pe=ISe(...j.map(re=>re(fe=>q.call(Y,fe))));return m(pe,te)}}ie.any=u,s(u,"any");function d(j,q,Y,te){let pe=Y;return o(j,re=>(pe=q(pe,re),pe),te)}ie.reduce=d,s(d,"reduce");function p(j,q){let Y,te={onWillAddFirstListener(){Y=j(pe.fire,pe)},onDidRemoveLastListener(){Y?.dispose()}};q||e(te);let pe=new _0(te);return q?.add(pe),pe.event}s(p,"snapshot");function m(j,q){return q instanceof Array?q.push(j):q&&q.add(j),j}s(m,"addAndReturnDisposable");function h(j,q,Y=100,te=!1,pe=!1,re,fe){let he,Ne,Re,Je=0,Me,pt={leakWarningThreshold:re,onWillAddFirstListener(){he=j(Ct=>{Je++,Ne=q(Ne,Ct),te&&!Re&&(Tt.fire(Ne),Ne=void 0),Me=s(()=>{let bt=Ne;Ne=void 0,Re=void 0,(!te||Je>1)&&Tt.fire(bt),Je=0},"doFire"),typeof Y=="number"?(clearTimeout(Re),Re=setTimeout(Me,Y)):Re===void 0&&(Re=0,queueMicrotask(Me))})},onWillRemoveListener(){pe&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,he.dispose()}};fe||e(pt);let Tt=new _0(pt);return fe?.add(Tt),Tt.event}ie.debounce=h,s(h,"debounce");function g(j,q=0,Y){return ie.debounce(j,(te,pe)=>te?(te.push(pe),te):[pe],q,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y(j,q=(te,pe)=>te===pe,Y){let te=!0,pe;return l(j,re=>{let fe=te||!q(re,pe);return te=!1,pe=re,fe},Y)}ie.latch=y,s(y,"latch");function v(j,q,Y){return[ie.filter(j,q,Y),ie.filter(j,te=>!q(te),Y)]}ie.split=v,s(v,"split");function b(j,q=!1,Y=[],te){let pe=Y.slice(),re=j(Ne=>{pe?pe.push(Ne):he.fire(Ne)});te&&te.add(re);let fe=s(()=>{pe?.forEach(Ne=>he.fire(Ne)),pe=null},"flush"),he=new _0({onWillAddFirstListener(){re||(re=j(Ne=>he.fire(Ne)),te&&te.add(re))},onDidAddFirstListener(){pe&&(q?setTimeout(fe):fe())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return te&&te.add(he),he.event}ie.buffer=b,s(b,"buffer");function E(j,q){return s((te,pe,re)=>{let fe=q(new k);return j(function(he){let Ne=fe.evaluate(he);Ne!==_&&te.call(pe,Ne)},void 0,re)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(q){return this.steps.push(q),this}forEach(q){return this.steps.push(Y=>(q(Y),Y)),this}filter(q){return this.steps.push(Y=>q(Y)?Y:_),this}reduce(q,Y){let te=Y;return this.steps.push(pe=>(te=q(te,pe),te)),this}latch(q=(Y,te)=>Y===te){let Y=!0,te;return this.steps.push(pe=>{let re=Y||!q(pe,te);return Y=!1,te=pe,re?pe:_}),this}evaluate(q){for(let Y of this.steps)if(q=Y(q),q===_)break;return q}}function B(j,q,Y=te=>te){let te=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.on(q,te),"onFirstListenerAdd"),re=s(()=>j.removeListener(q,te),"onLastListenerRemove"),fe=new _0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return fe.event}ie.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function N(j,q,Y=te=>te){let te=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.addEventListener(q,te),"onFirstListenerAdd"),re=s(()=>j.removeEventListener(q,te),"onLastListenerRemove"),fe=new _0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return fe.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function W(j,q){return new Promise(Y=>n(j)(Y,null,q))}ie.toPromise=W,s(W,"toPromise");function ee(j){let q=new _0;return j.then(Y=>{q.fire(Y)},()=>{q.fire(void 0)}).finally(()=>{q.dispose()}),q.event}ie.fromPromise=ee,s(ee,"fromPromise");function me(j,q){return j(Y=>q.fire(Y))}ie.forward=me,s(me,"forward");function ae(j,q,Y){return q(Y),j(te=>q(te))}ie.runAndSubscribe=ae,s(ae,"runAndSubscribe");class H{constructor(q,Y){this._observable=q;this._counter=0;this._hasChanged=!1;let te={onWillAddFirstListener:s(()=>{q.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{q.removeObserver(this)},"onDidRemoveLastListener")};Y||e(te),this.emitter=new _0(te),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(q){this._counter++}handlePossibleChange(q){}handleChange(q,Y){this._hasChanged=!0}endUpdate(q){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function O(j,q){return new H(j,q).emitter.event}ie.fromObservable=O,s(O,"fromObservable");function le(j){return(q,Y,te)=>{let pe=0,re=!1,fe={beginUpdate(){pe++},endUpdate(){pe--,pe===0&&(j.reportChanges(),re&&(re=!1,q.call(Y)))},handlePossibleChange(){},handleChange(){re=!0}};j.addObserver(fe),j.reportChanges();let he={dispose(){j.removeObserver(fe)}};return te instanceof ku?te.add(he):Array.isArray(te)&&te.push(he),he}}ie.fromObservableLight=le,s(le,"fromObservableLight")})(o2||={});var Lie=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new b5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},dRe=-1;var Fie=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new Mie(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},hD=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Mie=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Qie=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},dgt=0,E5=class{constructor(e){this.value=e;this.id=dgt++}static{s(this,"UniqueContainer")}},fgt=2,pgt=s((t,e)=>{if(t instanceof E5)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),_0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=dRe>0||this._options?.leakWarningThreshold?new Fie(e?.onListenerError??r5,this._options?.leakWarningThreshold??dRe):void 0,this._perfMon=this._options?._profName?new Lie(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(uRe){let e=this._listeners;queueMicrotask(()=>{pgt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Qie(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||r5)(d),Ho.None}if(this._disposed)return Ho.None;r&&(e=e.bind(r));let i=new E5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=hD.create(),o=this._leakageMon.check(i.stack,this._size+1)),uRe&&(i.stack=a??hD.create()),this._listeners?this._listeners instanceof E5?(this._deliveryQueue??=new Oie,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=Ra(()=>{o?.(),this._removeListener(i)});return n instanceof ku?n.add(l):Array.isArray(n)&&n.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*fgt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||r5;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof E5)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Oie=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var fRe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),OU;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof I5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:fRe})})(OU||={});var I5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?fRe:(this._emitter||(this._emitter=new _0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},H1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new I5),this._token}cancel(){this._token?this._token instanceof I5&&this._token.cancel():this._token=OU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof I5&&this._token.dispose():this._token=OU.None}};function pRe(t){return t}s(pRe,"identity");var UU=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=pRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},j1=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=pRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var _g=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function s2(t){return t<0?0:t>4294967295?4294967295:t|0}s(s2,"toUint32");function Uie(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Uie,"escapeRegExpCharacters");function Sg(t){return t.split(/\r\n|\r|\n/)}s(Sg,"splitLines");function gD(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(gD,"commonPrefixLength");function w5(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(w5,"commonSuffixLength");var hgt=/^[\t\n\r\x20-\x7E]*$/;function qie(t){return hgt.test(t)}s(qie,"isBasicASCII");var PNr=String.fromCharCode(65279);function ARe(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(ARe,"uppercaseFirstLetter");var mRe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=ggt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function ggt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(ggt,"getGraphemeBreakRawData");var hRe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new _g(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new UU({getCacheKey:JSON.stringify},e=>{function r(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(r,"arrayToMap");function n(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=r(o[d]);l=i(l,p)}let c=r(o._common),u=n(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new _g(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},gRe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();f();function yRe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(yRe,"findEditDistanceScore");var CRe=50;function Wie(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(Wie,"approximateMaxCharacters");function AD(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Kc,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Wie(a);return kr(Dm,{children:[kr(a2,{document:r,position:i,maxCharacters:m}),kr(qU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(AD,"CurrentFile");function a2(t){if(t.document===void 0||t.position===void 0)return kr(ml,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),kr(yv,{children:e})}s(a2,"BeforeCursor");function qU(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return kr(ml,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return kr(ml,{});if(r===o)return kr(ml,{children:r});let a=o;if(r!==""){let l=Bo(t.tokenizer),c=l.takeFirstTokens(o,CRe);c.tokens.length>0&&100*yRe(c.tokens,l.takeFirstTokens(r,CRe).tokens)?.score<(t.suffixMatchThreshold??sQ)*c.tokens.length&&(a=r)}return a!==r&&n(a),kr(ml,{children:a})}s(qU,"AfterCursor");function xRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(Kc,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=Wie(a);return kr(a2,{document:r,position:i,maxCharacters:c})}s(xRe,"DocumentPrefix");function vRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Kc,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Wie(a);return kr(qU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(vRe,"DocumentSuffix");f();var WU=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return c+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let l=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-l.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,r,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=r)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=n.takeLastTokens(a.line,r);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(l)}return[o,i]}};function Gie(t){return t.map(e=>e.elidedValue).join("")}s(Gie,"makePrompt");function ERe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(ERe,"makePrefixPrompt");function IRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(IRe,"makeContextPrompt");var GU=class{constructor(e="[...]",r=`
`,n=!1,i=60){this.ellipsis=e;this.delimiter=r;this.turnOffChunks=n;this.beforeCursorLines=i}static{s(this,"ElidableTextElision")}elide(e,r,n,i,o){let a;if(n.value.length===0||i<=o.tokenLength(this.ellipsis))a=[],r=r+Math.max(0,i);else{let h=bRe([n],o).elide(i,this.ellipsis,!0,"removeLeastDesirable",o,"bottomToTop");r=r+Math.max(0,i-o.tokenLength(h.getText())),a=h.getLines()}let c=bRe(e.map(m=>this.turnOffChunks?{...m,chunks:void 0}:m),o,this.beforeCursorLines).elide(r),u=r-o.tokenLength(c.getText()),d=[...c.getLines(),...a];return{cycles:1,blocks:[n,...e].map(m=>{let h=d.filter(g=>g.metadata?.get("componentPath")===m.componentPath);if(h.length===0&&m.type!=="prefix")return{...m,tokens:o.tokenLength(m.value),elidedValue:"",elidedTokens:0};{let g=h.map(y=>y.text).join(this.delimiter);return m.type==="prefix"&&u>0&&(g.trim()===this.ellipsis||g.trim()==="")?g=this.ellipsis+this.delimiter+o.takeLastTokens(m.value,u-o.tokenLength(this.ellipsis+this.delimiter)).text:m.type==="context"&&(g=g.endsWith(this.delimiter)?g:g+this.delimiter),{...m,tokens:o.tokenLength(m.value),elidedValue:g,elidedTokens:o.tokenLength(g)}}})}}},TRe=(r=>(r.componentPath="componentPath",r[r.chunk=S8]="chunk",r))(TRe||{});function bRe(t,e,r=0){return new St(t.map(i=>{let o=new Map([["componentPath",i.componentPath],[TRe.chunk,i.chunks]]);if(i.isCode){let a=new St([[_u(i.value,!0,!0,o,e),i.expElidableTextWeight]]);if(i.type==="prefix"&&r>0){let l=a.lines.length;for(let c=0;c<Math.min(r,l);c++)a.lines[l-1-c].setValue(1)}return a}return new St([[i.value,i.expElidableTextWeight]],o,e)}),void 0,e)}s(bRe,"prepareWeightedBlocks");var HU=class{constructor(e,r="o200k_base",n){this.delegate=e;this.approximateTokenizer=new LM(r,n)}static{s(this,"ApproximateElision")}elide(e,r,n,i,o){let{blocks:[a,...l]}=this.delegate.elide(e,r,n,i,this.approximateTokenizer),c=Gie(l);if(o.tokenLength(c+a.elidedValue)>r+i){let{blocks:d}=this.delegate.elide(e,r,n,i,o);return{blocks:d,cycles:2}}else return{blocks:[a,...l],cycles:1}}};f();var _5=class{constructor(e,r=Hie()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((l,c)=>c(e,r,l),{...i});if(n(e,r,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,n,o)}};function Hie(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{r.expElidableTextWeight===void 0&&(r.expElidableTextWeight=1);let n=t.props?.expElidableTextWeight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,expElidableTextWeight:i*r.expElidableTextWeight}},(t,e,r)=>{if(t.name===v5.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r,(t,e,r)=>t.name===yv.name?{...r,isCode:!0}:r]}s(Hie,"defaultTransformers");f();var yD={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},jie={};for(let[t,e]of Object.entries(yD))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)jie[r]=t;else jie[t]=t;function _Re(t){return jie[t]}s(_Re,"mdCodeBlockLangToLanguageId");var Agt={start:"//",end:""},ygt=["php","plaintext"],Vie={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function SRe(t){return Object.values(Vie).includes(t.trim())}s(SRe,"isShebangLine");function Cgt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(Cgt,"hasLanguageMarker");function xgt(t,e){let r=yD[e]?yD[e].lineComment:Agt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(xgt,"comment");function jU(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>xgt(o,e)).join(`
`);return r?i+`
`:i}s(jU,"commentBlockAsSingles");function RRe(t){let{languageId:e}=t;return ygt.indexOf(e)===-1&&!Cgt(t)?e in Vie?Vie[e]:`Language: ${e}`:""}s(RRe,"getLanguageMarker");function kRe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(kRe,"getPathMarker");function CD(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(CD,"newLineEnded");function BRe(t){return wRe(typeof t=="string"?t:"plaintext")}s(BRe,"getLanguage");function wRe(t){return yD[t]!==void 0?{languageId:t,...yD[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(wRe,"_getLanguage");var vgt=5,S5=class{constructor(){this.renderId=0;this.formatPrefix=Gie}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",l=r.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),[g,y]=Egt(r),{blocks:[v,...b],cycles:E}=g.elide(c,p,u,m,Bo(l)),_=performance.now(),k=this.formatPrefix(b),B=this.formatContext?this.formatContext(b):void 0,N=v.elidedValue,W=b.reduce((ee,me)=>ee+me.elidedTokens,0);return d.push(...bgt([...b,v])),{prefix:k,prefixTokens:W,suffix:N,suffixTokens:v.elidedTokens,context:B,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:y,elisionCycles:E,elisionTimeMs:_-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((ee,me)=>ee+(me.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-vgt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],l=!1;if(new _5(e,$ie).walkSnapshot((d,p,m)=>{if(d===e||(d.name===AD.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode;if(m.type==="suffix")o.push({value:xD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let y=d.value.endsWith(r)?d.value:d.value+r,v=y;m.type==="prefix"?v=d.value:SRe(d.value)?v=y:v=jU(y,n),i.push({type:m.type==="prefix"?"prefix":"context",value:xD(v),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g})}return!0}),!l)throw new Error(`Node of type ${AD.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},$ie=[...Hie(),(t,e,r)=>QU(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===a2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===qU.name?{...r,type:"suffix"}:r];function bgt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(bgt,"computeComponentStatistics");function xD(t){return t.replace(/\r\n?/g,`
`)}s(xD,"normalizeLineEndings");function Egt(t){let e=t.elisionStrategy,r=t.elisionStrategy==="wishlist"?new WU:new GU(t.ellipsis,t.delimiter,t.elisionStrategy==="elidableTextWithoutChunks",t.beforeCursorLines);return t.approximateElision?[new HU(r,t.tokenizer,t.languageId),"approximate"+ARe(e)]:[r,e]}s(Egt,"chooseElisionStrategy");f();var VU=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Kc,i=>{n(i.telemetryData)}),r&&t.by(t.ctx,r))return t.children},"Gated");f();var $U=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Kc,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Rr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},l=i.findNotebook(r);return a.relativePath&&!l?kr(Igt,{docInfo:a}):kr(Tgt,{docInfo:a})}},"DocumentMarker"),Igt=s(t=>kr(ml,{children:kRe(t.docInfo)}),"PathMarker"),Tgt=s(t=>kr(ml,{children:RRe(t.docInfo)}),"LanguageMarker");f();f();f();function PRe(t){return Object.values(t).flatMap(e=>e.edits).sort((e,r)=>e.timestamp-r.timestamp)}s(PRe,"getAllRecentEditsByTimestamp");function NRe(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;let n=t.length-1,i=e.length-1;for(;n>=r&&i>=r&&t[n]===e[i];)n--,i--;return r>n&&r>i?null:{start:r,endPrev:n,endNew:i}}s(NRe,"findChangeSpan");function wgt(t,e,r,n,i,o,a){let l=Math.max(0,n-a),c=Math.min(r.length,o+a+1);return{file:t,pre:l,post:c,before:e.slice(l,n),removed:e.slice(n,i+1),added:r.slice(n,o+1),after:r.slice(o+1,c)}}s(wgt,"getDiff");function _gt(t){return[...t.before,...t.removed,...t.added,...t.after].reduce((r,n)=>r+n.length+1,0)}s(_gt,"measureDiffSize");function Sgt(t,e=!1,r=!1,n=!1){let i=[];i.push(`--- a/${t.file}`),i.push(`+++ b/${t.file}`);let o=t.before.length+t.removed.length+t.after.length,a=t.before.length+t.added.length+t.after.length;i.push(`@@ -${t.pre+1},${o} +${t.pre+1},${a} @@`);for(let l of t.before)i.push(" "+l);if(r)for(let l of t.added)i.push("+"+l);if(!e){let l=n?" --- IGNORE ---":"";for(let c of t.removed)i.push("-"+c+l)}if(!r)for(let l of t.added)i.push("+"+l);for(let l of t.after)i.push(" "+l);return i.join(`
`)+`
`}s(Sgt,"unifiedDiff");function Rgt(t,e=!1){let{before:r,removed:n,added:i,after:o}=t,a=[];return a.push(">>>>>>> SEARCH"),a.push(...r),e?a.push("..."):a.push(...n),a.push(...o),a.push("======="),a.push(...r),a.push(...i),a.push(...o),a.push("<<<<<<<<< REPLACE"),a.join(`
`)}s(Rgt,"aidersDiff");function kgt(t,e=!1){let{before:r,removed:n,added:i,after:o}=t,a=e?["..."]:n.map(d=>`${d} --- DO NOT REPLY WITH CODE FROM THIS LINE ---`),l=[...r,...a,...o],c=[...r,...i,...o],u=[];return u.push("--- User edited code: ---"),u.push(...l),a.length===0?u.push(`--- and added ${i.length} line${i.length===1?"":"s"} to make: ---`):i.length===0?u.push(`--- and deleted ${a.length} line${a.length===1?"":"s"} to make: ---`):u.push("--- and replaced it with: ---"),u.push(...c),u.push("--- End of edit ---"),u.join(`
`)}s(kgt,"findReplaceDiff");function DRe(t,e){for(let r of e){let n=t.slice(0,r.startLine),i=t.slice(r.endLine+1),o=r.diff.added?r.diff.added:[];t=[...n,...o,...i]}return t}s(DRe,"applyEditsToLines");function Bgt(t,e,r){let{added:n}=e.diff,i=e.startLine,o=e.startLine+n.length,a=t.startLine,l=t.endLine+1;return a<=o+r&&l>=i-r}s(Bgt,"editsOverlap");function Dgt(t,e,r,n,i){let o=[...e];if(o.length>0){let a=o[o.length-1];if(Bgt(r,a,i.editMergeLineDistance)){let c=DRe(t.split(`
`),o.slice(0,-1)),u=NRe(c,n);u&&(r=LRe(r.file,c,n,u,i),o=[...o.slice(0,-1),r])}else o.push(r)}else o.push(r);if(o.length>i.maxEditsPerFile){let a=o.slice(0,o.length-i.maxEditsPerFile);o=o.slice(o.length-i.maxEditsPerFile,o.length),t=DRe(t.split(`
`),a).join(`
`)}return{originalContent:t,edits:o}}s(Dgt,"updateEdits");function LRe(t,e,r,n,i){let{start:o,endPrev:a,endNew:l}=n;if(!i||typeof i.diffContextLines!="number")throw new Error("Invalid configuration passed to buildIncomingEdit");let c=wgt(t,e,r,o,a,l,i.diffContextLines);return{file:t,startLine:o,endLine:a,diff:c,timestamp:performance.now()}}s(LRe,"buildIncomingEdit");function Pgt(t,e){let r={...t},n=Object.entries(t).filter(([o])=>t[o].edits.length).sort(([o,a],[l,c])=>a.edits[a.edits.length-1].timestamp-c.edits[c.edits.length-1].timestamp),i=Math.max(0,n.length-e);if(i)for(let o=0;o<i;o++){let a=n[o][0];delete r[a]}return r}s(Pgt,"trimOldFilesFromState");function FRe(t={},e,r,n){if(r.length>2*1024*1024)return t;let i=t[e];if(!i)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};if(i.currentContent===r)return t;let o=i.currentContent.split(`
`),a=r.split(`
`),l=NRe(o,a);if(!l)return{...t,[e]:{...i,currentContent:r}};let c=LRe(e,o,a,l,n);if(_gt(c.diff)>n.maxCharsPerEdit)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};let{originalContent:u,edits:d}=Dgt(i.originalContent,i.edits,c,a,n),p={...t,[e]:{originalContent:u,currentContent:r,edits:d}};return Pgt(p,n.maxFiles)}s(FRe,"recentEditsReducer");function MRe(t,e){let r=t.diff.removed.filter(o=>o.trim().length>0),n=t.diff.added.filter(o=>o.trim().length>0),i;if(e.removeDeletedLines&&n.length===0)i=null;else if(r.length===0&&n.length===0)i=null;else if(r.join("").trim()===n.join("").trim())i=null;else if(t.diff.added.length>e.maxLinesPerEdit||t.diff.removed.length>e.maxLinesPerEdit)i=null;else if(e.summarizationFormat==="aiders-diff")i=Rgt(t.diff);else if(e.summarizationFormat==="diff")i=Sgt(t.diff,e.removeDeletedLines,e.insertionsBeforeDeletions,e.appendNoReplyMarker);else if(e.summarizationFormat==="find-replace")i=kgt(t.diff);else throw new Error(`Unknown summarization format: ${e.summarizationFormat}`);return i}s(MRe,"summarizeEdit");f();f();f();f();f();f();function vD(t,e="Unreachable"){throw new Error(e)}s(vD,"assertNever");function Ul(t,e="unexpected state"){if(!t)throw new xn(`Assertion Failed: ${e}`)}s(Ul,"assert");function Nu(t){if(!t()){debugger;t(),r5(new xn("Assertion Failed"))}}s(Nu,"assertFn");function Cv(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(Cv,"checkAdjacentItems");f();var V1=s((t,e)=>t===e,"strictEquals");f();var Lu=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return qRe(e,this)}},QRe=new Map,zie=new WeakMap;function qRe(t,e){let r=zie.get(t);if(r)return r;let n=Ngt(t,e);if(n){let i=QRe.get(n)??0;i++,QRe.set(n,i);let o=i===1?n:`${n}#${i}`;return zie.set(t,o),o}}s(qRe,"getDebugName");function Ngt(t,e){let r=zie.get(t);if(r)return r;let n=e.owner?Fgt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=zU(a),i!==void 0))return n+i;if(e.owner!==void 0){let l=Lgt(e.owner,t);if(l!==void 0)return n+l}}s(Ngt,"computeDebugName");function Lgt(t,e){for(let r in t)if(t[r]===e)return r}s(Lgt,"findKey");var ORe=new Map,URe=new WeakMap;function Fgt(t){let e=URe.get(t);if(e)return e;let r=Mgt(t),n=ORe.get(r)??0;n++,ORe.set(r,n);let i=n===1?r:`${r}#${n}`;return URe.set(t,i),i}s(Fgt,"formatOwner");function Mgt(t){let e=t.constructor;return e?e.name:"Object"}s(Mgt,"getClassName");function zU(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(zU,"getFunctionName");f();var l2;function KU(t){l2?l2 instanceof YU?l2.loggers.push(t):l2=new YU([l2,t]):l2=t}s(KU,"addLogger");function Ms(){return l2}s(Ms,"getLogger");var Yie;function WRe(t){Yie=t}s(WRe,"setLogObservableFn");function GRe(t){Yie&&Yie(t)}s(GRe,"logObservable");var YU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var HRe;function jRe(t){HRe=t}s(jRe,"_setRecomputeInitiallyAndOnChange");var VRe;function $Re(t){VRe=t}s($Re,"_setKeepObserved");var Kie;function zRe(t){Kie=t}s(zRe,"_setDerivedOpts");var JU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return Kie({owner:n,debugName:s(()=>{let o=zU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Kie({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(HRe(this,r)),this}keepObserved(e){return e.add(VRe(this)),this}get debugValue(){return this.get()}},xv=class extends JU{constructor(){super();this.observers=new Set;Ms()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Ms();return GRe(this),r||Ms()?.handleObservableCreated(this),this}};function ZU(t,e){let r=new R5(t,e);try{t(r)}finally{r.finish()}}s(ZU,"transaction");function Jie(t,e,r){t?e(t):ZU(e,r)}s(Jie,"subtransaction");var R5=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Ms()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():zU(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Ms()?.handleEndTransaction(this)}};function Pm(t,e){let r;return typeof t=="string"?r=new Lu(void 0,t,void 0):r=new Lu(t,void 0,void 0),new XU(r,e,V1)}s(Pm,"observableValue");var XU=class extends xv{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,Ms()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new R5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),Ms()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)n.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function c2(t){return new k5(new Lu(void 0,void 0,t),t,void 0,void 0)}s(c2,"autorun");function Xie(t,e){return new k5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Xie,"autorunOpts");function eq(t,e){return new k5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(eq,"autorunHandleChanges");function Zie(t,e){let r=new ku,n=eq({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return Ra(()=>{n.dispose(),r.dispose()})}s(Zie,"autorunWithStoreHandleChanges");function eoe(t){let e=new ku,r=Xie({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Ra(()=>{r.dispose(),e.dispose()})}s(eoe,"autorunWithStore");var k5=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Ms()?.handleAutorunCreated(this),this._runIfNeeded(),s5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ms()?.handleAutorunDisposed(this),a5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Ms()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){t2(n)}finally{this._isRunning=!1}}}finally{this.disposed||Ms()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Nu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Ms()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){t2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new xn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=k5)(c2||={});f();function tq(t,e){return new u2(new Lu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??V1)}s(tq,"derivedOpts");zRe(tq);var u2=class extends xv{constructor(r,n,i,o,a=void 0,l){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Ms()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){t2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new xn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Nu(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Ms()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){t2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new xn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function toe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new vv(new Lu(e,void 0,n),r,n,()=>vv.globalTransaction,V1)}s(toe,"observableFromEvent");var vv=class extends xv{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,Jie(this._getTransaction(),l=>{Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=vv;function e(n,i){let o=!1;vv.globalTransaction===void 0&&(vv.globalTransaction=n,o=!0);try{i()}finally{o&&(vv.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(toe||={});function KRe(t){let e=new rq(!1,void 0);return t.addObserver(e),Ra(()=>{t.removeObserver(e)})}s(KRe,"keepObserved");$Re(KRe);function JRe(t,e){let r=new rq(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Ra(()=>{t.removeObserver(r)})}s(JRe,"recomputeInitiallyAndOnChange");jRe(JRe);var rq=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function S0(t,e,r,n){let i=new nq(r,n);return tq({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new nq(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(S0,"mapObservableArrayCached");var nq=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let l=new ku;a={out:this._map(i,l),store:l},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function roe(t,e){let r;return Zie({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(roe,"runOnChange");f();f();f();var iq;function XRe(t){iq||(iq=new ED,KU(iq)),iq.addFilteredObj(t)}s(XRe,"logObservableToConsole");var ED=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return Qgt([B5(qgt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[B5(" "),rp(bD(e.oldValue,70),{color:"red",strikeThrough:!0}),B5(" "),rp(bD(e.newValue,60),{color:"green"})]:[B5(" (unchanged)")]:[B5(" "),rp(bD(e.newValue,60),{color:"green"}),B5(" (initial)")]}handleObservableCreated(e){if(e instanceof u2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=l=>(i.push(l),o.apply(r,[l]));let a=r.endUpdate;r.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",r.debugName,l.debugName),i.splice(c,1),a.apply(r,[l])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof u2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([D5("observable value changed"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return rp(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([D5("derived recomputed"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("derived cleared"),rp(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("observable from event triggered"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("autorun"),rp(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("transaction"),rp(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function Qgt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(Qgt,"consoleTextToArgs");function B5(t){return rp(t,{color:"black"})}s(B5,"normalText");function D5(t){return rp(Wgt(`${t}: `,10),{color:"black",bold:!0})}s(D5,"formatKind");function rp(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(rp,"styled");function bD(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?Ogt(t,e):Ugt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(bD,"formatValue");function Ogt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${bD(i,e-r.length)}`}return r+=" ]",r}s(Ogt,"formatArray");function Ugt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${bD(o,e-r.length)}`}return r+=" }",r}s(Ugt,"formatObject");function qgt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(qgt,"repeat");function Wgt(t,e){for(;t.length<e;)t+=" ";return t}s(Wgt,"padStr");WRe(XRe);var Ggt=!1;Ggt&&KU(new ED);f();function Rg(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return eq({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=n.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}r(a)})}s(Rg,"autorunWithChanges");var $1=class extends Ho{constructor(r,n,i=!1){super();this.recentEditMap={};this.recentEdits=[];this.recentEditSummaries=new WeakMap;this.debounceTimeouts={};this.workspace=r,this._started=!1,this.recentEditsConfig=n,i||this.start()}static{s(this,"RecentEditsProvider")}getRecentEdits(){return this.recentEdits}getEditSummary(r){return this.recentEditSummaries.get(r)??null}updateRecentEdits(r,n){this.recentEditMap=FRe(this.recentEditMap,r,n,this.recentEditsConfig),this.recentEdits=PRe(this.recentEditMap),this.recentEdits.forEach(i=>{if(!this.recentEditSummaries.has(i)){let o=MRe(i,this.recentEditsConfig);this.recentEditSummaries.set(i,o)}})}setConfig(r){this.recentEditsConfig=r}start(){this._started||(this._started=!0,S0(this,this.workspace.openDocuments,(r,n)=>{n.add(Rg(this,{value:r.value,selection:r.selection,languageId:r.languageId},i=>{if(i.value.changes.length>0){let o=i.value.previous?.value,a=i.value.value.value,l=r.id.toString();clearTimeout(this.debounceTimeouts[l]),!this.recentEditMap[l]&&o?this.updateRecentEdits(l,o):this.recentEditsConfig.debounceTimeout===0?this.updateRecentEdits(l,a):this.debounceTimeouts[l]=setTimeout(()=>{this.updateRecentEdits(l,a)},this.recentEditsConfig.debounceTimeout??500)}}))},r=>r.id).recomputeInitiallyAndOnChange(this._store))}};f();f();f();f();var d2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(d2||={});f();f();var Bt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new xn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};f();var sn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<l?(n=l,i=c):n===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new sn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new sn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=r.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new f2(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new f2(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new xn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new xn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Bt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},f2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=e2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=E0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=F1(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=F1(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[n],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,n++):(a=c,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=e2(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=E0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&r.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var ql=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new sn(e.lineNumber,e.column+this.columnCount):new sn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Wl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new noe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Sg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},noe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Bt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=E0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new sn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return ql.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new ql(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var kg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var oq=class extends Ho{constructor(r,n,i,o,a,l){super();this.id=r;this.workspaceRoot=l;this.value=Pm(this,n),this.selection=Pm(this,i),this.languageId=Pm(this,o),this._register(Ra(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};var mke=Ve(ii());f();f();f();f();var aq=!1,lq=!1,sq=!1,Hgt=!1,jgt=!1,ZRe=!1,Vgt=!1,$gt=!1,zgt=!1,Ygt=!1;var z1,Y1=globalThis,np;typeof Y1.vscode<"u"&&typeof Y1.vscode.process<"u"?np=Y1.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(np=process);var eke=typeof np?.versions?.electron=="string",Kgt=eke&&np?.type==="renderer";typeof np=="object"?(aq=np.platform==="win32",lq=np.platform==="darwin",sq=np.platform==="linux",Hgt=sq&&!!np.env.SNAP&&!!np.env.SNAP_REVISION,Vgt=eke,zgt=!!np.env.CI||!!np.env.BUILD_ARTIFACTSTAGINGDIRECTORY,jgt=!0):typeof navigator=="object"&&!Kgt?(z1=navigator.userAgent,aq=z1.indexOf("Windows")>=0,lq=z1.indexOf("Macintosh")>=0,$gt=(z1.indexOf("Macintosh")>=0||z1.indexOf("iPad")>=0||z1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,sq=z1.indexOf("Linux")>=0,Ygt=z1?.indexOf("Mobi")>=0,ZRe=!0):console.error("Unable to resolve platform.");var ioe=0;lq?ioe=1:aq?ioe=3:sq&&(ioe=2);var p2=aq,tke=lq;var Jgt=ZRe&&typeof Y1.importScripts=="function",lOr=Jgt?Y1.origin:void 0;var Bg=z1;var Xgt=typeof Y1.postMessage=="function"&&!Y1.importScripts,cOr=(()=>{if(Xgt){let t=[];Y1.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Y1.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var Zgt=!!(Bg&&Bg.indexOf("Chrome")>=0),uOr=!!(Bg&&Bg.indexOf("Firefox")>=0),dOr=!!(!Zgt&&Bg&&Bg.indexOf("Safari")>=0),fOr=!!(Bg&&Bg.indexOf("Edg/")>=0),pOr=!!(Bg&&Bg.indexOf("Android")>=0);var m2,ooe=globalThis.vscode;if(typeof ooe<"u"&&typeof ooe.process<"u"){let t=ooe.process;m2={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?m2={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:m2={get platform(){return p2?"win32":tke?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var ID=m2.cwd,rke=m2.env,nke=m2.platform,COr=m2.arch;var tAt=65,rAt=97,nAt=90,iAt=122,Iv=46,Gl=47,Id=92,bv=58,oAt=63,cq=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function sAt(t,e){if(t===null||typeof t!="object")throw new cq(e,"Object",t)}s(sAt,"validateObject");function ca(t,e){if(typeof t!="string")throw new cq(e,"string",t)}s(ca,"validateString");var Td=nke==="win32";function oi(t){return t===Gl||t===Id}s(oi,"isPathSeparator");function soe(t){return t===Gl}s(soe,"isPosixPathSeparator");function Ev(t){return t>=tAt&&t<=nAt||t>=rAt&&t<=iAt}s(Ev,"isWindowsDeviceRoot");function uq(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Gl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Iv||i.charCodeAt(i.length-2)!==Iv){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===Iv&&l!==-1?++l:l=-1}return i}s(uq,"normalizeString");function aAt(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(aAt,"formatExt");function ike(t,e){sAt(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${aAt(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(ike,"_format");var ua={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ca(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=ID():(o=rke[`=${e}`]||ID(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Id)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)oi(d)&&(l=1,u=!0);else if(oi(d))if(u=!0,oi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!oi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else Ev(d)&&o.charCodeAt(1)===bv&&(c=o.slice(0,2),l=2,a>2&&oi(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=uq(r,!n,"\\",oi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ca(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return soe(o)?"\\":t;if(oi(o))if(i=!0,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else Ev(o)&&t.charCodeAt(1)===bv&&(n=t.slice(0,2),r=2,e>2&&oi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?uq(t.slice(r),!i,"\\",oi):"";return a.length===0&&!i&&(a="."),a.length>0&&oi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ca(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return oi(r)||e>2&&Ev(r)&&t.charCodeAt(1)===bv&&oi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ca(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&oi(r.charCodeAt(0))){++i;let o=r.length;o>1&&oi(r.charCodeAt(1))&&(++i,o>2&&(oi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&oi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ua.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e)return"";let r=ua.resolve(t),n=ua.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Id;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Id;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Id;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Id;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Id&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Id)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Id?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Id)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Id&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ua.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Id){if(e.charCodeAt(1)===Id){let r=e.charCodeAt(2);if(r!==oAt&&r!==Iv)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Ev(e.charCodeAt(0))&&e.charCodeAt(1)===bv&&e.charCodeAt(2)===Id)return`\\\\?\\${e}`;return t},dirname(t){ca(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return oi(i)?t:".";if(oi(i)){if(r=n=1,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else Ev(i)&&t.charCodeAt(1)===bv&&(r=e>2&&oi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(oi(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ca(e,"suffix"),ca(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Ev(t.charCodeAt(0))&&t.charCodeAt(1)===bv&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(oi(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(oi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ca(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===bv&&Ev(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(oi(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===Iv?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:ike.bind(null,"\\"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return oi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(oi(i)){if(n=1,oi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!oi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&oi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!oi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(Ev(i)&&t.charCodeAt(1)===bv){if(r<=2)return e.root=e.dir=t,e;if(n=2,oi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),oi(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===Iv?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},lAt=(()=>{if(Td){let t=/\\/g;return()=>{let e=ID().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>ID()})(),Da={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:lAt();ca(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Gl)}return e=uq(e,!r,"/",soe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Gl,r=t.charCodeAt(t.length-1)===Gl;return t=uq(t,!e,"/",soe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ca(t,"path"),t.length>0&&t.charCodeAt(0)===Gl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ca(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Da.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e||(t=Da.resolve(t),e=Da.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Gl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Gl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Gl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Gl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Gl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Gl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ca(e,"ext"),ca(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Gl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Gl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ca(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Gl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===Iv?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:ike.bind(null,"/"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Gl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Gl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===Iv?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Da.win32=ua.win32=ua;Da.posix=ua.posix=Da;var vOr=Td?ua.normalize:Da.normalize,bOr=Td?ua.isAbsolute:Da.isAbsolute,EOr=Td?ua.join:Da.join,IOr=Td?ua.resolve:Da.resolve,TOr=Td?ua.relative:Da.relative,wOr=Td?ua.dirname:Da.dirname,oke=Td?ua.basename:Da.basename,ske=Td?ua.extname:Da.extname,_Or=Td?ua.format:Da.format,SOr=Td?ua.parse:Da.parse,ROr=Td?ua.toNamespacedPath:Da.toNamespacedPath,kOr=Td?ua.sep:Da.sep,BOr=Td?ua.delimiter:Da.delimiter;f();f();var uAt=/^\w[\w\d+.-]*$/,dAt=/^\//,fAt=/^\/\//;function pAt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!uAt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!dAt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(fAt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(pAt,"_validateUri");function mAt(t,e){return!t&&!e?"file":t}s(mAt,"_schemeFix");function hAt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Nm&&(e=Nm+e):e=Nm;break}return e}s(hAt,"_referenceResolution");var Vo="",Nm="/",gAt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,wv=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Vo,this.authority=e.authority||Vo,this.path=e.path||Vo,this.query=e.query||Vo,this.fragment=e.fragment||Vo):(this.scheme=mAt(e,a),this.authority=r||Vo,this.path=hAt(this.scheme,n||Vo),this.query=i||Vo,this.fragment=o||Vo,pAt(this,a))}get fsPath(){return aoe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Vo),n===void 0?n=this.authority:n===null&&(n=Vo),i===void 0?i=this.path:i===null&&(i=Vo),o===void 0?o=this.query:o===null&&(o=Vo),a===void 0?a=this.fragment:a===null&&(a=Vo),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Tv(r,n,i,o,a)}static parse(e,r=!1){let n=gAt.exec(e);return n?new Tv(n[2]||Vo,dq(n[4]||Vo),dq(n[5]||Vo),dq(n[7]||Vo),dq(n[9]||Vo),r):new Tv(Vo,Vo,Vo,Vo,Vo)}static file(e){let r=Vo;if(p2&&(e=e.replace(/\\/g,Nm)),e[0]===Nm&&e[1]===Nm){let n=e.indexOf(Nm,2);n===-1?(r=e.substring(2),e=Nm):(r=e.substring(2,n),e=e.substring(n)||Nm)}return new Tv("file",r,e,Vo,Vo)}static from(e,r){return new Tv(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return p2&&e.scheme==="file"?n=t.file(ua.join(aoe(e,!0),...r)).path:n=Da.join(e.path,...r),e.with({path:n})}toString(e=!1){return loe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Tv(e);return r._formatted=e.external??null,r._fsPath=e._sep===cke?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var cke=p2?1:void 0,Tv=class extends wv{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=aoe(this,!1)),this._fsPath}toString(r=!1){return r?loe(this,!0):(this._formatted||(this._formatted=loe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=cke),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},uke={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function ake(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=uke[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(ake,"encodeURIComponentFast");function AAt(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=uke[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(AAt,"encodeURIComponentMinimal");function aoe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,p2&&(r=r.replace(/\//g,"\\")),r}s(aoe,"uriToFsPath");function loe(t,e){let r=e?AAt:ake,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Nm,n+=Nm),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:ake(c,!1,!1)),n}s(loe,"_asFormatted");function dke(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+dke(t.substr(3)):t}}s(dke,"decodeURIComponentGraceful");var lke=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function dq(t){return t.match(lke)?t.replace(lke,e=>dke(e)):t}s(dq,"percentDecode");var Lm=class t{constructor(e){this.uri=e;this._uri=wv.parse(Fl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new j1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return oke(this.uri)}get extension(){return ske(this.uri)}toUri(){return this._uri}};f();f();var ip=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new xn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(el.fromJson))}static from(e){let r=e.map(i=>new el(Bt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new el(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new el(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return yAt(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new el(Bt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Bt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(r.push(new el(l.replaceRange.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new el(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Bt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Bt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},el=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Bt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=gD(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,w5(r,this.newText)),o=new Bt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function yAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)n.push(new el(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new el(Bt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Bt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new el(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new ip(n).normalize()}s(yAt,"joinEdits");f();f();var fke=-1;function P5(){return fke!==-1?fke:Date.now()}s(P5,"now");function pke(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(pke,"lineRangeDistance");f();var N5=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new K1(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Qs.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return xs.create(r)}mapEdits(e){return new t(this.edits.map(e))}},K1=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Qs.replace(n,this.newText)}};var Po=class t{constructor(e){this.edits=e;Ul(Cv(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Fm.deserialize(r)))}static fromEdit(e){let r=N5.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let l=n[a],c=a+1<n.length?n[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=K1.joinEdits(o,r);o.length=0;let d=Fm.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(I0(n=>n.lineRange.startLineNumber,T0)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return xs.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Yt.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Fm(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of n5(this.edits,(c,u)=>pke(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Fm(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Fm=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Sg(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(zt.fromPositions(new sn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,c=r.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new sn(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+c;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===c.length&&(a--,n.pop()),new t(new Yt(i,a),n)}toLineEdit(){return new Po([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new sn(o,a)}else n=new sn(1,1);let i=r.addToPosition(new sn(1,1));return new K1(zt.fromPositions(n,i),"")}else return new K1(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new K1(zt.fromPositions(new sn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new zt(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new K1(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Qs.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Yt(r,n),this.newLines.slice(i,this.newLines.length-o))}},CAt;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(CAt||={});var Dg=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=Po.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Jc(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Po(r))}};var xs=class t{constructor(e){this.edits=e;Ul(Cv(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Qs.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Qs.replace(e,r)])}static insert(e,r){return new t([Qs.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Qs.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,l)=>" ".repeat(l-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new ip(this.edits.map(e=>new el(e.range,e.newText)))}compose(e){return xAt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Qs.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Qs.replace(Bt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Qs.replaceWithData(Bt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new fq(i)}if(this.edits.length!==e.arrayLength)throw X8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let l=o;l<n.length;++l){let c=a.newText.length-a.range.length,u=n[l];n[l]=Qs.replaceWithData(Bt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new fq(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Bt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Qs.replace(Bt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)if(!a)r.push(Qs.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(r.push(Qs.replace(l.range.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function xAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.range.length}if(!l)n.push(Qs.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&n.push(Qs.replaceWithData(Bt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Qs.replaceWithData(Bt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Bt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Qs.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return xs.create(n).normalize()}s(xAt,"joinEdits");var Qs=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Bt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Bt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Bt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return xs.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=vAt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=bAt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function vAt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(vAt,"commonPrefixLength");function bAt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(bAt,"commonSuffixLength");var Jc=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Nu(()=>null.base.equals(this.base.apply(e))),Nu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return Dg.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},fq=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return xs.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new Pg(this.edits.map(e=>e.toEdit()))}},Pg=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return xs.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=xs.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>xs.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=Po.fromEdit(new Jc(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};var _v=class extends kg{constructor(r,n=!1){super();this._openDocuments=Pm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this._started=!1;this.ctx=r,this._started=!1,n||this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Rr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=Lm.create(r);return this.addDocument({id:o,initialValue:i,languageId:d2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=Lm.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=Lm.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=Lm.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new coe(r.id,new Wl(r.initialValue??""),[],r.languageId??d2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Rr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},coe=class extends oq{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new sn(e.lineNumber+1,e.column+1));this.updateSelection([new Bt(r,r)])}editFromLspContentChanges(e){return new Pg(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(mke.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new sn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new sn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new xn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return xs.replace(new Bt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};function hke(t,e,r){return t.get(h2).safeStartIfApplicable(e,r)}s(hke,"startRecentEditsPromptFeatureIfApplicable");var gke={maxFiles:5,maxEditsPerFile:5,diffContextLines:3,editMergeLineDistance:3,maxCharsPerEdit:2e3,debounceTimeout:500,summarizationFormat:"diff",removeDeletedLines:!1,insertionsBeforeDeletions:!1,appendNoReplyMarker:!1,activeDocDistanceLimitFromCursor:100,maxLinesPerEdit:10},h2=class{constructor(e){this.ctx=e;this._started=!1;this._config=gke}static{s(this,"RecentEditsPromptFeature")}safeStartIfApplicable(e,r){this.shouldStart(e,r)&&this.safeStart(e,r)}get config(){return this._config}retrieveConfig(e,r){let n=Jr(this.ctx,ft.RecentEditsRemoveDeletedLines)??r.recentEditsRemoveDeletedLines(e),i=Jr(this.ctx,ft.InsertionsBeforeDeletions)??r.recentEditsInsertionsBeforeDeletions(e),o=Jr(this.ctx,ft.RecentEditsAppendNoReplyMarker)??r.recentEditsAppendNoReplyMarker(e),a=Jr(this.ctx,ft.RecentEditsActiveDocDistanceLimitFromCursor)??r.recentEditsActiveDocDistanceLimitFromCursor(e),l=Jr(this.ctx,ft.RecentEditsSummarizationFormat)??r.recentEditsSummarizationFormat(e),c=Jr(this.ctx,ft.RecentEditsMaxLinesPerEdit)??r.recentEditsMaxLinesPerEdit(e),u=Jr(this.ctx,ft.RecentEditsEditCount)??r.recentEditsEditCount(e),d=Jr(this.ctx,ft.RecentEditsMaxFiles)??r.recentEditsMaxFiles(e),p=Jr(this.ctx,ft.RecentEditsContextLines)??r.recentEditsContextLines(e),m=Jr(this.ctx,ft.RecentEditsEditMergeLineDistance)??r.recentEditsEditMergeLineDistance(e),h=Jr(this.ctx,ft.RecentEditsMaxCharsPerEdit)??r.recentEditsMaxCharsPerEdit(e),g=Jr(this.ctx,ft.RecentEditsDebounceTimeout)??r.recentEditsDebounceTimeout(e);return{maxFiles:d,maxEditsPerFile:u,diffContextLines:p,editMergeLineDistance:m,maxCharsPerEdit:h,debounceTimeout:g,summarizationFormat:l,removeDeletedLines:n,insertionsBeforeDeletions:i,appendNoReplyMarker:o,activeDocDistanceLimitFromCursor:a,maxLinesPerEdit:c}}setConfig(e){this._config=e,this.ctx.get($1).setConfig(this._config)}shouldStart(e,r){return this._started?!1:uoe(this.ctx,r,e)}safeStart(e,r){this._started||(this._started=!0,this.setConfig(this.retrieveConfig(e,r)),this.ctx.get(_v).start(),this.ctx.get($1).start())}};function Ake(t,e){let r=new _v(t,e);t.set(_v,r),t.set($1,new $1(r,gke,e)),t.set(h2,new h2(t))}s(Ake,"setupRecentEditsPromptFeature");function uoe(t,e,r){return Jr(t,ft.RecentEditsInPrompt)??e.recentEditsInPrompt(r)}s(uoe,"isRecentEditsActive");var pq=s((t,e)=>{let r=t.get(kt);return uoe(t,r,e)},"recentEditsPredicate");function EAt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(EAt,"editIsTooCloseToCursor");var mq=s((t,e)=>{let[r,n]=e.useState();return e.useData(Kc,i=>{if(!i.document)return;let o=i.telemetryData,a=t.ctx.get(kt);hke(t.ctx,o,a);let l=t.ctx.get(h2).config,c=t.ctx.get($1),u=c.getRecentEdits(),d=new Set,p=t.ctx.get(Rr),m=[];for(let g=u.length-1;g>=0&&!(m.length>=l.maxEditsPerFile);g--){let y=!d.has(u[g].file);if(d.size+(y?1:0)>l.maxFiles)break;let b=u[g],E=b.file===i.document?.uri,_=E?i.position.line:void 0;if(EAt(b,E,_,l.activeDocDistanceLimitFromCursor))continue;let B=c.getEditSummary(b);if(B){d.add(b.file);let N=p.getRelativePath({uri:b.file});m.unshift(CD(`File: ${N}`)+CD(B))}}if(m.length===0){n(void 0);return}let h=CD("These are recently edited files. Do not suggest code that has been deleted.")+m.join("")+CD("End of recent edits");n(h)}),r?kr(ml,{children:r}):void 0},"RecentEdits");f();f();f();f();var doe=new Kr;function yke(t){return[...t].sort((e,r)=>{let n=doe.get(e.uri)??0;return(doe.get(r.uri)??0)-n})}s(yke,"sortByAccessTimes");var Cke=s(t=>t.get(Rr).onDidFocusTextDocument(e=>{e&&doe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var hq=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>J1.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&r.startsWith("file:")&&l.uri!==r&&gq(n,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(yke(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function xke(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(xke,"shortCircuit");f();function TAt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(TAt,"defaultHash");function foe(t,e={}){let{hash:r=TAt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw n.delete(o),l})),n.set(o,a),a}}s(foe,"memoize");var vke={entries:[],traits:[]},Aq={entries:new Map,traits:[]},poe=class extends Kr{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},hl=new _t("relatedFiles"),wAt=1e3,yq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},g2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{hl.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){hl.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){hl.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){hl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(lo).readFileString(e)}catch(r){hl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Yc).evaluate(e,r)).isBlocked}catch(n){hl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},_At=3,bke=new poe(wAt);async function Eke(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(c){hl.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(bke.bumpRetryCount(e.uri)>=_At?a=Aq:a=void 0);let l=performance.now()-o;if(hl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new yq;return a}s(Eke,"getRelatedFiles");var moe=foe(Eke,{cache:bke,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});moe=xke(moe,200,Aq);async function Cq(t,e,r,n,i,o=!1){let a=t.get(g2),l=Aq;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await Eke(t,c,r,n,a):await moe(t,c,r,n,a)}catch(c){l=Aq,c instanceof yq&&Dt(t,"getRelatedFilesList",r)}return hl.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(Cq,"getRelatedFilesAndTraits");function gq(t,e){return m8(t)===m8(e)}s(gq,"considerNeighborFile");var J1=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,l){let c=e.get(Rr);t.instance===void 0&&(t.instance=new hq(c));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(SAt(e,i))return u;let d=await c.getTextDocument({uri:r});if(!d)return hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=c.getWorkspaceFolder(d);if(!p)return hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await Cq(e,d,i,o,a,l);return m.entries.size===0?(hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function SAt(t,e){return t.get(kt).excludeRelatedFiles(e)||Jr(t,ft.ExcludeRelatedFiles)}s(SAt,"isExcludeRelatedFilesActive");function Ike(t,e){return t.get(kt).includeNeighboringFiles(e)||Jr(t,ft.IncludeNeighboringFiles)}s(Ike,"isIncludeNeighborFilesActive");f();f();var RAt={WorkspaceDocumentProvider:{UpdateInterval:500,Laziness:.5,MaxSupport:1e3,ProviderWeights:{recentDocumentProvider:1,relatedFilesShim:.8,fileDirectoryDocumentProvider:.2}},RecentDocumentProvider:{DebounceInterval:50,MaxClosedDocs:20,DistributionHalflife:1e3*60*5/Math.log(2),DocumentActivityWeights:{Edit:1,Focus:1,Open:1}},FileDirectoryDocumentProvider:{MaxDirectorySize:200,MaxResults:100,Decay:.5,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24}},xq=class{constructor(e){this.ctx=e;this.params=RAt}static{s(this,"WorkspaceContextConfig")}get(e){let r=e(this.params);return r&&typeof r=="object"?JSON.parse(JSON.stringify(r)):r}getProviderWeight(e){return this.get(r=>r.WorkspaceDocumentProvider.ProviderWeights[e])}};f();f();f();function hoe(t){let e=new Map;for(let{uri:r,weight:n}of t)e.set(r,(e.get(r)??0)+n);return e}s(hoe,"asDistribution");function Tke(t){let e=Array.from(t.values()).reduce((n,i)=>n+Math.max(i,0),0),r=new Map;if(e>0){for(let[n,i]of t)r.set(n,Math.max(i,0)/e);return r}}s(Tke,"normalizeDistribution");var TD=class{constructor(e,r){this.ctx=e;this.config=r;this.id="workspaceDocumentProvider";this.distribution=void 0;this._documents=[];this.providers=new Map;this.interval=void 0;this._similarFiles=new Map;this.updateId=0;this.lastUpdateTime=performance.now();let n=this.config.get(i=>i.WorkspaceDocumentProvider.UpdateInterval);if(n<=0){Mr.error(this.ctx,"Workspace document provider update interval is 0, skipping updates");return}this.interval=setInterval(()=>{let i=new pn.CancellationTokenSource;q1(n).then(()=>{i.cancel(),i.dispose()}),this.forceUpdate(i.token,!0).catch(o=>{Mr.error(this.ctx,"Error resolving workspace documents:",o)})},n)}static{s(this,"WorkspaceDocumentProvider")}async forceUpdate(e,r=!1){if(this.providers.size===0)return;let n=performance.now(),i={updateId:this.updateId++,intervalTime:n-this.lastUpdateTime,resolveTime:0,updateTime:void 0,similarFilesTime:void 0,providerStatistics:[],wasCancelled:!1};this.lastUpdateTime=n;let{result:o,statistics:a}=await this.resolveAllProviders(this.documents,e),l=performance.now();if(i.resolveTime=l-n,i.providerStatistics=a,e?.isCancellationRequested&&!r){i.wasCancelled=!0,this.ctx.get(Hl).pushTelemetry(i);return}this.updateDocuments(o);let c=performance.now();i.updateTime=c-l,await this.updateSimilarFiles(),i.similarFilesTime=performance.now()-c,this.ctx.get(Hl).pushTelemetry(i)}get documents(){return[...this._documents]}getDocuments(){return Promise.resolve(this.documents)}getSimilarFiles(e){let r=Array.from(this._similarFiles.entries()).filter(([n])=>n!==e);return{docs:new Map(r)}}registerDocumentProvider(e){if(this.providers.has(e.id))throw new Error(`Document provider with id ${e.id} already registered`);let r=this.config.getProviderWeight(e.id);if(r===void 0)throw new Error(`Document provider ${e.id} not found in config`);this.providers.set(e.id,{provider:e,weight:r})}async resolveAllProviders(e,r){let n=new Map;for(let[l,{provider:c}]of this.providers.entries()){let u=c.getDocuments(e,r);n.set(l,u)}let i=await TU(n,r),o=new Map,a=[];for(let[l,c]of i.entries()){let u={id:l,status:c.status,resolutionTime:c.resolutionTime,resolvedItems:0,normalizedItems:0};if(a.push(u),c.status==="error"){Mr.error(this.ctx,`Error resolving workspace documents from provider ${l}:`,c.reason);continue}if((c.status==="none"||c.status==="partial")&&Mr.info(this.ctx,`Document provider ${l} exceeded time budget`),c.status==="partial"||c.status==="full"){u.resolvedItems=c.value.length;let d=Tke(hoe(c.value));u.normalizedItems=d?d.size:0,d?o.set(l,d):Mr.info(this.ctx,`Document provider ${l} normalized to an empty distribution`)}}return{result:o,statistics:a}}updateDocuments(e){let r=new Map,n=0;for(let[a,l]of e.entries()){let c=!1,u=this.providers.get(a).weight??0;for(let[d,p]of l){let m=uM(d);if(m!==void 0){c=!0;let h=r.get(m)??0;r.set(m,h+p*u)}}c&&(n+=u)}if(n<=0){Mr.info(this.ctx,"No documents proposed by any workspace document provider");return}if(this.distribution!==void 0){let a=this.config.get(l=>l.WorkspaceDocumentProvider.Laziness);this.distribution.size==0&&(a=0);for(let[l,c]of this.distribution){let u=r.get(l)??0;r.set(l,u+c*(n*a))}}let i=this.config.get(a=>a.WorkspaceDocumentProvider.MaxSupport),o=Array.from(r.entries()).sort((a,l)=>l[1]-a[1]).slice(0,i).map(([a,l])=>({uri:a,weight:l}));this.distribution=Tke(hoe(o)),this._documents=Array.from(this.distribution.entries()).map(([a,l])=>({uri:a,weight:l}))}async updateSimilarFiles(){let e=new Map,r=this.ctx.get(vn);for(let n of this._documents){let i=await r.getOrReadTextDocument(n);if(i.status!=="valid")continue;let o={relativePath:r.getRelativePath(n),uri:n.uri,source:kAt(i.document.getText()),languageId:i.document.detectedLanguageId};if(e.set(n.uri,o),e.size>=d8.maxNumberOfFiles)break}this._similarFiles=e}dispose(){this.interval&&(clearInterval(this.interval),this.interval=void 0)}};function kAt(t){return t.charCodeAt(0)===65279?t.slice(1):t}s(kAt,"dropBOM");var Hl=class{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Eg;this.telemetryQueue=new Kr(20);this.tokenEventDisposable=Ds(e,()=>{this.maybeStart()}),this.maybeStart()}static{s(this,"WorkspaceContextCoordinator")}pushTelemetry(e){this.telemetryQueue.set(e.updateId,e)}popTelemetry(){let e=Array.from(this.telemetryQueue.values());return this.telemetryQueue.clear(),e}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Jr(this.ctx,ft.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(kt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}isEnabled(e){return Jr(this.ctx,ft.UseWorkspaceContextCoordinator)??this.ctx.get(kt).workspaceContextCoordinator(e)}getFeature(){if(this.isActive())return{config:this.config,documentProvider:this.wdp}}async getInitializedFeature(){return await this.deferredStart.promise,this.getFeature()}start(){this.didStart=!0,this.config=new xq(this.ctx),this.wdp=new TD(this.ctx,this.config),this.deferredStart.resolve()}dispose(){this.isActive()?this.wdp.dispose():this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}};f();f();f();f();var vq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(Kc,async c=>{c.document.uri!==r?.uri&&o([]),n(c.document);let u=J1.defaultEmptyResult();if(!c.turnOffSimilarFiles){let p=t.ctx.get(Hl);p.isEnabled(c.telemetryData)?p.isActive()?u=(await p.getInitializedFeature()).documentProvider.getSimilarFiles(c.document.uri):p.maybeStart():u=await J1.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data)}let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=bq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...aTe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||FU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(Rr).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await gTe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),kr(Dm,{children:[...i.map((c,u)=>kr(PAt,{snippet:c}))]})},"SimilarFiles"),PAt=s((t,e)=>kr(v5,{children:[kr(ml,{expElidableTextWeight:1,children:t.snippet.headline}),kr(yv,{expElidableTextWeight:.99,children:t.snippet.snippet})]}),"SimilarFile");f();f();var Eq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Kc,a=>{a.traits!==r&&n(a.traits);let l=m8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!r||r.length===0||!i))return kr(Dm,{children:[kr(ml,{expElidableTextWeight:1,children:`Consider this related information:
`}),...r.map(a=>kr(ml,{source:a,expElidableTextWeight:.99,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function wke(t,e){return Jr(t,ft.UseSplitContextPrompt)??t.get(kt).enablePromptContextProxyField(e)}s(wke,"shouldUseSplitContextPrompt");function _ke(t){return kr(Dm,{children:[kr(Pie,{children:[kr($U,{ctx:t,weight:.7,expElidableTextWeight:.9}),kr(Eq,{weight:.6,expElidableTextWeight:.5}),kr(MU,{ctx:t,weight:.9,expElidableTextWeight:.7}),kr(vq,{ctx:t,weight:.8,expElidableTextWeight:.6})]}),kr(vRe,{weight:1,expElidableTextWeight:1}),kr(Nie,{children:kr(VU,{ctx:t,by:pq,children:kr(mq,{ctx:t,weight:.99,expElidableTextWeight:.9})})}),kr(xRe,{weight:1,expElidableTextWeight:1})]})}s(_ke,"splitContextCompletionsPrompt");f();var Ske=0;function NAt(){Ske=0}s(NAt,"resetContextIndex");function LAt(){return Ske++}s(LAt,"getNextContextIndex");var Iq=class extends S5{constructor(){super(...arguments);this.formatPrefix=ERe;this.formatContext=IRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],l=!1;if(NAt(),new _5(r,FAt).walkSnapshot((d,p,m)=>{if(d===r||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===a2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode,y=m.type;if(y==="suffix")o.push({value:xD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let v=y==="prefix",b=v||d.value.endsWith(n)?d.value:d.value+n;i.push({type:v?"prefix":"context",value:xD(b),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g,index:v?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${a2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},FAt=[...$ie,(t,e,r)=>QU(t)?{...r,index:LAt()}:r];f();function Rke(t,e,r){let n=RU(r,"Trait");for(let o of n)MAt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(Rke,"getTraitsFromContextItems");function MAt(t,e,r,n){let i=t.get(Ol).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(MAt,"setupExpectationsForTraits");var QAt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function kke(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let c of r){let u=QAt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return Dt(e,t,l)}}s(kke,"ReportTraitsTelemetry");f();f();f();var Tq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},wq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var _q=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(OAt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,l=new Aoe(this.getOrCreateLifecycleData(a)),c=i(n.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:l}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new goe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},goe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},Aoe=class{constructor(e){this.lifecycleData=e;this.stateHook=new Tq(e.state),this.dataHook=new wq(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function OAt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(OAt,"isFragmentFunction");var wD=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new _q(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};var Mm=class{static{s(this,"CompletionsPromptFactory")}};function Sq(t,e,r){return new Coe(new xoe(new voe(t,e,r)))}s(Sq,"createCompletionsPromptFactory");var Coe=class extends Mm{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return L5;try{return await this.delegate.prompt(r,n)}catch{return boe}}},UAt=1200,xoe=class extends Mm{constructor(r){super();this.delegate=r}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(r,n){let i=new pn.CancellationTokenSource,o=i.token;return n?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(r,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(Fke)},UAt)})])}};function Kc(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Kc,"isCompletionRequestData");var yoe={default:{promptFunction:Bke,renderer:S5},splitContext:{promptFunction:_ke,renderer:Iq}};function Bke(t){return kr(Dm,{children:[kr(Die,{children:[kr($U,{ctx:t,weight:.7,expElidableTextWeight:.9}),kr(Eq,{weight:.6,expElidableTextWeight:.5}),kr(MU,{ctx:t,weight:.9,expElidableTextWeight:.7}),kr(vq,{ctx:t,weight:.8,expElidableTextWeight:.6}),kr(VU,{ctx:t,by:pq,children:kr(mq,{ctx:t,weight:.99,expElidableTextWeight:.9})})]}),kr(AD,{weight:1,expElidableTextWeight:1})]})}s(Bke,"defaultCompletionsPrompt");var voe=class extends Mm{constructor(r,n,i){super();this.ctx=r;this.promptOrdering=i??"default",this.virtualPrompt=n??new wD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(r,n){try{return await this.createPromptUnsafe(r,n)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:r,completionState:n,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=bq(this.ctx,i,n.textDocument.detectedLanguageId),d=await this.failFastPrompt(n.textDocument,n.position,c??0,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(r,n,i,a,o);if(await this.updateComponentData(n.textDocument,n.position,h,g,i,y,l??p8,a,o,u,o?.tokenizer),a?.isCancellationRequested)return L5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return L5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l??p8,suffixPercent:c??aQ,elisionStrategy:this.ctx.get(kt).completionsElisionStrategy(i),approximateElision:this.ctx.get(kt).approximateElision(i),languageId:n.textDocument.detectedLanguageId,beforeCursorLines:this.ctx.get(kt).beforeCursorLines(i)},a);if(_.status==="cancelled")return L5;if(_.status==="error")return this.errorPrompt(_.error);let[k,B]=F5(_.prefix),N={..._,prefix:k},W;if(Sie(this.ctx,i)){let me=$4e(_.metadata.componentStatistics);this.ctx.get(Ol).getStatisticsForCompletion(r).computeMatch(me),W=Y4e(this.ctx,r,v),Mr.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(W)}'`)}let ee=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,ee,m,B,W)}async updateComponentData(r,n,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(r,n,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(r,n,i,o,a={}){let l=[],c,u,d=!1;if(Sie(this.ctx,i)){l=await this.ctx.get(tp).resolution(r);let{textDocument:p}=n,m=l.filter(K4e);qAt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=Rke(this.ctx,r,m),kke("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await lRe(this.ctx,r,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(r,n,i,o){if(o?.isCancellationRequested)return L5;if((await this.ctx.get(Yc).evaluate(r.uri,r.getText(),"UPDATE")).isBlocked)return Lke;if((i>0?r.getText().length:r.offsetAt(n))<Pke)return Nke}createRequestData(r,n,i,o,a,l,c,u,d,p,m){return{document:r,position:n,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(r){r.prefix.length===0&&r.suffix.length===0&&this.reset()}successPrompt(r,n,i,o,a){return{type:"prompt",prompt:{prefix:r.prefix,prefixTokens:r.prefixTokens,suffix:r.suffix,suffixTokens:r.suffixTokens,context:r.context,isFimEnabled:r.suffix.length>0},computeTimeMs:n-i,trailingWs:o,neighborSource:new Map,metadata:r.metadata,contextProvidersTelemetry:a}}errorPrompt(r){return Ta(this.ctx,r,"PromptComponents.CompletionsPromptFactory"),this.reset(),boe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new wD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(r){this.promptOrdering!==r&&(this.promptOrdering=r,this.reset())}completionsPrompt(){return(yoe[this.promptOrdering]?.promptFunction??Bke)(this.ctx)}getRenderer(){let r=yoe[this.promptOrdering]??yoe.default;return new r.renderer}};function qAt(t,e,r,n){let i=["cpp","c"];return Ike(t,n)||i.includes(e)||!r.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(qAt,"similarFilesEnabled");async function Dke(t){try{await Ste}catch(e){Av(t,e,"initializeTokenizers")}}s(Dke,"waitForTokenizers");var Pke=10,Nke={type:"contextTooShort"},Lke={type:"copilotContentExclusion"},boe={type:"promptError"},L5={type:"promptCancelled"},Fke={type:"promptTimeout"};function F5(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(F5,"trimLastLine");function M5(t,e,r,n,i,o={}){let l=t.get(Rr).findNotebook(r.textDocument),c=l?.getCellFor(r.textDocument);l&&c&&(r=GAt(r,l,c)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=wke(t,n);return t.get(Mm).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(M5,"extractPrompt");function WAt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:jU(n,e)}s(WAt,"addNeighboringCellsToPrompt");function GAt(t,e,r){let i=e.getCells().filter(l=>l.index<r.index&&gq(r.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>WAt(l,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(GAt,"applyEditsForNotebook");function bq(t,e,r){let i=t.get(kt).maxPromptCompletionTokens(e)-vU(t),o=sRe(e,r),a=FU(t,e,r),l={maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o},c=t.get(kt).suffixPercent(e),u=t.get(kt).suffixMatchThreshold(e);return c>0&&u>0&&(l={...l,suffixPercent:c,suffixMatchThreshold:u}),l}s(bq,"getPromptOptions");f();f();var Mke=2.98410452738298,Qke=-.838732736843507,Oke=1.50314646255716,Uke=-.237798634012662,Rq={python:.314368072478742},qke={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var HAt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function jAt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(jAt,"linearInterpolation");var Q5=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},Eoe=class{constructor(e,r,n){this.link=HAt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return jAt(n,this.logitsToQuantiles)}},Wke=new Eoe(Mke,[new Q5("compCharLen",Qke,t=>Math.log(1+t)),new Q5("meanLogProb",Oke),new Q5("meanAlternativeLogProb",Uke)].concat(Object.entries(Rq).map(t=>new Q5(t[0],t[1]))),qke);function Gke(t,e){let r={...e.measurements};return Object.keys(Rq).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Wke.predict(t,r)}s(Gke,"ghostTextScoreConfidence");function Hke(t,e){let r={...e.measurements};return Object.keys(Rq).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Wke.quantile(t,r)}s(Hke,"ghostTextScoreQuantile");f();f();var VAt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function kq(t){let e=t.slice();return e.reverse(),jke(e)||jke(e.filter(r=>r.trim().length>0))}s(kq,"isRepetitive");function jke(t){let e=$At(t);for(let r of VAt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(jke,"isRepeatedPattern");function $At(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s($At,"kmp_prefix_function");function zAt(t,e,r,n){let i="}";try{i=mTe(e.detectedLanguageId)??"}"}catch{}return YAt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(zAt,"maybeSnipCompletion");function YAt(t,e,r,n){let i=KAt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return r}s(YAt,"maybeSnipCompletionImpl");function KAt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(KAt,"splitByNewLine");function JAt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(JAt,"matchesNextLine");function _D(t,e,r,n,i,o){if(kq(n.tokens)){let l=an.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Dt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(JAt(e,r,a.completionText,!i)){let l=an.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Dt(t,"completion.alreadyInDocument",l),Dt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=zAt(t,e,r,a.completionText),a.completionText?a:void 0}s(_D,"postProcessChoiceInContext");function Vke(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=r.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(Vke,"checkSuffix");var Kke=Ve(Ex());var co=new _t("ghostText");var ZAt=200,$ke=20;async function Jke(t,e,r,n,i,o,a){co.debug(t,`Getting ${o} from network`),r=r.extendedBy();let l=e.isCycling?3:1,c=A5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:xTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Jr(t,ft.ModelAlwaysTerminatesSingleline)??t.get(kt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&Bm.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(Ed).fetchAndStreamCompletions(t,y,r,i,n);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Zs(r)}:v.type==="canceled"?(co.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:Ig(r)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Lc(y))return{type:"canceled",reason:"network request aborted",telemetryData:Ig(r,{cancelledNetworkRequest:!0})};if(co.exception(t,y,"Error on ghost text request"),t.get(Eu).notifyUser(t,y),P_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Zs(r)}}}s(Jke,"genericGetCompletionsFromNetwork");function Ioe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(Ioe,"postProcessChoices");async function e1t(t,e,r,n,i){return Jke(t,e,r,n,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return co.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Zs(r)};if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:Ig(r)};let d=u.value;if(d===void 0)return co.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Zs(r)};Zke(t,"performance",d,o,a),co.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=Ioe(d,e);p&&(Bq(t,e,p),co.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;co.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=Ioe(g,e,h);y&&(h.push(y),Bq(t,e,y))}})();return tm(t)&&await m,p?{type:"success",value:[Toe(p,{forceSingleLine:!1}),m],telemetryData:Zs(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Zs(r)}})}s(e1t,"getCompletionsFromNetwork");async function t1t(t,e,r,n,i){return Jke(t,e,r,n,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:Ig(r)};let d=Ioe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)Bq(t,e,u);Zke(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Zs(r),telemetryBlob:r,resultType:3}})}s(t1t,"getAllCompletionsFromNetwork");function Toe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(Toe,"makeGhostAPIChoice");function zke(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(zke,"takeNLines");async function r1t(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(bm).forLanguage(t,e.textDocument.detectedLanguageId,d);switch(p){case"server":return a&&u?{blockMode:"parsing",requestMultiline:!0,finishedCb:zke(1),stop:[`

`],maxTokens:$ke}:{blockMode:"server",requestMultiline:!0,finishedCb:s(m=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let m;try{m=await u1t(t,p,e.textDocument,e.position,o,l,c,n)}catch{m={requestMultiline:!1}}if(m.requestMultiline){let h;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?h=jo.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):h=e.position,{blockMode:p,requestMultiline:!0,...Yke(t,p,e.textDocument,h,m.blockPosition,r,c,!0,n.prompt,d)}}if(a&&(u||p==="moremultiline")){let h={blockMode:"parsing",requestMultiline:!0,finishedCb:zke(1),stop:[`

`],maxTokens:$ke};return p==="moremultiline"&&(h.blockMode="moremultiline"),h}return{blockMode:p,requestMultiline:!1,...Yke(t,p,e.textDocument,e.position,m.blockPosition,r,c,!1,n.prompt,d)}}}}s(r1t,"getGhostTextStrategy");function Yke(t,e,r,n,i,o,a,l,c,u){if(l&&e==="moremultiline"&&Bm.isSupported(r.detectedLanguageId)){let d=i==="empty-block"||i==="block-end"?t.get(kt).longLookaheadSize(u):t.get(kt).shortLookaheadSize(u);return{finishedCb:new bU(t,o,r.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:o+m,prompt:{...c,prefix:c.prefix+m}};Bq(t,g,h)}).getFinishedCallback(),maxTokens:ZAt}}return{finishedCb:l?fD(t,r,n,a):d=>{}}}s(Yke,"buildFinishedCallback");var n1t={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function i1t(t,e,r,n,i,o){let a=n.issuedTime,l=[];function c(b){let E=Js();l.push([b,E-a]),a=E}s(c,"recordPerformance"),c("telemetry");let u=t.get(kt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Zs(n)};let d=s1t(e.textDocument,e.position);if(d===void 0)return co.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Zs(n)};let p=i,m=new pn.CancellationTokenSource;i=m.token;let h=Kx(t,n),g={...n1t,...o,tokenizer:h.tokenizer},y=await M5(t,r,e,n,i,g);return c("prompt"),y.type==="copilotContentExclusion"?(co.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Zs(n)}):y.type==="contextTooShort"?(co.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Zs(n)}):y.type==="promptError"?(co.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Zs(n)}):g.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y}:y.type==="promptCancelled"?(co.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Zs(n)}):y.type==="promptTimeout"?(co.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Zs(n)}):y.prompt.prefix.length===0&&y.prompt.suffix.length===0?(co.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Zs(n)}):i?.isCancellationRequested?(co.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Zs(n)}):t.get(Ki).withProgress(async()=>{let[b]=F5(e.textDocument.getText(jo.range(jo.position(0,0),e.position))),E=u.triggerCompletionAfterAccept(n),_=t.get(wd).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=Jr(t,ft.MultilineAfterAccept)??u.enableMultilineAfterAccept(n),B=(Jr(t,ft.AlwaysRequestMultiline)??u.enableProgressiveReveal(n))&&Bm.isSupported(e.textDocument.detectedLanguageId),N=E&&!k&&!B?_:void 0,W=y.prompt;N&&(y.prompt={...y.prompt,prefix:y.prompt.prefix+`
`});let ee=await r1t(t,e,b,y,g.isCycling,d,_,g.isSpeculative,N??!1,k,n);if(c("strategy"),i?.isCancellationRequested)return co.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Zs(n)};let me=o1t(t,b,W,ee.requestMultiline);c("cache");let ae=Jx(t,e.textDocument.uri),H={blockMode:ee.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:ae,engineModelId:h.modelId,ourRequestId:r,prefix:b,prompt:y.prompt,multiline:ee.requestMultiline,indentation:pD(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,requestForNextLine:N,stop:ee.stop,maxTokens:ee.maxTokens};H.headers={...H.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let O=h1t(t,e.textDocument,H,e.position,y,n,h,g);if(me===void 0&&!g.isCycling&&t.get(vd).shouldWaitForAsyncCompletions(b,y.prompt)){let fe=await t.get(vd).getFirstMatchingRequestWithTimeout(r,b,y.prompt,g.isSpeculative,O);if(c("asyncWait"),fe){let he=!ee.requestMultiline;me=[[Toe(fe[0],{forceSingleLine:he})],4]}if(p?.isCancellationRequested)return co.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Zs(O)}}let le=ee.blockMode==="moremultiline"&&Bm.isSupported(e.textDocument.detectedLanguageId);if(me!==void 0&&(me[0]=me[0].map(fe=>_D(t,e.textDocument,e.position,fe,le,co)).filter(fe=>fe!==void 0)),me!==void 0&&me[0].length===0)return co.debug(t,`Found empty inline suggestions locally via ${y5(me[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Zs(O)};if(me!==void 0&&me[0].length>0&&(!g.isCycling||me[0].length>1))co.debug(t,`Found inline suggestions locally via ${y5(me[1])}`);else{if(g.isCycling){let fe=await t1t(t,H,O,i,ee.finishedCb);if(fe.type==="success"){let he=me?.[0]??[];fe.value[0].forEach(Ne=>{he.findIndex(Re=>Re.completionText.trim()===Ne.completionText.trim())===-1&&he.push(Ne)}),me=[he,3]}else if(me===void 0)return fe}else{if(i?.isCancellationRequested)return co.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:Ig(O)};let he=e1t(t,H,O,i,s((Re,Je)=>(t.get(vd).updateCompletion(r,Re),ee.finishedCb(Re,Je)),"finishedCb"));t.get(vd).queueCompletionRequest(r,b,y.prompt,m,he);let Ne=await t.get(vd).getFirstMatchingRequest(r,b,y.prompt,g.isSpeculative);if(Ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Zs(O)};me=[[Ne[0]],4]}c("network")}if(me===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Zs(O)};let[ie,j]=me,q=ie.map(fe=>_D(t,e.textDocument,e.position,fe,le,co)).filter(fe=>fe!==void 0),Y=[];for(let fe of q){let he=m1t(t,e.textDocument,H,fe,O),Ne=d?Vke(e.textDocument,e.position,fe):0,Je={completion:d1t(fe.choiceIndex,fe.completionText,y.trailingWs),telemetry:he,isMiddleOfTheLine:d,suffixCoverage:Ne,copilotAnnotations:fe.copilotAnnotations};Y.push(Je)}if(p?.isCancellationRequested)return co.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:Ig(O)};O.properties.clientCompletionId=Y?.[0]?.telemetry?.properties.clientCompletionId,O.measurements.foundOffset=Y?.[0]?.telemetry?.measurements?.foundOffset??-1,co.debug(t,`Produced ${Y.length} results from ${y5(j)} at ${O.measurements.foundOffset} offset`);let te=Jr(t,ft.CompletionsDelay)??u.completionsDelay(n),pe=Js()-n.issuedTime,re=Math.max(te-pe,0);return j!==2&&!g.isCycling&&re>0&&(co.debug(t,`Waiting ${re}ms before returning completion`),await q1(re),p?.isCancellationRequested)?(co.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:Ig(O)}):r!==t.get(wd).currentRequestId?(co.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:Ig(O)}):(g.isSpeculative||t.get(wd).setGhostText(b,y.prompt.suffix,q,j),c("complete"),{type:"success",value:[Y,j],telemetryData:Zs(O),telemetryBlob:O,resultType:j,performanceMetrics:l})})}s(i1t,"getGhostTextWithoutAbortHandling");async function woe(t,e,r,n){let i=sr();t.get(wd).currentRequestId=i;let o=await p1t(t,e.textDocument,i,n);try{return t.get(tp).schedule(e,i,o,r,n),t.get(bg).notifyRequest(e,i,o,r,n),await i1t(t,e,i,o,r,n)}catch(a){if(Lc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:Ig(o,{cancelledNetworkRequest:!0})};throw a}}s(woe,"getGhostText");function o1t(t,e,r,n){let i=t.get(wd).getCompletionsForUserTyping(e,r.suffix),o=f1t(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(o1t,"getLocalInlineSuggestion");function s1t(t,e){let r=a1t(e,t),n=l1t(e,t);return r&&!n?void 0:r&&n}s(s1t,"isInlineSuggestion");function a1t(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(a1t,"isMiddleOfTheLine");function l1t(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(l1t,"isValidMiddleOfTheLinePosition");function c1t(t,e){return e.lineAt(t).text.trim().length===0}s(c1t,"isNewLine");var X1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function u1t(t,e,r,n,i,o,a,l){if(t.get(X1).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Dt(t,"ghostText.longFileMultilineSkip",an.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&Bm.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await c4e(r,n)}:{requestMultiline:!1};if(a){let d=pD(r,n),p=d.current>0?r.lineAt(n).text[0]:void 0,m={range:{start:n,end:n},newText:`
`+(p?p.repeat(d.current):"")};r=r.applyEdits([m])}if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&c1t(n,r))return{requestMultiline:!0};let u=!1;return!i&&g0(r.detectedLanguageId)?u=await LU(r,n):i&&g0(r.detectedLanguageId)&&(u=await LU(r,n)||await LU(r,r.lineAt(n).range.end)),u||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(u=p4e(l.prompt,r.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(u1t,"shouldRequestMultiline");function Bq(t,e,r){t.get(km).append(e.prefix,e.prompt.suffix,r)}s(Bq,"appendToCache");function d1t(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(d1t,"adjustLeadingWhitespace");function f1t(t,e,r,n){let i=t.get(km).findAll(e,r);return i.length===0?(co.debug(t,"Found no completions in cache"),[]):(co.debug(t,`Found ${i.length} completions in cache`),i.map(o=>Toe(o,{forceSingleLine:!n})))}s(f1t,"getCompletionsFromCache");async function p1t(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=an.createAndMarkAsIssued(i);return await t.get(kt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(p1t,"createTelemetryWithExp");function m1t(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let l=n.completionText.split(`
`).length,c={compCharLen:n.completionText.length,numLines:r.requestForNextLine?l-1:l};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let u=n.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,Xke(u,e),u.extendWithRequestId(o),u.measurements.confidence=Gke(t,u),u.measurements.quantile=Hke(t,u),co.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(m1t,"telemetryWithAddData");function h1t(t,e,r,n,i,o,a,l){let c={languageId:e.detectedLanguageId};r.requestForNextLine!==void 0&&(c.requestForNextLine=r.requestForNextLine.toString()),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);Xke(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(jo.range(p.range.start,n)),h=e.getText(jo.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(_=>[_[0],_[1].map(k=>(0,Kke.SHA256)(k).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},v={..._S(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=t.get(Hl);if(b.isActive()){let _=b.popTelemetry();_.length>0&&(y.workspaceContextStatsJson=JSON.stringify(_))}let E=u.extendedBy(y,v);return Dt(t,"ghostText.issued",E),u}s(h1t,"telemetryIssued");function Xke(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(Xke,"addDocumentTelemetry");function Zke(t,e,r,n,i){let o=Date.now()-n,a=o-i,l=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});l.extendWithRequestId(r.requestId),Dt(t,`ghostText.${e}`,l)}s(Zke,"telemetryPerformance");var wd=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&e3e(this.choices[0].completionText,n))return g1t(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function g1t(t,e){return t.filter(r=>e3e(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(g1t,"adjustChoicesStart");function e3e(t,e){return t.startsWith(e)&&t.length>e.length}s(e3e,"startsWithAndExceeds");f();f();f();var A2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Rr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var _oe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??pn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=n.getText(l),d=n.offsetAt(l.end);if(n=n.applyEdits([{range:l,newText:c}]),o<n.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:pn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=n.positionAt(o);let p={range:l,newText:c,positionAfterEdit:pn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function Ng(t,e){return new _oe(t,e)}s(Ng,"createCompletionState");f();function Soe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=n,n=d,d=a,a=i,i=d,l=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],l,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)n[u]<n[c]&&(c=u);return{distance:n[c],startOffset:i[c],endOffset:c}}s(Soe,"editDistance");function A1t(){return new Map}s(A1t,"emptyLexDictionary");function y1t(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(y1t,"reverseLexDictionary");function*C1t(t){let e="",r;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(C1t,"lexGeneratorWords");function t3e(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(t3e,"lexicalAnalyzer");function r3e(t){return t!==" "}s(r3e,"notSingleSpace");function n3e(t,e,r=C1t){let[n,i]=t3e(t,A1t(),r,r3e),[o,a]=t3e(e,i,r,r3e);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let l=y1t(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[n[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=Soe(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(n3e,"lexEditDistance");f();function i3e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(i3e,"computeCompCharLen");function o3e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(o3e,"computeCompletionText");function s3e(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(s3e,"computePartialLength");var Sv=new _t("postInsertion"),a3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],l3e=50,x1t=1500,v1t=.5,b1t=500,Roe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function c3e(t,e,r,n,i){let o=await t.get(vn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return Sv.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,n),u=a.positionAt(n),d=await M5(t,r.properties.headerRequestId,Ng(a,u),r),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(n,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(n),h=kie(c,n,a.detectedLanguageId),y=await nRe(h,void 0)(m),v=Math.min(l.length,n+(y?y*2:b1t)),b=l.substring(n,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(c3e,"captureCode");function Dq(t,e,r,n,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{Sv.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),D4e(t,e,u)});let o=new A2(t,n,r-1),a=new A2(t,n,r),l=s(async c=>{Sv.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await c3e(t,n,u,o.offset+1,a.offset),h;d.isFimEnabled?h={hypotheticalPromptPrefixJson:JSON.stringify(d.prefix),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)}:h={hypotheticalPromptJson:JSON.stringify(d.prefix)};let g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});Sv.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Dt(t,e+".capturedAfterRejected",g,1)},"checkInCode");a3e.filter(c=>c.captureRejection).map(c=>o.push(bu(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(Dq,"postRejectionTasks");function y2(t,e,r,n,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:i3e(a,r)});Sv.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),B4e(t,e,c);let u=r;r=o3e(r,a);let d=r.trim(),p=new A2(t,i,n),m=new A2(t,i,n+r.length),h=s(async g=>{await w1t(t,e,d,n,i,g,c,p,m)},"stillInCodeCheck");if(Roe.triggerPostInsertionSynchroneously&&tm(t)){let g=h({seconds:0,captureCode:Roe.captureCode,captureRejection:Roe.captureRejection});t.get(va).register(g)}else a3e.map(g=>p.push(bu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));bu(t,E1t,"post insertion citation check")(t,i,u,r,n,l)}s(y2,"postInsertionTasks");async function E1t(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(Rr).getTextDocument({uri:e});if(a){let l=koe(a.getText(),n,l3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=I1t(r.length,n.length,l.start_offset);if(c===void 0){Sv.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+T1t(r.length,n.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(b0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(E1t,"citationCheck");function I1t(t,e,r){if(!(e<t&&r>e))return r}s(I1t,"computeCitationStart");function T1t(t,e,r){return e<t?Math.min(r,e):r}s(T1t,"computeCitationEnd");function koe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=n3e(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=Soe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=v1t?1:0}}s(koe,"find");async function w1t(t,e,r,n,i,o,a,l,c){let u=await t.get(vn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=koe(p,r,l3e,l.offset);m.stillInCodeHeuristic||(m=koe(p,r,x1t,l.offset)),Sv.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset}).extendedBy({},m);if(Dt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await c3e(t,i,h,l.offset,c.offset),b;g.isFimEnabled?b={hypotheticalPromptPrefixJson:JSON.stringify(g.prefix),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)}:b={hypotheticalPromptJson:JSON.stringify(g.prefix)};let E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});Sv.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Dt(t,e+".capturedAfterAccepted",E,1)}}}s(w1t,"checkStillInCode");var Boe=new _t("ghostText"),Fu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function _1t(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(_1t,"computeRejectedCompletions");function Doe(t,e){let r=t.get(Fu);if(!r.position||!r.uri)return;let n=_1t(r);n.length>0&&Dq(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(Doe,"rejectLastShown");function u3e(t,e,r,n){let i=t.get(Fu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&Doe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(u3e,"setLastShown");function d3e(t,e){let r=t.get(Fu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;Boe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,IU(t,"ghostText",e)}}s(d3e,"handleGhostTextShown");function Pq(t,e){let r=t.get(Fu);r.resetState(),Boe.debug(t,"Ghost text post insert");let n=r.partiallyAcceptedLength?{compType:"partial",acceptedLength:e.displayText.length}:{compType:"full"};return r.resetPartialAcceptanceState(),y2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(Pq,"handleGhostTextPostInsert");function f3e(t,e,r,n=0){let i=t.get(Fu);r===e.insertText.length&&i.resetState(),Boe.debug(t,"Ghost text partial post insert");let o=s3e(e,r,n);if(o)return i.partiallyAcceptedLength=r,y2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(f3e,"handlePartialGhostTextPostInsert");function p3e(t){let e=new l5;return e.set(yg,t),e.set(mg,new mg),e.set(po,new po),e.set(km,new km),e.set(Am,new Am),e.set(kt,new kt(e)),e.set(rg,new rg),e.set(lc,new lc(e)),e.set(Nl,new Nl),e.set(m0,new m0),e.set(Eu,new Eu),e.set(Ed,new dD),e.set(bm,new MS),e.set(ym,new e8),e.set(va,new va),e.set(bg,new bg(e)),e.set(vn,new vn(e)),Ake(e,!0),e.set(Hl,new Hl(e)),e.set(Mm,Sq(e)),e.set(Fu,new Fu),e.set(wd,new wd),e.set(X1,X1.default),e.set(O1,new O1(e)),e.set(Of,new Of(e)),e.set(_a,new _a),e.set(vd,new vd(e)),e.set(Go,new Go),e.set(Xf,new Xf(e)),e}s(p3e,"createCommonContext");f();f();var Nq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var O5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Uzr=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),SD=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(kt).updateExPValuesAndAssignments(),a=await this.ctx.get(Ed).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new Nq(a.reason);case"failed":throw new O5(a.reason)}}};f();f();var m3e=Ve(require("node:util"));function h3e(t,...e){return`[${t}] ${S1t(e)}`}s(h3e,"formatLogMessage");function S1t(t){return m3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(S1t,"format");function Lq(t){return eye(t)}s(Lq,"verboseLogging");var Fq=class extends Va{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||Lq(r))&&this.console.warn(`[${i}]`,...o)}};f();var g3e=require("node:util");var U5=class extends pg{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){xI(e,"log",an.createAndMarkAsIssued({context:r,level:EI[1],message:R1t(...n)}),1)}sendException(e,r,n){Ta(e,r,n)}};function R1t(...t){return t.map(e=>(0,g3e.inspect)(e)).join(" ")}s(R1t,"telemetryMessage");f();var kFe=Ve(require("crypto")),BFe=Ve(require("fs")),DFe=Ve(SFe()),PFe=require("tls"),NFe=Ve(RFe());var Y4=new _t("certificates"),il=class{static{s(this,"RootCertificateReader")}};function mH(t,e=process.platform){return new nue(t,[new iue,new oue,k3t(t,e)])}s(mH,"getRootCertificateReader");function k3t(t,e){switch(e){case"linux":return new sue(t);case"darwin":return new aue(t);case"win32":return new lue(t);default:return new cue}}s(k3t,"createPlatformReader");var rue=class extends il{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return Y4.warn(this.ctx,"Failed to read root certificates:",r),[]}}},nue=class extends il{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new rue(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new kFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>n}catch(a){return Y4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&Y4.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},iue=class extends il{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return PFe.rootCertificates}},oue=class extends il{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await LFe(e):[]}},sue=class extends il{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await LFe(n);Y4.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},aue=class extends il{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=DFe.get();return Y4.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},lue=class extends il{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=NFe.all();return Y4.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},cue=class extends il{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function LFe(t){let e;try{e=await BFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(LFe,"readCertsFromFile");f();var $Fe=Ve(require("http"));var tBt=407,vc=new _t("proxySocketFactory"),rA=class{static{s(this,"ProxySocketFactory")}},J2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function hH(t){return new fue(t,new pue(t))}s(hH,"getProxySocketFactory");var fue=class extends rA{constructor(r,n,i=new $P,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Kr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(vc.debug(this.ctx,"Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof J2&&i.code===`ProxyStatusCode${tBt}`){vc.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return vc.debug(this.ctx,"Proxy authorization successful, caching result"),Dt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(vc.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(vc.debug(this.ctx,"Proxy authorization successful, received token"),i)return vc.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){vc.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);vc.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);vc.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return vc.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return vc.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.host}`:`HTTP@${r.host}`;return vc.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return r.host+":"+r.port}},pue=class extends rA{constructor(r){super();this.ctx=r}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{vc.debug(this.ctx,"Attempting to establish connection to proxy");let l=$Fe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{vc.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new J2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new J2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(vc.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{vc.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new J2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{vc.debug(this.ctx,"Proxy socket connection timeout"),a(new J2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={...n,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive"},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r),o}configureProxyAuthorization(r,n){r.headers["Proxy-Authorization"]=[],r.proxyAuth&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(r.proxyAuth).toString("base64")),n.headers&&n.headers["Proxy-Authorization"]&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},$P=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ve(VFe()))}};f();var JFe=require("node:os");var rBt=new _t("repository"),X2="\\\\",XFe="(?:[#;].*)",X4=`(?:[^"${X2}]|${X2}.)`,nBt="[0-9A-Za-z-]",zFe=`[A-Za-z]${nBt}*`,ZFe=`\\s*${XFe}?$`,eMe=`(?:[^"${X2};#]|${X2}.)`,iBt=`(?:"${X4}*"|"${X4}*(?<strCont>${X2})$)`,oBt=`(?:${eMe}|${iBt})+`,sBt=`(?:(?<cont>${X2})$)`,tMe=`(?<value>${oBt})${sBt}?${ZFe}`,YFe=new RegExp(`^${tMe}`),aBt=new RegExp(`^(?<value>${X4}*(?:(?<strCont>${X2})$|(?<quote>")))`),lBt=new RegExp(`^\\s*(?:(?<key>${zFe})\\s*=\\s*${tMe}|(?<soloKey>${zFe})${ZFe})`),cBt=new RegExp(`(?<value>${eMe}+)|"(?<string>${X4}*)"`,"g"),KFe="[-.0-9A-Za-z]+",uBt=`\\s+"(?<ext>${X4}*)"`,dBt=`\\s+"(?<extOnly>${X4}*)"`,fBt=new RegExp(`^\\s*\\[(?:(?<simple>${KFe})${uBt}|${dBt}|(?<simpleOnly>${KFe}))\\]`),pBt=new RegExp(`^\\s*${XFe}$`),mue=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(fBt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(lBt);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(aBt),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(YFe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(YFe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(cBt)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){pBt.test(this.line)&&(this.line="")}},gH=class extends Rm{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await O1.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new i2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new mue(i),a=new i2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,r,n){try{return await e.get(lo).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&rBt.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=bo(this.xdgConfigUri(),"git","config"),o=bo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Ti(r).toLowerCase()!=="config.worktree")return;let n=hd(r),i=bo(n,"commondir");try{let o=(await e.get(lo).readFileString(i)).trimEnd();return bo(II(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?pl(process.env.XDG_CONFIG_HOME):bo(this.homeUri(),".config")}homeUri(){return pl((0,JFe.homedir)())}};f();var rMe=require("child_process");var AH=class extends Rm{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,rMe.execFile)(r,n,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){B5e.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=Wo(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new i2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};f();var iMe=Ve(require("node:events"));var nMe="onWorkspaceChanged",O0=class{constructor(){this.emitter=new iMe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(nMe,e)}emit(e){this.emitter.emit(nMe,e)}};function oMe(t){let e=p3e(t);return mBt(e),e.set(il,mH(e)),e.set(rA,hH(e)),e.set(Rm,new iU([new AH,new gH])),e.set(O0,new O0),e.set(SD,new SD(e)),e}s(oMe,"createProductionContext");function mBt(t){t.set(Ef,Ef.fromEnvironment(!1)),t.set(pg,new U5),t.set(Va,new Fq(console))}s(mBt,"setupRudimentaryLogging");var Inn=new _t("context");f();f();var Ur=new _t("chat");f();f();var Al=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(Al||{});function Vr(t){return t?(t=U0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Vr,"getTextPart");var sMe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),aMe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function sb(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(sb,"parseToolCallArguments");function lMe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(lMe,"toOpenAIToolCall");function cMe(t,e,r,n,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return r.tool_calls&&(c.tool_calls=r.tool_calls),h5(t,[c],l),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:l}}s(cMe,"convertToChatCompletion");function zP(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(zP,"isChatCompletionContentPartArray");function yH(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(yH,"isChatMessageArray");function U0(t){if(typeof t=="string")return t;if(zP(t))return t;if(yH(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(U0,"resolveAsChatMessageContent");function YP(t,e){return(typeof t=="string"||zP(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(YP,"appendChatMessageContent");function hue(t,e){if(t){if(typeof t=="string"||zP(t))return[{role:"assistant",content:t}];if(yH(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(hue,"resolveResponseAsChatMessages");f();var gue=new _t("streamMessages");function uMe(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(gue.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),gue.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),gue.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution),a={role:"assistant",content:n};return cMe(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(uMe,"prepareChatCompletionForReturn");var Cp=new _t("fetchChat"),CH=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){Cp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}if(e.get(Xf).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??sr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Vr(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=Vr(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>g5(a),"getProcessingTime")}}else{let c=mv.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:G1(c,d=>uMe(e,d,n)),getProcessingTime:s(()=>g5(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return an.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:A5(e,n.count),top_p:xU(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},l=B1(n.repoInfo);return l!==void 0&&(a.nwo=l),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await hBt(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Cp.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Dt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Qr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Cp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Cp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Qr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let c=n.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return Cp.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status}}};async function hBt(t,e,r,n,i,o,a,l,c,u,d,p){let m=bo(r,n,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:c});CU(a,h,["messages"]),h.properties.headerRequestId=o,Dt(t,"request.sent",h);let g=Js(),y=E4e(c),v={...Vx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{gBt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>lMe(E)))}),iI(t,m,l,y,o,a,p,v).then(b=>{let E=hv(b,void 0);h.extendWithRequestId(E);let _=Js()-g;return h.measurements.totalTimeMs=_,Cp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),Cp.debug(t,"request.response properties",h.properties),Cp.debug(t,"request.response measurements",h.measurements),Cp.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",h),b}).catch(b=>{if(Lc(b))throw b;let E=h.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",E),h.properties.message=String(Pu(b,"name")??""),h.properties.code=String(Pu(b,"code")??""),h.properties.errno=String(Pu(b,"errno")??""),h.properties.type=String(Pu(b,"type")??"");let _=Js()-g;throw h.measurements.totalTimeMs=_,Cp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),Cp.debug(t,"request.error properties",h.properties),Cp.debug(t,"request.error measurements",h.measurements),Dt(t,"request.error",h),b}).finally(()=>{h5(t,e,h)})}s(hBt,"fetchWithInstrumentation");function gBt(t){return"tool_calls"in t}s(gBt,"isChatMessageWithToolCalls");var ra=class{constructor(e){this.ctx=e;this.fetcher=new CH}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=sr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Qr).getToken(),u=jx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=aD(r.chatCompletions,c=>this.postProcess(c,i));Ur.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)Ur.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:Vr(c.message?.content)??"",toolCalls:c.tool_calls,requestId:n,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:Vr(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>Vr(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return kq(e.tokens)?(r.extendWithRequestId(e.requestId),Dt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Ur.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Lc(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Ur.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var nA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var ab=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var ABt=".github/copilot-instructions.md",yBt=".github/git-commit-instructions.md",CBt="global-copilot-instructions",xBt="global-git-commit-instructions",iA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:CBt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:xBt}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let l=bo(r.uri,n),c=(await e.get(lo).readFileString(l)).trim();if(!c)return;(await U1(e,{uri:l},c)).status==="valid"&&o.push({kind:a,content:[{instruction:c,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let l=[];return n.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,a,ABt,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,a,yBt,void 0,i,0)),l});return await Promise.all(o),i}};f();var bc=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},xH=class extends bc{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};f();f();f();function vH(){return sr()}s(vH,"uuidV4");f();var lb=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var oA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var KP="filepath:",yl="...existing code...",Aue="copilot-edited-file";f();function Z4(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(Z4,"getFenceForCodeBlock");var q0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=Z4(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${KP} ${aa(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var yue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},JP=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=Vr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let l=Vr(a.content).endsWith(`
`)?Vr(a.content):`${Vr(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${Aue}>.
</SYSTEM>


`}return o+Vr(a.content)},"")+`


The resulting document:
<${Aue}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${yl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new q0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new yue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new q0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var Ay=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(vn).getOrReadTextDocument({uri:e})}};f();var La=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var vBt=1e3,bBt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:ln.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},eR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new _t("CopilotEditsCodeMapper")}async mapCode(e,r,n,i,o=!1){if(!e.resource)throw new oA("No uri found in code block");if(n.isCancellationRequested)throw new lb;e.code.includes(yl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let a=await this.ctx.get(vn).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new oA(v);throw this.logger.error(this.ctx,v,b),b}let l=a.document.getText();if(l.length===0&&!e.code.includes(yl))return i&&await this.reportCodeBlock(e,i),e.code;let c=new JP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx)}),u=await c.render();u=c.transformToFastApplyMessage(u),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let d=await this.ctx.get(kt).updateExPValuesAndAssignments(),p=vH(),m=[],h=0,g=0,y=l.length+e.code.length+vBt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:bBt,messages:u,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${p} in iteration ${g} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(ra).fetchResponse(v,n,d);if(this.logger.debug(this.ctx,`Received map code response ${p} in iteration ${g} with result: ${JSON.stringify(E,null,2)}`),h=this.calculateResponseLength(E,m,h),E.type==="length"){if(h>y)throw new oA(`Code mapper might be in a loop: Rewritten length: ${h}, Document length: ${l.length}, Code block length ${e.code.length}`);u=await new JP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=m.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:Z4(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new oA(k)}}else{if(E.type==="canceled")throw new La;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new oA(_)}}g+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var tu=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var cb=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var bH=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var ub=class{constructor(e,r){this.request=e;this.id=sr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},Cue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},EH=class{constructor(e=[],r="panel",n="en"){this._id=sr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new Cue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new bH(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var IH=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new tu({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new tu({message:Gx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new tu({message:cb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new tu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new tu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new tu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new tu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new tu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new tu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new tu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new tu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*fMe(t){yield t}s(fMe,"stringToAsyncIterable");f();f();var sA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(iA),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),l=[...o,...a];return this.processInstructions(l,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};f();var yy=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||pl(r)}static uriToPath(e){let r=Wo(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var TH=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await sA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(yy.posixFilePathToUri(e))}getFilePath(e){return yy.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${KP} ${this.exampleFilePath}`,`// ${yl}`,"{ changed code }",`// ${yl}`,"{ changed code }",`// ${yl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${KP} ${this.tsExampleFilePath}`,"class Person {",`   // ${yl}`,"   age: number;",`   // ${yl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new q0({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${yl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var wH=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var xue="<file>",XP="```",e9="###",IBt=/^(`+)([^ \n]*)/,ZP="filepath:";async function*mMe(t,e){let r=new wH(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(XP.length,xue.length,e9.length));if(y.startsWith(xue)||y.startsWith(XP))break;if(y.startsWith(e9)){let v=await r.readLineIncludingLF(),b=v.substring(e9.length).trim();await e(b)?n.length=0:n.push(v)}else await pMe(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(xue);for(;!r.endOfStream&&!i.startsWith(XP);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(IBt),l=a?a[2]:void 0,c=BRe(l?_Re(l):void 0),u=[`${c.lineComment.start} ${ZP}`,`:: ${ZP}`,`<!-- ${ZP}`,`// ${ZP}`,`# ${ZP}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(XP.length,d));if(y.startsWith(XP)){let v=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await r.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await pMe(r,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(mMe,"getCodeBlocksFromResponse");async function pMe(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(pMe,"pipeOneLine");function hMe(t){if(t.startsWith(`${e9} `))return"";let e=t.indexOf(`
${e9} `);return e===-1?"":t.substring(0,e)+`
`}s(hMe,"parseOverallDescription");f();f();var _H=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var TBt=new _t("CopilotEditsConversations"),ol=class{constructor(e){this.editConversations=new Kr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new EH([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&TBt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new _H(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};f();f();var na=class{static{s(this,"ModelConfigurationProvider")}},SH=class extends na{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Ur.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Iu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Iu).getMetadata(),i=_Bt(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===ln.Gpt35turbo||r===ln.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:bue(6144,i),maxResponseTokens:vue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===ln.Gpt4||r===ln.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:bue(10240,i),maxResponseTokens:vue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===ln.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await wBt(this.ctx,i),maxResponseTokens:vue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case wM.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function wBt(t,e){let r=t.get(kt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),bue(i,e)}s(wBt,"getExpRequestTokens");function bue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(bue,"getRequestTokens");function vue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(vue,"getResponseTokens");function _Bt(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(_Bt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(na).getBestChatModelConfig([n]);if(e.get(Xf).quotaExhausted&&!(await e.get(Qr).getToken()).userInfo?.isFreeUser){let o=await e.get(Iu).getFallbackModel();if(o)return e.get(na).getBestChatModelConfig([o?.id])}return e.get(na).getBestChatModelConfig(Mf(r),i)}static transformMessages(e,r){return r===ln.O1Ga||r===ln.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Cy=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ra(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=IH.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof lb)await this.reportEnd(e,{message:Gx});else if(n instanceof tu)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(kt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new TH({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new Ay(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new lb;this.ctx.get(ol).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=fMe(r),o=new eR(this.ctx),a=s(async u=>yy.pathToUri(e,u),"createUri"),l=[],c=hMe(r);c&&await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,n);for await(let u of mMe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),n,async d=>{await this.ctx.get(bc).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof oA||i instanceof O5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof lb)e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},await this.reportEnd(e,{message:Gx});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};f();var AMe="github.com",gMe=`https://${AMe}`,tR=class extends Ml{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(gMe),Ds(r,i=>this.onCopilotToken(r,i))}static{s(this,"DefaultNetworkConfiguration")}onCopilotToken(r,n){this.updateServiceEndpoints(r,n.envelope.endpoints)}getAuthAuthority(){return this.baseUrlObject.host}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}getTelemetryUrl(r){return this.join(this.telemetryUrl,r)}setTelemetryUrlForTesting(r){this.telemetryUrl=r}validateBaseUrl(r,n){return this.isPermittedUrl(r,n)?!0:(r.get($a).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${n}".`),!1)}updateBaseUrl(r,n){n||=gMe;let i=this.baseUrlObject;this.validateBaseUrl(r,n)&&this.withTelemetryReInitialization(r,()=>{this.recalculateUrlDefaults(n),i.href!==this.baseUrlObject.href&&r.get(Qr).resetToken()})}updateBaseUrlFromTokenEndpoint(r,n){try{let i=new URL(n);i.hostname.startsWith("api.")?this.updateBaseUrl(r,`https://${i.hostname.substring(4)}`):this.updateBaseUrl(r)}catch{this.updateBaseUrl(r)}}updateServiceEndpoints(r,n){n&&this.isPermittedUrl(r,n.telemetry)&&this.withTelemetryReInitialization(r,()=>{this.telemetryUrl=this.join(n.telemetry,"telemetry")})}withTelemetryReInitialization(r,n){let i=this.telemetryUrl;if(n(),i===this.telemetryUrl)return;let o=r.get(m0);o.isInitialized&&o.reInitialize(r)}recalculateUrlDefaults(r){let n=this.parseUrls(r);this.baseUrlObject=n.base;let i=n.api,o=this.baseUrlObject.host!==AMe;this.apiUrl=i.href,this.telemetryUrl=this.join(o?this.prefixWith("copilot-telemetry-service.",this.baseUrlObject).href:ZB.telemetry,"/telemetry")}parseUrls(r){if(this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN)try{return{base:new URL(this.env.GITHUB_SERVER_URL),api:new URL(this.env.GITHUB_API_URL)}}catch{}let n=new URL(r),i=this.prefixWith("api.",n);return{base:n,api:i}}isPermittedUrl(r,n){return this.isValidUrl(n)&&this.hasSupportedProtocol(r,n)}isValidUrl(r){try{if(r)return new URL(r),!0}catch{}return!1}hasSupportedProtocol(r,n){let i=new URL(n).protocol;return i==="https:"||!fM(r)&&i==="http:"}join(r,n){return n?new URL(n,r).href:r}prefixWith(r,n){return new URL(`${n.protocol}//${r}${n.host}`)}};f();var Rln=new _t("exp");function yMe(t){let e=t.get(kt);e.registerStaticFilters(kBt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Jr(t,ft.DebugOverrideEngine)||Jr(t,ft.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>aM()?"copilot-web":t.get(fn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Eue(!t.get(po).isProduction()&&t.get(fn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(fn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>SBt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(fn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Eue(t.get(fn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>RBt(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(fn).getRelatedPluginInfo()){let i=vf+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(hB).includes(i)){V7(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=Eue(n.version)}return r})}s(yMe,"setupExperimentationService");function SBt(t){let e=t.get(fn).getEditorPluginInfo();return e.name==="copilot"&&Nf(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(SBt,"getPluginRelease");function RBt(t){let e=t.get(fn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(RBt,"getTargetPopulation");function kBt(t){return BBt(t)}s(kBt,"createAllFilters");function BBt(t){let e=t.get(Bs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(po).isProduction()?vI(t):"1.999.0"}}s(BBt,"createDefaultFilters");function Eue(t){return t.split("-")[0]}s(Eue,"trimVersionSuffix");f();var t9=(r=>(r.enabled="enabled",r.disabled="disabled",r))(t9||{}),xy=Symbol("onMCPToolsListChanged"),W0=class{static{s(this,"McpManager")}};f();var Jm=class{static{s(this,"McpRuntimeNotifier")}},RH=class extends Jm{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var rR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var Iue=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},kH=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Iue(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var Mo;(n=>{function t(i){return new Tue(i)}n.ok=t,s(t,"ok");function e(i){return new wue(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Mo||={});var Tue=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},wue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var BH=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw X8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw X8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var g9=Ve(th());function NQe(t){return t.map(N8t).join(`
`)}s(NQe,"stringifyChatMessages");function N8t({role:t,content:e}){if(t!==g9.Raw.ChatRole.User&&t!==g9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===g9.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==g9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(N8t,"stringifyMessage");f();f();var L8t=Symbol("MicrotaskDelay");function F8t(t){let e=new H1,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new vg)});Promise.resolve(r).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(F8t,"createCancelablePromise");function wy(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new vg)})}):F8t(r=>wy(t,r))}s(wy,"timeout");var oj=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new xn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new xn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var A9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new vg)}},M8t;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(M8t||={});var y9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new _0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await o2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var sj=class{constructor(e){this._deferred=new A9;this._asyncIterable=new y9(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var C9=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},aj=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new H1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new A9;Ul(r.length>0),Ul(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>x9.deserialize(r)),e.activeDocumentIdx,[],C9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},x9=class t{constructor(e,r,n,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Wl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(Lm.create(e.id),e.workspaceRoot?wv.parse(e.workspaceRoot):void 0,d2.create(e.languageId),e.documentLinesBeforeEdit,Po.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Wl(e.documentBeforeEdits),Pg.deserialize(e.recentEdits),new Wl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Mo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Mo.ok(e),i=r.build(n);return new t(n,i)}},xb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?NQe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:vD(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ul(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function Q8t(t,...e){let r=t;for(let n of e)r=n(r);return r}s(Q8t,"chainStatelessNextEditProviders");var cR=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=Q8t(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},uR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Ri(Mo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let l=BH.createSortPermutation(a,I0(u=>u.lineRange.startLineNumber,T0)),c=new Po(l.apply(a));return new Ri(Mo.ok({edit:c,permutation:l.inverse()}),n.telemetry)}},dR=class extends uR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},fR=class extends uR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var O8t=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),U8t=new Map(Object.entries(O8t).map(([t,e])=>[t,{languageId:t,...e}]));function FQe(t){return Cde(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(FQe,"getLanguage");function Cde(t){return U8t.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(Cde,"_getLanguage");f();var pR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Qd.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Qd(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new Qd(new To(0,0),new To(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Qd.isRange(e))throw vb("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw vb("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw vb("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var To=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw vb("line must be non-negative");if(r<0)throw vb("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw vb();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw vb();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Qd=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?To.isPosition(e.start)&&To.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new To(e,r),a=new To(n,i)):To.isPosition(e)&&To.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):To.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=To.Max(e.start,this._start),n=To.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=To.Min(e.start,this._start),n=To.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw vb();let n;return e?To.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return q8t(this)}};function vb(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(vb,"illegalArgument");function q8t(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(q8t,"getDebugDescriptionOfRange");f();function MQe(t){let r=t.split(/\r?\n/).map(W8t),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(MQe,"looksLikeCode");function W8t(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),qie(t)||(e+=1);{qie(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(W8t,"guessLineType");var mR;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(mR||={});function G8t(t){return t.replace(/^\s+/g,"")}s(G8t,"trimLeadingWhitespace");function xde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(xde,"isImportStatement");var H8t=new j1(t=>{let e=FQe(t),{start:r,end:n}=e.lineComment,i=`(?:${Uie(r)})`,o=n?`(?:${Uie(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function vde(t,e){let r=t.match(H8t.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=G8t(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(vde,"extractEndLineComment");function cj(t,e){let r=vde(t,e);if(!(r&&r.content.trim().length>0&&MQe(r.commentWithoutTokens)))return r}s(cj,"extractExplicativeEndLineComment");var hR=class t extends uR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>xde(i,r))||j8t(e,n).some(i=>xde(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function j8t(t,e){return uSe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(j8t,"getOldLines");f();var Ede=Ve(th());f();f();f();var nh;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(nh||={});var uA=j0("instantiationService");function V8t(t,e,r){e[nh.DI_TARGET]===e?e[nh.DI_DEPENDENCIES].push({id:t,index:r}):(e[nh.DI_DEPENDENCIES]=[{id:t,index:r}],e[nh.DI_TARGET]=e)}s(V8t,"storeServiceDependency");function j0(t){if(nh.serviceIds.has(t))return nh.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");V8t(e,r,i)},"id");return e.toString=()=>t,nh.serviceIds.set(t,e),e}s(j0,"createDecorator");f();f();var V0=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var bde=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},v9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new bde(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};f();var sT=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var $8t=!1,uj=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},dj=class t{constructor(e=new sT,r=!1,n,i=$8t){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(uA,this),this._globalGraph=i?n?._globalGraph??new v9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,zO(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)ESe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=b9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw sSe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,n);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof V0?(n=b9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=b9.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=nh.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let l=a-r.length;l>0?r=r.concat(new Array(l)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof V0)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof V0?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new v9(c=>c.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new uj(i);for(let u of nh.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof V0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new uj(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof V0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof V0)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(r,n,o);return a.add(l),l}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var b9=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){r=!0,l.push(`${c}CREATES -> ${u}`);let m=n(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var fj=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new sT(...e):e??new sT}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new dj(this._collection,!0)}};var mj=j0("ITelemetrySender"),ih=j0("IChatMLFetcher");var pj=class{constructor(){this._stream=new sj;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}};f();var _y=j0("IParserService");f();var gR=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},E9=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},I9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},bb=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},Eb=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var hj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new gR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},T9=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let d;return n<=i?(bb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),d=[new gR(e,0,n,i-n+1)]):e<=r?(bb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new gR(e,r-e+1,n,0)]):(bb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),bb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,r,n,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,n,u),p=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,r,n,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new hj,B=r,N=n,W=h[0]-v[0]-i,ee=-1073741824,me=this.m_forwardHistory.length-1;do{let ae=W+e;ae===B||ae<N&&u[ae-1]<u[ae+1]?(p=u[ae+1],g=p-W-i,p<ee&&k.MarkNextChange(),ee=p,k.AddModifiedElement(p+1,g),W=ae+1-e):(p=u[ae-1]+1,g=p-W-i,p<ee&&k.MarkNextChange(),ee=p-1,k.AddOriginalElement(p,g+1),W=ae-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],B=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new hj,B=a,N=l,W=h[0]-v[0]-c,ee=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let ae=W+o;ae===B||ae<N&&d[ae-1]>=d[ae+1]?(p=d[ae+1]-1,g=p-W-c,p>ee&&k.MarkNextChange(),ee=p+1,k.AddOriginalElement(p+1,g+1),W=ae+1-o):(p=d[ae-1],g=p-W-c,p>ee&&k.MarkNextChange(),ee=p,k.AddModifiedElement(p+1,g+1),W=ae-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],B=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,r,n,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-n,E=r-e,_=e-n,k=r-i,N=(E-b)%2===0;y[b]=e,v[E]=r;for(let W=1;W<=h/2+1;W++){let ee=0,me=0;u=this.ClipDiagonalBound(b-W,W,b,g),d=this.ClipDiagonalBound(b+W,W,b,g);for(let ae=u;ae<=d;ae+=2){ae===u||ae<d&&y[ae-1]<y[ae+1]?l=y[ae+1]:l=y[ae-1]+1,c=l-(ae-b)-_;let H=l;for(;l<r&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[ae]=l,l+c>ee+me&&(ee=l,me=c),!N&&Math.abs(ae-E)<=W-1&&l>=v[ae])return o[0]=l,a[0]=c,H<=v[ae]&&W<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-W,W,E,g),m=this.ClipDiagonalBound(E+W,W,E,g);for(let ae=p;ae<=m;ae+=2){ae===p||ae<m&&v[ae-1]>=v[ae+1]?l=v[ae+1]-1:l=v[ae-1],c=l-(ae-E)-k;let H=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[ae]=l,N&&Math.abs(ae-b)<=W&&l<=y[ae])return o[0]=l,a[0]=c,H>=y[ae]&&W<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}if(W<=1447){let ae=new Int32Array(d-u+2);ae[0]=b-u+1,Eb.Copy2(y,u,ae,1,d-u+1),this.m_forwardHistory.push(ae),ae=new Int32Array(m-p+2),ae[0]=E-p+1,Eb.Copy2(v,p,ae,1,m-p+1),this.m_reverseHistory.push(ae)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return Eb.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Eb.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return Eb.Copy(e,0,i,0,e.length),Eb.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(bb.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),bb.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(l=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new gR(i,o,a,l),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,l=r%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function QQe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(QQe,"isObject");function gj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(gj,"assertType");function OQe(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(QQe(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(OQe,"safeStringify");var Aj=!1,wde=!0,z8t=200,w9=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new xb(e),i=e.getActiveDocument(),o=aT(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(...Z8t(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,r);if(r.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Ri.noEdit({kind:"fetchFailure",error:new Error(OQe(g.err))},n);let{result:y,ttft:v}=g.val;if(v!==void 0&&n.setTtft(v),y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},n);let b=yj(i.languageId,l,d,void 0,y,m),E=await Rde(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new Po([E]);return Ri.edit({edit:_},n)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};w9=yu([$s(1,_y)],w9);var AR=class extends w9{constructor(r,n){super(AR.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Mo.error({kind:"cancel"});let o=await _de(this.ID,this._chatMLFetcher,[{role:Ede.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:Ede.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),Mo.ok({ignored:a,result:l,ttft:c})}};AR=yu([$s(0,_y),$s(1,ih)],AR);async function _de(t,e,r,n,i){let o=new pj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=K8t(c,n),d=e.fetchOne(r,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?Mo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Mo.ok({ttft:l,ignored:p,result:m})}s(_de,"fetchUntilConvergence");function aT(t){let e=new Bt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:Y8t(t)}s(aT,"getOrDeduceSelectionFromLastEdit");function Y8t(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],l=w5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(Y8t,"deduceSelectionFromLastEdit");async function K8t(t,e){let r=J8t(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(K8t,"fetchCompletionUntilConvergence");function J8t(t,e){let r=[],n=[];return new y9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||r[l]){i.emitOne({kind:"completion",index:l,text:c});continue}n[l]=(n[l]??"")+c;let u=n[l].match(e);!u||typeof u.index>"u"||(r[l]=!0,i.emitOne({kind:"ignore",index:l,text:n[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[l].substring(u.index+u[0].length)}),n[l]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(J8t,"getTextAfterFirstPattern");function X8t(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],l=o[0];if(a!==l)break;n++,o.shift()}return new Fm(new Yt(n,i),o)}s(X8t,"createReducedLineEdit");var yR=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=X8t(r,n,i);let o=new Po([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new Ide(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new E9(this.oldLines,n),o=new E9(this.newLines,n),a=new T9(i,o),l=e(a.ComputeDiff(),i,o),c=r(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(r2(this.newLines,u))return new Tde(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return qQe(this.languageId,this.oldLines,u);function d(p,m){let h=new I9(p),g=new I9(m),v=new T9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,B=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:B}}}},Ide=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Tde=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Po([this.edit]);{let r=this.groupInHunks();return new Po(r.map(n=>{let i=n[0],o=n[n.length-1];return new Fm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!wde)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,l)=>a+l.editDistance,0)>z8t&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!Sde(new Yt(a,l),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((c,u)=>c+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new Po([this.edit]),i=r(n);this.parseErrorCount=await _9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,1),e(d)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);n=n||l,e=e.concat(c),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=cj(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(c=>cj(c,this.languageId)),i=r.map(c=>cj(c,this.languageId)),o=n.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=i[c];if(!d)continue;let{content:p}=d;r[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return qQe(this.languageId,this.oldLines,e)}};function Sde(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Sde,"editIsInsideEditWindow");function qQe(t,e,r){let i=e.length+1,o=r.slice(0);return new yR(t,e,new Yt(1,i),o).resolveDiff()}s(qQe,"createPossibleEditFromLines");function yj(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=mR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new yR(t,e,v,b))},"generateEdit");function d(){n&&u(n,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(r.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let B=e.slice(_,_+v).join(`
`);E===B&&u(new Yt(r.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...yj(t,e,r,n,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let B=b(k);E.has(B)||(E.add(B),_.push(k))}return _}}s(yj,"generatePossibleEdits");async function Rde(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=Aj?await _9(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Aj){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(Rde,"selectBestEdit");function Z8t(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&r.push("[...]"),u?r.push(`-${n[c]}`):r.push(`${n[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;r.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&l(i,!1),i++;return r.push("[...]"),r}s(Z8t,"summariseDocDiff");function WQe(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(WQe,"summarizeEditsAsUnifiedDiff");async function _9(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(_9,"getParseErrorCount");f();var Sy=Ve(th());f();var S9=j0("ITokenizerProvider");var Ib=class extends Sy.PromptRenderer{constructor(r,n,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,r,n,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let l=a.get(S9);return new Ib(n,i,o,l,r,a.get(ih))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===Sy.Raw.ChatRole.System&&d.role===Sy.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===Sy.Raw.ChatCompletionContentPartKind.Text&&m.type===Sy.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:Sy.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==Sy.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};Ib=yu([$s(3,S9),$s(4,uA),$s(5,ih)],Ib);f();var GQe=Ve(th());var Cj=class extends GQe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var lT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Bt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=E0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new sn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return ql.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new ql(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var kde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Bt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Qd(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},oh=class extends kde{constructor(r){super();this.value=r;this._transformer=new lT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new sn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return eDt(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(tDt(r))}_validatePosition(r){if(r.line<0)return new To(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new To(n-1,o)}if(r.character<0)return new To(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new To(r.line,i):r}};function eDt(t){return new To(t.lineNumber-1,t.column-1)}s(eDt,"corePositionToVSCodePosition");function tDt(t){return new sn(t.line+1,t.character+1)}s(tDt,"vsCodePositionToCorePosition");f();f();function HQe(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(HQe,"min");f();function Bde(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>Bde(n,e))}}s(Bde,"toAstNode");function jQe(t,e){let r=e2(e,a=>a.endExclusive>=t.start),n=E0(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let l=e[a];l.start>o&&i.push(new Bt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new Bt(o,t.endExclusive)),i}s(jQe,"subtractRange");f();f();f();var xj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=s2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=s2(e),r=s2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=s2(e),r=s2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=s2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Dde(i,e-a)}};var Dde=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var R9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Sg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new xj(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Sg(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new To(r.index,Math.min(r.remainder,n))}toRange(e){return new Qd(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Bt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new pR(this.validateRange(n.range),n.newText));return new ip(r.map(n=>new el(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new pR(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof To))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new To(r,n):e}validateRange(e){return new Qd(this.validatePosition(e.start),this.validatePosition(e.end))}};var vj=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new _g(()=>new R9(this.text));this._originalPositionOffsetTransformer=new _g(()=>new R9(this.originalText));this._text=new _g(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var Pde=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},uT=class extends vj{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function Ej(t,e,r){let n=[],i=[],o=[];for(let l=0;l<r.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=r[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=VQe(u,c),g=Nde.fromRootNode(h,p),y=Lde.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(W=>W.node.range.intersectsOrTouches(m)?(W.node.children.length===0&&W.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let v=s(W=>m?W.range.endExclusive<m.start?m.start-W.range.endExclusive:W.range.start>m.endExclusive?3*(W.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new j1(W=>m?W.children.length===0?W.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:HQe(W.children.map(ee=>b.get(ee)))+1:0),E=new j1(W=>{let ee=W.parent?E.get(W.parent):Number.MAX_SAFE_INTEGER,me=b.get(W);return Math.min(ee,me)}),_=!!e.tryPreserveTypeChecking,k=s(W=>_&&W.node?.kind==="import_statement"?0:100*E.get(W)+W.depth+10*(v(W)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(B!==void 0){let W=k;k=s(ee=>{let me=W(ee);return me===!1?!1:ee.node?B(ee.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let W of N){if(!W.node.node)continue;let ee=k(W.node);ee!==!1&&o.push({idx:l,node:W,cost:ee})}}o.sort(I0(l=>l.cost,T0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),n.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=n[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=r[l],d=new uT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=n[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:jQe(Bt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:Bde(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(Ej,"summarizeDocumentsSyncImpl");function VQe(t,e,r=void 0){let n=new Bt(t.startIndex,t.endIndex),i=[],o=new Pde(r,t,n,i,e);for(let a of t.children)i.push(VQe(a,e,o));return o}s(VQe,"createRemovableNodeFromOverlayNode");var Nde=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Bt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Bt(0,e.range.start),o=new Bt(e.range.endExclusive,r.length),a=[],l=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,l,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,r)),l}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new Bt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),l=u.range.endExclusive}let c=new Bt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],n,a,r))}return a}getLeadingWs(){return rDt(this.document,this.range)}getTrailingWs(){return nDt(this.document,this.range)}};function rDt(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(rDt,"getLeadingWs");function nDt(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(nDt,"getTrailingWs");var Lde=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let l of e.children){let c=t.fromNodeParent(l,a,n,i);o.push(c)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Tb(this.node.range,this.node.document);if(!this._surviving)return new cT("");let e=Array.from(n5(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),l=e[n+1].at(0);if(a.fragment instanceof Tb&&l.fragment instanceof Tb){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=c,i.length=1,i[0].fragment=new cT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new cT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let r=[];for(let n of e)for(let i of n)iDt(r,i.fragment);return bj.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},k9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(l){(n!==l||i.length>0)&&(r.push(new el(new Bt(n,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof bj)for(let c of l.fragments)a(c);else l instanceof cT?i+=l.text:l instanceof Tb&&(o(l.range.start),n=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new ip(r)}},cT=class extends k9{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Tb=class t extends k9{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Bt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Bt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Bt(this.range.start,r.range.endExclusive),this.originalText):null}},bj=class t extends k9{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new cT(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function iDt(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof Tb&&e instanceof Tb){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(iDt,"pushFragment");f();var Ij=Ve(th());function B9(t){if(Array.isArray(t))return t.map(r=>B9(r));let e=(0,Ij.toMode)(Ij.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(B9,"rawMessageToCAPI");f();f();var Tj=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new xn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new xn("Invalid child startIndex");if(a.endIndex>r)throw new xn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function zQe(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=oDt(o,e),[l]=YQe(t,a,void 0);return l.adjust(t,KQe(e)),l.toOverlayNode(t,!0)}catch{return new wj(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(zQe,"getStructureUsingIndentation");function YQe(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let l=e.getStartLineNumber(r),c=e.getEndLineNumber(r);if(l>i||c>i)break;let u=a;if([a,r]=YQe(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new xn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new xn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new wj(n,i,o),r]}s(YQe,"createFoldingRangeTree");var wj=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new xn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=Fde(e,a,a,"LINE",[]);l&&n.push(l)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Fde(e,o,o,"LINE",[]);a&&n.push(a)}return Fde(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Fde(t,e,r,n,i){let o=t.getOffsetAtPosition(new To(e-1,0)),a=r<t.getLineCount()?new To(r,0):new To(r-1,t.getLineLength(r-1)),l=t.getOffsetAtPosition(a);return new Tj(o,l,n,i)}s(Fde,"createOverlayNode");function oDt(t,e){return sDt(t,KQe(e))}s(oDt,"generateFoldingRegions");function KQe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(KQe,"isOffSide");function sDt(t,e){let r=t.getOptions().tabSize,n=new Mde,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=lDt(l,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&n.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return n.toIndentRanges()}s(sDt,"_computeRanges");var aDt=65535,dT=16777215,$Qe=4278190080,Mde=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>dT||r>dT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new Qde(e,r)}};function lDt(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(lDt,"computeIndentLevel");var Qde=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>dT||a>dT)throw new Error("startLineNumber or endLineNumber must not exceed "+dT);for(;e.length>0&&!r(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((l&255)<<24),this._endIndexes[n]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&dT}getEndLineNumber(e){return this._endIndexes[e]&dT}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&$Qe)>>>24)+((this._endIndexes[e]&$Qe)>>>16);return r===aDt?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function fT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(fT,"fromUnknown");var Cl=Ve(th());var _j="current-version",$0="next-version",XQe=2,ZQe=10,eOe=.7,cDt=/```[^\n]*\n/,Ry=class extends cR{constructor(r,n,i){super(Ry.ID,[o=>new hR(o),o=>new dR(o),o=>new fR(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new kH}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=aT(a),u=c?Ode(a,c):null,d=aT(l),p=d?Ode(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(XQe,ZQe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new xb(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(c){return Ri.noEdit({kind:"unexpected",error:fT(c)},i)}let l=o.getArtificalDelay();return l>0&&await wy(l),a}async doGetNextEdit(r,n,i,o){return r.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Ri.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let b=await _de(this.ID,this.fetcher,B9(p),{convergence:g,ignoreReplyTextBefore:cDt,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:fT(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${$0}>
`,B=b.val.ignored.indexOf(k);B>=0&&(E=b.val.ignored.substring(B+k.length))}if(E=uDt(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=dDt(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=fDt(l,k);if(B.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Aj){let ee=await _9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=B.apply(y.documentAfterEditsNoShortening.value);if(await _9(this._parserService,y.languageId,me)>ee)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=pDt(y,B);let N=_.edits[0].lineRange.startLineNumber,W=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Sde(new Yt(N,W),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=yj(y.languageId,v,m,h,E,void 0),B=await Rde(this._parserService,k,y,{requireEditWithinNLines:100});if(!B)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Po([B])}return mDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):hDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):gDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):ADt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await wy(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=aT(i);if(c===null)return;let u=Ode(i,c),d=new oh(i.documentAfterEditsNoShortening.value),p=await xDt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=yDt(i.documentAfterEditsLines,c.startLineNumber),ae=Math.max(1,Math.min(me,c.startLineNumber-XQe)),H=c.startLineNumber-ae,O=Math.min(l.length,c.endLineNumber+ZQe),le=O-c.endLineNumber,ie=u.line-H,j=u.line+le,q=new Qd(ie,0,j,d.getLineLength(j));return{firstEditableLineInShortenedDocument:ae,lastEditableLineInShortenedDocument:O,editWindow:q}}(),y=Ej(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:E,languageId:i.languageId},n),N=E.split(/\r\n|\r|\n/).length,W=y.projectRange(g),ee=y.positionOffsetTransformer.toOffsetRange(W);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(W.start.line+1,W.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:ee.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await Ib.create(this._instantiationService,qde,r).render(void 0,n,{trace:!1}),a=o.metadata.get(Dj)?.prediction,l=!!o.metadata.get(Rj);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};Ry=yu([$s(0,ih),$s(1,_y),$s(2,uA)],Ry);function uDt(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${$0}>`,`
`),t=e(t,`\`\`\`
</${$0}>`,`
`),t=e(t,`</${$0}>`,`
`),t}s(uDt,"removeSuffixFromReply");function Ode(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new oh(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Ode,"getCursorPositionInOuterDocument");function dDt(t,e,r,n){let i=mR.fromString(e.text),o=mR.fromString(n.trimEnd()),l=new yR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(r);if(!c)return null;let u=wde?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(dDt,"generateSummarizedEditWindowEdit");function fDt(t,e){let r=e.toEdit(new Wl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(fDt,"convertSummarizedEditWindowEditToOuterDocumentEdit");function pDt(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Qs.replace(new Bt(a,a+i.replaceRange.length),i.newText)}),n=new Jc(t.documentAfterEdits,xs.create(r));return Po.fromEdit(n)}s(pDt,"convertOuterDocumentEditToProjectedEdit");function mDt(t,e){let r=e.toEdit(t.documentAfterEdits),n=tOe(t.documentAfterEdits.value,r),i=new Sj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(tOe(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(mDt,"editWouldUndo");function hDt(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!sOe(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(hDt,"editWouldDeleteWhatWasJustInserted");function gDt(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!sOe(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(vde(i,t.languageId))return!0}return!1}s(gDt,"editWouldDeleteAComment");function ADt(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Ude(o,i)/i.size>.8}s(ADt,"editWouldDuplicateExistingLines");function sOe(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(sOe,"editIsDeletion");function yDt(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(yDt,"findLineNumberAboveWithContent");var Sj=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(nOe(this.inserted,e.inserted),nOe(this.deleted,e.deleted))}isUndoneBy(e){let r=iOe(e.inserted,e.deleted),n=iOe(e.deleted,e.inserted),i=Ude(n,this.inserted),o=Ude(r,this.deleted);return n.size>6&&i/n.size>eOe||r.size>6&&o/r.size>eOe}};function tOe(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of rOe(c))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of rOe(l))r.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(CDt(l.newText,c.newText)))}return new Sj(r,n)}s(tOe,"getInformationDelta");function CDt(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(CDt,"trimOverlap");function rOe(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(rOe,"to4grams");function nOe(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(nOe,"setUnion");function iOe(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(iOe,"setMinus");function Ude(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Ude,"setIntersectionCount");async function xDt(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||zQe(new oh(e.getText()),e.languageId,void 0)}s(xDt,"getStructure");var qde=class extends Cl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${$0}>`,`\`\`\`${o}`,`${i}`,"```",`</${$0}>`].join(`
`),l=(0,Cl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Dj(a)}),vscpp(Cl.SystemMessage,{priority:1e3},vscpp(Cj,null),this._getInstructions()),vscpp(Cl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp(kj,{doc:c}))):vscpp(Cl.Chunk,{priority:100+u},vscpp(kj,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp(Bj,{doc:c}))):vscpp(Cl.Chunk,{priority:200+u},vscpp(Bj,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Rj}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",_j,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",_j,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",_j,"> and </",_j,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",$0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",$0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",$0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",$0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",$0,">IDENTICAL</",$0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",$0,">.")}}},Rj=class extends Cl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},kj=class extends Cl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Bj=class extends Cl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...WQe(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Dj=class extends Cl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};f();f();function aOe(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(aOe,"findIndexes");function vDt(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=aOe(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=aOe(t,e[l]).slice(-n).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(vDt,"deduplicateEditRegion");function lOe(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:vDt(i,r.split(/\r?\n/),o).join(`
`)}}s(lOe,"postProcessUpdatedEditWindow");f();var Wde={id:"xtab-274-2-full-ft",name:"xtab-4o-mini-finetuned"};f();var Pj=Ve(th());function cOe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Pj.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Pj.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(cOe,"getTextPart");function bDt(t){return{type:Pj.Raw.ChatCompletionContentPartKind.Text,text:t}}s(bDt,"toTextPart");function Gde(t){return[bDt(t)]}s(Gde,"toTextParts");f();var Nj=j0("IDiffService");var zde=Ve(th());f();var Lj="<|cursor|>",pT="<|code_to_edit|>",CR="<|/code_to_edit|>",dOe="<|area_around_code_to_edit|>",fOe="<|/area_around_code_to_edit|>",EDt="<|current_file_content|>",IDt="<|/current_file_content|>",TDt="<|edit_diff_history|>",wDt="<|/edit_diff_history|>",_Dt="<|recently_viewed_code_snippets|>",SDt="<|/recently_viewed_code_snippets|>",RDt="<|recently_viewed_code_snippet|>",kDt="<|/recently_viewed_code_snippet|>",pOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${pT} and ${CR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Lj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${pT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${pT} and ${CR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${pT} or ${CR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function mOe(t,e,r,n){let i=t.getActiveDocument(),o=PDt(t,n),a=BDt(t,n,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${_Dt}
${o}
${SDt}

${EDt}
current_file_path: ${l}
${e}
${IDt}

${TDt}
${a}
${wDt}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Lj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${pT}\` and \`${CR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(mOe,"getUserPrompt");function BDt(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let l=DDt(a);if(l===null)continue;let c=e(l);if(r-=c,r<0)break;n.push(l)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(BDt,"getEditDiffHistory");function DDt(t){let e=[],r=Po.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(DDt,"generateDocDiff");function uOe(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[RDt,n,e,kDt].join(`
`)}s(uOe,"formatCodeSnippet");function PDt(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);n&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(uOe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(uOe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(PDt,"getRecentCodeSnippets");function Hde(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Hde,"truncateCode");var hOe=2,gOe=10,jde=15,Vde=1e3,$de=2e3;var dA=class extends cR{constructor(r,n){super(dA.ID,[i=>new hR(i),i=>new dR(i),i=>new fR(i)]);this.diffService=r;this._chatMLFetcher=n;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new xb(r);try{if(r.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:fT(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=aT(o);if(a===null)return Mo.error({kind:"uncategorized",error:fT(new Error("NoSelection"))});let l=s(te=>Math.floor(te.length/4),"computeTokens"),c=new sn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Lj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-jde),y=Math.min(h.length,m+jde+1),v=hOe,b=gOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),B;B=d.split(/\r?\n/).slice(E,_);let N=[E,_],W=h.slice(E,_),ee=[dOe,...h.slice(g,E),pT,...W,CR,...h.slice(_,y),fOe].join(`
`),me=ee,ae;{let te=l(ee),pe=0;if(te>=$de)ae=ee,pe=g;else{let re=Math.floor(($de-te)/2),[fe]=Hde(h.slice(0,g),!0,re),[,he]=Hde(h.slice(y),!1,re);pe=Math.max(fe,m-Vde);let Ne=Math.min(he+y,m+Vde+1);ae=[...h.slice(pe,g),ee,...h.slice(y,Ne)].join(`
`)}}let H=mOe(r,ae,me,l),O=[{role:zde.Raw.ChatRole.System,content:Gde(pOe)},{role:zde.Raw.ChatRole.User,content:Gde(H)}];if(i.setPrompt(O),await this.debounce(i),n.isCancellationRequested)return Mo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let le=new b5,ie,j=await this._chatMLFetcher.fetchOne(B9(O),async(te,pe,re)=>{ie===void 0&&(ie=le.elapsed())},{id:Wde.id,name:Wde.name},{temperature:0},n);if(j.type==="canceled")return Mo.error({kind:"gotCancelled",message:"afterFetchCall"});if(j.type!=="success")return Mo.error({kind:"fetchFailure",error:fT(j)});ie&&i.setTtft(ie),i.setResponse(j.value);let q=dA.getBacktickSection(j.value);return await this.generateReturnEditFormat(o,k,B.join(`
`),q,N,i)}async generateReturnEditFormat(r,n,i,o,a,l){let{updatedEditWindow:c}=lOe(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Fm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Mo.error({kind:"noSuggestions"}):Mo.ok({editWindow:n,edit:new Po(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,dA.DEBOUNCE_MS-n);r.setDebounceTime(i),await wy(i)}};dA=yu([$s(0,Nj),$s(1,ih)],dA);f();var Fj=class t extends Ho{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new mD,S0(this,r.openDocuments,(i,o)=>{o.add(Rg(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ul(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new Jc(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=Po.fromEdit(p),h=Po.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new Jc(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var Yde=class t{constructor(e){this.edits=e;Nu(()=>Cv(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new fA(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new fA(e,r)])}static insert(e,r){return new t([new fA(zt.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new fA(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=ql.ofText(o.text);if(e.isBefore(l)){let u=new sn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),d=c.addToPosition(u);return Mj(u,d)}a.lineNumber+r!==n&&(i=0),r+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,n=l.lineNumber+r}return new sn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof sn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof sn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return Mj(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new sn(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=Mj(n,l);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=c}let i=Mj(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new Jde(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new fA(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=ql.ofText(o.text),l=sn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),c=a.createRange(l);e.push(c),n=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new xn;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new fA(zt.fromPositions(r,n),i)}equals(e){return r2(this.edits,e.edits,(r,n)=>r.equals(n))}},fA=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Yde([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=gD(r,n),o=ql.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=gD(r,n);r=r.substring(i),n=n.substring(i);let o=w5(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function Mj(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new xn("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(Mj,"rangeFromPositions");var Qj=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new sn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new lT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Sg(e)}},Kde=class extends Qj{constructor(r,n){Ul(n>=1);super();this._getLineContent=r;this._lineCount=n}static{s(this,"LineBasedText")}getValueOfRange(r){if(r.startLineNumber===r.endLineNumber)return this._getLineContent(r.startLineNumber).substring(r.startColumn-1,r.endColumn-1);let n=this._getLineContent(r.startLineNumber).substring(r.startColumn-1);for(let i=r.startLineNumber+1;i<r.endLineNumber;i++)n+=`
`+this._getLineContent(i);return n+=`
`+this._getLineContent(r.endLineNumber).substring(0,r.endColumn-1),n}getLineLength(r){return this._getLineContent(r).length}get length(){let r=this._getLineContent(this._lineCount);return new ql(this._lineCount-1,r.length)}},mT=class extends Kde{static{s(this,"ArrayText")}constructor(e){super(r=>e[r-1],e.length)}},Jde=class extends Qj{constructor(r){super();this.value=r;this._t=new lT(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();var xR=class{constructor(e,r,n){this.changes=e;this.moves=r;this.hitTimeout=n}static{s(this,"LinesDiff")}},vR=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var vp=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,r+1),new Yt(a,n+1));return l.modified.isEmpty||i.push(l),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),l=o.modified.intersect(n);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new Od(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new xn("not a valid diff");return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Od(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(AOe(this.original.endLineNumberExclusive,e)&&AOe(this.modified.endLineNumberExclusive,r))return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Od(zt.fromPositions(new sn(this.original.startLineNumber,1),bR(new sn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new sn(this.modified.startLineNumber,1),bR(new sn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Od(zt.fromPositions(bR(new sn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),bR(new sn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(bR(new sn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),bR(new sn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new xn}};function bR(t,e){if(t.lineNumber<1)return new sn(1,1);if(t.lineNumber>e.length)return new sn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new sn(t.lineNumber,r.length+1):t}s(bR,"normalizePosition");function AOe(t,e){return t>=1&&t<=e.length}s(AOe,"isValidLineNumber");var wb=class t extends vp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Od=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new xn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new xn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new fA(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function Xde(t,e,r,n=!1){let i=[];for(let o of n5(t.map(a=>LDt(a,e,r)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new wb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Nu(()=>!n&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||r.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:Cv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s(Xde,"lineRangeMappingFromRangeMappings");function LDt(t,e,r){let n=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+n<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+n<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=r.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(n=1);let o=new Yt(t.originalRange.startLineNumber+n,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+n,t.modifiedRange.endLineNumber+1+i);return new wb(o,a,[t])}s(LDt,"getLineRangeMapping");f();var mA=class t{constructor(e,r){this.diffs=e;this.hitTimeout=r}static{s(this,"DiffAlgorithmResult")}static trivial(e,r){return new t([new Yo(Bt.ofLength(e.length),Bt.ofLength(r.length))],!1)}static trivialTimedOut(e,r){return new t([new Yo(Bt.ofLength(e.length),Bt.ofLength(r.length))],!0)}},Yo=class t{constructor(e,r){this.seq1Range=e;this.seq2Range=r}static{s(this,"SequenceDiff")}static invert(e,r){let n=[];return lSe(e,(i,o)=>{n.push(t.fromOffsetPairs(i?i.getEndExclusives():pA.zero,o?o.getStarts():new pA(r,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+r)))}),n}static fromOffsetPairs(e,r){return new t(new Bt(e.offset1,r.offset1),new Bt(e.offset2,r.offset2))}static assertSorted(e){let r;for(let n of e){if(r&&!(r.seq1Range.endExclusive<=n.seq1Range.start&&r.seq2Range.endExclusive<=n.seq2Range.start))throw new xn("Sequence diffs must be sorted");r=n}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let r=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!r||!n))return new t(r,n)}getStarts(){return new pA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new pA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},pA=class t{constructor(e,r){this.offset1=e;this.offset2=r}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},_b=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},Oj=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new xn("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var ER=class{constructor(e,r){this.width=e;this.height=r;this.array=[];this.array=new Array(e*r)}static{s(this,"Array2D")}get(e,r){return this.array[e+r*this.width]}set(e,r,n){this.array[e+r*this.width]=n}};function P9(t){return t===32||t===9}s(P9,"isSpace");var D9=class t{constructor(e,r,n){this.range=e;this.lines=r;this.source=n;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=r[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let r=this.chrKeys.get(e);return r===void 0&&(r=this.chrKeys.size,this.chrKeys.set(e,r)),r}computeSimilarity(e){let r=0,n=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<n;i++)r+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-r/(this.totalCount+e.totalCount)}};var Uj=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,r,n=_b.instance,i){if(e.length===0||r.length===0)return mA.trivial(e,r);let o=new ER(e.length,r.length),a=new ER(e.length,r.length),l=new ER(e.length,r.length);for(let g=0;g<e.length;g++)for(let y=0;y<r.length;y++){if(!n.isValid())return mA.trivialTimedOut(e,r);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===r.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=r.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Yo(new Bt(g+1,u),new Bt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=r.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new mA(c,!1)}};f();var IR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,r,n=_b.instance){if(e.length===0||r.length===0)return mA.trivial(e,r);let i=e,o=r;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new Zde;c.set(0,a(0,0));let u=new e0e;u.set(0,c.get(0)===0?null:new qj(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!n.isValid())return mA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),B=k-d;if(b++,k>i.length||B>o.length)continue;let N=a(k,B);c.set(d,N);let W=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new qj(W,k,B,N-k):W),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Yo(new Bt(y,h),new Bt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new mA(m,!1)}},qj=class{constructor(e,r,n,i){this.prev=e;this.x=r;this.y=n;this.length=i}static{s(this,"SnakePath")}},Zde=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=r}else{if(e>=this.positiveArr.length){let n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=r}}},e0e=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){e<0?(e=-e-1,this.negativeArr[e]=r):this.positiveArr[e]=r}};f();f();var Sb=class{constructor(e,r,n){this.lines=e;this.range=r;this.considerWhitespaceChanges=n;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!n){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Bt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(r=>String.fromCharCode(r)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let r=xOe(e>0?this.elements[e-1]:-1),n=xOe(e<this.elements.length?this.elements[e]:-1);if(r===7&&n===8)return 0;if(r===8)return 150;let i=0;return r!==n&&(i+=10,r===0&&n===1&&(i+=1)),i+=COe(r),i+=COe(n),i}translateOffset(e,r="right"){let n=E0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[n];return new sn(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+i+(i===0&&r==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){let r=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(r)?zt.fromPositions(n,n):zt.fromPositions(r,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!TR(this.elements[e]))return;let r=e;for(;r>0&&TR(this.elements[r-1]);)r--;let n=e;for(;n<this.elements.length&&TR(this.elements[n]);)n++;return new Bt(r,n)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!TR(this.elements[e]))return;let r=e;for(;r>0&&TR(this.elements[r-1])&&!yOe(this.elements[r]);)r--;let n=e;for(;n<this.elements.length&&TR(this.elements[n])&&!yOe(this.elements[n]);)n++;return new Bt(r,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,r){return this.elements[e]===this.elements[r]}extendToFullLines(e){let r=F1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,n=iSe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new Bt(r,n)}};function TR(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(TR,"isWordChar");function yOe(t){return t>=65&&t<=90}s(yOe,"isUpperCase");var FDt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function COe(t){return FDt[t]}s(COe,"getCategoryBoundaryScore");function xOe(t){return t===10?8:t===13?7:P9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(xOe,"getCategory");function bOe(t,e,r,n,i,o){let{moves:a,excludedChanges:l}=QDt(t,e,r,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=ODt(c,n,i,e,r,o);return dSe(a,u),a=UDt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&MDt(p,h=>h.length>=2)>=2}),a=qDt(t,a),a}s(bOe,"computeMovedLines");function MDt(t,e){let r=0;for(let n of t)e(n)&&r++;return r}s(MDt,"countWhere");function QDt(t,e,r,n){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new D9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new D9(c.modified,r,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new vp(c.range,d.range)),l.add(c.source),l.add(d.source)),!n.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(QDt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function ODt(t,e,r,n,i,o){let a=[],l=new i5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(I0(m=>m.modified.startLineNumber,T0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${r[g-1]}:${r[g+1-1]}:${r[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(pSe(I0(m=>m.modifiedLineRange.length,T0)));let u=new f2,d=new f2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new vp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(I0(m=>m.original.startLineNumber,T0));let p=new J8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=F1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=F1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,W=h.modified.startLineNumber-k-1;if(N>n.length||W>i.length||u.contains(W)||d.contains(N)||!vOe(n[N-1],i[W-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let B;for(B=0;B<_;B++){let N=h.original.endLineNumberExclusive+B,W=h.modified.endLineNumberExclusive+B;if(N>n.length||W>i.length||u.contains(W)||d.contains(N)||!vOe(n[N-1],i[W-1],o))break}B>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+B)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+B))),(k>0||B>0)&&(a[m]=new vp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+B),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+B)))}return a}s(ODt,"computeUnchangedMoves");function vOe(t,e,r){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new IR().compute(new Sb([t],new zt(1,1,1,t.length),!1),new Sb([e],new zt(1,1,1,e.length),!1),r),o=0,a=Yo.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{P9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)P9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(vOe,"areLinesSimilar");function UDt(t){if(t.length===0)return t;t.sort(I0(r=>r.original.startLineNumber,T0));let e=[t[0]];for(let r=1;r<t.length;r++){let n=e[e.length-1],i=t[r],o=i.original.startLineNumber-n.original.endLineNumberExclusive,a=i.modified.startLineNumber-n.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=n.join(i);continue}e.push(i)}return e}s(UDt,"joinCloseConsecutiveMoves");function qDt(t,e){let r=new J8(t);return e=e.filter(n=>{let i=r.findLastMonotonous(l=>l.original.startLineNumber<n.original.endLineNumberExclusive)||new vp(new Yt(1,1),new Yt(1,1)),o=F1(t,l=>l.modified.startLineNumber<n.modified.endLineNumberExclusive);return i!==o}),e}s(qDt,"removeMovesInSameDiff");f();function t0e(t,e,r){let n=r;return n=EOe(t,e,n),n=EOe(t,e,n),n=WDt(t,e,n),n}s(t0e,"optimizeSequenceDiffs");function EOe(t,e,r){if(r.length===0)return r;let n=[];n.push(r[0]);for(let o=1;o<r.length;o++){let a=n[n.length-1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){n[n.length-1]=new Yo(new Bt(a.seq1Range.start,l.seq1Range.endExclusive-c),new Bt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}n.push(l)}let i=[];for(let o=0;o<n.length-1;o++){let a=n[o+1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){n[o+1]=new Yo(new Bt(l.seq1Range.start+c,a.seq1Range.endExclusive),new Bt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return n.length>0&&i.push(n[n.length-1]),i}s(EOe,"joinSequenceDiffsByShifting");function WDt(t,e,r){if(!t.getBoundaryScore||!e.getBoundaryScore)return r;for(let n=0;n<r.length;n++){let i=n>0?r[n-1]:void 0,o=r[n],a=n+1<r.length?r[n+1]:void 0,l=new Bt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new Bt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?r[n]=IOe(o,t,e,l,c):o.seq2Range.isEmpty&&(r[n]=IOe(o.swap(),e,t,c,l).swap())}return r}s(WDt,"shiftSequenceDiffs");function IOe(t,e,r,n,i){let a=1;for(;t.seq1Range.start-a>=n.start&&t.seq2Range.start-a>=i.start&&r.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<n.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&r.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+r.getBoundaryScore(p)+r.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(IOe,"shiftDiffToBetterPosition");function TOe(t,e,r){let n=[];for(let i of r){let o=n[n.length-1];if(!o){n.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?n[n.length-1]=new Yo(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):n.push(i)}return n}s(TOe,"removeShortMatches");function r0e(t,e,r,n,i=!1){let o=Yo.invert(r,t.length),a=[],l=new pA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=n(t,d.offset1),h=n(e,d.offset2);if(!m||!h)return;let g=new Yo(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=n(t,E.seq1Range.start),B=n(e,E.seq2Range.start),N=new Yo(k,B),W=N.intersect(E);if(v+=W.seq1Range.length,b+=W.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return GDt(r,a)}s(r0e,"extendDiffsToEntireWordIfAppropriate");function GDt(t,e){let r=[];for(;t.length>0||e.length>0;){let n=t[0],i=e[0],o;n&&(!i||n.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),r.length>0&&r[r.length-1].seq1Range.endExclusive>=o.seq1Range.start?r[r.length-1]=r[r.length-1].join(o):r.push(o)}return r}s(GDt,"mergeSequenceDiffs");function wOe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let l=[n[0]];for(let c=1;c<n.length;c++){let p=function(h,g){let y=new Bt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=n[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}n=l}while(i++<10&&o);return n}s(wOe,"removeVeryShortMatchingLinesBetweenDiffs");function _Oe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let c=[n[0]];for(let u=1;u<n.length;u++){let m=function(g,y){let v=new Bt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,B=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,W=t.countLinesIn(y.seq1Range),ee=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),ae=y.seq2Range.length,H=2*40+50;function O(le){return Math.min(le,H)}return s(O,"cap"),Math.pow(Math.pow(O(_*40+k),1.5)+Math.pow(O(B*40+N),1.5),1.5)+Math.pow(Math.pow(O(W*40+ee),1.5)+Math.pow(O(me*40+ae),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=n[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}n=c}while(i++<10&&o);let a=[];return cSe(n,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new Bt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new Bt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Yo.fromOffsetPairs(c?c.getEndExclusives():pA.zero,d?d.getStarts():pA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(_Oe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var N9=class{constructor(e,r){this.trimmedHash=e;this.lines=r}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let r=e===0?0:SOe(this.lines[e-1]),n=e===this.lines.length?0:SOe(this.lines[e]);return 1e3-(r+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,r){return this.lines[e]===this.lines[r]}};function SOe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(SOe,"getIndentation");var Wj=class{constructor(){this.dynamicProgrammingDiffing=new Uj;this.myersDiffingAlgorithm=new IR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,r,n){if(e.length<=1&&r2(e,r,(B,N)=>B===N))return new xR([],[],!1);if(e.length===1&&e[0].length===0||r.length===1&&r[0].length===0)return new xR([new wb(new Yt(1,e.length+1),new Yt(1,r.length+1),[new Od(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,r.length,r[r.length-1].length+1))])],[],!1);let i=n.maxComputationTimeMs===0?_b.instance:new Oj(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,a=new Map;function l(B){let N=a.get(B);return N===void 0&&(N=a.size,a.set(B,N)),N}s(l,"getOrCreateHash");let c=e.map(B=>l(B.trim())),u=r.map(B=>l(B.trim())),d=new N9(c,e),p=new N9(u,r),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(B,N)=>e[B]===r[N]?r[N].length===0?.1:1+Math.log(1+r[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=t0e(d,p,h),h=wOe(d,p,h);let y=[],v=s(B=>{if(o)for(let N=0;N<B;N++){let W=b+N,ee=E+N;if(e[W]!==r[ee]){let me=this.refineDiff(e,r,new Yo(new Bt(W,W+1),new Bt(ee,ee+1)),i,o,n);for(let ae of me.mappings)y.push(ae);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let B of h){Nu(()=>B.seq1Range.start-b===B.seq2Range.start-E);let N=B.seq1Range.start-b;v(N),b=B.seq1Range.endExclusive,E=B.seq2Range.endExclusive;let W=this.refineDiff(e,r,B,i,o,n);W.hitTimeout&&(g=!0);for(let ee of W.mappings)y.push(ee)}v(e.length-b);let _=Xde(y,new mT(e),new mT(r)),k=[];return n.computeMoves&&(k=this.computeMoves(_,e,r,c,u,i,o,n)),Nu(()=>{function B(W,ee){if(W.lineNumber<1||W.lineNumber>ee.length)return!1;let me=ee[W.lineNumber-1];return!(W.column<1||W.column>me.length+1)}s(B,"validatePosition");function N(W,ee){return!(W.startLineNumber<1||W.startLineNumber>ee.length+1||W.endLineNumberExclusive<1||W.endLineNumberExclusive>ee.length+1)}s(N,"validateRange");for(let W of _){if(!W.innerChanges)return!1;for(let ee of W.innerChanges)if(!(B(ee.modifiedRange.getStartPosition(),r)&&B(ee.modifiedRange.getEndPosition(),r)&&B(ee.originalRange.getStartPosition(),e)&&B(ee.originalRange.getEndPosition(),e)))return!1;if(!N(W.modified,r)||!N(W.original,e))return!1}return!0}),new xR(_,k,g)}computeMoves(e,r,n,i,o,a,l,c){return bOe(e,r,n,i,o,a).map(p=>{let m=this.refineDiff(r,n,new Yo(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=Xde(m.mappings,new mT(r),new mT(n),!0);return new vR(p,h)})}refineDiff(e,r,n,i,o,a){let c=HDt(n).toRangeMapping2(e,r),u=new Sb(e,c.originalRange,o),d=new Sb(r,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Yo.assertSorted(h),h=t0e(u,d,h),m&&Yo.assertSorted(h),h=r0e(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Yo.assertSorted(h),a.extendToSubwords&&(h=r0e(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Yo.assertSorted(h)),h=TOe(u,d,h),m&&Yo.assertSorted(h),h=_Oe(u,d,h),m&&Yo.assertSorted(h);let g=h.map(y=>new Od(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Od.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function HDt(t){return new vp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(HDt,"toLineRangeMapping");var Gj=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,r,n){let i=await jDt(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new vR(new vp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new wb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Od(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function jDt(t,e,r){let n=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new Wj().computeDiff(n,i,r),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(jDt,"computeDiff");f();var n0e=Ve(require("crypto"));var L9=n0e.randomUUID.bind(n0e);var MOe=Ve(th()),l0e=Ve(r9());f();var Hj=j0("ISnippyService");f();f();var F9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),jj=65;function VDt(t){let e=0,r;F9.lastIndex=0;do if(r=F9.exec(t),r&&(e+=1),e>=jj)break;while(r);return e}s(VDt,"lexemeLength");function $Dt(t,e){let r=0,n;F9.lastIndex=0;do if(n=F9.exec(t),n&&(r+=1,r>=e))return F9.lastIndex;while(n);return t.length}s($Dt,"offsetFirstLexemes");function ROe(t,e){let r=t.split("").reverse().join(""),n=$Dt(r,e);return r.length-n}s(ROe,"offsetLastLexemes");function i0e(t){return VDt(t)>=jj}s(i0e,"hasMinLexemeLength");f();f();var kOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(kOe||={});var o0e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(o0e||={});var BOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(kOe.is)}e.is=t,s(t,"is")})(BOe||={});var s0e;(e=>{function t(r){if(o0e.is(r))return Mo.error(r);if(BOe.is(r))return Mo.ok(r)}e.to=t,s(t,"to")})(s0e||={});var DOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(DOe||={});var POe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(POe||={});var NOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(NOe||={});var LOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(DOe.is)&&"page_info"in r&&POe.is(r.page_info)&&"license_stats"in r&&NOe.is(r.license_stats)}e.is=t,s(t,"is")})(LOe||={});var a0e;(e=>{function t(r){if(o0e.is(r))return Mo.error(r);if(LOe.is(r))return Mo.ok(r)}e.to=t,s(t,"to")})(a0e||={});var Vj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,s0e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,a0e.to)}async fetch(e,r,n){let i=this.ctx.get(on),o=await this.ctx.get(Qr).getToken(),a=jx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...r0(this.ctx),"X-GitHub-Api-Version":bf},c=i.makeAbortController(),u=await i.fetch(a,{method:"POST",headers:l,json:r,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return n(d)}};var FOe=new _t("[CODE REFERENCING]"),wR=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Vj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Rr).getTextDocument({uri:e.toString()});if(!a){FOe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){FOe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(b0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=xs.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!i0e(c)){let m=a.value.slice(0,o.start),h=ROe(m,jj);l=h,c=a.value.slice(h,o.start+r.newText.length)}if(!i0e(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};wR=yu([$s(1,uA)],wR);async function QOe(t){let e=new fj;return e.define(mj,new c0e(t)),e.define(Nj,new Gj),e.define(_y,new V0(u0e,[!0])),e.define(Hj,new V0(wR,[t])),e.define(ih,await d0e.Create(t)),e.define(S9,new V0(f0e)),e.seal()}s(QOe,"createInstantiationService");var c0e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),a=an.createAndMarkAsIssued(i,o);Dt(this.ctx,e,a)}},u0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},d0e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await xo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=L9(),c=await this.ctx.get(Ed).fetchAndStreamChat(this.ctx,a,fg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(r)return await r(u,0,{text:d.text})},n,i,o);if(c.type==="success"){let u=[];if(r)for await(let p of c.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:cOe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},f0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new $j("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new $j(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},$j=class{constructor(e){this.mode=MOe.OutputMode.Raw;this.tokenizer=Bo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===l0e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===l0e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var zj=class extends Ho{constructor(r){super();this.workspace=r;this._garbageCollector=new h0e(20);this._documentCaches=new Map;S0(this,r.openDocuments,(n,i)=>{let o=new p0e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(Rg(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},p0e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new m0e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},m0e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},h0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var M9=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},Yj=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new M9("",null),this._tail=new M9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new M9(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var Kj=class extends Ho{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new Yj(50);S0(this,r.openDocuments,(n,i)=>{let o=new g0e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(Rg(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},g0e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var Jj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),n=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},_R=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:W,promptCharCount:ee,isDefaultEndpoint:me,hadLowLogProbSuggestion:ae,nonTerminatingError:H,nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,hasNextEdit:q,nextEditLogprob:Y,maxLinesPerEdit:te,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchTime:Ne,fetchResult:Re,fetchError:Je,fetchStartedAfterMs:Me}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchResult:Re,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:W,promptCharCount:ee,hadLowLogProbSuggestion:this._boolToNum(ae),nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,fetchStartedAfterMs:Me,fetchTime:Ne,hasNextEdit:this._boolToNum(q),nextEditLogprob:Y,maxLinesPerEdit:te})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};_R=yu([$s(0,mj)],_R);f();var SR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var hT=!1,OOe=300,RR=class extends Ho{constructor(r,n,i,o,a,l,c){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new zj(this._workspace);this._nextEditCache=new Kj(this._workspace);this._recentlyShownCache=new C0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;S0(this,this._workspace.openDocuments,(u,d)=>{d.add(roe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(_R)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),l=new Jj(this._statelessNextEditProvider.ID);l.setOpportunityId(n.requestUuid??L9());let c=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await wy(OOe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await wy(OOe);else{h=new y0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,r,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:vD(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new SR(void 0);if(this._rejectionCollector.isRejected(r,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new SR(void 0);Ul(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new SR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(r,a,[d,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),l=xs.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=A0e(r.lastEdits.swap(l)),d=c.compose(),p=new uT(new oh(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new Wl(o.text),g=Dg.fromEdit(new Jc(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new Wl(p.text).getTransformer().getRange(y));let b=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(r.docId),_=s(W=>{let me=new Dg(new Wl(p.text),W).toEdit();return UOe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(W=>p.projectBack(W),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(W=>p.project(W),"toProjectedOffset"),N=new x9(r.docId,E,r.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,B,r.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Mo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=A0e(a.getDocumentAndIdx(n)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(W=>this._shortenDocument(W,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new aj(r.headerRequestId,u.map(W=>W.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,hT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let W=this._hookupCancellation(g,o);try{y=await g.result}finally{W.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let W=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let ee=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{ee.dispose(),W()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return Mo.error({kind:"noSuggestions"});let _=new Dg(new Wl(d.projectedDocument.text),b).toEdit(),k=UOe(_,d.projectedDocument),B=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(B);return Mo.ok(N)}_hookupCancellation(r,n){let i=new ku,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),l=i.add(new oj);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){hT&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){hT&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(r.liveDependentants>0){hT&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}hT&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(Ra(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){gj(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new uT(new oh(r.base.value),new ip([])),clippedRange:new Yt(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Bt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,n.textLength.lineCount+1),c=A0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new uT(new oh(r.base.value),new ip(u.map(p=>el.delete(n.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new C9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await JDt(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new oh(n.base.value),a=n.edit.edits.at(0)?.range??new Bt(0,0),l;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);l=o.offsetRangeToRange(new Bt(h.range.start,g.range.endExclusive))}let c=qOe(o.offsetRangeToRange(a)),u=Ej(200*50,{costFnOverride:s((h,g,y)=>{let v=qOe(y.offsetRangeToRange(h.range)),b=KDt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};RR=yu([$s(4,_y),$s(5,uA),$s(6,Hj)],RR);function UOe(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return xs.fromOffsetEdit(r)}s(UOe,"projectBackEdit");function qOe(t){return new Yt(t.start.line+1,t.end.line+1)}s(qOe,"lineRangeFromVSCodeRange");function KDt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(KDt,"lineRangeDist");async function JDt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(JDt,"getStructure");function A0e(t){if(!t)throw new xn("expected value to be defined, but it was not");return t}s(A0e,"assertDefined");var y0e=class{constructor(){this.headerRequestId=L9()}static{s(this,"NextEditFetchRequest")}},C0e=class{constructor(){this._cache=new $O(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};f();f();f();f();var gT=0;function Xj(t){return t===0}s(Xj,"lengthIsZero");var z0=2**26;function kR(t,e){return t*z0+e}s(kR,"toLength");function ky(t){let e=t,r=Math.floor(e/z0),n=e-r*z0;return new ql(r,n)}s(ky,"lengthToObj");function Q9(t,e){let r=t+e;return e>=z0&&(r=r-t%z0),r}s(Q9,"lengthAdd");function WOe(t,e){return t.reduce((r,n)=>Q9(r,e(n)),gT)}s(WOe,"sumLengths");function x0e(t,e){return t===e}s(x0e,"lengthEquals");function O9(t,e){let r=t,n=e;if(n-r<=0)return gT;let o=Math.floor(r/z0),a=Math.floor(n/z0),l=n-a*z0;if(o===a){let c=r-o*z0;return kR(0,l-c)}else return kR(a-o,l)}s(O9,"lengthDiffNonNegative");function GOe(t,e){let r=t,n=Math.floor(r/z0),i=r-n*z0,o=e,a=Math.floor(o/z0),l=o-a*z0;return new zt(n+1,i+1,a+1,l+1)}s(GOe,"lengthsToRange");f();var BR=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${ky(this.startOffset)}...${ky(this.endOffset)}) -> ${ky(this.newLength)}`}};function jOe(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new jO(HOe(t)),n=HOe(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!Xj(u);){let[p,m]=i.splitAt(u);d.push(p),u=O9(p.lengthAfter,u),i=m??r.dequeue()}return Xj(u)||d.push(new U9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&x0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new BR(m.startOffset,d,Q9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=gT;for(let u of n){let d=o(u.lengthBefore);if(u.modified){let p=WOe(d,h=>h.lengthBefore),m=Q9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=Q9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(jOe,"combineTextEditInfos");var U9=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=O9(e,this.lengthAfter);return x0e(r,gT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,gT,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${ky(this.lengthBefore)} -> ${ky(this.lengthAfter)}`}};function HOe(t){let e=[],r=gT;for(let n of t){let i=O9(r,n.startOffset);Xj(i)||e.push(new U9(!1,i,i));let o=O9(n.startOffset,n.endOffset);e.push(new U9(!0,o,n.newLength)),r=n.endOffset}return e}s(HOe,"toLengthMapping");var q9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Zj(n.range,ql.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=ky(n.newLength);return new Zj(GOe(n.startOffset,n.endOffset),new ql(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new BR(kR(e.range.startLineNumber-1,e.range.startColumn-1),kR(e.range.endLineNumber-1,e.range.endColumn-1),kR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=jOe(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Zj=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var eV=class{constructor(e){this.documents=e;Ul(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},tV=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Jc(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var rV=class extends Ho{constructor(){super();this.branch=Pm("branchName",void 0);this._register(eoe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var iV=class extends Ho{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new b0e(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new rV;this._register(c2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=P5(),this._documentState.forEach(o=>o.applyAllEdits()))})),S0(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new v0e(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(Rg(this,{value:n.value,selection:n.selection,languageId:n.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Ra(()=>{let l=this._documentState.get(n.id);l&&this._lastDocuments.remove(l),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===r&&(l=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===r))return new eV(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=P5()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},v0e=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Wl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=N5.fromEdit(e,this._currentValue),i=q9.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return nV(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&XDt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=P5(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:P5()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new Pg(this._edits.map(o=>o.edit));return{history:new tV(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=xs.empty,o=q9.empty,a,l=0,c=xs.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(P5()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();gj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=nV(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||nV(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||nV(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let B=xs.trySwap(u.edit,c);if(B)c=B.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(n.value);n=n.apply(v);let b=u.edit.compose(i),E=Po.fromEdit(new Jc(n,b)),k=new Dg(n,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new Pg(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function nV(t,e){let r=0;for(let n of t)r+=e(n);return r}s(nV,"sum");function XDt(t,e){let r=e.getNewRanges();return t.edits.every(n=>ZDt(n.range,r))}s(XDt,"editExtends");function ZDt(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(ZDt,"doesTouch");var b0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var VOe=10,sh=class{constructor(e){this.lastResultsById=new Kr(VOe);this.lastResultsByUri=new Kr(VOe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=Lm.create(e),l=await i.getNextEdit(a,{triggerKind:1},n);if(l.result==null)return;let c=await this.ctx.get(Rr).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=sr(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await QOe(this.ctx),r;try{let o=await this.ctx.get(kt).updateExPValuesAndAssignments(),a=ePt(this.ctx,o);r=e.createInstance(a?dA:Ry)}catch{r=e.createInstance(Ry)}let n=this.ctx.get(kg),i=new iV(n);return e.createInstance(RR,n,r,i,new Fj(n))}};function ePt(t,e){let r=Jr(t,ft.NESXTab);return r!==void 0?r:t.get(kt).enableNESXTab(e)}s(ePt,"shouldUseXTab");f();var Rb=require("fs"),$Oe=require("os"),zOe=Ve(require("path")),DR=require("process");var Ec=class{static{s(this,"PersistenceManager")}},E0e=class extends Ec{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await Rb.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await Rb.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await Rb.promises.rm(i):await Rb.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await Rb.promises.rm(n)}catch{}}async listSettings(){try{return(await Rb.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await Rb.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function tPt(){return DR.env.XDG_CONFIG_HOME&&zOe.isAbsolute(DR.env.XDG_CONFIG_HOME)?DR.env.XDG_CONFIG_HOME+"/github-copilot":(0,$Oe.platform)()==="win32"?DR.env.USERPROFILE+"\\AppData\\Local\\github-copilot":DR.env.HOME+"/.config/github-copilot"}s(tPt,"getXdgConfigPath");function YOe(){return new E0e(tPt())}s(YOe,"makeXdgPersistenceManager");f();var KOe=require("crypto"),hA=Ve(require("fs/promises")),JOe=require("os"),By=Ve(require("path"));var Dy=class{constructor(e){this.ctx=e;this.logger=new _t("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=By.extname(__filename)===".ts"?By.resolve(__dirname,"../../../packages/ripgrep/bin"):By.resolve(__dirname,"./bin"),o=By.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await hA.readFile(o),l=(0,KOe.createHash)("sha256").update(a).digest("hex"),c=By.join((0,JOe.homedir)(),".cache/pkg",l);await hA.mkdir(c,{recursive:!0});let u=Ti(pl(o)),d=By.join(c,u);try{await hA.stat(d)}catch{await hA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await hA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var XOe=require("child_process"),I0e=require("perf_hooks");var Py=new _t("ripgrepProcessManager"),ah=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,Py.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){Py.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){Py.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){Py.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){Py.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}Py.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:vH(),command:e,args:r,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);Py.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=I0e.performance.now();Py.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,XOe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),n.stdout?.on("data",c=>{i+=c.toString()}),n.stderr?.on("data",c=>{o+=c.toString()}),n.on("close",c=>{let d=I0e.performance.now()-r;Py.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),n.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var ZOe=100,eUe=1e3*60*5;function tUe(t){let e=new T0e(t);t.get(Ba).registerContextProvider(e),t.get(Tg).add(e.id),t.get(Hl).getInitializedFeature().then(r=>{r.documentProvider.registerDocumentProvider(e)}).catch(r=>{Av(t,r,"registerRelatedFilesShim")})}s(tUe,"registerRelatedFilesShim");var T0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new xB(ZOe,eUe);this.relatedFilesCache=new xB(ZOe,eUe);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(kt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},l=await Cq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){Av(this.ctx,o,"relatedFilesShim")}}async*getDocuments(e,r){for(let n of e.slice(0,J1.MAX_NEIGHBOR_FILES)){if(r?.isCancellationRequested)return;if(!this.relatedFilesCache.has(n.uri)){let a=Xx({uri:n.uri})??"UNKNOWN";await this.requestRelatedFilesAndTraits(n.uri,a,a,r)}let i=this.relatedFilesCache.get(n.uri)??[];if(i.length===0)continue;let o=n.weight/i.length;for(let a of i)yield{uri:a,weight:o}}}};f();f();f();var rUe=Ve(require("node:events"));var oV="onWorkspaceWatcherChanged";var sV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new rUe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(oV,bu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(oV,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(oV,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(oV,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var nu=class{constructor(e){this.ctx=e;this.watchers=new Kr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Ur.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var PR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},rPt="workspaceLifecycleManager",iu=new _t(rPt),gA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=Ds(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?iu.debug(this.ctx,`listener ${e.constructor.name} is already started`):(iu.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):iu.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);iu.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(O0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Rr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){iu.debug(r,"No workspaces to add.");return}iu.debug(r,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];iu.debug(r,`Combined workspaces: ${n.map(l=>l.uri).join(", ")}`);let i=n.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));iu.debug(r,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));iu.debug(r,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));iu.debug(r,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){iu.debug(r,`Terminating watching for removed workspace: ${l.uri}`),r.get(nu).terminateWatching(l);for(let u of this.activeListeners)iu.debug(r,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;iu.debug(r,`Starting to watch new workspace: ${l.uri}`);let c=r.get(nu);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){iu.debug(r,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)iu.debug(r,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)iu.debug(r,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(nu).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function aV(t){t.set(gA,new gA(t))}s(aV,"setupWorkspaceLifecycleListener");f();f();var lV=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var Bb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},AA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},w0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.id}_${this.name}`}},kb=class extends w0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},AT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},yT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Gi=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},iUe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),cV=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(cV||{}),oUe=I.Object({result:I.Enum(cV)});var bp=class extends kb{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:Bb,type:"shared"})}};f();var nPt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),iPt=new Map;for(let[t,e]of nPt)iPt.set(e,t);f();function NR(t){return`[${Ti(t)}](${t})`}s(NR,"formatUriForFileWidget");function yA(t){let e=oPt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(yA,"resolvePathInput");function oPt(t){if(t.startsWith("/")||aUe()&&aPt(t)||aUe()&&t.startsWith("\\\\"))return pl(t)}s(oPt,"resolveFsUri");function aUe(){return process.platform==="win32"}s(aUe,"isWindows");function sPt(t){return t>=65&&t<=90||t>=97&&t<=122}s(sPt,"isWindowsDriveLetter");function aPt(t){return sPt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(aPt,"hasDriveLetter");function W9(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Ci?r.value:r instanceof yT?"":r instanceof AT?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(W9,"parseToolResultToString");function uV(t){let{content:e}=t;return{message:W9(e)}}s(uV,"formatToolErrorResult");function lUe(t){let{content:e}=t;return{data:e.map(r=>r instanceof Ci?{type:"text",value:r.value}:r instanceof yT?{type:"text",value:"<unsupported>"}:r instanceof AT?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(lUe,"formatToolSuccessResult");var dV=class extends bp{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=await this.invokeClientEditFileTool(e,r,i,n);return this.getFinalEditFileResult(r,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=yA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new eR(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(ou).getToolByNameAndProvider("insert_edit_into_file",AA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(ou).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}getFinalEditFileResult(e,r){if(r.status!=="success")return r;let n=W9(r.content),i=Xx({uri:yA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new q0({code:n,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Gi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=yA(n.filePath);return{progressMessage:`Editing ${NR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var cUe=new _t("findFilesTool"),fV=class t extends bp{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,l=e.turn.workspaceFolders;if(!l?.length)return new Gi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(ah),u={},d=l.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{cUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],n,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);cUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(bo(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Gi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Gi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var uUe=new _t("findTextInFilesTool"),pV=class t extends bp{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=r.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Gi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(ah),p={},m=u.map(async v=>{if(n.isCancellationRequested)throw new Error("Canceled");try{uUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,n,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);uUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Gi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Gi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var mV=class extends bp{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=yA(i),l=await e.ctx.get(lo).readDirectory(o.toString());return l.length===0?new Gi([new Ci("Folder is empty")],"success"):new Gi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=yA(e.input.path);return{progressMessage:`Reading directory ${NR(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var hV=class extends bp{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,l=yA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(vn).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new q0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Gi([new Ci(d.renderAsString(`
`))],"success")}else return new Gi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=yA(n.filePath);return{progressMessage:`Reading file ${NR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function dUe(){return[new mV,new hV,new dV,new fV,new pV]}s(dUe,"getAllClsTools");var ou=class{constructor(e){this.ctx=e;this._toolRegistry=new lV;for(let r of dUe())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new La;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new Gi([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new La;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let r=e.get(Bb.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(Bb.id)?.splice(e.get(Bb.id)?.indexOf(r)??0,1);let n=e.get(AA.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(AA.id)?.splice(e.get(AA.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(AA.id)??[],a=e.get(Bb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==Bb.id&&c!==AA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var CT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var mUe=require("crypto"),_0e=require("fs"),S0e=Ve(require("path"));var fUe="symbolDatabaseLookup",pUe="multiLanguageContextProviderDocumentSymbols",xT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(fUe,e);return r||(r=await this.createDBFile(e)),S0e.default.join(this.persistenceManager.directory,pUe,r)}async init(){let e=S0e.default.join(this.persistenceManager.directory,pUe);await this.createIfNotExists(e)}async dirExists(e){try{return await _0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await _0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,mUe.randomUUID)()}.db`;return await this.persistenceManager.update(fUe,e,r),r}async deleteDBFile(e){}};f();f();var vT=class{static{s(this,"FileSearch")}};f();var G9=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};f();f();f();var gV=Ve(require("path")),hUe=require("worker_threads");function gUe(t,e){return new hUe.Worker(gV.default.resolve(gV.default.extname(__filename)!==".ts"?__dirname:gV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(gUe,"createWorker");f();var AV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var AUe=Ve(ii());var yV="main.js",CV=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=gUe(yV,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new AV(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new HQ(this.id++),AUe.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new qQ(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new WQ(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new GQ(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new OQ(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new UQ(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new QQ(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(yV+"'")&&(r=new Error(`Failed to load ${yV}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${yV} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var H9=Ve(ii());var Y0=new _t(gv),bT=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,l)=>{if(a===1){Y0.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,H9.CancellationToken.None);return}Y0.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new CV(i,o);for(let a of i){let l=a.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{Y0.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await cPt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,H9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Y0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Y0.debug(this.ctx,`indexing workspace ${e}`);let r=fre.map(d=>`*${d}`);if(r.length===0)return;let i=`**/${fre.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(vT),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,H9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));Y0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),Y0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Y0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,H9.CancellationToken.None)}catch(n){Y0.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return wTe(e)}};async function cPt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(cPt,"createIndexableWorkspaceFolder");f();f();var yUe=100,uPt=5e3,xV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,l,c){let u=Date.now(),d=this.get(n,i,r,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(r,n,i,o,l,c);let p=new pn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>yUe)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>uPt))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let l=e.substring(0,r),c=/[A-Za-z0-9]+$/.exec(l),u=r;c&&(u=c.index),r-u>yUe&&(u=r);let d={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:sr(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var vV=class{constructor(e){this.id=gv;this.selector=Array.from(TQ.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Rr),this.resolver=new R0e(this.documentManager,e)}catch(r){throw Y0.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},R0e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new xV}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(CT).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Ng(o,a);c=c.applyEdits(l);let u=O4e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,r);return Y0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(uQ(o))return[];throw Y0.error(this.ctx,"Failed to get context",o),o}}};var j9=class extends PR{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(gA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Ba).providers.some(r=>r.id===gv)){let r=this.ctx.get(xT);this.fileWatcher=new k0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new bT(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new B0e(this.ctx),this.ctx.set(G9,this.fileWatcher),this.ctx.set(vT,this.fileSearch),this.ctx.set(bT,this.multiLanguageContextIndexWatcher),this.ctx.get(Ba).registerContextProvider(new vV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(kt).updateExPValuesAndAssignments(),n=BU(this.ctx,r);return n.includes(gv)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},k0e=class extends G9{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},B0e=class extends vT{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(nu).getWatchedFiles(n)).map(a=>this.ctx.get(Rr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var D0e=class extends CT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new j9(e),e.set(j9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function CUe(t){let e=t.get(Ec),r=new xT(e);t.set(xT,r),t.set(CT,new D0e(t))}s(CUe,"setupMultiLanguageContextProviderFeature");f();f();f();var CA=new Map;CA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});CA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});CA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});CA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});CA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});CA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var fPt=new _t("sdk");function bV(t,e){CA.has(t.get(fn).getEditorPluginInfo().name)||fPt.warn(t,...e)}s(bV,"deprecationWarning");var yze=Ve(J0e()),gh=Ve(wm());f();f();f();var tn={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Ic=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(uWe(e))}};function st(t,e){let r=ms.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=uWe(r.Errors(o));return[null,{code:tn.InvalidParams,message:a}]}return e(n,i,o)}}s(st,"addMethodHandlerValidation");function uWe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(uWe,"createErrorMessage");f();var X0e=Ve(ii());f();var vA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var NV="github.copilot.finishDeviceFlow",Z0e=class extends vA{constructor(){super(...arguments);this.name=NV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(kn).pendingSignIn;if(!i)throw new X0e.ResponseError(tn.InvalidRequest,"No pending sign in");try{await this.ctx.get(mc).open(i.verificationUri)}catch(o){gd.warn(this.ctx,"Failed to open",i.verificationUri),gd.exception(this.ctx,o,NV)}try{return await i.status}catch(o){throw new X0e.ResponseError(tn.DeviceFlowFailed,String(o))}finally{this.ctx.get(kn).pendingSignIn=void 0}}},dWe=[Z0e];f();f();var is=class extends Kr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var Z9="github.copilot.didAcceptCompletionItem",efe=class extends vA{constructor(){super(...arguments);this.name=Z9;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(is).get(n);return o?(Pq(this.ctx,o),!0):!1}},fWe=[efe];f();var lNt="github.copilot.didAcceptNextEditSuggestionItem",tfe=class extends vA{constructor(){super(...arguments);this.name=lNt;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(sh).handleAcceptance(n),!0}},pWe=[tfe];f();var nfe="github.copilot.didAcceptPanelCompletionItem",rfe=class extends vA{constructor(){super(...arguments);this.name=nfe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(is).get(i);return a?(y2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},mWe=[rfe];var cNt=[...dWe,...fWe,...pWe,...mWe];function hWe(t,e){let r=new Map;for(let n of cNt){let i=new n(t),o=ms.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=Ly(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new Ic(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(hWe,"registerCommands");f();var gWe=Ve(require("node:events"));var K0=class extends PI{constructor(r){super(new QS,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${uNt(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(ft[n],this.env[o]),this.setConfig(ft[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new gWe.default),this.emitters.get(r)?.on("change",n)}};function uNt(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(uNt,"camelCaseToSnakeCaseAllCaps");var dNt="unknown-editor",AWe="unknown-editor-plugin",LV=class extends fn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:dNt,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:AWe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function yWe(t){return t.getEditorPluginInfo().name!==AWe}s(yWe,"hasValidInfo");f();var xWe=require("node:events");var CWe="initialize",Fy=class{constructor(){this.emitter=new xWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(CWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(CWe)}};f();var My=Ve(wm());var fNt=new Map([[4,My.MessageType.Log],[3,My.MessageType.Info],[2,My.MessageType.Warning],[1,My.MessageType.Error]]),FV=class extends Va{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!Lq(e)&&n!=="console")return;let o={type:fNt.get(r),message:h3e(n,...i)},a=e.get(yr).connection;try{a.sendNotification(new My.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof My.ConnectionError)return;throw l}}};f();var vWe=Ve(Za());var MV=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(yr).connection.sendNotification(new vWe.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function bWe(t){let e=t.get(Nl),r=e.deactivate();e.setReporter(new MV(t)),e.setRestrictedReporter(new MV(t,!0)),await r}s(bWe,"setupRedirectingTelemetryReporters");f();f();var QV=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Dt(e,"installed.reinstall"):Dt(e,"installed.new")}handleUpgrade(e){Dt(e,"installed.upgrade")}handleUninstall(e){Dt(e,"uninstalled")}};var e6=Ve(J0e());var QR=class extends QV{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(fn).getEditorPluginInfo();return await e.get(Ec).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Ec).listSettings()).length>0}async markInstalled(e){let r=e.get(fn).getEditorPluginInfo();await e.get(Ec).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(fn).getEditorPluginInfo(),n=await e.get(Ec).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,e6.gt)((0,e6.coerce)(r.version),(0,e6.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(fn).getEditorPluginInfo();await e.get(Ec).delete("versions",r.name),(await e.get(Ec).listKeys("versions")).length===0&&await e.get(Ec).deleteSetting("versions")}};f();var EWe=require("events"),ofe=Ve(require("path")),OV=Ve(Za());var ife="didChangeWatchedFiles",pNt={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},lh=class t{constructor(e){this.ctx=e;this.emitter=new EWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new OV.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(yr).connection}init(){this.ctx.get(Go).getCapabilities().watchedFiles&&this.connection.onNotification(OV.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(Go).getCapabilities().watchedFiles)return pNt;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=ofe.extname(c).toLowerCase();if(!E8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(ife,e)}offDidChangeWatchedFiles(e){this.emitter.off(ife,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=ofe.extname(o.uri).toLowerCase();if(!E8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:n.push(l);break;case 2:r.push(l);break;case 3:i.push(l);break}}this.emitter.emit(ife,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(vn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var mNt=I.Object({uri:I.String({minLength:1})});async function hNt(t,e,r){let n=await t.get(vn).getOrReadTextDocument(r);return[{status:ys(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(hNt,"handleCheckFileStatusChecked");var IWe=st(mNt,hNt);f();var gNt=I.Object({});function TWe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(TWe,"calculatePercentRemaining");async function ANt(t,e,r){let n=await t.get(kn).getSession(t);if(n){let i=await hte(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:TWe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:TWe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:tn.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:tn.InternalError,message:"Not signed in"}]}s(ANt,"handleCheckQuotaChecked");var wWe=st(gNt,ANt);f();var yNt=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function CNt(t,e,r){return[await t.get(kn).checkAndUpdateStatus(t,r.options),null]}s(CNt,"handleCheckStatusChecked");var _We=st(yNt,CNt);f();f();f();f();f();f();function SWe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(SWe,"filterUnsupportedReferences");function RWe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(RWe,"convertToCopilotReferences");var kWe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var Db=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,SWe(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};f();var sl=class{static{s(this,"ConversationInspector")}};f();var sfe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ws=class{constructor(e){this.ctx=e;this.progressEntries=new Kr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Ur.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();var bA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e,r){let n=this.githubRepositoryInfoCache.get(`${e}/${r}`);if(n)return n;let i=await this._doGetRepositoryInfo(e,r);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(`${e}/${r}`,o),o}throw new Error(`Failed to fetch repository info for ${e}/${r}`)}async _doGetRepositoryInfo(e,r){let n=await this.ctx.get(Qr).getGitHubSession(),i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};n&&(i.Authorization=`Bearer ${n.accessToken}`);let{apiUrl:o}=this.ctx.get(Ml).getConfiguredUrls(),a=new URL(`repos/${e}/${r}`,o).href;return this.ctx.get(on).fetch(a,{method:"GET",headers:i})}async isAvailable(e,r){try{return(await this._doGetRepositoryInfo(e,r)).ok}catch{return!1}}};f();f();f();var DWe=Ve(J0());var EA=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-l)}}let i=new St([(0,DWe.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},l={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[l,.4],[c,.2]],d=new St(u.filter(([p,m])=>!OR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:_u(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||OR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new St([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function OR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(OR,"isEmptyRange");var PWe=Ve(require("path"));var NWe=I.Object({uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa)}),afe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e),i=ys(n);if(await this.turnContext.collectFile(au,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new EA(n.document,e.selection,e.visibleRange),l=r.getRelativePath(n.document);if(i==="empty")return new St([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(OR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new St([...c,...u])}else if(n.status==="invalid")return new St([`The currently open file \`${PWe.basename(e.uri)}\` is content excluded.`])}},au="current-editor",UV=class{constructor(e){this._resolver=e;this.id=au;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new afe(e)}};f();f();var xl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},lfe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},cfe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Xl=class{constructor(e,r,n,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new lfe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new cfe(this._processor(e),this.id)}};var LWe=I.Object({name:I.String(),url:I.String()}),FWe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(LWe)})),remotes:I.Optional(I.Array(LWe))}),ufe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(IA,"git repository information");let r=[];return r.push([new St(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new St([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new St([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new St(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new St([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new St(r)}},IA="git-metadata",qV=class extends Xl{static{s(this,"GitMetadataSkill")}constructor(e){super(IA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new ufe(r))}};async function MWe(t){let e=await t.skillResolver.resolve(au);if(e){let a=e.uri,l=Jx(t.ctx,a);if(oTe(l))return{repoInfo:l,skillUsed:au}}let r=await t.skillResolver.resolve(IA);if(!r||!r.remotes||r.remotes.length===0){Ur.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Mte(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:IA}}s(MWe,"extractRepoInfo");async function QWe(t){let e=[];return await xNt(t,e),await vNt(t,e),await bNt(t,e),e}s(QWe,"skillsToReference");async function xNt(t,e){let r=await ENt(t);r&&e.push(r)}s(xNt,"addRepositoryReference");async function vNt(t,e){let r=await INt(t);r&&e.push(r)}s(vNt,"addSelectionReference");async function bNt(t,e){let r=[],n=await wNt(t);n&&r.push(n),r.push(...await _Nt(t)),r.length>0&&e.push(...r)}s(bNt,"addFileReferences");async function ENt(t){let e=await MWe(t);if(e){let r=t.ctx.get(bA),n=e.repoInfo.owner,i=e.repoInfo.repo;if(await r.isAvailable(n,i))return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:(await r.getRepositoryInfo(n,i)).id}}}}s(ENt,"gitMetadataToReference");async function INt(t){let e=await t.skillResolver.resolve(au);if(e&&e.selection){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return TNt(e,n.document)}}s(INt,"currentEditorToSelectionReference");function TNt(t,e){if(t.selection&&!OR(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(TNt,"extractSelection");async function wNt(t){let e=await t.skillResolver.resolve(au);if(e){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(wNt,"currentEditorToFileReference");async function _Nt(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(vn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=ys(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(_Nt,"fileReferenceToPlatformFileReference");f();f();f();f();var VWe=Ve(HV()),mfe=Ve(require("path"));var $We=500,MNt=Math.floor(.25*$We),jV=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=mfe.default.extname(__filename)===".ts"?mfe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await VWe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),B=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:B,end:B+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:$We,overlap:MNt}}),n}};var QNt="fixedSize",ONt=new Map([["fixedSize",jV]]);function zWe(t){let e=t==="default"?QNt:t,r=ONt.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(zWe,"getChunkingAlgorithm");f();f();var VV=Ve(Ex()),TA=Ve(require("fs")),YWe=require("os"),Tp=Ve(require("path")),UR=require("process");var hfe=5e4,UNt=new _t("workspaceChunks"),$V=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Ti(r.uri),i=(0,VV.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Tp.join(qNt(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,VV.SHA256)(e).toString().substring(0,this.pathHashLength),n=Tp.basename(e);return Tp.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await TA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await TA.promises.mkdir(Tp.dirname(n),{recursive:!0}),await TA.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){UNt.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await TA.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await TA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=Tp.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(Tp.join(this.cacheRootPath,n))}}async getFileHash(e){let r=Wo(e),n="";return r&&(n=await TA.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,VV.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=Wo(e);if(!i)return;async function o(p){try{return(await TA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let r=pl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=Wo(e);if(!r)return[];let n;try{n=await TA.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=pl(Tp.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await TA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function qNt(){return UR.env.XDG_CACHE_HOME&&Tp.isAbsolute(UR.env.XDG_CACHE_HOME)?UR.env.XDG_CACHE_HOME+"/github-copilot":(0,YWe.platform)()==="win32"?UR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":UR.env.HOME+"/.cache/github-copilot"}s(qNt,"getXdgCachePath");var gfe=1e4;var zV=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new yfe;this.status="notStarted",this.workspaceChunks=new $V(e,r),this.cancellationToken=new Afe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(nu).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>gfe&&(this._fileCountExceeded=!0,n=n.slice(0,gfe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ta(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>hfe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ta(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>hfe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>gfe&&(this._fileCountExceeded=!0),h4e(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},Afe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},yfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ha=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=zWe(r),i=new n;return new zV(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=an.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Dt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),l=an.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Dt(e,"index.chunk",l),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};f();f();f();f();f();function KV(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(KV,"toChatModeEnum");var Pb=class{constructor(e,r){this.request=e;this.telemetryId=sr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}},YV=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=sr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();f();f();var KWe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},JWe="Alright, This response contains a code citation.";f();var XWe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var ZWe=Ve(require("fs")),ju=Ve(require("path"));var Cfe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],xfe="test_",n6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},i6=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Ti(e),n=ju.extname(r).replace(".",""),i=n6[n]??{location:"sameFolder",prefix:xfe,suffix:Cfe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let d=r.replace(`.${n}`,u+"."+n);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Wo(hd(e)),l===void 0)return}else{let u=Wo(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=ju.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=pl(l);if(await this.fileExists(c))return bo(c,o[0])}parseTestFilePath(e){try{return pl(e)}catch(r){Mr.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Ti(e),n=ju.extname(r).replace(".",""),i=n6[n]??{location:"sameFolder",prefix:xfe,suffix:Cfe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=r.substring(0,r.length-c.length-1-n.length)+"."+n;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=hd(e):l=this.determineImplFolder(e);for(let c of o){let u=bo(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=Wo(e);if(r===void 0)return;let n=ju.extname(Ti(e)).replace(".",""),i,o=n6[n]?.location??"sameFolder";o==="sameFolder"?i=ju.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,n6[n]);if(a.length>0)return pl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${ju.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(l),n?.suffix&&n?.suffix.some(c=>a.endsWith(c+r))&&o.push(l)}return o}_readdir(e){return ZWe.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&Wo(this.baseUri))??"",i=ju.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(ju.sep)}getRelativeTestFolder(e,r,n,i){let o=ju.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=ju.extname(Ti(e)).replace(".",""),n=hd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function o6(t){let e=Ti(t),r=ju.extname(e),n=n6[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(Cfe.some(o=>e.endsWith(o+r))||e.startsWith(xfe))}s(o6,"isTestFile");f();var eGe=["indexed","indexing","not_indexed"],Nb=class{constructor(){this._cache=new Kr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Lf(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=B1(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function tGe(t,e,r,n){let i=Bo(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Qr).getToken(),c=EM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!n.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await WNt(t,c,u,e.modelId,p,n);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(tGe,"fetchEmbeddings");async function WNt(t,e,r,n,i,o){let a=sr(),l=i.map(u=>u.text),c=await iI(t,e,r,void 0,a,{input:l,model:n,dimensions:1024},o,Vx(t));if(c.status!==200||o.isCancellationRequested){Ta(t,new Qy(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(WNt,"sendEmbeddingsRequest");f();f();var JV=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(r.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*r[c],0)/(n*i)}terminateScoring(){}};var GNt="cosine",HNt=new Map([["cosine",JV]]);function rGe(t){let e=t==="default"?GNt:t,r=HNt.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(rGe,"getScoringAlgorithm");f();var X0=class{constructor(){this.workspaceScoringProviders=new Kr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=rGe(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var nGe={modelFamily:wM.textEmbedding3Small,scoringType:"default",dimensions:null};async function iGe(t,e,r,n,i,o,a,l=nGe){let c={...nGe,...l},u=VNt(t,e,r,n);Ur.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(na).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await tGe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=$Nt(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return Ur.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(B=>u.find(N=>N.id===B.id).id)}s(iGe,"rerankSnippets");function VNt(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(VNt,"formatEmbeddingsInput");function $Nt(t,e,r,n,i){let o=t.get(X0);return r.map(l=>({id:l.id,score:o.score(t,e,n.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s($Nt,"scoreEmbeddings");f();f();f();var bfe=Ve(HV());var zNt=.75,YNt=1.2,KNt=47,XV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await ZV();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(l=>l.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,KNt),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(ha).getChunks(this.workspaceFolder),n=G1(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=G1(n,o=>o.chunk);return await JNt(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(ha).getChunks(this.workspaceFolder),a=new vfe(i);for await(let l of o){let c=await XNt({...l,chunk:l.chunk.toLowerCase()},e,r,n);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function JNt(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let c of e){o++;let u=bfe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(JNt,"calculateIDFValues");async function XNt(t,e,r,n){return{score:await bfe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:YNt,b:zNt}}),...t}}s(XNt,"calculateBM25Score");var vfe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var e7t="bm25",t7t=new Map([["bm25",XV]]);function oGe(t){let e=t==="default"?e7t:t,r=t7t.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(oGe,"getRankingAlgorithm");var Tc=class{constructor(){this.workspaceRankingProviders=new Kr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=oGe(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};f();async function sGe(t,e){let r=t.ctx,n=await xo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(wc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new ra(r),c=await gc(r,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Ur.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";Ta(r,new Qy(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(sGe,"parseUserQuery");var aGe=Ve(J0());var Qy=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},e$=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(ha),o=i.status(e.turn.workspaceFolder),a=n.get(Tc),l=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(r){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,c).then(u=>{if(i.status(c)==="completed")return a.initialize(n,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(n,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(ha).chunkCount(n);if(a===0)return[];r.chunkCount=a;let l,c=performance.now();try{l=await sGe(e,e.cancelationToken)}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(Tc),p=[],m=performance.now();try{let g=await d.query(i,n,l);r.localSnippetCount=g.length,p=g}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Vr(e.turn.request.message),l=[];try{l=await iGe(o,i,a,r,5,e.cancelationToken,n)}catch(d){let p=new Qy(d);Ta(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(vn);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=jo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...x4e},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Ur.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(ha).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return aGe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var cGe=Ve(lGe()),n$=Ve(HV()),uGe=Ve(require("os")),dGe=Ve(J0());var i7t=Math.min(Math.max(Math.ceil(uGe.cpus().length/2),1),10),s6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new cGe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await n$.start({maxWorkers:i7t})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await n$.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},ZV=s6.startWorkerPool.bind(s6);var r3n=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),Tfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(qR);return}let r=[],n=this.turnContext.ctx.get(vn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let d=new EA(u.document,c,c),p=new St([l]),h=o6(a)?.5:.8;r.push([`Code excerpt from file \`${Wo(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(WR,a,ys(u),c)}}if(r.length>0)return r.unshift([new St(["The user wants you to consider the following snippets when computing your answer."]),1]),new St(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},qR="collect-project-context",t$=class extends PR{constructor(r,n=[new e$]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(gA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await ZV(),!r.uri))return;let n=this.ctx.get(ha),i=this.ctx.get(nu),o=this.ctx.get(Tc),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(ha);if(!r)return;let i=n.getParentFolder(r);if(i){let l=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Tc).deleteEmbeddings(this.ctx,i,l);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Tc).terminateRanking(this.ctx,r),this.ctx.get(X0).terminateScoring(this.ctx,r),n.workspaceCount===0&&await s6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(ha),o=this.ctx.get(Tc),a=this.ctx.get(X0);for(let l of n)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await ZV();try{let i=r.documents.map(c=>c.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(ha),l=this.ctx.get(Tc);if(r.type==="delete"||r.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(r.type==="create"||r.type==="update"){let c=await a.chunk(this.ctx,o,r.documents);await l.addChunks(this.ctx,o,c)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(qR,"Collecting relevant project context"),await r.info(dGe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async l=>l.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let l of eGe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(r);if(await v4e(r,a.providerType,c),l.length===0){await r.steps.error(qR,"No project context found");return}return await r.steps.finish(qR),l}case"indexing":{await r.steps.error(qR,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(qR,"No project context available");return}}}},WR="project-context",r$=class extends Xl{static{s(this,"ProjectContextSkill")}constructor(e){super(WR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new Tfe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var fGe=I.Object({labels:I.Array(I.String())}),wfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new St(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new St([`- ${n}`]),.9]),this.turnContext.collectLabel(ch,n)}),new St(r)}},ch="project-labels",i$=class{constructor(e){this._resolver=e;this.id=ch;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new wfe(e)}};f();var o$=Ve(J0());var mGe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},hGe=o$.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,gGe=o$.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,o7t=o$.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,_fe=`

`,pGe=hGe+_fe+gGe;function AGe(t){let e=1;if(t.length===0)return{reply:pGe,vulnerabilities:e};if(t==="0")return{reply:pGe,vulnerabilities:0};if(t==="help")return{reply:o7t,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=hGe+_fe:i==="c"&&(n+=gGe+_fe);return{reply:n.trimEnd(),vulnerabilities:e}}s(AGe,"parseVulnerabilitiesInstructions");var yGe=Ve(J0());var s7t="Oops, your response got filtered. Vote down if you think this shouldn't have happened",a7t="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Sfe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},l7t=new Sfe,Rfe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Zl(a7t,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},c7t=new Rfe,kfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Zl("Alright, I'm producing a notification",void 0,[],o)}},u7t=new kfe,Bfe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Zl(s7t,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},d7t=new Bfe,Dfe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Zl(await xGe(e))}},f7t=new Dfe,Pfe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[ch,au]}instructions(e,r){return"Create a function that prints a christmas tree"}},p7t=new Pfe,Nfe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Zl(Vr(e.turn.request.message))}},m7t=new Nfe,Lfe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(ec).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=yGe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Zl(i)}return new Zl("No prompt available")}},h7t=new Lfe,Ffe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Zl(await vGe(e,n,i))}},g7t=new Ffe,Mfe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=AGe(r);for(let o=0;o<i;o++)e.turn.annotations.push(mGe);return new Zl(n,void 0,e.turn.annotations)}},A7t=new Mfe,Qfe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(KWe),new Zl(JWe,void 0,e.turn.annotations)}},y7t=new Qfe,Ofe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Zl(XWe)}},C7t=new Ofe,Ufe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},x7t=new Ufe,qfe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[WR]}},v7t=new qfe,Wfe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Zl("Alright, I'm producing a notification",void 0,[],[],[],e)}},b7t=new Wfe;function CGe(){return[l7t,c7t,u7t,d7t,p7t,f7t,m7t,h7t,g7t,A7t,y7t,b7t,C7t,x7t,v7t]}s(CGe,"getDebugTemplates");f();f();function Fb(t,e){if(t.length==0)return new St([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new St(r)}s(Fb,"weighElidableList");var bGe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:wa}))}),Gfe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Mb,e.uri,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(Mb,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Mb,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new St([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),Fb(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new St([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let l=r.document.detectedLanguageId;i.push(new St([["```"+l,1],[_u(a),.8],["```",1]]))}return new St(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new St([n])}},Mb="problems-in-active-document",s$=class extends Xl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Mb,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new Gfe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var a$=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Rr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new i6(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=o6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!o6(e))return;let n=this.turnContext.ctx.get(Rr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new i6(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${E7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${I7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${T7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(uh,e,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[_u(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(lo).stat(e),!0}catch{return!1}}}},E7t="Code excerpt from the implementation source file",I7t="Code excerpt from the test file",T7t="Code excerpt from an example test file";var EGe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),jfe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=new a$(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(uh,e.testFileUri,ys(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(uh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(uh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(uh,e.testFileUri,ys(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},uh="test-context",l$=class extends Xl{static{s(this,"TestContextSkill")}constructor(e){super(uh,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new jfe(r))}};f();var IGe=Ve(J0());var TGe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:wa}))}),Vfe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(wT,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new St(["The latest test run produced the following failures and errors:"]);return new St([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(wT,o,ys(l)),l.status==="valid"){let c=r.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);n.push([d,1])}}if(n.length>0)return new St(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${r}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new St([IGe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new St(n)}appendCode(e,r,n){let i=[new St([`
The code of file \`${r}\` is:
`]),.6],o=[new St([["```"+n.detectedLanguageId,1],[_u(n.getText()),.9],["```",1]]),.7];return new St([[e,1],i,o])}},wT="test-failures",c$=class extends Xl{static{s(this,"TestFailuresSkill")}constructor(e){super(wT,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new Vfe(r))}};var wp=Ve(J0());var Zl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},_T=class{constructor(e,r,n,i,o=[],a=[],l,c=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},w7t=new _T("tests","Generate unit tests","Generate Tests",wp.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[uh,wT],["chat-panel","editor"]),_7t=new _T("simplify","Simplify the code","Simplify This",wp.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],wp.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),S7t=new _T("fix","Fix problems and compile errors","Fix This",wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Mb],["editor","chat-panel","inline"],wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),R7t=new _T("explain","Explain how the code works","Explain This",wp.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],wp.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),k7t=new _T("doc","Document the current selection of code","Generate Docs",wp.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],wp.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),$fe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=Kfe(e.conversation),n=wp.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Zl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Zl(n)}},B7t=new $fe,zfe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=Yfe(e.ctx).filter(i=>i!=this),n=wp.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Zl(n)}},D7t=new zfe;function a6(){return[w7t,_7t,S7t,R7t,k7t,B7t,D7t,...CGe()]}s(a6,"getPromptTemplates");function Yfe(t){let e=a6();return!vB(t)&&!tm(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(Yfe,"getUserFacingPromptTemplates");var Jfe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Hi=class{constructor(e){this.ctx=e;this.conversations=new Kr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new YV([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(xl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new Jfe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,l,c){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),l&&l.length>0&&(r.ignoredSkills=l.map(d=>({skillId:d}))),c&&(r.agent={agentSlug:c.agentSlug},r.confirmationResponse=c),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&Vr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Vr(r.request.message),"@");(await _A(this.ctx)).find(l=>l.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(Vr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Vr(r.request.message),"/"),o=a6().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(xl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function qGe(t){return typeof t>"u"||t===null}s(qGe,"isNothing");function P7t(t){return typeof t=="object"&&t!==null}s(P7t,"isObject");function N7t(t){return Array.isArray(t)?t:qGe(t)?[]:[t]}s(N7t,"toArray");function L7t(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(L7t,"extend");function F7t(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(F7t,"repeat");function M7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(M7t,"isNegativeZero");var Q7t=qGe,O7t=P7t,U7t=N7t,q7t=F7t,W7t=M7t,G7t=L7t,vl={isNothing:Q7t,isObject:O7t,toArray:U7t,repeat:q7t,isNegativeZero:W7t,extend:G7t};function WGe(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(WGe,"formatError");function c6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=WGe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(c6,"YAMLException$1");c6.prototype=Object.create(Error.prototype);c6.prototype.constructor=c6;c6.prototype.toString=s(function(e){return this.name+": "+WGe(this,e)},"toString");var qd=c6;function Xfe(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(Xfe,"getLine");function Zfe(t,e){return vl.repeat(" ",e-t.length)+t}s(Zfe,"padStart");function H7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=Xfe(t.buffer,n[a-c],i[a-c],t.position-(n[a]-n[a-c]),p),l=vl.repeat(" ",e.indent)+Zfe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=Xfe(t.buffer,n[a],i[a],t.position,p),l+=vl.repeat(" ",e.indent)+Zfe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=vl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=Xfe(t.buffer,n[a+c],i[a+c],t.position-(n[a]-n[a+c]),p),l+=vl.repeat(" ",e.indent)+Zfe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(H7t,"makeSnippet");var j7t=H7t,V7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$7t=["scalar","sequence","mapping"];function z7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(z7t,"compileStyleAliases");function Y7t(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(V7t.indexOf(r)===-1)throw new qd('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=z7t(e.styleAliases||null),$7t.indexOf(this.kind)===-1)throw new qd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(Y7t,"Type$1");var lu=Y7t;function wGe(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(wGe,"compileList");function K7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(K7t,"compileMap");function tpe(t){return this.extend(t)}s(tpe,"Schema$1");tpe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof lu)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new qd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof lu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new qd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new qd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof lu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(tpe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=wGe(i,"implicit"),i.compiledExplicit=wGe(i,"explicit"),i.compiledTypeMap=K7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var J7t=tpe,X7t=new lu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),Z7t=new lu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),eLt=new lu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),tLt=new J7t({explicit:[X7t,Z7t,eLt]});function rLt(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(rLt,"resolveYamlNull");function nLt(){return null}s(nLt,"constructYamlNull");function iLt(t){return t===null}s(iLt,"isNull");var oLt=new lu("tag:yaml.org,2002:null",{kind:"scalar",resolve:rLt,construct:nLt,predicate:iLt,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function sLt(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(sLt,"resolveYamlBoolean");function aLt(t){return t==="true"||t==="True"||t==="TRUE"}s(aLt,"constructYamlBoolean");function lLt(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(lLt,"isBoolean");var cLt=new lu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:sLt,construct:aLt,predicate:lLt,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function uLt(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(uLt,"isHexCode");function dLt(t){return 48<=t&&t<=55}s(dLt,"isOctCode");function fLt(t){return 48<=t&&t<=57}s(fLt,"isDecCode");function pLt(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!uLt(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!dLt(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!fLt(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(pLt,"resolveYamlInteger");function mLt(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(mLt,"constructYamlInteger");function hLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!vl.isNegativeZero(t)}s(hLt,"isInteger");var gLt=new lu("tag:yaml.org,2002:int",{kind:"scalar",resolve:pLt,construct:mLt,predicate:hLt,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ALt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function yLt(t){return!(t===null||!ALt.test(t)||t[t.length-1]==="_")}s(yLt,"resolveYamlFloat");function CLt(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(CLt,"constructYamlFloat");var xLt=/^[-+]?[0-9]+e/;function vLt(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vl.isNegativeZero(t))return"-0.0";return r=t.toString(10),xLt.test(r)?r.replace("e",".e"):r}s(vLt,"representYamlFloat");function bLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||vl.isNegativeZero(t))}s(bLt,"isFloat");var ELt=new lu("tag:yaml.org,2002:float",{kind:"scalar",resolve:yLt,construct:CLt,predicate:bLt,represent:vLt,defaultStyle:"lowercase"}),ILt=tLt.extend({implicit:[oLt,cLt,gLt,ELt]}),TLt=ILt,GGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),HGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function wLt(t){return t===null?!1:GGe.exec(t)!==null||HGe.exec(t)!==null}s(wLt,"resolveYamlTimestamp");function _Lt(t){var e,r,n,i,o,a,l,c=0,u=null,d,p,m;if(e=GGe.exec(t),e===null&&(e=HGe.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(_Lt,"constructYamlTimestamp");function SLt(t){return t.toISOString()}s(SLt,"representYamlTimestamp");var RLt=new lu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:wLt,construct:_Lt,instanceOf:Date,represent:SLt});function kLt(t){return t==="<<"||t===null}s(kLt,"resolveYamlMerge");var BLt=new lu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:kLt}),spe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function DLt(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=spe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(DLt,"resolveYamlBinary");function PLt(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=spe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}s(PLt,"constructYamlBinary");function NLt(t){var e="",r=0,n,i,o=t.length,a=spe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(NLt,"representYamlBinary");function LLt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(LLt,"isBinary");var FLt=new lu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:DLt,construct:PLt,predicate:LLt,represent:NLt}),MLt=Object.prototype.hasOwnProperty,QLt=Object.prototype.toString;function OLt(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,QLt.call(i)!=="[object Object]")return!1;for(o in i)if(MLt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(OLt,"resolveYamlOmap");function ULt(t){return t!==null?t:[]}s(ULt,"constructYamlOmap");var qLt=new lu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:OLt,construct:ULt}),WLt=Object.prototype.toString;function GLt(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],WLt.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(GLt,"resolveYamlPairs");function HLt(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(HLt,"constructYamlPairs");var jLt=new lu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:GLt,construct:HLt}),VLt=Object.prototype.hasOwnProperty;function $Lt(t){if(t===null)return!0;var e,r=t;for(e in r)if(VLt.call(r,e)&&r[e]!==null)return!1;return!0}s($Lt,"resolveYamlSet");function zLt(t){return t!==null?t:{}}s(zLt,"constructYamlSet");var YLt=new lu("tag:yaml.org,2002:set",{kind:"mapping",resolve:$Lt,construct:zLt}),jGe=TLt.extend({implicit:[RLt,BLt],explicit:[FLt,qLt,jLt,YLt]}),Ob=Object.prototype.hasOwnProperty,u$=1,VGe=2,$Ge=3,d$=4,epe=1,KLt=2,_Ge=3,JLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,XLt=/[\x85\u2028\u2029]/,ZLt=/[,\[\]\{\}]/,zGe=/^(?:!|!!|![a-z\-]+!)$/i,YGe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function SGe(t){return Object.prototype.toString.call(t)}s(SGe,"_class");function SA(t){return t===10||t===13}s(SA,"is_EOL");function RT(t){return t===9||t===32}s(RT,"is_WHITE_SPACE");function Wd(t){return t===9||t===32||t===10||t===13}s(Wd,"is_WS_OR_EOL");function HR(t){return t===44||t===91||t===93||t===123||t===125}s(HR,"is_FLOW_INDICATOR");function eFt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(eFt,"fromHexCode");function tFt(t){return t===120?2:t===117?4:t===85?8:0}s(tFt,"escapedHexLen");function rFt(t){return 48<=t&&t<=57?t-48:-1}s(rFt,"fromDecimalCode");function RGe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(RGe,"simpleEscapeSequence");function nFt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(nFt,"charFromCodepoint");var KGe=new Array(256),JGe=new Array(256);for(ST=0;ST<256;ST++)KGe[ST]=RGe(ST)?1:0,JGe[ST]=RGe(ST);var ST;function iFt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||jGe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(iFt,"State$1");function XGe(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=j7t(r),new qd(e,r)}s(XGe,"generateError");function $r(t,e){throw XGe(t,e)}s($r,"throwError");function f$(t,e){t.onWarning&&t.onWarning.call(null,XGe(t,e))}s(f$,"throwWarning");var kGe={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&$r(e,"duplication of %YAML directive"),n.length!==1&&$r(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&$r(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&$r(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&f$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&$r(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],zGe.test(i)||$r(e,"ill-formed tag handle (first argument) of the TAG directive"),Ob.call(e.tagMap,i)&&$r(e,'there is a previously declared suffix for "'+i+'" tag handle'),YGe.test(o)||$r(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{$r(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Qb(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||$r(t,"expected valid JSON character");else JLt.test(l)&&$r(t,"the stream contains non-printable characters");t.result+=l}}s(Qb,"captureSegment");function BGe(t,e,r,n){var i,o,a,l;for(vl.isObject(r)||$r(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],Ob.call(e,o)||(e[o]=r[o],n[o]=!0)}s(BGe,"mergeMappings");function jR(t,e,r,n,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&$r(t,"nested arrays are not supported inside keys"),typeof i=="object"&&SGe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&SGe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)BGe(t,e,o[u],r);else BGe(t,e,o,r);else!t.json&&!Ob.call(r,i)&&Ob.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,$r(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(jR,"storeMappingPair");function ape(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$r(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(ape,"readLineBreak");function al(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;RT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(SA(i))for(ape(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&f$(t,"deficient indentation"),n}s(al,"skipSeparationSpace");function h$(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Wd(r)))}s(h$,"testDocumentSeparator");function lpe(t,e){e===1?t.result+=" ":e>1&&(t.result+=vl.repeat(`
`,e-1))}s(lpe,"writeFoldedLines");function oFt(t,e,r){var n,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Wd(h)||HR(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Wd(i)||r&&HR(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Wd(i)||r&&HR(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),Wd(n))break}else{if(t.position===t.lineStart&&h$(t)||r&&HR(h))break;if(SA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,al(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Qb(t,o,a,!1),lpe(t,t.line-c),o=a=t.position,l=!1),RT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Qb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(oFt,"readPlainScalar");function sFt(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Qb(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else SA(r)?(Qb(t,n,i,!0),lpe(t,al(t,!1,e)),n=i=t.position):t.position===t.lineStart&&h$(t)?$r(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);$r(t,"unexpected end of the stream within a single quoted scalar")}s(sFt,"readSingleQuotedScalar");function aFt(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Qb(t,r,t.position,!0),t.position++,!0;if(l===92){if(Qb(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),SA(l))al(t,!1,e);else if(l<256&&KGe[l])t.result+=JGe[l],t.position++;else if((a=tFt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=eFt(l))>=0?o=(o<<4)+a:$r(t,"expected hexadecimal character");t.result+=nFt(o),t.position++}else $r(t,"unknown escape sequence");r=n=t.position}else SA(l)?(Qb(t,r,n,!0),lpe(t,al(t,!1,e)),r=n=t.position):t.position===t.lineStart&&h$(t)?$r(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}$r(t,"unexpected end of the stream within a double quoted scalar")}s(aFt,"readDoubleQuotedScalar");function lFt(t,e){var r=!0,n,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(al(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;r?E===44&&$r(t,"expected the node content, but found ','"):$r(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Wd(u)&&(p=m=!0,t.position++,al(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,VR(t,e,u$,!1,!0),v=t.tag,y=t.result,al(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===n)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),al(t,!0,e),VR(t,e,u$,!1,!0),b=t.result),h?jR(t,l,g,v,y,b,n,i,o):p?l.push(jR(t,null,g,v,y,b,n,i,o)):l.push(y),al(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(r=!0,E=t.input.charCodeAt(++t.position)):r=!1}$r(t,"unexpected end of the stream within a flow collection")}s(lFt,"readFlowCollection");function cFt(t,e){var r,n,i=epe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)epe===i?i=p===43?_Ge:KLt:$r(t,"repeat of a chomping mode identifier");else if((d=rFt(p))>=0)d===0?$r(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?$r(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(RT(p)){do p=t.input.charCodeAt(++t.position);while(RT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!SA(p)&&p!==0)}for(;p!==0;){for(ape(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),SA(p)){c++;continue}if(t.lineIndent<l){i===_Ge?t.result+=vl.repeat(`
`,o?1+c:c):i===epe&&o&&(t.result+=`
`);break}for(n?RT(p)?(u=!0,t.result+=vl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=vl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=vl.repeat(`
`,c):t.result+=vl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,r=t.position;!SA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Qb(t,r,t.position,!1)}return!0}s(cFt,"readBlockScalar");function DGe(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$r(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Wd(a))));){if(l=!0,t.position++,al(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,VR(t,e,$Ge,!1,!0),o.push(t.result),al(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)$r(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(DGe,"readBlockSequence");function uFt(t,e,r){var n,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$r(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Wd(n))E===63?(v&&(jR(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):$r(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=n;else{if(a=t.line,l=t.lineStart,c=t.position,!VR(t,r,VGe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);RT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Wd(E)||$r(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(jR(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)$r(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)$r(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),VR(t,e,d$,!0,i)&&(v?g=t.result:y=t.result),v||(jR(t,p,m,h,g,y,a,l,c),h=g=y=null),al(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)$r(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&jR(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(uFt,"readBlockMapping");function dFt(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&$r(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):$r(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Wd(a);)a===33&&(n?$r(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),zGe.test(i)||$r(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),ZLt.test(o)&&$r(t,"tag suffix cannot contain flow indicator characters")}o&&!YGe.test(o)&&$r(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{$r(t,"tag name is malformed: "+o)}return r?t.tag=o:Ob.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:$r(t,'undeclared tag handle "'+i+'"'),!0}s(dFt,"readTagProperty");function fFt(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&$r(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Wd(r)&&!HR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&$r(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(fFt,"readAnchorProperty");function pFt(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Wd(n)&&!HR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&$r(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Ob.call(t.anchorMap,r)||$r(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],al(t,!0,-1),!0}s(pFt,"readAlias");function VR(t,e,r,n,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=d$===r||$Ge===r,n&&al(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;dFt(t)||fFt(t);)al(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||d$===r)&&(u$===r||VGe===r?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(DGe(t,v)||uFt(t,v,y))||lFt(t,y)?d=!0:(a&&cFt(t,y)||sFt(t,y)||aFt(t,y)?d=!0:pFt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&$r(t,"alias node should not have any properties")):oFt(t,y,u$===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&DGe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$r(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ob.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||$r(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&$r(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$r(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(VR,"composeNode");function mFt(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(al(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&$r(t,"directive name must not be less than one character in length");a!==0;){for(;RT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!SA(a));break}if(SA(a))break;for(r=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&ape(t),Ob.call(kGe,n)?kGe[n](t,n,i):f$(t,'unknown document directive "'+n+'"')}if(al(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,al(t,!0,-1)):o&&$r(t,"directives end mark is expected"),VR(t,t.lineIndent-1,d$,!1,!0),al(t,!0,-1),t.checkLineBreaks&&XLt.test(t.input.slice(e,t.position))&&f$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&h$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,al(t,!0,-1));return}if(t.position<t.length-1)$r(t,"end of the stream or a document separator is expected");else return}s(mFt,"readDocument");function ZGe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new iFt(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,$r(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)mFt(r);return r.documents}s(ZGe,"loadDocuments");function hFt(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=ZGe(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(hFt,"loadAll$1");function gFt(t,e){var r=ZGe(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new qd("expected a single document in the stream, but found more")}}s(gFt,"load$1");var AFt=hFt,yFt=gFt,eHe={loadAll:AFt,load:yFt},tHe=Object.prototype.toString,rHe=Object.prototype.hasOwnProperty,cpe=65279,CFt=9,u6=10,xFt=13,vFt=32,bFt=33,EFt=34,rpe=35,IFt=37,TFt=38,wFt=39,_Ft=42,nHe=44,SFt=45,p$=58,RFt=61,kFt=62,BFt=63,DFt=64,iHe=91,oHe=93,PFt=96,sHe=123,NFt=124,aHe=125,cu={};cu[0]="\\0";cu[7]="\\a";cu[8]="\\b";cu[9]="\\t";cu[10]="\\n";cu[11]="\\v";cu[12]="\\f";cu[13]="\\r";cu[27]="\\e";cu[34]='\\"';cu[92]="\\\\";cu[133]="\\N";cu[160]="\\_";cu[8232]="\\L";cu[8233]="\\P";var LFt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],FFt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function MFt(t,e){var r,n,i,o,a,l,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&rHe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),r[a]=l;return r}s(MFt,"compileStyleMap");function QFt(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new qd("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+vl.repeat("0",n-e.length)+e}s(QFt,"encodeHex");var OFt=1,d6=2;function UFt(t){this.schema=t.schema||jGe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=vl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=MFt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?d6:OFt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(UFt,"State");function PGe(t,e){for(var r=vl.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(PGe,"indentString");function npe(t,e){return`
`+vl.repeat(" ",t.indent*e)}s(npe,"generateNextLine");function qFt(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(qFt,"testImplicitResolving");function m$(t){return t===vFt||t===CFt}s(m$,"isWhitespace");function f6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==cpe||65536<=t&&t<=1114111}s(f6,"isPrintable");function NGe(t){return f6(t)&&t!==cpe&&t!==xFt&&t!==u6}s(NGe,"isNsCharOrWhitespace");function LGe(t,e,r){var n=NGe(t),i=n&&!m$(t);return(r?n:n&&t!==nHe&&t!==iHe&&t!==oHe&&t!==sHe&&t!==aHe)&&t!==rpe&&!(e===p$&&!i)||NGe(e)&&!m$(e)&&t===rpe||e===p$&&i}s(LGe,"isPlainSafe");function WFt(t){return f6(t)&&t!==cpe&&!m$(t)&&t!==SFt&&t!==BFt&&t!==p$&&t!==nHe&&t!==iHe&&t!==oHe&&t!==sHe&&t!==aHe&&t!==rpe&&t!==TFt&&t!==_Ft&&t!==bFt&&t!==NFt&&t!==RFt&&t!==kFt&&t!==wFt&&t!==EFt&&t!==IFt&&t!==DFt&&t!==PFt}s(WFt,"isPlainSafeFirst");function GFt(t){return!m$(t)&&t!==p$}s(GFt,"isPlainSafeLast");function l6(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(l6,"codePointAt");function lHe(t){var e=/^\n* /;return e.test(t)}s(lHe,"needIndentIndicator");var cHe=1,ipe=2,uHe=3,dHe=4,GR=5;function HFt(t,e,r,n,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=n!==-1,g=-1,y=WFt(l6(t,0))&&GFt(l6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=l6(t,c),!f6(u))return GR;y=y&&LGe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=l6(t,c),u===u6)p=!0,h&&(m=m||c-g-1>n&&t[g+1]!==" ",g=c);else if(!f6(u))return GR;y=y&&LGe(u,d,l),d=u}m=m||h&&c-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?cHe:o===d6?GR:ipe:r>9&&lHe(t)?GR:a?o===d6?GR:ipe:m?dHe:uHe}s(HFt,"chooseScalarStyle");function jFt(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===d6?'""':"''";if(!t.noCompatMode&&(LFt.indexOf(e)!==-1||FFt.test(e)))return t.quotingType===d6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function c(u){return qFt(t,u)}switch(s(c,"testAmbiguity"),HFt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!n,i)){case cHe:return e;case ipe:return"'"+e.replace(/'/g,"''")+"'";case uHe:return"|"+FGe(e,t.indent)+MGe(PGe(e,o));case dHe:return">"+FGe(e,t.indent)+MGe(PGe(VFt(e,a),o));case GR:return'"'+$Ft(e)+'"';default:throw new qd("impossible error: invalid scalar style")}}()}s(jFt,"writeScalar");function FGe(t,e){var r=lHe(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(FGe,"blockHeader");function MGe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(MGe,"dropEndingNewline");function VFt(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,QGe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",n+=l+(!i&&!o&&c!==""?`
`:"")+QGe(c,e),i=o}return n}s(VFt,"foldString");function QGe(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,c="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(QGe,"foldLine");function $Ft(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=l6(t,i),n=cu[r],!n&&f6(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||QFt(r);return e}s($Ft,"escapeString");function zFt(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Uy(t,e,l,!1,!1)||typeof l>"u"&&Uy(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(zFt,"writeFlowSequence");function OGe(t,e,r,n){var i="",o=t.tag,a,l,c;for(a=0,l=r.length;a<l;a+=1)c=r[a],t.replacer&&(c=t.replacer.call(r,String(a),c)),(Uy(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Uy(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=npe(t,e)),t.dump&&u6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(OGe,"writeBlockSequence");function YFt(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),Uy(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Uy(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}s(YFt,"writeFlowMapping");function KFt(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new qd("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!n||i!=="")&&(m+=npe(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),Uy(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&u6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=npe(t,e)),Uy(t,e+1,d,!0,p)&&(t.dump&&u6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(KFt,"writeBlockMapping");function UGe(t,e,r){var n,i,o,a,l,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,tHe.call(l.represent)==="[object Function]")n=l.represent(e,c);else if(rHe.call(l.represent,c))n=l.represent[c](e,c);else throw new qd("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}s(UGe,"detectType");function Uy(t,e,r,n,i,o,a){t.tag=null,t.dump=r,UGe(t,r,!1)||UGe(t,r,!0);var l=tHe.call(t.dump),c=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(KFt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(YFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?OGe(t,e-1,t.dump,i):OGe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(zFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&jFt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new qd("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Uy,"writeNode");function JFt(t,e){var r=[],n=[],i,o;for(ope(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(JFt,"getDuplicateReferences");function ope(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)ope(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)ope(t[n[i]],e,r)}s(ope,"inspectNode");function XFt(t,e){e=e||{};var r=new UFt(e);r.noRefs||JFt(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Uy(r,0,n,!0,!0)?r.dump+`
`:""}s(XFt,"dump$1");var ZFt=XFt,eMt={dump:ZFt};function upe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(upe,"renamed");var YBn=eHe.load,KBn=eHe.loadAll,dpe=eMt.dump;var JBn=upe("safeLoad","load"),XBn=upe("safeLoadAll","loadAll"),ZBn=upe("safeDump","dump");var kT=Ve(J0());var fpe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},ec=class{constructor(){this.dump=new Kr(25);this.promptsDump=new Kr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new fpe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function fHe(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(fHe,"filterConversationTurns");function Kfe(t){return fHe(t).getLastTurn()?.id}s(Kfe,"getLastTurnId");async function xGe(t){let e=fHe(t.conversation),r=Kfe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(ec).getDump(r),o=nMt(i,e.turns);Mr.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await iMt(i,t.ctx);return kT.default`
        ${rMt(t.conversation,r)}
        ${tMt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(xGe,"getConversationDump");function tMt(t){let e=t.get(fn);return kT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(tMt,"getEditorInfoDumpMessage");function rMt(t,e){return kT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(rMt,"getInfoDumpMessage");async function vGe(t,e,r){let n=t.ctx.get(xl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Hi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Vr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Vr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=kT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=n.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=kT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${dpe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=kT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(vGe,"getSkillsDump");function nMt(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:Vr(n.request.message)};return n.response&&(o.response=Vr(n.response.message)),o})};return dpe(r)}s(nMt,"toSimulationFormat");async function iMt(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(vn).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();Mr.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(iMt,"fileDump");f();function ppe(t,e){let r=Bo(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(Vr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(ppe,"countMessagesTokens");f();function pHe(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=r?`The user is logged in as ${r} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(pHe,"chatBasePrompt");f();f();f();f();f();function mHe(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([_u(i.join(`
`)),1]),i=[],r.push([new St([o]),1])):r.push([new St([o]),1]),n=!n):n?i.push(o):r.push([new St([o]),.8]);return n&&(r.push([_u(i.join(`
`)),1]),r.push([new St(["```"]),1])),new St(r)}s(mHe,"fromMessage");function $R(t){let e=mpe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=hHe(i.request,n+1),a=i.response&&i.response?.type!=="meta"?hHe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(mHe(l))}return r.length>0?new St([[new St(["Consider the following conversation history:"]),1],[Fb(r,"inverseLinear"),1]]):null}s($R,"fromHistory");var oMt=5;function mpe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&Vr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,oMt).reverse()}s(mpe,"filterTurns");function hHe(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=Vr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${Vr(t.message)}`}s(hHe,"formatTurnMessage");f();f();f();var sMt=4,hpe={skillIds:[]},g$=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:l},u=await this.ctx.get(wc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,d);return m.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,d)),await e.ctx.get(sl).inspectFetchResult(m),this.handleResult(m,d,Vr(a),o,u.toolConfig)}else return hpe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),hpe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,sMt);else return Ur.error(this.ctx,"Missing tool call in meta prompt response"),hpe;let c=r.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:n});return Dt(this.ctx,`${Bu(i)}.metaPrompt`,c,0),Dt(this.ctx,`${Bu(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Dt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var A$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return ue(e,r,"org.springframework.boot","Spring Boot"),ue(e,r,"jakarta.jakartaee-api","Jakarta EE"),ue(e,r,"javax:javaee-api","Java EE"),ue(e,r,"org.apache.struts:struts2-core","Apache Struts"),ue(e,r,"org.hibernate:hibernate-core","Hibernate"),ue(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),ue(e,r,"javax.faces:jsf-api","JSF"),ue(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"com.google.guava","Google Guava"),ue(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),ue(e,r,"org.apache.commons:commons-io","Apache Commons IO"),ue(e,r,"joda-time:joda-time","Joda-Time"),ue(e,r,"com.google.code.gson:gson","Google Gson"),ue(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),ue(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),ue(e,r,"org.apache.commons:commons-net","Apache Commons Net"),ue(e,r,"org.apache.poi:poi","Apache POI"),ue(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),ue(e,r,"junit:junit","JUnit"),ue(e,r,"org.testng:testng","TestNG"),ue(e,r,"org.spockframework:spock-core","Spock"),ue(e,r,"io.cucumber:cucumber-java","Cucumber"),ue(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"org.mockito","Mockito"),ue(e,r,"org.assertj","AssertJ"),ue(e,r,"org.hamcrest","Hamcrest"),ue(e,r,"org.powermock","PowerMock"),ue(e,r,"org.jmock","JMock"),ue(e,r,"org.easymock","EasyMock"),ue(e,r,"org.jmockit:jmockit","JMockit"),ue(e,r,"com.github.tomakehurst:wiremock","WireMock"),ue(e,r,"org.dbunit:dbunit","DBUnit"),ue(e,r,"com.icegreen:greenmail","GreenMail"),ue(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ue(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),ue(e,r,"io.rest-assured:rest-assured","Rest-Assured"),ue(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ue(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},y$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"@types/node","Node.js"),ue(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||ue(e,r,"react","React"),ue(e,r,"angular","Angular"),ue(e,r,"vue","Vue.js"),ue(e,r,"ember","Ember.js"),ue(e,r,"backbone","Backbone.js"),ue(e,r,"meteor","Meteor"),ue(e,r,"polymer","Polymer"),ue(e,r,"aurelia","Aurelia"),ue(e,r,"knockout","Knockout.js"),ue(e,r,"dojo","Dojo Toolkit"),ue(e,r,"mithril","Mithril.js"),ue(e,r,"marionette","Marionette.js"),ue(e,r,"marko","Marko.js"),ue(e,r,"svelte","Svelte"),ue(e,r,"hyperapp","Hyperapp"),ue(e,r,"inferno","Inferno.js"),ue(e,r,"preact","Preact"),ue(e,r,"riot","Riot.js"),ue(e,r,"moon","Moon.js"),ue(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"lodash","Lodash"),ue(e,r,"moment","Moment.js"),ue(e,r,"axios","Axios"),ue(e,r,"redux","Redux"),ue(e,r,"recoil","Recoil"),ue(e,r,"jquery","jQuery"),ue(e,r,"d3","D3.js"),ue(e,r,"underscore","Underscore.js"),ue(e,r,"ramda","Ramda"),ue(e,r,"immutable","Immutable.js"),ue(e,r,"rxjs","RxJS"),ue(e,r,"three","Three.js"),ue(e,r,"socket.io","Socket.IO"),ue(e,r,"express","Express.js"),ue(e,r,"next","Next.js"),ue(e,r,"puppeteer","Puppeteer"),ue(e,r,"cheerio","Cheerio"),ue(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"jest","Jest"),ue(e,r,"mocha","Mocha"),ue(e,r,"jasmine","Jasmine"),ue(e,r,"ava","AVA"),ue(e,r,"qunit","QUnit"),ue(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"chai","Chai"),ue(e,r,"sinon","Sinon"),ue(e,r,"enzyme","Enzyme"),ue(e,r,"protractor","Protractor"),ue(e,r,"supertest","Supertest"),ue(e,r,"nock","Nock"),ue(e,r,"cypress","Cypress"),ue(e,r,"@testing-library/react","React Testing Library"),r}},C$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"github.com/gorilla/mux","Gorilla Mux"),ue(e,r,"github.com/go-chi/chi","Chi"),ue(e,r,"github.com/gin-gonic/gin","Gin"),ue(e,r,"github.com/labstack/echo","Echo"),ue(e,r,"github.com/revel/revel","Revel"),ue(e,r,"github.com/astaxie/beego","Beego"),ue(e,r,"github.com/go-martini/martini","Martini"),ue(e,r,"github.com/gobuffalo/buffalo","Buffalo"),ue(e,r,"github.com/goji/goji","Goji"),ue(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"net/http","net/http"),ue(e,r,"fmt","fmt"),ue(e,r,"io","io"),ue(e,r,"time","time"),ue(e,r,"math","math"),ue(e,r,"strconv","strconv"),ue(e,r,"strings","strings"),ue(e,r,"sort","sort"),ue(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"github.com/onsi/ginkgo","ginkgo"),ue(e,r,"github.com/onsi/gomega","gomega"),ue(e,r,"github.com/stretchr/testify","testify"),ue(e,r,"gopkg.in/check.v1","gocheck"),ue(e,r,"github.com/franela/goblin","goblin"),ue(e,r,"github.com/DATA-DOG/godog","godog"),ue(e,r,"github.com/stesla/gospec","gospec"),ue(e,r,"github.com/rjeczalik/gotest","gotest"),ue(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"github.com/stretchr/testify","Testify"),ue(e,r,"github.com/smartystreets/goconvey","GoConvey"),ue(e,r,"github.com/onsi/ginkgo","Ginkgo"),ue(e,r,"github.com/golang/mock","GoMock"),ue(e,r,"gopkg.in/check.v1","GoCheck"),ue(e,r,"github.com/franela/goblin","Goblin"),ue(e,r,"github.com/DATA-DOG/godog","GoDog"),ue(e,r,"github.com/onsi/gomega","Gomega"),ue(e,r,"github.com/stesla/gospec","GoSpec"),ue(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},x$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flask","Flask"),ue(e,r,"django","Django"),ue(e,r,"pyramid","Pyramid"),ue(e,r,"tornado","Tornado"),ue(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"requests","requests"),ue(e,r,"numpy","numpy"),ue(e,r,"pandas","pandas"),ue(e,r,"scipy","scipy"),ue(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"pytest","Pytest"),ue(e,r,"unittest","Unittest"),ue(e,r,"doctest","Doctest"),ue(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mock","Mock"),ue(e,r,"hypothesis","Hypothesis"),ue(e,r,"behave","Behave"),ue(e,r,"lettuce","Lettuce"),ue(e,r,"testify","Testify"),ue(e,r,"pyhamcrest","PyHamcrest"),r}},v$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"laravel/framework","Laravel"),ue(e,r,"symfony/symfony","Symfony"),ue(e,r,"slim/slim","Slim"),ue(e,r,"cakephp/cakephp","CakePHP"),ue(e,r,"yiisoft/yii2","Yii"),ue(e,r,"zendframework/zendframework","Zend Framework"),ue(e,r,"phalcon/cphalcon","Phalcon"),ue(e,r,"bcosca/fatfree","Fat-Free"),ue(e,r,"fuel/fuel","FuelPHP"),ue(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"monolog/monolog","Monolog"),ue(e,r,"vlucas/phpdotenv","PHP dotenv"),ue(e,r,"symfony/console","Symfony Console"),ue(e,r,"guzzlehttp/guzzle","GuzzleHttp"),ue(e,r,"ramsey/uuid","Ramsey UUID"),ue(e,r,"doctrine/orm","Doctrine ORM"),ue(e,r,"php-di/php-di","PHP-DI"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"symfony/finder","Symfony Finder"),ue(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"phpunit/phpunit","PHPUnit"),ue(e,r,"behat/behat","Behat"),ue(e,r,"phpspec/phpspec","PHPSpec"),ue(e,r,"codeception/codeception","Codeception"),ue(e,r,"atoum/atoum","Atoum"),ue(e,r,"pestphp/pest","PestPHP"),ue(e,r,"kahlan/kahlan","Kahlan"),ue(e,r,"peridot-php/peridot","Peridot"),ue(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockery/mockery","Mockery"),ue(e,r,"php-mock/php-mock","PHP-Mock"),ue(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ue(e,r,"padraic/mockery","Padraic Mockery"),ue(e,r,"phpspec/prophecy","PHPSpec Prophecy"),ue(e,r,"phpunit/php-invoker","PHPUnit Invoker"),ue(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),ue(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},b$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"Microsoft.NETCore.App",".NET Core"),ue(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"EntityFramework","Entity Framework"),ue(e,r,"Newtonsoft.Json","Newtonsoft.Json"),ue(e,r,"AutoMapper","AutoMapper"),ue(e,r,"Serilog","Serilog"),ue(e,r,"Dapper","Dapper"),ue(e,r,"Polly","Polly"),ue(e,r,"FluentValidation","FluentValidation"),ue(e,r,"MediatR","MediatR"),ue(e,r,"Hangfire","Hangfire"),ue(e,r,"RabbitMQ.Client","RabbitMQ.Client"),ue(e,r,"MassTransit","MassTransit"),ue(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ue(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ue(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ue(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"xunit","xUnit"),ue(e,r,"NUnit","NUnit"),ue(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"Moq","Moq"),ue(e,r,"FluentAssertions","FluentAssertions"),ue(e,r,"Bogus","Bogus"),ue(e,r,"RestSharp","RestSharp"),ue(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},E$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flutter","Flutter"),ue(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"dartx","dartx"),ue(e,r,"provider","Provider"),ue(e,r,"rxdart","RxDart"),ue(e,r,"dio","Dio"),ue(e,r,"json_serializable","json_serializable"),ue(e,r,"freezed","Freezed"),ue(e,r,"moor","Moor"),ue(e,r,"hive","Hive"),ue(e,r,"http","http"),ue(e,r,"path","path"),ue(e,r,"intl","intl"),ue(e,r,"equatable","equatable"),ue(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test","test"),ue(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockito","mockito"),ue(e,r,"bloc_test","bloc_test"),r}},I$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"rails","Rails"),ue(e,r,"sinatra","Sinatra"),ue(e,r,"hanami","Hanami"),ue(e,r,"grape","Grape"),ue(e,r,"roda","Roda"),ue(e,r,"padrino","Padrino"),ue(e,r,"cuba","Cuba"),ue(e,r,"ramaze","Ramaze"),ue(e,r,"nyara","Nyara"),ue(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"active_record","ActiveRecord"),ue(e,r,"sequel","Sequel"),ue(e,r,"rom","ROM"),ue(e,r,"datamapper","DataMapper"),ue(e,r,"mongoid","Mongoid"),ue(e,r,"neo4j","Neo4j"),ue(e,r,"redis","Redis"),ue(e,r,"cassandra","Cassandra"),ue(e,r,"couchrest","CouchRest"),ue(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"rspec","RSpec"),ue(e,r,"minitest","Minitest"),ue(e,r,"cucumber","Cucumber"),ue(e,r,"spinach","Spinach"),ue(e,r,"turnip","Turnip"),ue(e,r,"bacon","Bacon"),ue(e,r,"shoulda","Shoulda"),ue(e,r,"test-unit","Test::Unit"),ue(e,r,"wrong","Wrong"),ue(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"factory_bot","FactoryBot"),ue(e,r,"faker","Faker"),ue(e,r,"ffaker","FFaker"),ue(e,r,"fabrication","Fabrication"),ue(e,r,"machinist","Machinist"),ue(e,r,"mocha","Mocha"),ue(e,r,"flexmock","FlexMock"),ue(e,r,"rr","RR"),ue(e,r,"bourne","Bourne"),ue(e,r,"not_a_mock","NotAMock"),r}},T$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"tokio","tokio"),ue(e,r,"async-std","async-std"),ue(e,r,"hyper","hyper"),ue(e,r,"actix-web","actix-web"),ue(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"serde","serde"),ue(e,r,"regex","regex"),ue(e,r,"rand","rand"),ue(e,r,"log","log"),ue(e,r,"lazy_static","lazy_static"),ue(e,r,"libc","libc"),ue(e,r,"futures","futures"),ue(e,r,"rayon","rayon"),ue(e,r,"reqwest","reqwest"),ue(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test-case","test-case"),ue(e,r,"proptest","proptest"),ue(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockall","mockall"),ue(e,r,"double","double"),ue(e,r,"rstest","rstest"),ue(e,r,"mockiato","mockiato"),ue(e,r,"mock_derive","mock_derive"),ue(e,r,"mocktopus","mocktopus"),ue(e,r,"mockers","mockers"),ue(e,r,"mock_it","mock_it"),r}},w$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function ue(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(ue,"addFromLibraries");var _$=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function AHe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(AHe,"determineProgrammingLanguage");var gHe=[new A$,new y$,new C$,new x$,new v$,new b$,new E$,new I$,new T$,new w$];function yHe(t){let e=gHe.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new _$(t,gHe);return new gpe(e)}s(yHe,"getMetadataLookup");var gpe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var CHe=I.Object({name:I.String(),version:I.Optional(I.String())}),xHe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(CHe),buildTools:I.Array(CHe)}),Ape=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new St([`The user is working on a project with the following characteristics:
`]),1]);let n=yHe(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new St(r)}addProgrammingLanguage(e,r){let n=AHe(e);this.turnContext.collectLabel(RA,n),r.push([new St([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(RA,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new St([`${r}
${i}`]),1])}}},RA="project-metadata",S$=class{constructor(e){this._resolver=e;this.id=RA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Ape(e)}};f();var vHe=Ve(require("path"));var ype=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new St(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new St(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=ys(n);if(await this.turnContext.collectFile(k$,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new EA(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new St([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new St([`The referenced file \`${vHe.basename(r.uri)}\` is content excluded.`]),1]]}},Cpe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},k$="references",R$=class{constructor(){this.id=k$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new Cpe}processor(e){return new ype(e)}};var BT=s(()=>[RA,ch,k$,au],"mandatorySkills"),B$=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new g$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!BT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!BT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!BT().includes(u)))}return l.push(...BT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(Hi).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Hi).getSupportedSkills(r.id),a=e.get(xl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,n)&&l.push(c)}return l}async getNonSelectableSkills(e){let r=await _A(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...BT(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var D$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===r))Ur.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Ur.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var P$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Ur.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var aMt="X-Initiator",lMt="X-Interaction-ID",cMt="X-Interaction-Type";var N$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},xpe=class extends N${static{s(this,"User")}static id(){return"user"}},vpe=class extends N${static{s(this,"Agent")}static id(){return"agent"}},bpe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[aMt]:this.initiator,[lMt]:this.interactionId,[cMt]:this.interactionType.toString()}}},Gd=class t extends bpe{static{s(this,"LlmInteraction")}static user(e,r){return new t(xpe,e,r)}static agent(e,r){return new t(vpe,e,r)}};var Ub=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new Epe(this),this.steps=new P$(e,r,n,e.get(ws)),this.collector=new Ipe(r,n,e.get(ws)),this.agentToolCalls=new D$(e,r,n,e.get(ws))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Gd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Gd.agent("conversation-panel",this.turn.telemetryId):Gd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ws).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},L$=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},p6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},Epe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Hi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(ec).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new L$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(xl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(ec).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof L$||i instanceof p6)throw i;Ur.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},Ipe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function bHe(t,e){let[r,n,i]=await uMt(t,e);return i.push(...pMt(t)),r.length>0||n.length>0?[new St([[new St(["Consider the additional context:"]),1],[Fb(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(bHe,"fromSkills");async function uMt(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await mMt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await dMt(t,a.skillId);l&&(BT().indexOf(a.skillId)===-1?n.push(l):i.push(l)),r.push(c)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(uMt,"handleSkillsInReverse");async function dMt(t,e){let n=t.ctx.get(xl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=n?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await fMt(t,n,l,u,a,d):[void 0,await M$(t,n,"unprocessable",void 0,a,d)]}else return[void 0,await M$(t,n,"unresolvable",void 0,a)]}catch(i){if(Ur.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof p6)throw i;return[void 0,await M$(t,n,"failed")]}}s(dMt,"safelyProcessSkill");async function fMt(t,e,r,n,i,o){let a;return typeof n=="string"?a=new St([[n,1]]):a=n,[[a,r?.value()||0],await M$(t,e,"resolved",a,i,o)]}s(fMt,"handleProcessedSkill");async function M$(t,e,r,n,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:r,files:l,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(na).getBestChatModelConfig(Mf("user")),d=n.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Bo(u.tokenizer).tokenLength(d)}return t.ctx.get(ec).addResolution(t.turn.id,c),c}s(M$,"determineResolution");function pMt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(pMt,"handleIgnoredSkills");async function mMt(t,e,r){if(e!==RA&&e!==ch)return!0;let n=t.ctx.get(kt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===RA:e===ch}s(mMt,"includeSkill");var EHe=Ve(J0());var DT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=$R(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new St(n),a]}async elidableSkills(e,r){return await bHe(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await sA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=U0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},Q$=class extends DT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return EHe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var IHe=Ve(J0());var O$=class extends DT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return IHe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var Tpe=Ve(J0());var U$=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=$R(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new St(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return Tpe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=sMe(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:sb(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:Tpe.default`
                    This is the user's question: 
                    ${Vr(i).trim()} 
                `.trim()}],[]]}};f();var THe=Ve(J0());var q$=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=sb(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return THe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=$R(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new St(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var hMt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],W$=class extends DT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=U0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:hMt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=sb(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!yU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!yU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var wpe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function m6(t,e,r){return new wpe(t,e,r)}s(m6,"descriptor");var wHe=[m6("user",Mf("user"),()=>new Q$),m6("inline",Mf("inline"),()=>new O$),m6("meta",Mf("meta"),()=>new U$),m6("suggestions",Mf("suggestions"),()=>new q$),m6("synonyms",Mf("synonyms"),()=>new W$)],G$=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=wHe.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return wHe}};var SHe=require("console");var wc=class{constructor(e,r=new G$){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(kn).getSession(this.ctx),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[l,c]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(sl).inspectPrompt({type:r.promptType,prompt:_He(l),tokens:c}),this.ctx.get(ec).addPrompt(e.turn.id,_He(l),r.promptType),{messages:l,tokens:c,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,SHe.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:gMt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,ppe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),ppe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(fn).getEditorInfo().readableName??this.ctx.get(fn).getEditorInfo().name,i=AMt(process.platform);return pHe(this.ctx,n,r?.login,i,e)}};function gMt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(gMt,"processResultOfElidableText");function _He(t){return t.map(e=>Vr(e.content)).join(`

`)}s(_He,"debugChatMessages");function AMt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(AMt,"mapPlatformToOs");var H$=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(wc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,r,c);if(d.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,r,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Ur.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){Ur.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Ur.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Ur.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Ur.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var zR=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,l,c){switch(g4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ha).workspaceCount})),await this.turnContext.ctx.get(sl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Vr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:cb.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},A4e(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Vr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new H$(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let l=this.enrichFollowup(a,r,n,i);return Ur.debug(this.turnContext.ctx,"Computed followup",l),Ur.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:sr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return b4e(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",y4e(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};f();var j$=I.Union([I.String(),I.Number()]),PT=I.Union([I.String(),I.Number()]),yMt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),V$=I.Object({uri:I.String(),position:I.Optional(Ll)}),h6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa),status:I.Optional(yMt),range:I.Optional(wa)}),CMt=I.Object({type:I.Literal("directory"),uri:I.String()}),YR=I.Union([h6,CMt,kWe]),_p=I.Union([I.Literal("panel"),I.Literal("inline")]),xMt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),_pe=I.Union([I.String(),I.Array(xMt)]),RHe=I.Object({request:_pe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(PT)});function $$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s($$,"convertToMessageContent");function z$(t,e){if(t=U0(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(z$,"appendToMessage");var Y$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),vMt=I.Object({type:I.String(),description:I.String()}),kHe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),vMt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),K$=I.Object({uri:I.String(),name:I.String()});var Spe="generate-response",J$=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},g6=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ra(r.ctx),this.postProcessor=new zR(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof J$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await gc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(sl).inspectPrompt(l),await n.steps.start(Spe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:U0(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return sr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return mpe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:U0(r.request.message)}),r.response&&r.response.type==="model"){let i=RWe(r.response.references);n.push({role:"assistant",content:U0(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await QWe(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Db((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=z$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Qr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Vr(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,n,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Vr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new J$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return cD(this.conversation,"conversationPanel",Vr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Spe,e.error.message):await r.steps.finish(Spe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var A6=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new g6(this,e)}},X$=class extends A6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new g6(this,e)}};f();var bMt="github",dh=class{static{s(this,"RemoteAgentRegistry")}},Z$=class extends dh{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await wI(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(Mr.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||Mr.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||Mr.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==bMt).map(i=>new A6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var Rpe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[WR]}};async function _A(t){let e=[];return e.push(new X$),e.push(...await t.get(dh).agents()),e.push(new Rpe),e}s(_A,"getAgents");var EMt=I.Object({});async function IMt(t,e,r){return[(await _A(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(IMt,"handleConversationAgentsChecked");var BHe=st(EMt,IMt);f();f();var y6=Ve(Za());function TMt(t,e,r){let n=an.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Dt(t,"getCompletions.docVersionMismatch",n)}s(TMt,"telemetryVersionMismatch");async function fh(t,e,r){let i=t.get(Rr).getTextDocumentUnsafe(e);if(!i)throw new y6.ResponseError(tn.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await U1(t,e,i.getText());if(o.status==="invalid")throw t.get(Ki).setInactive(o.reason),new y6.ResponseError(tn.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(TMt(t,i,e.version),_c.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new y6.ResponseError(tn.ContentModified,"Document Version Mismatch");return i}s(fh,"getTextDocument");async function kA(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await fh(t,n,r)}catch(i){if(i instanceof y6.ResponseError&&i.code===tn.CopilotNotAvailable)return;throw i}}s(kA,"getTextDocumentIfAvailable");var wMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),_Mt=I.Object({turnId:PT,codeBlockIndex:I.Number(),source:wMt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(V$),textDocument:I.Optional(md),position:I.Optional(Ll),conversationSource:I.Optional(_p)});async function SMt(t,e,r){let n=await kA(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=pv(r.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return w0(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a},i,`${Bu(a)}.acceptedCopy`,l),["OK",null]}s(SMt,"handleConversationCodeCopyChecked");var DHe=st(_Mt,SMt);f();var RMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),kMt=I.Object({turnId:PT,source:RMt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(V$),textDocument:I.Optional(md),position:I.Optional(Ll),conversationSource:I.Optional(_p)});async function BMt(t,e,r){let n=await kA(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=pv(r.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return w0(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full"},i,`${Bu(a)}.acceptedInsert`,l),["OK",null]}s(BMt,"handleConversationCodeInsertChecked");var PHe=st(kMt,BMt);f();f();var ez=I.Array(wa);function tz(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(tz,"resolveAsActiveEditor");f();var NHe=Ve(Za());var rz=new NHe.ProgressType,kpe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(yr).connection.sendProgress(rz,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(yr).connection.sendProgress(rz,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(yr).connection.sendProgress(rz,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(yr).connection.sendProgress(rz,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function KR(t){return new kpe(t.workDoneToken)}s(KR,"createProgressHandler");f();f();f();var Vu=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var qy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var JR=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var LHe="```",C6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,DMt=String.raw`${LHe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${LHe}`,PMt=new RegExp(C6+`
`+DMt,"gs"),Bpe=["replace","delete"];function Dpe(t,e){let r=t.matchAll(PMt),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!Bpe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Ppe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(Dpe,"extractEditsFromTaggedCodeblocks");function Ppe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,l=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let c=r[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),r.splice(i,o-i+1,...l)}}}return r.join(`
`)}s(Ppe,"applyEditsToDocument");f();f();f();f();var Wy=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new q0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var NMt=new _t("activeEditorPrompt");async function FHe(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new La;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&LMt(n.selection)){let o=new Wy(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new Wy(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new Wy(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Ti(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new Wy(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else NMt.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(FHe,"processActiveEditor");function LMt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(LMt,"notEmptySelection");f();f();function MHe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(MHe,"partsLength");async function OHe(t,e=1/0,r){let n=QHe(0,t,e),i=e-MHe(n);for(;;){let o=!1,a=[];for(let l of n)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(r?.isCancellationRequested)return FMt();let u=QHe(l.level+1,c,i-1);u.length&&(o=!0,i-=MHe(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(OHe,"visualFileTree");function QHe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let l=e[a],c=n+l.name+(l.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(QHe,"toParts");var FMt=s(()=>({tree:"",files:[]}),"emptyTree");var MMt=new _t("fileReferencesPrompt");async function UHe(t,e,r,n){let i=await qHe(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=Z4(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(UHe,"generateWorkspaceStructurePrompt");async function qHe(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await OHe(await WHe(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:l}})):[]}s(qHe,"generateWorkspaceStructure");async function WHe(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(lo).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=bo(e,o);return r.excludeDotFiles&&o.startsWith(".")||UMt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>WHe(t,l,r,n),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(WHe,"buildFileList");var QMt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],OMt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function UMt(t){return!!(OMt.includes(Ti(t).toLowerCase())||Wo(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>QMt.includes(r)))}s(UMt,"shouldAlwaysIgnoreFile");async function nz(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await qHe(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(n){return MMt.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(nz,"processDirectoryReferences");var qMt=new _t("fileReferencesPrompt");async function GHe(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new La;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new Wy(h,void 0,[]);g&&m.push(...g.render())}else qMt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),FHe(t,e),nz(t.context,e,n)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(GHe,"processFileReferences");var HHe=new _t("editAgentPrompt"),iz=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=hue(this.currentTurn.response?.message,!0),o=await sA.appendToUserMessage(this.ctx,this.props.workspaceFolders,Vr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return zP(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:U0(n.request.message)}),n.response){let i=hue(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):HHe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=YP(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+W9(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(yH(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===r)){HHe.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=YP(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${yl}`),o.push("changed code"),o.push(`// ${yl}`),o.push("changed code"),o.push(`// ${yl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${yl}`),o.push("	age: number;"),o.push(`	// ${yl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await GHe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${yl}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${Wo(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await UHe(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};f();function x6(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(x6,"toString");var jHe=15,XR=new _t("toolCallingLoop"),oz=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ws),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(ou),this.prompt=new iz(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new Ay(this.turnContext.ctx)}),this.requestId=sr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(I4e(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new Db((u,d,p,m)=>{let h=u.trim().match(C6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let l={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};XR.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,r,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),XR.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Vu({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new La;case"failed":throw this.turn.status="error",new Vu({message:cb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new Vu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Vu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Vu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Vu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Vu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Vu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Vu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Vu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(r,a);for(let l of a)await this.handleSingleToolCall(l,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),l="success";try{let c=sb(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=lUe(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=uV(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof qy||c instanceof La)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Gi([new Ci("")],"cancelled"),e.id),new qy(c.message);{XR.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${x6(c)}`,c),l="error";let u=new Gi([new Ci(x6(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=uV(u);await this.turnContext.agentToolCalls.error(n,e.id,d.message)}}finally{let c=performance.now()-a;T4e(this.turnContext.ctx,this.turnContext,o,e.id,n,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;XR.error(this.turnContext.ctx,a);let l=new Gi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=uV(l);await this.turnContext.agentToolCalls.error(n,e.id,c.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new La}async requestToolInvocationApproval(e,r,n,i,o,a,l,c){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new qy("Cancelled by user");case"accept":return Promise.resolve();default:throw new qy(`Invalid confirmation result ${u.result}`)}}else XR.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>jHe)throw XR.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${jHe} for turn ${this.turn.id}`),new JR}};var sz=new _t("agenticTurnProcessor"),az=class{constructor(e,r){this.turnContext=e;this.chatFetcher=r;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ra(e.ctx),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:sfe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{sz.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new oz(this.turnContext,this.chatFetcher,c,l).run(r),await this.endProgress({})}catch(c){if(c instanceof qy)sz.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof La)sz.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof JR)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:sfe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof Vu)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw sz.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=YP(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Npe="collect-context",Lpe="generate-response",lz=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ra(e.ctx),this.postProcessor=new zR(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=a6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,r);return}let u=(await _A(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(Npe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(na).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,d);if(!p)await n.steps.error(Npe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(Npe),await n.steps.start(Lpe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Ur.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let c=await new B$(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new Db((h,g,y,v)=>{let b=h.trim().match(C6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=z$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Vr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,r,n,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,Vr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",C4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Vr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=cD(this.conversation,this.strategy.uiKind,Vr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=cD(this.conversation,this.strategy.uiKind,Vr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Lpe,e.error.message):await r.steps.finish(Lpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var cz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(wc).toPrompt(e,l)}extractEditsFromResponse(e,r){return[]}},uz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(na).getBestChatModelConfig(Mf(a)),c={promptType:a,modelConfiguration:l,languageId:r};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(wc).toPrompt(e,c)}async processResponse(e){let r=[],n=Vr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(au);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(vn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=Dpe(e,r).filter(a=>Bpe.includes(a.mode)),o=Ppe(i,r);if(o)return await this.ctx.get(sl).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return Dpe(e,r)}};f();f();var VHe=Ve(Za()),$He=Ve(wm());var $u=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new VHe.ProtocolRequestType("conversation/context");this.typeCheck=ms.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(yr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,l]=o;if(l){let c=new $He.ResponseError(l.code,l.message,l.data);Ur.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){Ur.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Ic(this.typeCheck.Errors(i));return i}}};var Fpe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Gy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let l=new Fpe(e,r,n,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(r=>r.progressToken===e)}},dz=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ws)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Hi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let l=await new $u(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await q1(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:sr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Hy=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(Gy).get(r);if(i)return new dz(e,i);let a=(await _A(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new uz(e.ctx):l=new cz(e.ctx),e.turn.chatMode==="Agent"?new az(e):(n!==void 0&&(l.computeSuggestions=n),new lz(e,l))}};f();var zHe=Ve(Za());var ZR=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new zHe.ResponseError(tn.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function fz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(fz,"resolveAsWorkspaceFolders");f();f();var WMt=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Hd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?WMt(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var zu=class{constructor(){this.tokens=new Kr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new pn.CancellationTokenSource,i=new Hd([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var GMt=I.Object({conversationId:I.Optional(j$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(RHe,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(md),textDocument:I.Optional(md),selection:I.Optional(wa),visibleRanges:I.Optional(ez),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(YR)),source:I.Optional(_p),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(K$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(Y$),needToolCallConfirmation:I.Optional(I.Boolean())});async function HMt(t,e,r){ZR.validate(r.workspaceFolders);let n=await kA(t,r,e),i=t.get(Hi).create(r);await jMt(t,i,r,n);let o=i.turns[i.turns.length-1],a=KR(r),l=t.get(zu).add(a.progressToken,e),c=new Ub(t,i,o,l);return await(await t.get(Hy).createProcessor(c,a.progressToken,r.computeSuggestions)).process(a,l,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(HMt,"handleConversationCreateChecked");async function jMt(t,e,r,n){for(let i of r.turns){let o=$$(i.request),a=new Pb({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=KV(r.chatMode),a.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,c=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:fz(l),u=tz({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Hi).addTurn(e.id,a,r.references,u,l,c,r.ignoredSkills,void 0)}}s(jMt,"addTurns");var YHe=st(GMt,HMt);f();var VMt=I.Object({conversationId:I.String()});function $Mt(t,e,r){return t.get(Hi).destroy(r.conversationId),["OK",null]}s($Mt,"handleConversationDestroyChecked");var KHe=st(VMt,$Mt);f();var zMt=I.Object({});function YMt(t,e,r){return[{path:t.get(Ec).directory},null]}s(YMt,"handleConversationPersistenceChecked");var JHe=st(zMt,YMt);f();f();var ZHe=Ve(require("node:events"));var Mpe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(kn).getSession(e),n=e.get(_a),i=n.fallbackAppId();return r&&r.githubAppId&&r.githubAppId!==i?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},Qpe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Qr).getToken()).envelope.chat_enabled?"ok":"failed"}}},KMt=[new Mpe,new Qpe],XHe="onPreconditionsChanged",Sp=class{constructor(e,r=KMt){this.ctx=e;this.checks=r;this.emitter=new ZHe.default;Ds(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(XHe,e)}emit(e){this.emitter.emit(XHe,e)}};var JMt=I.Object({forceCheck:I.Optional(I.Boolean())});async function XMt(t,e,r){let n=r.forceCheck??!1;return[await t.get(Sp).check(n),null]}s(XMt,"handleConversationPreconditionsChecked");var eje=st(JMt,XMt);f();var ZMt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(md),textDocument:I.Optional(md),source:I.Optional(_p)});async function eQt(t,e,r){let n=await kA(t,r,e),i=pv(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return w0(t,n,{rating:o,uiKind:i},{},`${Bu(i)}.messageRating`,a),["OK",null]}s(eQt,"handleConversationRatingChecked");var tje=st(ZMt,eQt);f();f();var pz=class extends kb{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:AA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(ab).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new La;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(nA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var tQt=I.Object({tools:I.Array(kHe)});function rQt(t,e,r){return r.tools.forEach(n=>{t.get(ou).registerTool(new pz({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(rQt,"conversationRegisterToolsChecked");var rje=st(tQt,rQt);f();var nQt=I.Object({});function iQt(t,e,r){return[Yfe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(iQt,"handleConversationTemplatesChecked");var nje=st(nQt,iQt);f();var oQt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:j$,turnId:I.Optional(PT),message:_pe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(md),textDocument:I.Optional(md),selection:I.Optional(wa),visibleRanges:I.Optional(ez),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(YR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(K$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:aMe,model:I.Optional(I.String()),chatMode:I.Optional(Y$),needToolCallConfirmation:I.Optional(I.Boolean())});async function sQt(t,e,r){ZR.validate(r.workspaceFolders);let n=await kA(t,r,e),i=t.get(Hi),o=i.get(r.conversationId),a=$$(r.message),l=new Pb({message:a,type:"user"},r.turnId);l.chatMode=KV(r.chatMode),l.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:fz(c),d=tz({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});l=await i.addTurn(o.id,l,r.references,d,c,u,r.ignoredSkills,r.confirmationResponse);let p=KR(r),m=t.get(zu).add(p.progressToken,e),h=new Ub(t,o,l,m);return await(await t.get(Hy).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:r.model},null]}s(sQt,"handleConversationTurnChecked");var ije=st(oQt,sQt);f();var aQt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(_p)});async function lQt(t,e,r){t.get(Hi).deleteTurn(r.conversationId,r.turnId);let i=pv(r.source),o=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:""});return w0(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Bu(i)}.messageDelete`,o),["OK",null]}s(lQt,"handleConversationTurnDeleteChecked");var oje=st(aQt,lQt);f();var cQt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function uQt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(uQt,"buildSystemMessage");function dQt(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>n&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(dQt,"buildUserMessage");function fQt(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};r.push(b)}return r}s(fQt,"parseReviewComments");async function pQt(t,e,r){if(!r.document.text)return[null,{code:tn.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:tn.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:tn.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:tn.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:tn.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ra),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:uQt()},{role:"user",content:dQt(r)}],l=await t.get(kt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Gd.user("code-review",sr())},e,l);if(c.type!=="success")return[null,{code:tn.InternalError,message:"Failed to generate code review"}];let u=fQt(r.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(pQt,"handleCopilotCodeReviewChecked");var sje=st(cQt,pQt);f();f();var qb=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,yy.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return Gd.user("conversation-edit-panel",this.editTurnId)}};f();async function mz(t,e,r,n){let o=t.get(ol).create("panel","en"),a=new ub({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new qb(t,o,a,n,ln.Gpt4o),u=t.get(bc);await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(mz,"streamMockedResult");f();var mQt=I.Object({enableMock:I.Boolean()}),BA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function hQt(t,e,r){return t.get(BA).setMockEnabled(r.enableMock),["OK",null]}s(hQt,"handleTestingSetCopilotEditsResponseChecked");var aje=st(mQt,hQt);var gQt=I.Object({request:I.String(),response:I.Optional(I.String())}),AQt=I.Union([I.Literal("panel")]),yQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(gQt,{minItems:1}),workingSet:I.Optional(I.Array(h6)),source:I.Optional(AQt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function CQt(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new ub({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(CQt,"buildEditConversation");async function xQt(t,e,r){if(t.get(BA).isMockEnabled())return await mz(t,sr(),sr(),r.partialResultToken),[[],null];let n=CQt(t.get(ol),r),i=n.getLastTurn(),o=new qb(t,n,i,r.partialResultToken,r.model),a=t.get(zu).add(r.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(o,a),null]}s(xQt,"handleEditConversationCreateChecked");var lje=st(yQt,xQt);f();var vQt=I.Object({editConversationId:I.String()});function bQt(t,e,r){return t.get(ol).destroy(r.editConversationId),["OK",null]}s(bQt,"handleEditConversationDestroyChecked");var cje=st(vQt,bQt);f();var EQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(h6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function IQt(t,e,r){let n=t.get(e),i=new ub({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(IQt,"buildEditConversation");async function TQt(t,e,r){if(t.get(BA).isMockEnabled())return await mz(t,r.editConversationId,sr(),r.partialResultToken),[[],null];let n=t.get(ol),i=IQt(n,r.editConversationId,r),o=i.getLastTurn(),a=new qb(t,i,o,r.partialResultToken,r.model),l=t.get(zu).add(r.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(a,l),null]}s(TQt,"handleEditConversationTurnChecked");var uje=st(EQt,TQt);f();var wQt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(_p)});async function _Qt(t,e,r){t.get(ol).deleteTurn(r.editConversationId,r.editTurnId);let i=await lD(t,r.editTurnId,r.editConversationId,{languageId:""});return w0(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Bu("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(_Qt,"handleEditConversationTurnDeleteChecked");var dje=st(wQt,_Qt);f();var SQt=I.Object({}),RQt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(t9)}))}))});function kQt(t,e,r){return[t.get(W0).getAllTools(),null]}s(kQt,"handleGetMCPToolsChecked");function BQt(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:l}of o)t.get(W0).updateMCPToolStatus(i,a,l);return[t.get(W0).getAllTools(),null]}s(BQt,"handleUpdateMCPToolsStatusChecked");var fje=st(SQt,kQt),pje=st(RQt,BQt);f();var DQt=I.Object({});async function PQt(t,e,r){let n=await t.get(Qr).getToken();return[NQt(await t.get(Iu).getMetadata(),n),null]}s(PQt,"handleCopilotModelsChecked");function NQt(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=Of.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!r2e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(NQt,"filterModels");var mje=st(DQt,PQt);f();var LQt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function FQt(t,e,r){return r.model&&r.status==="enabled"?await t.get(Iu).acceptModelPolicy(r.model)?["OK",null]:[null,{code:tn.InternalError,message:"Failed to accept model policy"}]:[null,{code:tn.InvalidRequest,message:"Invalid model or status"}]}s(FQt,"handleCopilotModelsPolicyChecked");var hje=st(LQt,FQt);f();f();var jy=10;function gje(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(gje,"panelPositionForDocument");f();var Ope=new _t("solutions");async function*MQt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(MQt,"trimChoices");var ek=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=gje(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};function hz(t){return t.replace(/\s+/g,"")}s(hz,"normalizeCompletionText");async function QQt(t,e){let r=e.targetPosition,n=e.textDocument,i=Jx(t,n.uri),o=sr(),a=an.createAndMarkAsIssued({headerRequestId:o,languageId:n.detectedLanguageId,source:"open copilot"},{});e.savedTelemetryData=await t.get(kt).updateExPValuesAndAssignments({uri:n.uri,languageId:n.detectedLanguageId},a);let l=await M5(t,o,Ng(n,r),e.savedTelemetryData);if(l.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(l.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(l.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(l.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(l.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let c=l.prompt,u=l.trailingWs;u.length>0&&(e.startPosition=jo.position(e.startPosition.line,e.startPosition.character-u.length));let d=e.cancellationToken;e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{..._S(c),solutionCount:e.solutionCountTarget,promptEndPos:n.offsetAt(r)}),Ope.debug(t,"prompt:",c),Dt(t,"solution.requested",e.savedTelemetryData);let p=t.get(bm).forLanguage(t,n.detectedLanguageId,e.savedTelemetryData),m=g0(n.detectedLanguageId),h=pD(n,r),g={language:n.detectedLanguageId,next_indent:h.next??0,prompt_tokens:c.prefixTokens??0,suffix_tokens:c.suffixTokens??0},y={};p==="parsing"&&!m&&(y.stop=[`

`,`\r
\r
`]);let v=Kx(t,e.savedTelemetryData),b={prompt:c,languageId:n.detectedLanguageId,repoInfo:i,ourRequestId:o,engineModelId:v.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:y,headers:v.headers,extra:g},E;switch(p){case"server":E=s(()=>{},"finishedCb"),g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsingandserver":E=m?fD(t,n,e.startPosition,!1):()=>{},g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsing":default:E=m?fD(t,n,e.startPosition,!1):()=>{};break}let _=e.savedTelemetryData,k=await t.get(Ed).fetchAndStreamCompletions(t,b,_.extendedBy(),E,d);if(k.type==="failed"||k.type==="canceled")return{status:"FinishedWithError",error:`${k.type}: ${k.reason}`};let B=k.choices;B=MQt(B),B=aD(B,ee=>_D(t,n,r,ee,!1,Ope));let N=aD(B,async ee=>{let me=ee.completionText;Ope.info(t,`Open Copilot completion: [${ee.completionText}]`);let ae=await rRe(t,n,r,ee.completionText)??jo.position(r.line,0),[H]=F5(n.getText(jo.range(ae,r)));me=H+me;let O=ee.completionText;u.length>0&&O.startsWith(u)&&(O=O.substring(u.length));let le=ee.meanLogProb,ie=le!==void 0?Math.exp(le):0,j=_.extendedBy({choiceIndex:ee.choiceIndex.toString()});return{completionText:O,insertText:me,range:jo.range(ae,r),meanProb:ie,meanLogProb:le||0,requestId:ee.requestId,choiceIndex:ee.choiceIndex,telemetryData:j,copilotAnnotations:ee.copilotAnnotations}});return yje(d,N[Symbol.asyncIterator]())}s(QQt,"launchSolutions");async function Aje(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await Aje(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(Aje,"reportSolutions");async function gz(t,e,r){return t.get(Ki).withProgress(async()=>{let i=QQt(t,e);return await Aje(i,r)})}s(gz,"runSolutions");async function yje(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:yje(t,e)}}s(yje,"generateSolutionsStream");var xje=Ve(Ex()),b6=Ve(Za());f();f();function Az(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Az,"parseChallengeDoc");var OQt=I.Object({text:I.String(),score:I.Number()}),UQt=I.Object({documents:I.Array(OQt),options:I.Optional(I.Object({}))});async function yz(t,e,r){let n=sr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=Az(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);r.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,completionId:sr(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:fg.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(yz,"runTestSolutions");var ph=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function qQt(t,e,r){return t.forceSet(ph,new ph(r.documents)),["OK",null]}s(qQt,"handleTestingSetPanelCompletionDocumentsChecked");var Cje=st(UQt,qQt);var vje=oM.type;function WQt(t,e,r,n,i){let o=hz(n.completionText),a=(0,xje.SHA256)(o).toString();return t.get(is).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations}),{range:n.range,insertText:n.insertText,command:{command:nfe,title:`Accept completion ${i}`,arguments:[a]}}}s(WQt,"makeCompletion");function qpe(t,e){return`${t}/${e}`}s(qpe,"progressMessage");var Upe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}async onSolution(e){this.count+=1;let r=WQt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(b6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:qpe(this.count,jy),percentage:Math.round(100*this.count/jy)})}onFinishedNormally(){return GQt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(b6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function GQt(t,e,r=0){t!==void 0&&await e.connection.sendProgress(b6.WorkDoneProgress.type,t,{kind:"end",message:qpe(r,jy)})}s(GQt,"reportDone");var v6;async function HQt(t,e,r){let n=await fh(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(yr).connection.sendProgress(b6.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:qpe(0,jy),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=r.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(yr).connection.sendProgress(oM.partialResult,l,{items:[d]})},"onCompletion"));let c=new Upe(t,r,a),u=t.get(ph);if(u.documents){let d=u.documents;await yz(i,d,c)}else{c.offset=n.offsetAt(i);let d=new ek(n,i,e,jy);await gz(t,d,c)}return c.error!==void 0?[null,{code:tn.InternalError,message:c.error}]:[{items:o},null]}s(HQt,"handleChecked");async function jQt(t,e,r){v6&&(v6.cancel(),v6.dispose()),v6=new pn.CancellationTokenSource;let n=v6.token,i=new Hd([e,n]);try{return await HQt(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:tn.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(jQt,"handleCheckedWithAbort");var bje=st(_Ie,jQt);f();f();f();function $Qt(t){let{apiUrl:e,serverUrl:r}=t.get(Ml).getConfiguredUrls(),n=new URL("login/device",r).href,i=dM(t),o=new URL("_ping",i.proxy).href,a=new URL("_ping",i.api).href,l=new URL("_ping",i.telemetry).href;function c(u){return new URL(u).host}return s(c,"label"),[{label:c(n),url:n},{label:c(e),url:e},{label:c(o),url:o},{label:c(a),url:a},{label:c(l),url:l}]}s($Qt,"urlsToCheck");async function Eje(t){let e=$Qt(t).map(async({label:r,url:n})=>{let{message:i,status:o}=await zQt(t,n);return{label:r,url:n,message:i,status:o}});return await Promise.all(e)}s(Eje,"checkReachability");async function zQt(t,e){try{let r=await t.get(on).fetch(e,{}),n=r.status>=200&&r.status<400?"reachable":"unreachable";return{message:`HTTP ${r.status}`+(r.statusText?` - ${r.statusText}`:""),status:n}}catch(r){return{message:String(r),status:"unreachable"}}}s(zQt,"determineReachability");var Rp=Ve(require("os")),tk=Ve(require("tls"));async function Ije(t){return{sections:[YQt(t),KQt(),await XQt(t),JQt(),ZQt(t),await eOt(t)]}}s(Ije,"collectDiagnostics");function Tje(t){return t.sections.map(tOt).join(Rp.EOL+Rp.EOL)}s(Tje,"formatDiagnosticsAsMarkdown");function YQt(t){return{name:"Copilot",items:{Version:vI(t),Build:Nf(t),Editor:r0(t)["Editor-Version"]}}}s(YQt,"collectCopilotSection");function KQt(){return{name:"Environment",items:{http_proxy:Vy("http_proxy"),https_proxy:Vy("https_proxy"),no_proxy:Vy("no_proxy"),SSL_CERT_FILE:Vy("SSL_CERT_FILE"),SSL_CERT_DIR:Vy("SSL_CERT_DIR"),OPENSSL_CONF:Vy("OPENSSL_CONF")}}}s(KQt,"collectEnvironmentSection");function JQt(){return{name:"Node setup",items:{"Number of root certificates":tk.rootCertificates.length,"Operating system":Rp.type(),"Operating system version":Rp.release(),"Operating system architecture":Rp.arch(),NODE_OPTIONS:Vy("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Vy("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Vy("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":tk.DEFAULT_MIN_VERSION,"tls default max version":tk.DEFAULT_MAX_VERSION}}}s(JQt,"collectNodeSection");async function XQt(t){let e={};try{let r=await t.get(Qr).getToken();e["Send Restricted Telemetry"]=r.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=r.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=r.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(r=>e[r]===void 0&&delete e[r]),{name:"Feature Flags",items:e}}s(XQt,"collectFeatureFlagsSection");function ZQt(t){let e=t.get(on);return{name:"Network Configuration",items:{"Proxy host":e.proxySettings?.host,"Proxy port":e.proxySettings?.port,"Kerberos SPN":e.proxySettings?.kerberosServicePrincipal,"Reject unauthorized":e.rejectUnauthorized?"enabled":"disabled",Fetcher:e.name}}}s(ZQt,"collectNetworkConfigSection");async function eOt(t){return{name:"Reachability",items:Object.fromEntries((await Eje(t)).map(({label:r,status:n,message:i})=>[r,i]))}}s(eOt,"collectReachabilitySection");function Vy(t){let e=Object.keys(process.env).find(r=>r.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Vy,"findEnvironmentVariable");function tOt(t){return`## ${t.name}`+Rp.EOL+Rp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(Rp.EOL)}s(tOt,"formatSectionAsMarkdown");var rOt=I.Object({});async function nOt(t){return[{report:Tje(await Ije(t))},null]}s(nOt,"handleDiagnosticsChecked");var wje=st(rOt,nOt);f();f();f();f();function _je(t,e,r){function n(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return n(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(_je,"normalizeIndentCharacter");function Sje(t,e,r,n,i,o,a){let l=n.lineAt(i),c=e.map(u=>{let d=jo.range(jo.position(i.line,0),jo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=_je(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=jo.range(d.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:sr(),insertText:p,range:d,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations}});if(r===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(Sje,"completionsFromGhostTextResults");async function Wpe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await woe(t,e,r,n);if(o.type!=="success")return o;let[a,l]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=u3e(t,e.textDocument,e.position,l),u=Sje(t,a,l,e.textDocument,e.position,n.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(kt),p=(Jr(t,ft.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Bm.isSupported(e.textDocument.detectedLanguageId),m=Jr(t,ft.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob);(p||(m??h))&&l!==2&&(e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]),Promise.resolve().then(()=>{woe(t,e,void 0,{isSpeculative:!0,opportunityId:n.opportunityId})}));let y=u.map(v=>{let{start:b,end:E}=v.range,_=pn.Range.create(b,pn.Position.create(E.line,E.character-i));return{...v,range:_}});return{...o,value:y}}s(Wpe,"getInlineCompletionsResult");async function Cz(t,e,r,n,i={}){iOt(t,e,r);let o=await Wpe(t,Ng(e,r),n,i);return P4e(t,o)}s(Cz,"getInlineCompletions");function iOt(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});EU.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(iOt,"logCompletionLocation");var Nje=Ve(Za());f();var Rje=require("crypto");var rk=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new Hpe(e,this.id)}},Hpe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(yr),o=(0,Rje.randomUUID)(),a=i.connection.onProgress(rM.type,o,l=>{n.push(...l)});r.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(rM.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function nk(t,e,r){try{let n=t.get(Ba),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof rk&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof rk&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){Mr.error(t,"Failed to set context items on context providers",n)}}s(nk,"setContextItems");var Gpe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function kje(t,e,r){return e.map(i=>{try{if(typeof i=="string")return ka(r.uri,i,Gpe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=ka(r.uri,i.scheme||"",Gpe)),"pattern"in i&&(o&&=ka(r.uri,i.pattern||"",Gpe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(kje,"match");f();var oOt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Wb=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function sOt(t,e,r){return t.forceSet(Wb,new Wb(r.documents,r.basename||"")),["OK",null]}s(sOt,"handleTestingSetCompletionDocumentsChecked");var Bje=new _t("setCompletionDocuments"),Pje=st(oOt,sOt);function xz(t,e,r,n){let i=t.get(Wb);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Bje.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=aOt(i,r);return a&&a.length>0?Dje(a,o,e):void 0}else return Bje.debug(t,"Returning completions for all pre-set documents"),Dje(i.documents,o,e)}}s(xz,"getTestCompletions");function Dje(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:l}=Az(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:l}}})}s(Dje,"sliceAndMapCompletions");function aOt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(aOt,"getFilteredDocs");var Lje=I.Object({doc:I.Object({position:Ll,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:KB,version:I.Number()}),contextItems:I.Optional(Eie)}),E6;async function Fje(t,e,r,n){E6&&(E6.cancel(),E6.dispose()),E6=new pn.CancellationTokenSource;let i=new Hd([e,E6.token]);r.contextItems&&nk(t,r.contextItems);let o=xz(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:sr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await fh(t,r.doc,i)}catch(p){if(!(p instanceof Nje.ResponseError))throw p;switch(p.code){case tn.CopilotNotAvailable:case tn.ContentModified:return[{completions:[]},null]}throw p}let l=r.doc.position,c=await Cz(t,a,l,i,{isCycling:n,formattingOptions:r.doc});if(!c)return[{completions:[]},null];let u=t.get(is);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Fje,"handleGetCompletionsHelper");var Mje=st(Lje,(t,e,r)=>Fje(t,e,r,!1)),Qje=st(Lje,(t,e,r)=>Fje(t,e,r,!0));f();var Oje=Ve(Ex()),ik=Ve(Za());var lOt=I.Object({doc:I.Object({position:Ll,uri:KB,version:I.Number()}),panelId:I.String()});function cOt(t,e,r,n,i){let o=hz(i.completionText),a=(0,Oje.SHA256)(o).toString();return t.get(is).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(cOt,"makeSolution");var jpe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}onSolution(e){return this.service.connection.sendNotification(new ik.NotificationType("PanelSolution"),cOt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Uje(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new ik.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Uje(t,e){return e.connection.sendNotification(new ik.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Uje,"reportDone");var I6;async function uOt(t,e,r){I6&&(I6.cancel(),I6.dispose()),I6=new pn.CancellationTokenSource;let n=new Hd([e,I6.token]),i=r.doc.position,o=jo.range(i,i),a=new jpe(t,r,o),l=t.get(ph);if(l.documents){let c=l.documents;yz(i,c,a)}else{let c;try{c=await fh(t,r.doc,n)}catch(d){if(!(d instanceof ik.ResponseError))throw d;switch(d.code){case tn.CopilotNotAvailable:case tn.ContentModified:return dOt(t,r)}throw d}a.offset=c.offsetAt(i);let u=new ek(c,i,n,jy);gz(t,u,a)}return[{solutionCountTarget:jy},null]}s(uOt,"handleGetPanelCompletionsChecked");async function dOt(t,e){return await Uje(e.panelId,t.get(yr)),[{solutionCountTarget:0},null]}s(dOt,"produceEmptySolutions");var qje=st(lOt,uOt);f();var fOt=I.Object({});function pOt(t,e,r){return[{version:t.get(po).getDisplayVersion(),buildType:Nf(t),runtimeVersion:`node/${process.versions.node}`},null]}s(pOt,"handleGetVersionChecked");var Wje=st(fOt,pOt);f();var mOt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function hOt(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(hOt,"buildSystemMessage");function gOt(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(gOt,"buildUserMessage");async function AOt(t,e,r){if(r.changes.length===0)return[null,{code:tn.InvalidRequest,message:"No changes provided"}];let n=new ra(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:pl(process.cwd())}],a=await sA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(Hi),c=l.create({capabilities:{skills:[IA]}}),u=new Pb({message:"",type:"user"});await l.addTurn(c.id,u);let d=KR({workDoneToken:sr()});await t.get(ws).begin(c,u,d);let h=(await new Ub(t,c,u,e).skillResolver.resolve(IA))?.head?.name,g=[{role:"system",content:await hOt(r.userLanguage,h)},{role:"user",content:gOt(r,a)}],y=await t.get(kt).updateExPValuesAndAssignments(),v=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Gd.user("git-commit",sr())},e,y);if(v.type!=="success")return[null,{code:tn.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(AOt,"handleGitCommitGenerateChecked");var Gje=st(mOt,AOt);f();var jje=ite.type,T6;function Hje(t){return{title:"Completion Accepted",command:Z9,arguments:[t]}}s(Hje,"makeCommand");async function yOt(t,e,r){T6&&(T6.cancel(),T6.dispose());let n=r.context.triggerKind===1;T6=new pn.CancellationTokenSource;let i=T6.token,o=new Hd([e,i]);r.contextItems&&nk(t,r.contextItems,r.data);let a=xz(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:Hje(sr()),...h}))},null];let l=await fh(t,r.textDocument,o),c=r.position,u=await Cz(t,l,c,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:tn.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:tn.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(is);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Hje(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(yOt,"handleChecked");var Vje=st(SU,(t,e,r)=>yOt(t,e,r));f();var $je=ate.type,w6;async function xOt(t,e,r){w6&&(w6.cancel(),w6.dispose());let n=r.context.triggerKind===1;w6=new pn.CancellationTokenSource;let i=w6.token,o=new Hd([e,i]);r.contextItems&&nk(t,r.contextItems);let a=await fh(t,r.textDocument,o),l=await Wpe(t,Ng(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(xOt,"handleChecked");var zje=st(SU,(t,e,r)=>xOt(t,e,r));f();f();function Vpe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return ok(i)}s(Vpe,"asReadableCert");function ok(t){return t.replace(/\s/g,"")}s(ok,"normalizeNewlines");var bOt=I.Object({});async function EOt(t){return[{certificates:(await t.get(il).getAllRootCAs()).map(ok)},null]}s(EOt,"handleListCertificatesChecked");var Yje=st(bOt,EOt);f();async function IOt(t,e,r){let n=t.get(sh);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Fl(r.textDocument.uri);t.get(kg).onUserPositionChange(i,new sn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:Z9,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(IOt,"handleChecked");var Kje=st(TIe,IOt);f();var TOt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function wOt(t,e,r){let n=t.get(is),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=_Ot(r,i);y2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(wOt,"notifyAcceptedChecked");function _Ot(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(_Ot,"getSuggestionStatus");var Jje=st(TOt,wOt);f();var SOt=I.Object({uuids:I.Array(I.String())});function ROt(t,e,r){let n=t.get(is),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let l of r.uuids)n.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));Dq(t,"ghostText",o.offset,o.uri,a),t.get(Fu).resetState()}return["OK",null]}s(ROt,"notifyRejectedChecked");var Xje=st(SOt,ROt);f();var kOt=I.Object({uuid:I.String({minLength:1})});function BOt(t,e,r){let i=t.get(is).get(r.uuid);return i&&IU(t,i.triggerCategory,i),["OK",null]}s(BOt,"notifyShownChecked");var Zje=st(kOt,BOt);f();var DOt=G4e;function POt(t,e,r){let n=t.get(Ba),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new rk(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(POt,"registerContextProviders");var eVe=st(DOt,POt);f();f();var tVe=require("net");function $pe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s($pe,"getProxyFromEnvironment");function NOt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(NOt,"getRejectUnauthorizedFromEnvironment");var rVe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function nVe(t){let r={proxy:$pe(t),proxyStrictSSL:NOt(t)},n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(nVe,"getHttpSettingsFromEnvironment");function _6(t){(0,tVe.isIPv6)(t)?t="https://["+t+"]":/:\/\//.test(t)||(t=`https://${t}`);let{hostname:e,port:r,username:n,password:i}=new URL(t);return{host:e,port:LOt(r),proxyAuth:FOt(n,i)}}s(_6,"proxySettingFromUrl");function LOt(t){if(!t)return 80;let e=Number(t);if(isNaN(e))throw new TypeError("Invalid proxy port");return e}s(LOt,"parsePort");function FOt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(FOt,"getAuth");f();var Ype=I.Object({host:I.String(),port:I.Number(),username:I.Optional(I.String()),password:I.Optional(I.String()),rejectUnauthorized:I.Optional(I.Boolean())}),MOt=I.Object({uri:I.Optional(I.String())}),QOt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),oVe=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),"github-enterprise":I.Optional(MOt),http:I.Optional(rVe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),Kpe=Object.keys(oVe.properties).filter(t=>t!=="github"),OOt=I.Intersect([oVe,QOt]),UOt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),networkProxy:I.Optional(Ype),authProvider:I.Optional(I.Never())}),iVe=ms.Compile(UOt),zpe=ms.Compile(OOt);async function sVe(t,e){if(!iVe.Check(e))throw new Ic(iVe.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&await Jpe(t,r),e.networkProxy!==void 0&&vz(t,e.networkProxy),await S6(t,r)}s(sVe,"notifyChangeConfiguration");async function Jpe(t,e){for(let i of zpe.Errors(e)){let o=i.path.split("/")?.[1];_c.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!zpe.Check(e))throw new Ic(zpe.Errors(e));let r=t.get(K0);r.setConfig(ft.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(ft.DelayCompletions,e.delayCompletions),r.setConfig(ft.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(ft.FilterCompletions,e.filterCompletions),e.http&&Xpe(t,e.http);let n=e["github-enterprise"];n&&(t.get(Ml).updateBaseUrl(t,n.uri),t.get(kn).updateEnterpriseConfig(t,n)),e.github?.copilot&&await qOt(t,e.github.copilot)}s(Jpe,"applySettingsToConfiguration");async function qOt(t,e){let r=t.get(K0);for(let n of Object.values(ft)){let i=vTe(e,n);r.setConfig(n,i)}e.mcp?await HOt(t,e.mcp):await jOt(t),WOt(t,e.globalCopilotInstructions||""),GOt(t,e.globalGitCommitInstructions||"")}s(qOt,"applyCopilotConfiguration");function WOt(t,e){try{t.get(iA).setGlobalCopilotInstructions(e)}catch(r){_c.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(WOt,"applyGlobalCopilotInstructionsConfiguration");function GOt(t,e){try{t.get(iA).setGlobalGitCommitInstructions(e)}catch(r){_c.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(GOt,"applyGlobalGitCommitInstructionsConfiguration");function Xpe(t,e){let r=t.get(K0),n=t.get(on);if(e.proxy===void 0&&(e=nVe(r.env)),n.rejectUnauthorized=e?.proxyStrictSSL,!e.proxy){n.proxySettings=void 0;return}try{n.proxySettings=_6(e.proxy),e.proxyAuthorization&&(n.proxySettings.proxyAuth=e.proxyAuthorization),e.proxyKerberosServicePrincipal&&(n.proxySettings.kerberosServicePrincipal=e.proxyKerberosServicePrincipal)}catch(i){if(!(i instanceof TypeError))throw i;_c.warn(t,"Invalid proxy URL",e.proxy,i),n.proxySettings=void 0}}s(Xpe,"applyHttpConfiguration");function vz(t,e){if(!e){t.get(on).proxySettings=void 0,t.get(on).rejectUnauthorized=void 0;return}let r;e.username&&(e.password?r=e.username+":"+e.password:r=e.username),t.get(on).proxySettings={host:e.host,port:e.port,proxyAuth:r},t.get(on).rejectUnauthorized=e.rejectUnauthorized??!0}s(vz,"applyNetworkProxyConfiguration");async function HOt(t,e){try{let r=JSON.parse(e);await t.get(W0).updateMCPServers(r)}catch(r){_c.error(t,"Failed to apply MCP configuration",r)}}s(HOt,"applyMCPConfiguration");async function jOt(t){await t.get(W0).updateMCPServers({})}s(jOt,"removeMCPConfiguration");async function S6(t,e){if(!t.get(Go).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";await gM(t,"agent",r)}await t.get(Qr).primeToken()}s(S6,"initializePostConfigurationDependencies");var aVe=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),VOt=I.Object({editorInfo:aVe,editorPluginInfo:aVe,editorConfiguration:I.Optional(I.Object({})),networkProxy:I.Optional(Ype),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function $Ot(t,e,r){t.get(fn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),bV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&await Jpe(t,r.editorConfiguration);let n=t.get(on),i=t.get(K0).env,o=$pe(i);if(r.editorInfo.name==="VisualStudio"){if(o)n.proxySettings=_6(o);else if(r.networkProxy){vz(t,r.networkProxy);let a=i.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.AGENT_KERBEROS_SERVICE_PRINCIPAL;n.proxySettings&&a&&(n.proxySettings.kerberosServicePrincipal??=a)}}else r.networkProxy?vz(t,r.networkProxy):o&&(n.proxySettings=_6(o));return await S6(t,r.editorConfiguration),["OK",null]}s($Ot,"handleSetEditorInfoChecked");var lVe=st(VOt,$Ot);f();var zOt=I.Object({options:I.Optional(I.Object({}))});async function YOt(t,e,r){let n=t.get(kn).pendingSignIn?.status;if(n===void 0)return[null,{code:tn.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:tn.DeviceFlowFailed,message:String(o)}]}finally{t.get(kn).pendingSignIn=void 0}}s(YOt,"handleSignInConfirmChecked");var cVe=st(zOt,YOt);f();var KOt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function JOt(t,e,r){try{let n=t.get(kn),i=await n.checkAndUpdateStatus(t,{githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(_a).findAppIdToAuthenticate(),a=await t.get(ZI).getToken(t,o,n.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(_a).githubAppId=o,await t.get(kn).setPersistedSession(c),await t.get(kn).checkAndUpdateStatus(t,{freshSignIn:!0})));return t.get(kn).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:NV,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ls))throw n;return[null,{code:tn.DeviceFlowFailed,message:n.message}]}}s(JOt,"handleSignInInitiateChecked");var Zpe=st(KOt,JOt);f();var XOt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function ZOt(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(kn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(kn).checkAndUpdateStatus(t),null]}s(ZOt,"handleSignInWithGithubTokenChecked");var uVe=st(XOt,ZOt);f();var eUt=I.Object({options:I.Optional(I.Object({}))});async function tUt(t,e,r){return await t.get(kn).deletePersistedSession(),[await t.get(kn).checkAndUpdateStatus(t),null]}s(tUt,"handleSignOutChecked");var dVe=st(eUt,tUt);f();var rUt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),eme=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function nUt(t,e,r){let n=t.get(po),i=t.get(fn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&CA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:IX(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},CA.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new eme(r.stacktrace??"N/A",i.name);return l.stack=void 0,Ta(t,l,void 0,o,a),["OK",null]}s(nUt,"handleTelemetryExceptionChecked");var fVe=st(rUt,nUt);f();f();f();function iUt(t){return new TI({token:`test token ${sr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(iUt,"createTestCopilotToken");var R6=class extends Qr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=pVe()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>iUt(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},bz=class extends R6{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},sk=class extends bz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};function pVe(t={}){return{accessToken:sr(),...t,...RS(t)}}s(pVe,"testGitHubSession");var Ez=class extends kn{static{s(this,"NotAuthManager")}constructor(){super(null,null,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},ak=class extends kn{constructor(r=new sk("tid=valid-copilot-token"),n=""){super(null,r,{});this.githubAppId=n}static{s(this,"AlwaysAuthManager")}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};var oUt=I.Object({options:I.Optional(I.Object({}))});async function sUt(t,e,r){return t.forceSet(kn,new ak),t.get(Qr).resetToken(),t.get(Ki).forceNormal(),await new Promise(n=>setTimeout(n,0)),["OK",null]}s(sUt,"handleTestingAlwaysAuthChecked");var mVe=st(oUt,sUt);f();var aUt=I.Object({messages:I.Array(I.Object({role:I.Enum(Al),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(ln)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function lUt(t,e,r){let n=new ra(t),i=await t.get(na).getBestChatModelConfig([r.modelFamily??ln.CopilotBase]),o=await lD(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:Gd.user("test",sr())},e,o),null]}s(lUt,"handleChatMLChecked");var hVe=st(aUt,lUt);f();f();f();var hk=Ve(k$e(),1),FKn={ALPN_HTTP2:hk.default.ALPN_HTTP2,ALPN_HTTP2C:hk.default.ALPN_HTTP2C,ALPN_HTTP1_1:hk.default.ALPN_HTTP1_1,ALPN_HTTP1_0:hk.default.ALPN_HTTP1_0},{fetch:MKn,context:B$e,reset:QKn,noCache:OKn,h1:UKn,keepAlive:qKn,h1NoCache:WKn,keepAliveNoCache:GKn,cacheStats:HKn,clearCache:jKn,offPush:VKn,onPush:$Kn,createUrl:zKn,timeoutSignal:YKn,Body:KKn,Headers:D$e,Request:JKn,Response:XKn,AbortController:Hz,AbortError:jz,AbortSignal:P$e,FetchBaseError:ZKn,FetchError:eJn,ALPN_HTTP2:tJn,ALPN_HTTP2C:rJn,ALPN_HTTP1_1:nJn,ALPN_HTTP1_0:iJn}=hk.default;var L$e=require("crypto"),F$e=require("http"),M$e=require("stream"),Q$e=require("util"),Ak=Ve(wm());var ZWt=9e4,eGt=new Ak.ProtocolRequestType("copilot/fetch"),tGt=new Ak.ProtocolRequestType("copilot/fetchCancel"),rGt=new Ak.ProgressType,nGt=new Ak.ProtocolRequestType("copilot/fetchDisconnectAll"),DA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},gk=class extends on{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(po).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(yr).connection.sendRequest(nGt,{})}makeAbortController(){return new Hz}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(yr).connection,a=(0,L$e.randomUUID)(),l=new pn.CancellationTokenSource,c=new M$e.PassThrough,u=s(()=>{o.sendRequest(tGt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new jz("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof P$e))throw new DA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new jz("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(rGt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new DA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new DA("Request timed out from lsp server"))},n.timeout??ZWt),y=s(()=>{h(new jz("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(eGt,oGt(r,a,n),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,Q$e.inspect)(v.data)}`),h(new DA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new DA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new xx(p.status,F$e.STATUS_CODES[p.status]??"",new D$e(p.headers),()=>iGt(c),()=>c)}};function iGt(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(iGt,"consumeStream");function oGt(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(oGt,"convertOptionsToParams");var sGt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function aGt(t,e,r){let n=new gk(t),i=n.makeAbortController(),o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=r;l&&i.abort();let p=n.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof DA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof DA?y.message:String(y)}`},null]}}s(aGt,"handleTestingFetchChecked");var O$e=st(sGt,aGt);f();var lGt=I.Object({});async function cGt(t,e,r){return await t.get(va).flush(),["OK",null]}s(cGt,"handleTestingFlushPromiseQueueChecked");var U$e=st(lGt,cGt);f();var uGt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function dGt(t,e,r){try{await t.get(gA).start();let n=t.get(bT),i=r.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,_U,e)}catch{}finally{l=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(dGt,"handleTestingGetContextChecked");var q$e=st(uGt,dGt);f();var fGt=I.Object({uri:I.String()});async function pGt(t,e,r){let i=await t.get(Rr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(pGt,"handleGetDocumentChecked");var W$e=st(fGt,pGt);f();var mGt=I.Object({options:I.Optional(I.Object({}))});async function hGt(t,e,r){t.forceSet(kn,new Ez),t.get(Qr).resetToken();try{await t.get(Qr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(hGt,"handleTestingNeverAuthChecked");var G$e=st(mGt,hGt);f();f();f();var Pme=class extends il{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},H$e=s(t=>new Pme(t),"createTestCertificateReader");function Fme(t,e,r){let n=new Nme;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new xx(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Fme,"createFakeResponse");function j$e(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Fme(t,n,Object.assign({"content-type":"application/json"},r))}s(j$e,"createFakeJsonResponse");var M6=class extends on{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}makeAbortController(){return new Lme}};var Vz=class extends M6{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var Nme=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}},Lme=class{constructor(){this.signal={aborted:!1,addEventListener:s(()=>{},"addEventListener"),removeEventListener:s(()=>{},"removeEventListener")}}static{s(this,"FakeAbortController")}abort(){this.signal.aborted=!0}};var Mme=class extends M6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(j$e(200,this.fullConfig)):Promise.resolve(Fme(404,""))}},$z=class extends Mme{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}makeAbortController(){return this.delegate.makeAbortController()}};var gGt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function AGt(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(on,new $z(n,t.get(on)))}return["OK",null]}s(AGt,"handleTestingOverrideExpFlagsChecked");var V$e=st(gGt,AGt);f();var yGt=I.Object({rules:cie});function CGt(t,e,r){let n=t.get(Yc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:tn.InternalError,message:"Could not set content exclusion rules"}]}s(CGt,"handleTestingSetContentExclusionRulesChecked");var $$e=st(yGt,CGt);f();var xGt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(YR)),options:I.Optional(I.Object({}))});function vGt(t,e,r){return t.get(Gy).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(vGt,"handleTestingSetSyntheticTurnsChecked");var z$e=st(xGt,vGt);f();var bGt=I.Object({});async function EGt(t,e,r){let n=t.get($a),i=t.get(Va);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(EGt,"handleTriggerShowMessageChecked");var Y$e=st(bGt,EGt);f();f();f();f();var K$e=Ve(require("tls"));var zz=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(il)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=K$e.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var yk=class extends on{constructor(r){super();this.ctx=r;this.name="HelixFetcher";this.createSocketFactory=s((r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);return await this.proxySocketFactory.createSocket(i,o)},"createSocketFactory");this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new zz(r),this.proxySocketFactory=r.get(rA)}static{s(this,"HelixFetcher")}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.ctx)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.ctx)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(r){let n=r.get(po);return super.rejectUnauthorized===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"),B$e({userAgent:`GithubCopilot/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=this.makeAbortController();setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new gB(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new xx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new Hz}};f();f();var Q6=require("fs"),J$e=require("path");var Ck=class extends lo{static{s(this,"LocalFileSystem")}async readFileString(e){return(await Q6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(aa(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=aa(e),n=await Q6.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,J$e.join)(r,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let r=await Q6.promises.lstat(e);if(r.isSymbolicLink())try{let n=await Q6.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};f();var Yz=class extends dh{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Kz=class extends sl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();function IGt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(IGt,"fakeChatModelConfiguration");function TGt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(TGt,"fakeEmbeddingModelConfiguration");var Jz=class extends na{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(IGt(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(TGt(e))}};f();var Xz=class extends mc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Eg}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Zz=class extends $a{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function X$e(t,e,r,n){return M1.create(OIe(t),e,r,n,e)}s(X$e,"createTextDocument");var Qme=class extends Rr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Ti(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=X$e(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=X$e(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},eY=class extends Qme{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var Ome=class extends Va{static{s(this,"NullLog")}logIt(...e){}};function wGt(t){let e=new l5;return e.set(yg,t),e.set(PI,t),e.set(po,new po),e.set(Ef,new Ef({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(il,H$e([])),e.set(rA,hH(e)),e.set(mg,new mg),e.set(ym,new CM),e.set(Am,new Am),e.set(rg,new rg),e.set(lc,new lc(e,"tid=test",!0)),e.set(Nl,new Nl),e.set($a,new Zz),e.set(mc,new Xz),e.set(pg,new U5),e.set(Va,new Ome),e.set(Eu,new Eu),e.set(Bs,new Bs("test-session","test-machine")),e.set(Ml,new tR(e)),e.set(m0,new m0),gM(e,"copilot-test",!0),e.set(kt,new kt(e)),e.set(km,new km),e.set(bm,new MS),e.set(Qr,new sk("tid=test")),e.set(Ki,new AM),e.set(va,new va),e.set(bg,new bg(e)),e.set(Hl,new Hl(e)),e.set(Mm,Sq(e)),e.set(Fu,new Fu),e.set(wd,new wd),e.set(X1,X1.default),e.set(O0,new O0),e.set(Of,new Of(e,!1)),e.set(_a,new _a),e.set(vn,new vn(e)),e.set(b0,new GO),e.set(Ol,new Ol),e.set(Ba,kU(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(tp,new tp(e)),_Gt(e),e.set(vd,new vd(e)),e.set(Go,new Go),e}s(wGt,"_createBaselineContext");function _Gt(t){t.set(Hi,new Hi(t)),t.set(ws,new ws(t)),t.set(wc,new wc(t)),t.set(xl,new xl),t.set(ec,new ec),t.set(sl,new Kz),t.set(Sp,new Sp(t,[])),t.set(na,new Jz),t.set(dh,new Yz),t.set(bA,new bA(t)),t.set(Nb,new Nb),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(X0,new X0)}s(_Gt,"registerConversation");function Z$e(){let t=wGt(new PI(new QS,new Map));return t.set(on,new Vz),t.set(fn,new Ume),t.set(Rr,new eY(t)),t.set(lo,new Ck),t.set(Yc,new Yc(t)),t.set(ol,new ol(t)),t.set(bc,new xH(t)),t.set(Xf,new Xf(t)),t.set(Tg,new x5),t.set(Jm,new RH),aV(t),t}s(Z$e,"createLibTestingContext");var Ume=class extends fn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var tze=Ve(require("fs"));var eze=`${process.env.HOME}/.copilot-testing-gh-token`,tY,rY;function rze(t){let e=new R6(SGt);t.forceSet(Qr,e)}s(rze,"setIntegrationTokenManager");var SGt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(rY)return rY;let e=t||process.env.GITHUB_COPILOT_TOKEN||await RGt(),r=Z$e(),n=new yk(r);return r.forceSet(on,n),rY=pM(r,{...RS({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new ls('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),rY},"getEnvelope");async function RGt(){try{tY??=(await tze.promises.readFile(eze)).toString().trim()}catch{tY??=process.env.GITHUB_TOKEN??""}if(!tY)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${eze}. Run "npm run get_token" to get one.`);return tY}s(RGt,"getTestingGitHubToken");var kGt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function BGt(t,e,r){return rze(t),t.forceSet(kn,new ak(t.get(Qr),r.githubAppId)),["OK",null]}s(BGt,"handleTestingUseTestingTokenChecked");var nze=st(kGt,BGt);f();var DGt=I.Object({});async function PGt(t,e,r){return await new QR().uninstall(t),["OK",null]}s(PGt,"handleUninstallChecked");var ize=st(DGt,PGt);f();var NGt=H4e;function LGt(t,e,r){let n=t.get(Ba),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(LGt,"unregisterContextProviders");var oze=st(NGt,LGt);f();var qme=Ve(require("os"));var FGt=I.Object({expectedCertificate:I.String()});async function MGt(t,e,r){let i=(await mH(t).getAllRootCAs()).map(ok),o=ok(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Vpe(o)}. Only found those installed on the system:${qme.EOL}${i.map(a=>"- "+Vpe(a)).join(qme.EOL)}`},null]}s(MGt,"handleVerifyCertificateChecked");var sze=st(FGt,MGt);f();var QGt=I.Object({});async function OGt(){return[{status:!!await new $P().load()},null]}s(OGt,"handleVerifyKerberosChecked");var aze=st(QGt,OGt);f();var UGt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function qGt(t,e,r){let i=await t.get(Rr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(qGt,"handleVerifyStateChecked");var lze=st(UGt,qGt);f();var WGt=I.Object({});function GGt(t,e,r){return[t.get(Rr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(GGt,"handleVerifyWorkspaceStateChecked");var cze=st(WGt,GGt);var UT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function uze(){let t=new Map;return t.set(jje.method,Vje),t.set($je.method,zje),t.set("getCompletions",Mje),t.set("getCompletionsCycling",Qje),t.set("getPanelCompletions",qje),t.set(vje.method,bje),t.set("getVersion",Wje),t.set("setEditorInfo",lVe),t.set("checkStatus",_We),t.set("checkQuota",wWe),t.set("checkFileStatus",IWe),t.set("signInInitiate",Zpe),t.set("signIn",Zpe),t.set("signInConfirm",cVe),t.set("signInWithGithubToken",uVe),t.set("signOut",dVe),t.set("notifyShown",Zje),t.set("notifyAccepted",Jje),t.set("notifyRejected",Xje),t.set("telemetry/exception",fVe),t.set("textDocument/copilotInlineEdit",Kje),t.set("testing/overrideExpFlags",V$e),t.set("testing/alwaysAuth",mVe),t.set("testing/neverAuth",G$e),t.set("testing/useTestingToken",nze),t.set("testing/setCompletionDocuments",Pje),t.set("testing/setPanelCompletionDocuments",Cje),t.set("testing/triggerShowMessageRequest",Y$e),t.set("testing/flushPromiseQueue",U$e),t.set("testing/getDocument",W$e),t.set("testing/chatml",hVe),t.set("testing/setSyntheticTurns",z$e),t.set("testing/fetch",O$e),t.set("testing/setContentExclusionRules",$$e),t.set("testing/setCopilotEditsResponse",aje),t.set("testing/getContext",q$e),t.set("uninstall",ize),t.set("debug/diagnostics",wje),t.set("debug/listCertificates",Yje),t.set("debug/verifyState",lze),t.set("debug/verifyCertificate",sze),t.set("debug/verifyKerberos",aze),t.set("debug/verifyWorkspaceState",cze),t.set("context/registerProviders",eVe),t.set("context/unregisterProviders",oze),t.set("conversation/preconditions",eje),t.set("conversation/persistence",JHe),t.set("conversation/create",YHe),t.set("conversation/turn",ije),t.set("conversation/turnDelete",oje),t.set("conversation/destroy",KHe),t.set("conversation/rating",tje),t.set("conversation/copyCode",DHe),t.set("conversation/insertCode",PHe),t.set("conversation/templates",nje),t.set("conversation/agents",BHe),t.set("conversation/registerTools",rje),t.set("copilot/models",mje),t.set("copilot/setModelPolicy",hje),t.set("copilot/codeReview",sje),t.set("git/commitGenerate",Gje),t.set("editConversation/create",lje),t.set("editConversation/turn",uje),t.set("editConversation/turnDelete",dje),t.set("editConversation/destroy",cje),t.set("mcp/getTools",fje),t.set("mcp/updateToolsStatus",pje),new UT(t)}s(uze,"getAllMethods");f();f();f();var dze=Ve(wm());var PA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new dze.NotificationType(this.name)}};var Wme=class extends PA{constructor(){super(...arguments);this.name=ete.method;this.params=pIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(kn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},fze=[Wme];f();var Gme=class extends PA{constructor(){super(...arguments);this.name=ote.method;this.params=vIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(is).get(n);o&&d3e(this.ctx,o)}},Hme=class extends PA{constructor(){super(...arguments);this.name=lte.method;this.params=wIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(sh).handleShown(n)}},jme=class extends PA{constructor(){super(...arguments);this.name=ste.method;this.params=bIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(is),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?Pq(this.ctx,a):f3e(this.ctx,a,i))}},pze=[Gme,Hme,jme];f();var nY=class extends PA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(zu).cancel(r.token)}};var HGt=[...fze,...pze,nY];function mze(t,e){for(let r of HGt){let n=new r(t),i=ms.Compile(n.params);e.onNotification(n.type,bu(t,async o=>{Ly(o),i.Check(o)?await n.handle(o):_c.error(t,`Notification ${n.name}:`,new Ic(i.Errors(o)))},`Notification ${n.name}`))}}s(mze,"registerNotifications");f();var gze=Ve(require("events")),iY=Ve(Za());var hze=new _t("AgentTextDocumentConfiguration"),Vme=class{constructor(e){this.ctx=e;this.emitter=new gze.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return M1.create(e,r,n,i)}catch(o){throw hze.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(iY.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),M1.withChanges(e,r,n)}catch(i){throw hze.exception(this.ctx,i,".update"),i}}},Vb=class extends Rr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(nte.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new Vme(r),this._notebookDocuments=new iY.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(yr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Fl(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=Fl(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(n=>{let i=Fl(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Fl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var Aze=ms.Compile(yIe);function Ly(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Ly(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=Ly(e[r])}return t}}s(Ly,"purgeNulls");var yr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Va)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),mze(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(po).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await r.workspace.getConfiguration(["github.copilot",...Kpe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of Kpe)d[p]=u.shift();c.settings=d}return sVe(e,Ly(c))}catch(u){_c.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Vb).didChangeWorkspaceFolders(c),e.get(O0).emit(c)}catch(u){_c.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),r.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Ly(c.initializationOptions);if(d){if(!Aze.Check(d))throw new Ic(Aze.Errors(d));let g=d,y=e.get(fn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):_c.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(_a).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Vb).init(c.workspaceFolders??[]),Cke(this.ctx),e.get(O0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Go).setCapabilities(u),"openURL"in u&&bV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,_c.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await S6(e),this.installationTelemetryTimer=setTimeout(()=>{new QR().startup(e).catch(()=>{})},1e3),e.get(Fy).emit(),await Dke(e))},"onInitialized");return r.onInitialized(bu(e,h,"onInitialized")),e.get(lh).init(),u?.token&&e.get(kn).setTransientSession(null),u?.redirectedTelemetry&&await bWe(e),yze.lt(process.versions.node,"20.8.0")&&_c.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:gh.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:hWe(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(bu(e,o,"onDidChangeConfiguration")),r.listen();let l=new FV;this.ctx.forceSet(Va,l)}async messageHandler(e,r,n){let i=this.ctx.get(UT).handlers.get(e);if(!i)return new gh.ResponseError(tn.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new gh.ResponseError(tn.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new gh.ResponseError(tn.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!yWe(this.ctx.get(fn)))throw new gh.ResponseError(tn.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),Ly(r);try{let[o,a]=await i(this.ctx,n,r);return a?new gh.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new gh.ResponseError(tn.RequestCancelled,"Request was canceled");if(o instanceof ls)return new gh.ResponseError(tn.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof gh.ResponseError||_c.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(ah).dispose()}catch(e){_c.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Va,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),Doe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(va).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Nl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},_c=new _t("lsp");var oY=class t extends g2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(yr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),hl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){hl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(Go).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return hl.debug(this.context,"`copilot/related` not supported"),vke;try{let a=await this.service.connection.sendRequest(cte.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){hl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Dt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){hl.exception(r,o,"copilotRelated")}}};f();var Cze=Ve(Za());var $me=new _t("copilotTokenManager"),zme=class t extends BS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new Cze.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(yr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw $me.debug(this.ctx,"Envelope missing from copilot/token response"),new Ff({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=r;if($me.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new ls("Expired token in copilot/token response");if(i&&n){let u;if(l!==void 0){try{u=new URL(l).origin}catch{$me.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(Ml).updateBaseUrlFromTokenEndpoint(this.ctx,l)}this.ctx.get(kn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Ff({reason:"NotSignedIn"});let c=new TI(a,void 0);return XB(this.ctx,c),c}catch(r){throw r instanceof Error?new ls(r.message,r):r}}},O6=class extends Qr{constructor(r,n=new BS(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new zme(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Go).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var jGt=new _t("Public Code References"),sY=class extends b0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");jGt.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(Go).getCapabilities().ipCodeCitation===!0&&await e.get(yr).connection.sendNotification(tte.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function xze(t){VGt(t)}s(xze,"activateExtensibilityPlatformFeature");function VGt(t){t.set(dh,new Z$(t)),t.set(bA,new bA(t))}s(VGt,"registerContextDependencies");f();var vze=I.String(),Yme=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(lY,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},lY="build-logs",aY=class extends Xl{static{s(this,"BuildLogsSkill")}constructor(e){super(lY,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new Yme(r))}};f();var Kme=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await nz(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new St(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new St([o]),1]);return new St(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},Jme=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},$Gt="directory-references",cY=class{constructor(){this.id=$Gt;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new Jme}processor(e){return new Kme(e)}};f();var zGt=I.Object({uri:I.String(),visibleRange:I.Optional(wa),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),bze=I.Object({files:I.Array(zGt)}),YGt=3,Xme=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=Fb(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(vn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),l=ys(a);if(await this.turnContext.collectFile(dY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===YGt))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(vn).getRelativePath(n),a=new EA(n,void 0,i.visibleRange);return new St([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new St([n])}},dY="recent-files",uY=class extends Xl{static{s(this,"RecentFilesSkill")}constructor(e){super(dY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new Xme(r))}};f();var Eze=I.String(),Zme=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(pY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},pY="runtime-logs",fY=class extends Xl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(pY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new Zme(r))}};f();var mY=Ve(wm());var hY=class extends sl{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return NL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(yr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new mY.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new mY.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new mY.NotificationType("conversation/documentDiff"),r)}};f();var Ize=Ve(Za());var U6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Sp).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(yr).connection.sendNotification(new Ize.NotificationType(this.notificationEndpoint),e)}};function Tze(t){KGt(t),JGt(t),xze(t)}s(Tze,"activateConversationFeature");function KGt(t){t.set(Hi,new Hi(t)),t.set(ec,new ec),t.set(wc,new wc(t)),t.set(na,new SH(t)),t.set(Gy,new Gy),t.set(ws,new ws(t)),t.set(Sp,new Sp(t)),t.set(U6,new U6(t)),t.set(Iu,new TM(t,new IM(t))),t.set(Hy,new Hy),t.set(Nb,new Nb),t.set(sl,new hY(t)),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(X0,new X0)}s(KGt,"registerContextDependencies");function JGt(t){let e=new xl;e.registerSkill(new r$(new t$(t))),e.registerSkill(new S$(new $u(t,RA,xHe))),e.registerSkill(new i$(new $u(t,ch,fGe))),e.registerSkill(new UV(new $u(t,au,NWe))),e.registerSkill(new R$),e.registerSkill(new cY),e.registerSkill(new uY(new $u(t,dY,bze))),e.registerSkill(new qV(new $u(t,IA,FWe))),e.registerSkill(new s$(new $u(t,Mb,bGe))),e.registerSkill(new fY(new $u(t,pY,Eze))),e.registerSkill(new aY(new $u(t,lY,vze))),e.registerSkill(new l$(new $u(t,uh,EGe))),e.registerSkill(new c$(new $u(t,wT,TGe))),t.set(xl,e)}s(JGt,"registerSkills");f();var wze=Ve(ii());var gY=class extends bc{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(yr).connection.sendProgress(new wze.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var _ze=Ve(Za()),Sze=Ve(wm());var AY=class extends nA{constructor(){super(...arguments);this.requestType=new _ze.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ms.Compile(oUe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new Sze.ResponseError(c.code,c.message,c.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return o}};f();var Rze=Ve(Za()),kze=Ve(wm());var yY=class extends ab{constructor(){super(...arguments);this.requestType=new Rze.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ms.Compile(iUe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new kze.ResponseError(c.code,c.message,c.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Ci(i.value):new yT(i.value));return new Gi(n,r.status??"success")}};f();f();function Bze(t,e,r){try{let n=t.get(kt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return Mr.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(Bze,"fillInJavaActiveExperiments");var ehe=Ve(wm());var XGt={type:new ehe.NotificationType("featureFlagsNotification")},ZGt={type:new ehe.NotificationType("copilot/didChangeFeatureFlags")},q6=class{constructor(e){this.ctx=e;Ds(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,n=r.get(kt),i=await n.updateExPValuesAndAssignments(),o=n.ideEnableCopilotNewBilling(i),a={};r.get(kt).excludeRelatedFiles(i)&&(a.ExcludeRelatedFiles=!0);let l=_ie(r,i);l.length>0&&(a.ExpContextProviders=l);let c=new Map;L4e(r,l,c,i),wU(r,c,i),Bze(r,c,i);for(let[p,m]of c.entries())a[p]=m;let u=r.get(Go),d=r.get(yr).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(ZGt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:a,cnb:o});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,cnb:o,ae:a};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification(XGt.type,p)}}};f();var CY=class extends Ki{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(yr).connection.sendNotification(ute.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(yr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var Dze=new Ck;f();f();f();f();var Qo=new _t("CopilotMCP");async function the(t,e){await t.get(Jm).notifyLog(e)}s(the,"notifyMCPRuntimeLog");async function NA(t,e){await the(t,{...e,level:"error"})}s(NA,"notifyMCPRuntimeError");async function qT(t,e){await the(t,{...e,level:"warning"})}s(qT,"notifyMCPRuntimeWarning");async function uu(t,e){await the(t,{...e,level:"info"})}s(uu,"notifyMCPRuntimeInfo");f();var rhe=/[^a-z0-9_-]/gi,eHt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Pze(){let t={};for(let e of eHt){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Pze,"getDefaultEnvironment");async function Nze(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Qo.warn(t,n),await qT(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(rhe.lastIndex=0,rhe.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Qo.warn(t,n),await qT(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(rhe,"_")}else e._nameForModel=e.name;return e}s(Nze,"normalizeTool");f();f();f();f();var ro;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(ro||(ro={}));var ihe;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(ihe||(ihe={}));var fr=ro.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xy=s(t=>{switch(typeof t){case"undefined":return fr.undefined;case"string":return fr.string;case"number":return isNaN(t)?fr.nan:fr.number;case"boolean":return fr.boolean;case"function":return fr.function;case"bigint":return fr.bigint;case"symbol":return fr.symbol;case"object":return Array.isArray(t)?fr.array:t===null?fr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fr.promise:typeof Map<"u"&&t instanceof Map?fr.map:typeof Set<"u"&&t instanceof Set?fr.set:typeof Date<"u"&&t instanceof Date?fr.date:fr.object;default:return fr.unknown}},"getParsedType"),Rt=ro.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tHt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),ef=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ro.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ef.create=t=>new ef(t);var bk=s((t,e)=>{let r;switch(t.code){case Rt.invalid_type:t.received===fr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Rt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ro.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:r=`Unrecognized key(s) in object: ${ro.joinValues(t.keys,", ")}`;break;case Rt.invalid_union:r="Invalid input";break;case Rt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ro.joinValues(t.options)}`;break;case Rt.invalid_enum_value:r=`Invalid enum value. Expected ${ro.joinValues(t.options)}, received '${t.received}'`;break;case Rt.invalid_arguments:r="Invalid function arguments";break;case Rt.invalid_return_type:r="Invalid function return type";break;case Rt.invalid_date:r="Invalid date";break;case Rt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ro.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Rt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Rt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Rt.custom:r="Invalid input";break;case Rt.invalid_intersection_types:r="Intersection results could not be merged";break;case Rt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Rt.not_finite:r="Number must be finite";break;default:r=e.defaultError,ro.assertNever(t)}return{message:r}},"errorMap"),Qze=bk;function rHt(t){Qze=t}s(rHt,"setErrorMap");function xY(){return Qze}s(xY,"getErrorMap");var vY=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),nHt=[];function tr(t,e){let r=xY(),n=vY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===bk?void 0:bk].filter(i=>!!i)});t.common.issues.push(n)}s(tr,"addIssueToContext");var du=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Mn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Mn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Mn=Object.freeze({status:"aborted"}),vk=s(t=>({status:"dirty",value:t}),"DIRTY"),Yu=s(t=>({status:"valid",value:t}),"OK"),ohe=s(t=>t.status==="aborted","isAborted"),she=s(t=>t.status==="dirty","isDirty"),WT=s(t=>t.status==="valid","isValid"),H6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function bY(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(bY,"__classPrivateFieldGet");function Oze(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Oze,"__classPrivateFieldSet");var Pr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pr||(Pr={}));var W6,G6,Pp=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Lze=s((t,e)=>{if(WT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ef(t.common.issues);return this._error=r,this._error}}},"handleResult");function ti(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ti,"processCreateParams");var ri=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Xy(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new du,ctx:{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(H6(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Lze(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return WT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>WT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(H6(i)?i:Promise.resolve(i));return Lze(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:Rt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new tf({schema:this,typeName:Dn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Dp.create(this,this._def)}nullable(){return FA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eC.create(this)}promise(){return Yb.create(this,this._def)}or(e){return YT.create([this,e],this._def)}and(e){return KT.create(this,e,this._def)}transform(e){return new tf({...ti(this._def),schema:this,typeName:Dn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new tw({...ti(this._def),innerType:this,defaultValue:r,typeName:Dn.ZodDefault})}brand(){return new j6({typeName:Dn.ZodBranded,type:this,...ti(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new rw({...ti(this._def),innerType:this,catchValue:r,typeName:Dn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return V6.create(this,e)}readonly(){return nw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},iHt=/^c[^\s-]{8,}$/i,oHt=/^[0-9a-z]+$/,sHt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,aHt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lHt=/^[a-z0-9_-]{21}$/i,cHt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uHt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dHt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fHt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",nhe,pHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,AHt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Uze="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",CHt=new RegExp(`^${Uze}$`);function qze(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(qze,"timeRegexSource");function xHt(t){return new RegExp(`^${qze(t)}$`)}s(xHt,"timeRegex");function Wze(t){let e=`${Uze}T${qze(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(Wze,"datetimeRegex");function vHt(t,e){return!!((e==="v4"||!e)&&pHt.test(t)||(e==="v6"||!e)&&hHt.test(t))}s(vHt,"isValidIP");function bHt(t,e){if(!cHt.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(bHt,"isValidJWT");function EHt(t,e){return!!((e==="v4"||!e)&&mHt.test(t)||(e==="v6"||!e)&&gHt.test(t))}s(EHt,"isValidCidr");var $b=class t extends ri{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fr.string){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.string,received:o.parsedType}),Mn}let n=new du,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tr(i,{code:Rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tr(i,{code:Rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")dHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"email",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")nhe||(nhe=new RegExp(fHt,"u")),nhe.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"emoji",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")aHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"uuid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")lHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"nanoid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")iHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")oHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid2",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")sHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ulid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tr(i,{validation:"url",code:Rt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"regex",code:Rt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Wze(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?CHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?xHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?uHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"duration",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?vHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ip",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?bHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"jwt",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?EHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cidr",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?AHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?yHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64url",code:Rt.invalid_string,message:o.message}),n.dirty()):ro.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Rt.invalid_string,...Pr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Pr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Pr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Pr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Pr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Pr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Pr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Pr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Pr.errToObj(r)})}nonempty(e){return this.min(1,Pr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};$b.create=t=>{var e;return new $b({checks:[],typeName:Dn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};function IHt(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(IHt,"floatSafeRemainder");var GT=class t extends ri{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fr.number){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.number,received:o.parsedType}),Mn}let n,i=new du;for(let o of this._def.checks)o.kind==="int"?ro.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?IHt(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_finite,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Pr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ro.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};GT.create=t=>new GT({checks:[],typeName:Dn.ZodNumber,coerce:t?.coerce||!1,...ti(t)});var HT=class t extends ri{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==fr.bigint)return this._getInvalidInput(e);let n,i=new du;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return tr(r,{code:Rt.invalid_type,expected:fr.bigint,received:r.parsedType}),Mn}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};HT.create=t=>{var e;return new HT({checks:[],typeName:Dn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};var jT=class extends ri{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fr.boolean){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.boolean,received:n.parsedType}),Mn}return Yu(e.data)}};jT.create=t=>new jT({typeName:Dn.ZodBoolean,coerce:t?.coerce||!1,...ti(t)});var VT=class t extends ri{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fr.date){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.date,received:o.parsedType}),Mn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_date}),Mn}let n=new du,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):ro.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Pr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Pr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};VT.create=t=>new VT({checks:[],coerce:t?.coerce||!1,typeName:Dn.ZodDate,...ti(t)});var Ek=class extends ri{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==fr.symbol){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.symbol,received:n.parsedType}),Mn}return Yu(e.data)}};Ek.create=t=>new Ek({typeName:Dn.ZodSymbol,...ti(t)});var $T=class extends ri{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.undefined,received:n.parsedType}),Mn}return Yu(e.data)}};$T.create=t=>new $T({typeName:Dn.ZodUndefined,...ti(t)});var zT=class extends ri{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==fr.null){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.null,received:n.parsedType}),Mn}return Yu(e.data)}};zT.create=t=>new zT({typeName:Dn.ZodNull,...ti(t)});var zb=class extends ri{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Yu(e.data)}};zb.create=t=>new zb({typeName:Dn.ZodAny,...ti(t)});var Zy=class extends ri{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yu(e.data)}};Zy.create=t=>new Zy({typeName:Dn.ZodUnknown,...ti(t)});var Ah=class extends ri{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return tr(r,{code:Rt.invalid_type,expected:fr.never,received:r.parsedType}),Mn}};Ah.create=t=>new Ah({typeName:Dn.ZodNever,...ti(t)});var Ik=class extends ri{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.void,received:n.parsedType}),Mn}return Yu(e.data)}};Ik.create=t=>new Ik({typeName:Dn.ZodVoid,...ti(t)});var eC=class t extends ri{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==fr.array)return tr(r,{code:Rt.invalid_type,expected:fr.array,received:r.parsedType}),Mn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(tr(r,{code:a?Rt.too_big:Rt.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(tr(r,{code:Rt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(tr(r,{code:Rt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new Pp(r,a,r.path,l)))).then(a=>du.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new Pp(r,a,r.path,l)));return du.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Pr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Pr.toString(r)}})}nonempty(e){return this.min(1,e)}};eC.create=(t,e)=>new eC({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dn.ZodArray,...ti(e)});function xk(t){if(t instanceof jd){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Dp.create(xk(n))}return new jd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof eC?new eC({...t._def,type:xk(t.element)}):t instanceof Dp?Dp.create(xk(t.unwrap())):t instanceof FA?FA.create(xk(t.unwrap())):t instanceof LA?LA.create(t.items.map(e=>xk(e))):t}s(xk,"deepPartialify");var jd=class t extends ri{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ro.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==fr.object){let u=this._getOrReturnCtx(e);return tr(u,{code:Rt.invalid_type,expected:fr.object,received:u.parsedType}),Mn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ah&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Pp(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ah){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tr(i,{code:Rt.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Pp(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>du.mergeObjectSync(n,u)):du.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Pr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Pr.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Dn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return ro.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return xk(this)}partial(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Dp;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Gze(ro.objectKeys(this.shape))}};jd.create=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});jd.strictCreate=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});jd.lazycreate=(t,e)=>new jd({shape:t,unknownKeys:"strip",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});var YT=class extends ri{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new ef(l.ctx.common.issues));return tr(r,{code:Rt.invalid_union,unionErrors:a}),Mn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new ef(c));return tr(r,{code:Rt.invalid_union,unionErrors:l}),Mn}}get options(){return this._def.options}};YT.create=(t,e)=>new YT({options:t,typeName:Dn.ZodUnion,...ti(e)});var Jy=s(t=>t instanceof JT?Jy(t.schema):t instanceof tf?Jy(t.innerType()):t instanceof XT?[t.value]:t instanceof ZT?t.options:t instanceof ew?ro.objectValues(t.enum):t instanceof tw?Jy(t._def.innerType):t instanceof $T?[void 0]:t instanceof zT?[null]:t instanceof Dp?[void 0,...Jy(t.unwrap())]:t instanceof FA?[null,...Jy(t.unwrap())]:t instanceof j6||t instanceof nw?Jy(t.unwrap()):t instanceof rw?Jy(t._def.innerType):[],"getDiscriminator"),EY=class t extends ri{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.object)return tr(r,{code:Rt.invalid_type,expected:fr.object,received:r.parsedType}),Mn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(tr(r,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Mn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Jy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Dn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ti(n)})}};function ahe(t,e){let r=Xy(t),n=Xy(e);if(t===e)return{valid:!0,data:t};if(r===fr.object&&n===fr.object){let i=ro.objectKeys(e),o=ro.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=ahe(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===fr.array&&n===fr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=ahe(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===fr.date&&n===fr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(ahe,"mergeValues");var KT=class extends ri{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(ohe(o)||ohe(a))return Mn;let l=ahe(o.value,a.value);return l.valid?((she(o)||she(a))&&r.dirty(),{status:r.value,value:l.data}):(tr(n,{code:Rt.invalid_intersection_types}),Mn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};KT.create=(t,e,r)=>new KT({left:t,right:e,typeName:Dn.ZodIntersection,...ti(r)});var LA=class t extends ri{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.array)return tr(n,{code:Rt.invalid_type,expected:fr.array,received:n.parsedType}),Mn;if(n.data.length<this._def.items.length)return tr(n,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Mn;!this._def.rest&&n.data.length>this._def.items.length&&(tr(n,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Pp(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>du.mergeArray(r,a)):du.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};LA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new LA({items:t,typeName:Dn.ZodTuple,rest:null,...ti(e)})};var IY=class t extends ri{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.object)return tr(n,{code:Rt.invalid_type,expected:fr.object,received:n.parsedType}),Mn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new Pp(n,l,n.path,l)),value:a._parse(new Pp(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?du.mergeObjectAsync(r,i):du.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ri?new t({keyType:e,valueType:r,typeName:Dn.ZodRecord,...ti(n)}):new t({keyType:$b.create(),valueType:e,typeName:Dn.ZodRecord,...ti(r)})}},Tk=class extends ri{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.map)return tr(n,{code:Rt.invalid_type,expected:fr.map,received:n.parsedType}),Mn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new Pp(n,l,n.path,[u,"key"])),value:o._parse(new Pp(n,c,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Mn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Mn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Tk.create=(t,e,r)=>new Tk({valueType:e,keyType:t,typeName:Dn.ZodMap,...ti(r)});var wk=class t extends ri{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.set)return tr(n,{code:Rt.invalid_type,expected:fr.set,received:n.parsedType}),Mn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(tr(n,{code:Rt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(tr(n,{code:Rt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Mn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let l=[...n.data.values()].map((c,u)=>o._parse(new Pp(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Pr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};wk.create=(t,e)=>new wk({valueType:t,minSize:null,maxSize:null,typeName:Dn.ZodSet,...ti(e)});var TY=class t extends ri{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.function)return tr(r,{code:Rt.invalid_type,expected:fr.function,received:r.parsedType}),Mn;function n(l,c){return vY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xY(),bk].filter(u=>!!u),issueData:{code:Rt.invalid_arguments,argumentsError:c}})}s(n,"makeArgsIssue");function i(l,c){return vY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xY(),bk].filter(u=>!!u),issueData:{code:Rt.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Yb){let l=this;return Yu(async function(...c){let u=new ef([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(n(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return Yu(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new ef([n(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new ef([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:LA.create(e).rest(Zy.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||LA.create([]).rest(Zy.create()),returns:r||Zy.create(),typeName:Dn.ZodFunction,...ti(n)})}},JT=class extends ri{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};JT.create=(t,e)=>new JT({getter:t,typeName:Dn.ZodLazy,...ti(e)});var XT=class extends ri{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return tr(r,{received:r.data,code:Rt.invalid_literal,expected:this._def.value}),Mn}return{status:"valid",value:e.data}}get value(){return this._def.value}};XT.create=(t,e)=>new XT({value:t,typeName:Dn.ZodLiteral,...ti(e)});function Gze(t,e){return new ZT({values:t,typeName:Dn.ZodEnum,...ti(e)})}s(Gze,"createZodEnum");var ZT=class t extends ri{static{s(this,"ZodEnum")}constructor(){super(...arguments),W6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{expected:ro.joinValues(n),received:r.parsedType,code:Rt.invalid_type}),Mn}if(bY(this,W6,"f")||Oze(this,W6,new Set(this._def.values),"f"),!bY(this,W6,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{received:r.data,code:Rt.invalid_enum_value,options:n}),Mn}return Yu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};W6=new WeakMap;ZT.create=Gze;var ew=class extends ri{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),G6.set(this,void 0)}_parse(e){let r=ro.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==fr.string&&n.parsedType!==fr.number){let i=ro.objectValues(r);return tr(n,{expected:ro.joinValues(i),received:n.parsedType,code:Rt.invalid_type}),Mn}if(bY(this,G6,"f")||Oze(this,G6,new Set(ro.getValidEnumValues(this._def.values)),"f"),!bY(this,G6,"f").has(e.data)){let i=ro.objectValues(r);return tr(n,{received:n.data,code:Rt.invalid_enum_value,options:i}),Mn}return Yu(e.data)}get enum(){return this._def.values}};G6=new WeakMap;ew.create=(t,e)=>new ew({values:t,typeName:Dn.ZodNativeEnum,...ti(e)});var Yb=class extends ri{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.promise&&r.common.async===!1)return tr(r,{code:Rt.invalid_type,expected:fr.promise,received:r.parsedType}),Mn;let n=r.parsedType===fr.promise?r.data:Promise.resolve(r.data);return Yu(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Yb.create=(t,e)=>new Yb({type:t,typeName:Dn.ZodPromise,...ti(e)});var tf=class extends ri{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return Mn;let c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Mn:c.status==="dirty"||r.value==="dirty"?vk(c.value):c});{if(r.value==="aborted")return Mn;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?Mn:l.status==="dirty"||r.value==="dirty"?vk(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Mn:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Mn:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!WT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>WT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);ro.assertNever(i)}};tf.create=(t,e,r)=>new tf({schema:t,typeName:Dn.ZodEffects,effect:e,...ti(r)});tf.createWithPreprocess=(t,e,r)=>new tf({schema:e,effect:{type:"preprocess",transform:t},typeName:Dn.ZodEffects,...ti(r)});var Dp=class extends ri{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===fr.undefined?Yu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dp.create=(t,e)=>new Dp({innerType:t,typeName:Dn.ZodOptional,...ti(e)});var FA=class extends ri{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===fr.null?Yu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};FA.create=(t,e)=>new FA({innerType:t,typeName:Dn.ZodNullable,...ti(e)});var tw=class extends ri{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===fr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};tw.create=(t,e)=>new tw({innerType:t,typeName:Dn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ti(e)});var rw=class extends ri{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return H6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ef(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ef(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};rw.create=(t,e)=>new rw({innerType:t,typeName:Dn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ti(e)});var _k=class extends ri{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==fr.nan){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.nan,received:n.parsedType}),Mn}return{status:"valid",value:e.data}}};_k.create=t=>new _k({typeName:Dn.ZodNaN,...ti(t)});var THt=Symbol("zod_brand"),j6=class extends ri{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},V6=class t extends ri{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Mn:o.status==="dirty"?(r.dirty(),vk(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Mn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Dn.ZodPipeline})}},nw=class extends ri{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(WT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return H6(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};nw.create=(t,e)=>new nw({innerType:t,typeName:Dn.ZodReadonly,...ti(e)});function Fze(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Fze,"cleanParams");function Hze(t,e={},r){return t?zb.create().superRefine((n,i)=>{var o,a;let l=t(n);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=Fze(e,n),m=(d=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=Fze(e,n),u=(a=(o=c.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):zb.create()}s(Hze,"custom");var wHt={object:jd.lazycreate},Dn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dn||(Dn={}));var _Ht=s((t,e={message:`Input not instance of ${t.name}`})=>Hze(r=>r instanceof t,e),"instanceOfType"),jze=$b.create,Vze=GT.create,SHt=_k.create,RHt=HT.create,$ze=jT.create,kHt=VT.create,BHt=Ek.create,DHt=$T.create,PHt=zT.create,NHt=zb.create,LHt=Zy.create,FHt=Ah.create,MHt=Ik.create,QHt=eC.create,OHt=jd.create,UHt=jd.strictCreate,qHt=YT.create,WHt=EY.create,GHt=KT.create,HHt=LA.create,jHt=IY.create,VHt=Tk.create,$Ht=wk.create,zHt=TY.create,YHt=JT.create,KHt=XT.create,JHt=ZT.create,XHt=ew.create,ZHt=Yb.create,Mze=tf.create,ejt=Dp.create,tjt=FA.create,rjt=tf.createWithPreprocess,njt=V6.create,ijt=s(()=>jze().optional(),"ostring"),ojt=s(()=>Vze().optional(),"onumber"),sjt=s(()=>$ze().optional(),"oboolean"),ajt={string:s(t=>$b.create({...t,coerce:!0}),"string"),number:s(t=>GT.create({...t,coerce:!0}),"number"),boolean:s(t=>jT.create({...t,coerce:!0}),"boolean"),bigint:s(t=>HT.create({...t,coerce:!0}),"bigint"),date:s(t=>VT.create({...t,coerce:!0}),"date")},ljt=Mn,K=Object.freeze({__proto__:null,defaultErrorMap:bk,setErrorMap:rHt,getErrorMap:xY,makeIssue:vY,EMPTY_PATH:nHt,addIssueToContext:tr,ParseStatus:du,INVALID:Mn,DIRTY:vk,OK:Yu,isAborted:ohe,isDirty:she,isValid:WT,isAsync:H6,get util(){return ro},get objectUtil(){return ihe},ZodParsedType:fr,getParsedType:Xy,ZodType:ri,datetimeRegex:Wze,ZodString:$b,ZodNumber:GT,ZodBigInt:HT,ZodBoolean:jT,ZodDate:VT,ZodSymbol:Ek,ZodUndefined:$T,ZodNull:zT,ZodAny:zb,ZodUnknown:Zy,ZodNever:Ah,ZodVoid:Ik,ZodArray:eC,ZodObject:jd,ZodUnion:YT,ZodDiscriminatedUnion:EY,ZodIntersection:KT,ZodTuple:LA,ZodRecord:IY,ZodMap:Tk,ZodSet:wk,ZodFunction:TY,ZodLazy:JT,ZodLiteral:XT,ZodEnum:ZT,ZodNativeEnum:ew,ZodPromise:Yb,ZodEffects:tf,ZodTransformer:tf,ZodOptional:Dp,ZodNullable:FA,ZodDefault:tw,ZodCatch:rw,ZodNaN:_k,BRAND:THt,ZodBranded:j6,ZodPipeline:V6,ZodReadonly:nw,custom:Hze,Schema:ri,ZodSchema:ri,late:wHt,get ZodFirstPartyTypeKind(){return Dn},coerce:ajt,any:NHt,array:QHt,bigint:RHt,boolean:$ze,date:kHt,discriminatedUnion:WHt,effect:Mze,enum:JHt,function:zHt,instanceof:_Ht,intersection:GHt,lazy:YHt,literal:KHt,map:VHt,nan:SHt,nativeEnum:XHt,never:FHt,null:PHt,nullable:tjt,number:Vze,object:OHt,oboolean:sjt,onumber:ojt,optional:ejt,ostring:ijt,pipeline:njt,preprocess:rjt,promise:ZHt,record:jHt,set:$Ht,strictObject:UHt,string:jze,symbol:BHt,transformer:Mze,tuple:HHt,undefined:DHt,union:qHt,unknown:LHt,void:MHt,NEVER:ljt,ZodIssueCode:Rt,quotelessJson:tHt,ZodError:ef});var $6="2025-03-26",zze=[$6,"2024-11-05","2024-10-07"],wY="2.0",Yze=K.union([K.string(),K.number().int()]),Kze=K.string(),cjt=K.object({progressToken:K.optional(Yze)}).passthrough(),yh=K.object({_meta:K.optional(cjt)}).passthrough(),rf=K.object({method:K.string(),params:K.optional(yh)}),z6=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),MA=K.object({method:K.string(),params:K.optional(z6)}),Ch=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),_Y=K.union([K.string(),K.number().int()]),Jze=K.object({jsonrpc:K.literal(wY),id:_Y}).merge(rf).strict(),SY=s(t=>Jze.safeParse(t).success,"isJSONRPCRequest"),Xze=K.object({jsonrpc:K.literal(wY)}).merge(MA).strict(),Zze=s(t=>Xze.safeParse(t).success,"isJSONRPCNotification"),eYe=K.object({jsonrpc:K.literal(wY),id:_Y,result:Ch}).strict(),Y6=s(t=>eYe.safeParse(t).success,"isJSONRPCResponse"),Kb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Kb||(Kb={}));var tYe=K.object({jsonrpc:K.literal(wY),id:_Y,error:K.object({code:K.number().int(),message:K.string(),data:K.optional(K.unknown())})}).strict(),rYe=s(t=>tYe.safeParse(t).success,"isJSONRPCError"),Jb=K.union([Jze,Xze,eYe,tYe]),ow=Ch.strict(),RY=MA.extend({method:K.literal("notifications/cancelled"),params:z6.extend({requestId:_Y,reason:K.string().optional()})}),nYe=K.object({name:K.string(),version:K.string()}).passthrough(),ujt=K.object({experimental:K.optional(K.object({}).passthrough()),sampling:K.optional(K.object({}).passthrough()),roots:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),djt=rf.extend({method:K.literal("initialize"),params:yh.extend({protocolVersion:K.string(),capabilities:ujt,clientInfo:nYe})});var fjt=K.object({experimental:K.optional(K.object({}).passthrough()),logging:K.optional(K.object({}).passthrough()),completions:K.optional(K.object({}).passthrough()),prompts:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough()),resources:K.optional(K.object({subscribe:K.optional(K.boolean()),listChanged:K.optional(K.boolean())}).passthrough()),tools:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),lhe=Ch.extend({protocolVersion:K.string(),capabilities:fjt,serverInfo:nYe,instructions:K.optional(K.string())}),iYe=MA.extend({method:K.literal("notifications/initialized")}),oYe=s(t=>iYe.safeParse(t).success,"isInitializedNotification"),kY=rf.extend({method:K.literal("ping")}),pjt=K.object({progress:K.number(),total:K.optional(K.number())}).passthrough(),BY=MA.extend({method:K.literal("notifications/progress"),params:z6.merge(pjt).extend({progressToken:Yze})}),DY=rf.extend({params:yh.extend({cursor:K.optional(Kze)}).optional()}),PY=Ch.extend({nextCursor:K.optional(Kze)}),sYe=K.object({uri:K.string(),mimeType:K.optional(K.string())}).passthrough(),aYe=sYe.extend({text:K.string()}),lYe=sYe.extend({blob:K.string().base64()}),mjt=K.object({uri:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),hjt=K.object({uriTemplate:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),gjt=DY.extend({method:K.literal("resources/list")}),che=PY.extend({resources:K.array(mjt)}),Ajt=DY.extend({method:K.literal("resources/templates/list")}),uhe=PY.extend({resourceTemplates:K.array(hjt)}),yjt=rf.extend({method:K.literal("resources/read"),params:yh.extend({uri:K.string()})}),dhe=Ch.extend({contents:K.array(K.union([aYe,lYe]))}),Cjt=MA.extend({method:K.literal("notifications/resources/list_changed")}),xjt=rf.extend({method:K.literal("resources/subscribe"),params:yh.extend({uri:K.string()})}),vjt=rf.extend({method:K.literal("resources/unsubscribe"),params:yh.extend({uri:K.string()})}),bjt=MA.extend({method:K.literal("notifications/resources/updated"),params:z6.extend({uri:K.string()})}),Ejt=K.object({name:K.string(),description:K.optional(K.string()),required:K.optional(K.boolean())}).passthrough(),Ijt=K.object({name:K.string(),description:K.optional(K.string()),arguments:K.optional(K.array(Ejt))}).passthrough(),Tjt=DY.extend({method:K.literal("prompts/list")}),fhe=PY.extend({prompts:K.array(Ijt)}),wjt=rf.extend({method:K.literal("prompts/get"),params:yh.extend({name:K.string(),arguments:K.optional(K.record(K.string()))})}),NY=K.object({type:K.literal("text"),text:K.string()}).passthrough(),LY=K.object({type:K.literal("image"),data:K.string().base64(),mimeType:K.string()}).passthrough(),FY=K.object({type:K.literal("audio"),data:K.string().base64(),mimeType:K.string()}).passthrough(),cYe=K.object({type:K.literal("resource"),resource:K.union([aYe,lYe])}).passthrough(),_jt=K.object({role:K.enum(["user","assistant"]),content:K.union([NY,LY,FY,cYe])}).passthrough(),phe=Ch.extend({description:K.optional(K.string()),messages:K.array(_jt)}),K6=MA.extend({method:K.literal("notifications/prompts/list_changed")}),Sjt=K.object({title:K.optional(K.string()),readOnlyHint:K.optional(K.boolean()),destructiveHint:K.optional(K.boolean()),idempotentHint:K.optional(K.boolean()),openWorldHint:K.optional(K.boolean())}).passthrough(),Rjt=K.object({name:K.string(),description:K.optional(K.string()),inputSchema:K.object({type:K.literal("object"),properties:K.optional(K.object({}).passthrough())}).passthrough(),annotations:K.optional(Sjt)}).passthrough(),kjt=DY.extend({method:K.literal("tools/list")}),mhe=PY.extend({tools:K.array(Rjt)}),MY=Ch.extend({content:K.array(K.union([NY,LY,FY,cYe])),isError:K.boolean().default(!1).optional()}),pci=MY.or(Ch.extend({toolResult:K.unknown()})),Bjt=rf.extend({method:K.literal("tools/call"),params:yh.extend({name:K.string(),arguments:K.optional(K.record(K.unknown()))})}),J6=MA.extend({method:K.literal("notifications/tools/list_changed")}),uYe=K.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Djt=rf.extend({method:K.literal("logging/setLevel"),params:yh.extend({level:uYe})}),hhe=MA.extend({method:K.literal("notifications/message"),params:z6.extend({level:uYe,logger:K.optional(K.string()),data:K.unknown()})}),Pjt=K.object({name:K.string().optional()}).passthrough(),Njt=K.object({hints:K.optional(K.array(Pjt)),costPriority:K.optional(K.number().min(0).max(1)),speedPriority:K.optional(K.number().min(0).max(1)),intelligencePriority:K.optional(K.number().min(0).max(1))}).passthrough(),Ljt=K.object({role:K.enum(["user","assistant"]),content:K.union([NY,LY,FY])}).passthrough(),Fjt=rf.extend({method:K.literal("sampling/createMessage"),params:yh.extend({messages:K.array(Ljt),systemPrompt:K.optional(K.string()),includeContext:K.optional(K.enum(["none","thisServer","allServers"])),temperature:K.optional(K.number()),maxTokens:K.number().int(),stopSequences:K.optional(K.array(K.string())),metadata:K.optional(K.object({}).passthrough()),modelPreferences:K.optional(Njt)})}),Mjt=Ch.extend({model:K.string(),stopReason:K.optional(K.enum(["endTurn","stopSequence","maxTokens"]).or(K.string())),role:K.enum(["user","assistant"]),content:K.discriminatedUnion("type",[NY,LY,FY])}),Qjt=K.object({type:K.literal("ref/resource"),uri:K.string()}).passthrough(),Ojt=K.object({type:K.literal("ref/prompt"),name:K.string()}).passthrough(),Ujt=rf.extend({method:K.literal("completion/complete"),params:yh.extend({ref:K.union([Ojt,Qjt]),argument:K.object({name:K.string(),value:K.string()}).passthrough()})}),ghe=Ch.extend({completion:K.object({values:K.array(K.string()).max(100),total:K.optional(K.number().int()),hasMore:K.optional(K.boolean())}).passthrough()}),qjt=K.object({uri:K.string().startsWith("file://"),name:K.optional(K.string())}).passthrough(),Wjt=rf.extend({method:K.literal("roots/list")}),Gjt=Ch.extend({roots:K.array(qjt)}),Hjt=MA.extend({method:K.literal("notifications/roots/list_changed")}),mci=K.union([kY,djt,Ujt,Djt,wjt,Tjt,gjt,Ajt,yjt,xjt,vjt,Bjt,kjt]),hci=K.union([RY,BY,iYe,Hjt]),gci=K.union([ow,Mjt,Gjt]),Aci=K.union([kY,Fjt,Wjt]),yci=K.union([RY,BY,hhe,bjt,Cjt,J6,K6]),Cci=K.union([ow,lhe,ghe,phe,fhe,che,uhe,dhe,MY,mhe]),iw=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var jjt=6e4,QY=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(RY,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(BY,r=>{this._onprogress(r)}),this.setRequestHandler(kY,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new iw(Kb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{Y6(r)||rYe(r)?this._onresponse(r):SY(r)?this._onrequest(r,n):Zze(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new iw(Kb.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let l=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Kb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Kb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),Y6(e))n(e);else{let i=new iw(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=n?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let B=r.parse(_.result);l(B)}catch(B){c(B)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=n?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=n?.timeout)!==null&&m!==void 0?m:jjt,E=s(()=>v(new iw(Kb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,n?.maxTotalTimeout,E,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function dYe(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(dYe,"mergeCapabilities");var OY=class extends QY{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=dYe(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:$6,capabilities:this._capabilities,clientInfo:this._clientInfo}},lhe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!zze.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},ow,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},ghe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},ow,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},phe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},fhe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},che,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},uhe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},dhe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},ow,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},ow,r)}async callTool(e,r=MY,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},mhe,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var fYe=Ve(require("events"));var Xb=class{constructor(e,r,n){this.transport=null;this.emitter=new fYe.default;this.ctx=e,this.mcp=new OY({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Qo.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Qo.error(this.ctx,"Connection failed:",r),await NA(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Nze(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;uu(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new Gi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Qo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Qo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Qo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}return n}addListeners(){this.mcp.onclose=()=>{Qo.info(this.ctx,`MCP server ${this.name} connection closed.`),uu(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Qo.error(this.ctx,`MCP server ${this.name} error:`,e),NA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(hhe,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Qo.info(this.ctx,`MCP server ${this.name} log:`,r),uu(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":Qo.warn(this.ctx,`MCP server ${this.name} log:`,r),qT(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Qo.error(this.ctx,`MCP server ${this.name} log:`,r),NA(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:Qo.info(this.ctx,`MCP server ${this.name} log:`,r),uu(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new Gi([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Ci(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new AT({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var UY=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Ahe(t){}s(Ahe,"noop");function qY(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=Ahe,onError:r=Ahe,onRetry:n=Ahe,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=Vjt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?n(parseInt(v,10)):r(new UY(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:r(new UY(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(qY,"createParser");function Vjt(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let l=t.slice(n,a);e.push(l),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(Vjt,"splitLines");var GY=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(pYe(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(pYe(this),r)}};function $jt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s($jt,"syntaxError");function yhe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(yhe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${yhe(t.cause)}`:t.message:`${t}`}s(yhe,"flattenError");function pYe(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(pYe,"inspectableError");var hYe=s(t=>{throw TypeError(t)},"__typeError"),whe=s((t,e,r)=>e.has(t)||hYe("Cannot "+r),"__accessCheck"),ki=s((t,e,r)=>(whe(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),bl=s((t,e,r)=>e.has(t)?hYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),qs=s((t,e,r,n)=>(whe(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),tC=s((t,e,r)=>(whe(t,e,"access private method"),r),"__privateMethod"),Vd,sw,Sk,WY,HY,eN,Bk,tN,Zb,Rk,Dk,kk,X6,xh,Che,xhe,vhe,mYe,bhe,Ehe,Z6,Ihe,The,aw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),bl(this,xh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,bl(this,Vd),bl(this,sw),bl(this,Sk),bl(this,WY),bl(this,HY),bl(this,eN),bl(this,Bk),bl(this,tN,null),bl(this,Zb),bl(this,Rk),bl(this,Dk,null),bl(this,kk,null),bl(this,X6,null),bl(this,xhe,async o=>{var a;ki(this,Rk).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){tC(this,xh,Z6).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?qs(this,Sk,new URL(o.url)):qs(this,Sk,void 0),u!==200){tC(this,xh,Z6).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){tC(this,xh,Z6).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(ki(this,Vd)===this.CLOSED)return;qs(this,Vd,this.OPEN);let p=new Event("open");if((a=ki(this,X6))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){tC(this,xh,Z6).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&ki(this,Rk).feed(m.decode(v,{stream:!y})),y&&(g=!1,ki(this,Rk).reset(),tC(this,xh,Ihe).call(this))}while(g)}),bl(this,vhe,o=>{qs(this,Zb,void 0),!(o.name==="AbortError"||o.type==="aborted")&&tC(this,xh,Ihe).call(this,yhe(o))}),bl(this,bhe,o=>{typeof o.id=="string"&&qs(this,tN,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:ki(this,Sk)?ki(this,Sk).origin:ki(this,sw).origin,lastEventId:o.id||""});ki(this,kk)&&(!o.event||o.event==="message")&&ki(this,kk).call(this,a),this.dispatchEvent(a)}),bl(this,Ehe,o=>{qs(this,eN,o)}),bl(this,The,()=>{qs(this,Bk,void 0),ki(this,Vd)===this.CONNECTING&&tC(this,xh,Che).call(this)});try{if(e instanceof URL)qs(this,sw,e);else if(typeof e=="string")qs(this,sw,new URL(e,zjt()));else throw new Error("Invalid URL")}catch{throw $jt("An invalid or illegal string was specified")}qs(this,Rk,qY({onEvent:ki(this,bhe),onRetry:ki(this,Ehe)})),qs(this,Vd,this.CONNECTING),qs(this,eN,3e3),qs(this,HY,(n=r?.fetch)!=null?n:globalThis.fetch),qs(this,WY,(i=r?.withCredentials)!=null?i:!1),tC(this,xh,Che).call(this)}get readyState(){return ki(this,Vd)}get url(){return ki(this,sw).href}get withCredentials(){return ki(this,WY)}get onerror(){return ki(this,Dk)}set onerror(e){qs(this,Dk,e)}get onmessage(){return ki(this,kk)}set onmessage(e){qs(this,kk,e)}get onopen(){return ki(this,X6)}set onopen(e){qs(this,X6,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){ki(this,Bk)&&clearTimeout(ki(this,Bk)),ki(this,Vd)!==this.CLOSED&&(ki(this,Zb)&&ki(this,Zb).abort(),qs(this,Vd,this.CLOSED),qs(this,Zb,void 0))}};Vd=new WeakMap,sw=new WeakMap,Sk=new WeakMap,WY=new WeakMap,HY=new WeakMap,eN=new WeakMap,Bk=new WeakMap,tN=new WeakMap,Zb=new WeakMap,Rk=new WeakMap,Dk=new WeakMap,kk=new WeakMap,X6=new WeakMap,xh=new WeakSet,Che=s(function(){qs(this,Vd,this.CONNECTING),qs(this,Zb,new AbortController),ki(this,HY)(ki(this,sw),tC(this,xh,mYe).call(this)).then(ki(this,xhe)).catch(ki(this,vhe))},"connect_fn"),xhe=new WeakMap,vhe=new WeakMap,mYe=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ki(this,tN)?{"Last-Event-ID":ki(this,tN)}:void 0},cache:"no-store",signal:(t=ki(this,Zb))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),bhe=new WeakMap,Ehe=new WeakMap,Z6=s(function(t,e){var r;ki(this,Vd)!==this.CLOSED&&qs(this,Vd,this.CLOSED);let n=new GY("error",{code:e,message:t});(r=ki(this,Dk))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),Ihe=s(function(t,e){var r;if(ki(this,Vd)===this.CLOSED)return;qs(this,Vd,this.CONNECTING);let n=new GY("error",{code:e,message:t});(r=ki(this,Dk))==null||r.call(this,n),this.dispatchEvent(n),qs(this,Bk,setTimeout(ki(this,The),ki(this,eN)))},"scheduleReconnect_fn"),The=new WeakMap,aw.CONNECTING=0,aw.OPEN=1,aw.CLOSED=2;function zjt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(zjt,"getBaseURL");f();f();var _he;_he=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function Yjt(t){return(await _he).getRandomValues(new Uint8Array(t))}s(Yjt,"getRandomValues");async function Kjt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await Yjt(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(Kjt,"random");async function Jjt(t){return await Kjt(t)}s(Jjt,"generateVerifier");async function Xjt(t){let e=await(await _he).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(Xjt,"generateChallenge");async function She(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Jjt(t),r=await Xjt(e);return{code_verifier:e,code_challenge:r}}s(She,"pkceChallenge");f();var gYe=K.object({issuer:K.string(),authorization_endpoint:K.string(),token_endpoint:K.string(),registration_endpoint:K.string().optional(),scopes_supported:K.array(K.string()).optional(),response_types_supported:K.array(K.string()),response_modes_supported:K.array(K.string()).optional(),grant_types_supported:K.array(K.string()).optional(),token_endpoint_auth_methods_supported:K.array(K.string()).optional(),token_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),service_documentation:K.string().optional(),revocation_endpoint:K.string().optional(),revocation_endpoint_auth_methods_supported:K.array(K.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),introspection_endpoint:K.string().optional(),introspection_endpoint_auth_methods_supported:K.array(K.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),code_challenge_methods_supported:K.array(K.string()).optional()}).passthrough(),Rhe=K.object({access_token:K.string(),token_type:K.string(),expires_in:K.number().optional(),scope:K.string().optional(),refresh_token:K.string().optional()}).strip(),tui=K.object({error:K.string(),error_description:K.string().optional(),error_uri:K.string().optional()}),Zjt=K.object({redirect_uris:K.array(K.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:K.string().optional(),grant_types:K.array(K.string()).optional(),response_types:K.array(K.string()).optional(),client_name:K.string().optional(),client_uri:K.string().optional(),logo_uri:K.string().optional(),scope:K.string().optional(),contacts:K.array(K.string()).optional(),tos_uri:K.string().optional(),policy_uri:K.string().optional(),jwks_uri:K.string().optional(),jwks:K.any().optional(),software_id:K.string().optional(),software_version:K.string().optional()}).strip(),eVt=K.object({client_id:K.string(),client_secret:K.string().optional(),client_id_issued_at:K.number().optional(),client_secret_expires_at:K.number().optional()}).strip(),AYe=Zjt.merge(eVt),rui=K.object({error:K.string(),error_description:K.string().optional()}).strip(),nui=K.object({token:K.string(),token_type_hint:K.string().optional()}).strip();var $d=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function eE(t,{serverUrl:e,authorizationCode:r}){let n=await tVt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await oVt(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(r!==void 0){let c=await t.codeVerifier(),u=await nVt(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await iVt(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await rVt(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(eE,"auth");async function tVt(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:$6}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return gYe.parse(await i.json())}}s(tVt,"discoverOAuthMetadata");async function rVt(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await She(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:c}}s(rVt,"startAuthorization");async function nVt(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&c.set("client_secret",r.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return Rhe.parse(await u.json())}s(nVt,"exchangeAuthorization");async function iVt(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return Rhe.parse(await l.json())}s(iVt,"refreshAuthorization");async function oVt(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return AYe.parse(await i.json())}s(oVt,"registerClient");var khe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},jY=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let r;try{r=await eE(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new $d;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new aw(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new khe(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){r(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=Jb.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var VY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new jY(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,r=>{Qo.info(this.ctx,"Tool list changed, refreshing tools..."),uu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,r=>{Qo.info(this.ctx,"Prompts list changed, refreshing tools..."),uu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();f();var aKe=Ve(oKe(),1),rN=Ve(require("node:process"),1),lKe=require("node:stream");f();var zY=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),DVt(r)}clear(){this._buffer=void 0}};function DVt(t){return Jb.parse(JSON.parse(t))}s(DVt,"deserializeMessage");function sKe(t){return JSON.stringify(t)+`
`}s(sKe,"serializeMessage");var PVt=rN.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function NVt(){let t={};for(let e of PVt){let r=rN.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(NVt,"getDefaultEnvironment");var YY=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new zY,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new lKe.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,l,c;this._process=(0,aKe.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:NVt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:rN.default.platform==="win32"&&LVt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=sKe(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function LVt(){return"type"in rN.default}s(LVt,"isElectron");var KY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Pze(),...r.env||{}},r.stderr="pipe",new YY(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{qT(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};f();f();f();var JY=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=qY({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var FVt={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},nN=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},XY=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:FVt}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let r;try{r=await eE(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new $d;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new nN(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new JY).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=Jb.parse(JSON.parse(m.data));i!==void 0&&Y6(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:SY(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){oYe(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>Jb.parse(b)):[Jb.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new nN(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new nN(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var ZY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new XY(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,r=>{Qo.info(this.ctx,"Tool list changed, refreshing tools..."),uu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,r=>{Qo.info(this.ctx,"Prompts list changed, refreshing tools..."),uu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();var eK=class extends kb{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new La;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(nA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var cKe=Ve(Za());var tK=class t extends W0{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new cKe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n);if(!o){Qo.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(ou).getToolById(`${r}.${n}`)||this.registerTool(r,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(n,l);c&&(a._status=c)}),r.push({name:n,status:i.status,tools:o})}else i.status==="error"?r.push({name:n,status:i.status,tools:[],error:i.error}):r.push({name:n,status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Qo.error(this.ctx,a),await NA(this.ctx,{message:a,server:n}),r.push({name:n,status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}async addServer(r){try{await uu(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new VY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new ZY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new KY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(xy,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await uu(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Qo.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Qo.info(this.ctx,l),uu(this.ctx,{message:l,server:r.name});let c={...r,type:"sse"};return await this.addServer(c)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await NA(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get($a).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(yr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i)this.registerTool(n,o)}}registerTool(r,n){let{name:i,description:o,inputSchema:a,_status:l,_nameForModel:c,annotations:u}=n;Qo.debug(this.ctx,"register MCP Tool:",{...n}),l!=="disabled"&&this.ctx.get(ou).registerTool(new eK({serverName:r,name:c,displayName:i,description:o||"",displayDescription:o||"",inputSchema:a,annotations:u},d=>(Qo.debug(this.ctx,"copilot MCP Invoker:",r,i,d),this.callTool(r,i,d))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(ou).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await uu(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(xy),await i.cleanup())}this.MCPServersMap.clear()}};f();var uKe=Ve(Za());var rK=class t extends Jm{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new uKe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(yr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var iK=Ve(Za());var MVt=new iK.ProtocolRequestType("copilot/showPanelMessageRequest"),QVt=new iK.ProtocolNotificationType("copilot/showPanelMessage"),nK=class extends rR{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(yr).connection.sendNotification(QVt,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(yr).connection,i;try{i=await n.sendRequest(MVt,r)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${x6(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var OVt=new _t("fetcher"),UVt="https://default.exp-tas.com/",oK=class extends on{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Lc(i)||`${r}/`.startsWith(UVt))throw i;OVt.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}set proxySettings(r){this.defaultFetcher.proxySettings=r}get proxySettings(){return this.defaultFetcher.proxySettings}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}makeAbortController(){return this.defaultFetcher.makeAbortController()}};var dKe=new _t("fetcher"),sK=class extends on{constructor(r,n=new yk(r),i=new gk(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new oK(r,n,i,()=>{dKe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Fy).once(()=>{this.updateFetcher()}),r.get(K0).onConfigChange(ft.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Jr(r,ft.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Go).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=Jr(this.ctx,ft.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(dKe.debug(this.ctx,n),this.currentFetcher=r)}get name(){return this.currentFetcher.name}set proxySettings(r){this.helixFetcher.proxySettings=r}get proxySettings(){return this.helixFetcher.proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.helixFetcher.rejectUnauthorized=r}get rejectUnauthorized(){return super.rejectUnauthorized}fetch(r,n){return this.currentFetcher.fetch(r,n)}disconnectAll(){return this.currentFetcher.disconnectAll()}makeAbortController(){return this.currentFetcher.makeAbortController()}};f();var aK=class extends $a{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(yr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};f();f();var fKe=Ve(require("crypto")),pKe=require("os");var qVt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function WVt(t){let e=t.replace(/-/g,":").toLowerCase();return!qVt.has(e)}s(WVt,"validateMacAddress");function GVt(){let t=(0,pKe.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(WVt(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(GVt,"getMac");var Uhe;function HVt(){try{let t=GVt();return fKe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(HVt,"getMacMachineId");function mKe(){return Uhe||(Uhe=HVt()||sr()),Uhe}s(mKe,"getMachineId");var jVt=sr()+Date.now(),hKe=new Bs(jVt,mKe());f();f();var iN=Ve(require("node:process"),1),Xhe=require("node:buffer"),Zhe=Ve(require("node:path"),1),NKe=require("node:url"),LKe=Ve(require("node:util"),1),ege=Ve(require("node:child_process"),1),cw=Ve(require("node:fs/promises"),1);f();var jhe=Ve(require("node:process"),1),yKe=Ve(require("node:os"),1),CKe=Ve(require("node:fs"),1);f();var gKe=Ve(require("node:fs"),1);f();var Whe=Ve(require("node:fs"),1);var qhe;function VVt(){try{return Whe.default.statSync("/.dockerenv"),!0}catch{return!1}}s(VVt,"hasDockerEnv");function $Vt(){try{return Whe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s($Vt,"hasDockerCGroup");function Ghe(){return qhe===void 0&&(qhe=VVt()||$Vt()),qhe}s(Ghe,"isDocker");var Hhe,zVt=s(()=>{try{return gKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function Lk(){return Hhe===void 0&&(Hhe=zVt()||Ghe()),Hhe}s(Lk,"isInsideContainer");var AKe=s(()=>{if(jhe.default.platform!=="linux")return!1;if(yKe.default.release().toLowerCase().includes("microsoft"))return!Lk();try{return CKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Lk():!1}catch{return!1}},"isWsl"),Fk=jhe.default.env.__IS_WSL_TEST__?AKe:AKe();f();function lw(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}s(lw,"defineLazyProperty");f();var SKe=require("node:util"),cK=Ve(require("node:process"),1),RKe=require("node:child_process");f();var xKe=require("node:util"),vKe=Ve(require("node:process"),1),bKe=require("node:child_process");var YVt=(0,xKe.promisify)(bKe.execFile);async function Vhe(){if(vKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await YVt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(Vhe,"defaultBrowserId");f();f();var EKe=Ve(require("node:process"),1),IKe=require("node:util"),$he=require("node:child_process");var KVt=(0,IKe.promisify)($he.execFile);async function TKe(t,{humanReadableOutput:e=!0}={}){if(EKe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await KVt("osascript",["-e",t,r]);return n.trim()}s(TKe,"runAppleScript");async function zhe(t){return TKe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(zhe,"bundleName");f();var wKe=require("node:util"),_Ke=require("node:child_process");var JVt=(0,wKe.promisify)(_Ke.execFile),XVt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},lK=class extends Error{static{s(this,"UnknownBrowserError")}};async function Yhe(t=JVt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new lK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=XVt[n];if(!i)throw new lK(`Unknown browser ID: ${n}`);return i}s(Yhe,"defaultBrowser");var ZVt=(0,SKe.promisify)(RKe.execFile),e$t=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Khe(){if(cK.default.platform==="darwin"){let t=await Vhe();return{name:await zhe(t),id:t}}if(cK.default.platform==="linux"){let{stdout:t}=await ZVt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:e$t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(cK.default.platform==="win32")return Yhe();throw new Error("Only macOS, Linux, and Windows are supported")}s(Khe,"defaultBrowser");var t$t=LKe.default.promisify(ege.default.execFile),Jhe=Zhe.default.dirname((0,NKe.fileURLToPath)(importMetaUrlShim)),kKe=Zhe.default.join(Jhe,"xdg-open"),{platform:Mk,arch:BKe}=iN.default,r$t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await cw.default.access(r,cw.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await cw.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),FKe=s(async()=>`${await r$t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function n$t(){let t=await FKe(),r=Xhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await t$t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(n$t,"getWindowsDefaultBrowserFromWsl");var DKe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),uK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return DKe(t.app,l=>uK({...t,app:l}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return DKe(e,l=>uK({...t,app:{name:l,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=Fk?await n$t():await Khe();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&r.push(c[d]),uK({...t,app:{name:Qk[d],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(Mk==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Mk==="win32"||Fk&&!Lk()&&!e){n=Fk?await FKe():`${iN.default.env.SYSTEMROOT||iN.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),Fk||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",r.join(","))),t.target=Xhe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!Jhe||Jhe==="/",c=!1;try{await cw.default.access(kKe,cw.constants.X_OK),c=!0}catch{}n=iN.default.versions.electron??(Mk==="android"||l||!c)?"xdg-open":kKe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}Mk==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=ege.default.spawn(n,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),i$t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return uK({...e,target:t})},"open");function PKe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[BKe]:e}=t;if(!e)throw new Error(`${BKe} is not supported`);return e}s(PKe,"detectArchBinary");function tge({[Mk]:t},{wsl:e}){if(e&&Fk)return PKe(e);if(!t)throw new Error(`${Mk} is not supported`);return PKe(t)}s(tge,"detectPlatformBinary");var Qk={};lw(Qk,"chrome",()=>tge({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));lw(Qk,"firefox",()=>tge({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));lw(Qk,"edge",()=>tge({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));lw(Qk,"browser",()=>"browser");lw(Qk,"browserPrivate",()=>"browserPrivate");var dK=i$t;var fK=class extends mc{constructor(r,n=new rge){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(yr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},rge=class extends mc{static{s(this,"SpawnUrlOpener")}async open(e){await dK(e)}};f();f();var pK=class extends sV{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(lh).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(lh).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(lh).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var mK=class extends nu{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new pK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Go).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function MKe(t){let e=new K0(process.env),r=oMe(e);r.set(K0,e),r.set(Fy,new Fy),r.set(on,new sK(r)),r.set(ra,new ra(r)),Xpe(r,{});let n=YOe();r.set(Ec,n);let i=new O6(r);r.set(Qr,i),r.set(O6,i);let o=new K8(r,n);r.set(K8,o),r.set(kn,new kn(o,i,process.env)),r.set(ZI,new ZI),r.set(Bs,hKe),r.set(fn,new LV),r.set(UT,uze()),r.set(is,new is),r.set(lo,Dze),r.set(g2,new oY(r)),r.set(nu,new mK(r)),r.set(lh,new lh(r)),r.set(Ol,new Ol),r.set(Ba,kU(r,kje)),r.set(tp,new tp(r)),r.set(Tg,new x5),tUe(r),aV(r),CUe(r),aRe(r),r.set(yr,new yr(r,t)),r.set($a,new aK(r)),r.set(rR,new nK(r)),r.set(mc,new fK(r)),r.set(Ki,new CY(r)),r.set(q6,new q6(r));let a=new Vb(r);return r.set(Rr,a),r.set(Vb,a),r.set(Ml,new tR(r,process.env)),r.set(Yc,new Yc(r)),Tze(r),yMe(r),r.set(zu,new zu),r.set(Wb,new Wb),r.set(ph,new ph),r.set(b0,new sY),r.set(BA,new BA),r.set(kg,new _v(r)),r.set(sh,new sh(r)),r.set(Cy,new Cy(r)),r.set(ol,new ol(r)),r.set(bc,new gY(r)),r.set(ab,new yY(r)),r.set(nA,new AY(r)),r.set(ou,new ou(r)),r.set(Dy,new Dy(r)),r.set(ah,new ah(r)),r.set(W0,new tK(r)),r.set(Jm,new rK(r)),r.set(iA,new iA),r}s(MKe,"createLanguageServerContext");f();var nge=require("events"),oN=Ve(require("fs"));var gK=Ve(Za());f();var OKe=Ve(require("fs")),UKe=Ve(require("http")),Ok=Ve(require("path"));var hK=class{constructor(e,r){this.port=e;let n;this.server=UKe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",l=>{QKe(o,JSON.stringify(l))});return;case"/stdout":r.on("write",l=>{QKe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;Ok.basename(__dirname)!=="debug"&&(a=Ok.dirname(__dirname)),n??=OKe.readFileSync(Ok.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function QKe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(QKe,"writeData");var ige=class extends gK.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},oge=class extends gK.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function qKe(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new nge.EventEmitter;let l=new hK(i,n).listen();i===0&&await dK(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=oN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=oN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&oN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new nge.EventEmitter,n.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),n.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return n&&(e=new oge(e,n),r=new ige(r,n)),[e,r]}s(qKe,"wrapTransports");async function jKe(){let t=eSe(process.argv.slice(2)).version(new po().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Np.IPCMessageReader(process),n=new Np.IPCMessageWriter(process)):e.stdio?(r=new Np.StreamMessageReader(process.stdin),n=new Np.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await WKe.mkdtemp(GKe.default.tmpdir()+"/github-copilot-"));let i=(0,Np.createConnection)(Np.ProposedFeatures.all,...await qKe(process.env,r,n)),o=MKe(i);console=rwe(o);let a=o.get(yr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(jKe,"main");HKe.isMainThread?require.main===module&&jKe():ewe()&&twe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
